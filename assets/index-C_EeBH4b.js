(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function bE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hh={exports:{}},Nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function gR(){if(mv)return Nl;mv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,s,l){var u=null;if(l!==void 0&&(u=""+l),s.key!==void 0&&(u=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:t,type:o,key:u,ref:s!==void 0?s:null,props:l}}return Nl.Fragment=e,Nl.jsx=n,Nl.jsxs=n,Nl}var gv;function yR(){return gv||(gv=1,Hh.exports=gR()),Hh.exports}var b=yR(),Yh={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function _R(){if(yv)return Ue;yv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function I(F){return F===null||typeof F!="object"?null:(F=S&&F[S]||F["@@iterator"],typeof F=="function"?F:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,V={};function $(F,te,se){this.props=F,this.context=te,this.refs=V,this.updater=se||M}$.prototype.isReactComponent={},$.prototype.setState=function(F,te){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,te,"setState")},$.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function X(){}X.prototype=$.prototype;function J(F,te,se){this.props=F,this.context=te,this.refs=V,this.updater=se||M}var ne=J.prototype=new X;ne.constructor=J,L(ne,$.prototype),ne.isPureReactComponent=!0;var he=Array.isArray;function W(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function x(F,te,se){var fe=se.ref;return{$$typeof:t,type:F,key:te,ref:fe!==void 0?fe:null,props:se}}function U(F,te){return x(F.type,te,F.props)}function O(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function q(F){var te={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(se){return te[se]})}var P=/\/+/g;function Ce(F,te){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):te.toString(36)}function $e(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(W,W):(F.status="pending",F.then(function(te){F.status==="pending"&&(F.status="fulfilled",F.value=te)},function(te){F.status==="pending"&&(F.status="rejected",F.reason=te)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function ee(F,te,se,fe,we){var Me=typeof F;(Me==="undefined"||Me==="boolean")&&(F=null);var De=!1;if(F===null)De=!0;else switch(Me){case"bigint":case"string":case"number":De=!0;break;case"object":switch(F.$$typeof){case t:case e:De=!0;break;case v:return De=F._init,ee(De(F._payload),te,se,fe,we)}}if(De)return we=we(F),De=fe===""?"."+Ce(F,0):fe,he(we)?(se="",De!=null&&(se=De.replace(P,"$&/")+"/"),ee(we,te,se,"",function(xn){return xn})):we!=null&&(O(we)&&(we=U(we,se+(we.key==null||F&&F.key===we.key?"":(""+we.key).replace(P,"$&/")+"/")+De)),te.push(we)),1;De=0;var gt=fe===""?".":fe+":";if(he(F))for(var dt=0;dt<F.length;dt++)fe=F[dt],Me=gt+Ce(fe,dt),De+=ee(fe,te,se,Me,we);else if(dt=I(F),typeof dt=="function")for(F=dt.call(F),dt=0;!(fe=F.next()).done;)fe=fe.value,Me=gt+Ce(fe,dt++),De+=ee(fe,te,se,Me,we);else if(Me==="object"){if(typeof F.then=="function")return ee($e(F),te,se,fe,we);throw te=String(F),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return De}function de(F,te,se){if(F==null)return F;var fe=[],we=0;return ee(F,fe,"","",function(Me){return te.call(se,Me,we++)}),fe}function ye(F){if(F._status===-1){var te=F._result;te=te(),te.then(function(se){(F._status===0||F._status===-1)&&(F._status=1,F._result=se)},function(se){(F._status===0||F._status===-1)&&(F._status=2,F._result=se)}),F._status===-1&&(F._status=0,F._result=te)}if(F._status===1)return F._result.default;throw F._result}var Oe=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Be={map:de,forEach:function(F,te,se){de(F,function(){te.apply(this,arguments)},se)},count:function(F){var te=0;return de(F,function(){te++}),te},toArray:function(F){return de(F,function(te){return te})||[]},only:function(F){if(!O(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Ue.Activity=E,Ue.Children=Be,Ue.Component=$,Ue.Fragment=n,Ue.Profiler=s,Ue.PureComponent=J,Ue.StrictMode=o,Ue.Suspense=g,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(F){return D.H.useMemoCache(F)}},Ue.cache=function(F){return function(){return F.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(F,te,se){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var fe=L({},F.props),we=F.key;if(te!=null)for(Me in te.key!==void 0&&(we=""+te.key),te)!N.call(te,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&te.ref===void 0||(fe[Me]=te[Me]);var Me=arguments.length-2;if(Me===1)fe.children=se;else if(1<Me){for(var De=Array(Me),gt=0;gt<Me;gt++)De[gt]=arguments[gt+2];fe.children=De}return x(F.type,we,fe)},Ue.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},Ue.createElement=function(F,te,se){var fe,we={},Me=null;if(te!=null)for(fe in te.key!==void 0&&(Me=""+te.key),te)N.call(te,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(we[fe]=te[fe]);var De=arguments.length-2;if(De===1)we.children=se;else if(1<De){for(var gt=Array(De),dt=0;dt<De;dt++)gt[dt]=arguments[dt+2];we.children=gt}if(F&&F.defaultProps)for(fe in De=F.defaultProps,De)we[fe]===void 0&&(we[fe]=De[fe]);return x(F,Me,we)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(F){return{$$typeof:d,render:F}},Ue.isValidElement=O,Ue.lazy=function(F){return{$$typeof:v,_payload:{_status:-1,_result:F},_init:ye}},Ue.memo=function(F,te){return{$$typeof:m,type:F,compare:te===void 0?null:te}},Ue.startTransition=function(F){var te=D.T,se={};D.T=se;try{var fe=F(),we=D.S;we!==null&&we(se,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(W,Oe)}catch(Me){Oe(Me)}finally{te!==null&&se.types!==null&&(te.types=se.types),D.T=te}},Ue.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ue.use=function(F){return D.H.use(F)},Ue.useActionState=function(F,te,se){return D.H.useActionState(F,te,se)},Ue.useCallback=function(F,te){return D.H.useCallback(F,te)},Ue.useContext=function(F){return D.H.useContext(F)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(F,te){return D.H.useDeferredValue(F,te)},Ue.useEffect=function(F,te){return D.H.useEffect(F,te)},Ue.useEffectEvent=function(F){return D.H.useEffectEvent(F)},Ue.useId=function(){return D.H.useId()},Ue.useImperativeHandle=function(F,te,se){return D.H.useImperativeHandle(F,te,se)},Ue.useInsertionEffect=function(F,te){return D.H.useInsertionEffect(F,te)},Ue.useLayoutEffect=function(F,te){return D.H.useLayoutEffect(F,te)},Ue.useMemo=function(F,te){return D.H.useMemo(F,te)},Ue.useOptimistic=function(F,te){return D.H.useOptimistic(F,te)},Ue.useReducer=function(F,te,se){return D.H.useReducer(F,te,se)},Ue.useRef=function(F){return D.H.useRef(F)},Ue.useState=function(F){return D.H.useState(F)},Ue.useSyncExternalStore=function(F,te,se){return D.H.useSyncExternalStore(F,te,se)},Ue.useTransition=function(){return D.H.useTransition()},Ue.version="19.2.4",Ue}var _v;function Qp(){return _v||(_v=1,Yh.exports=_R()),Yh.exports}var Se=Qp();const vR=bE(Se);var $h={exports:{}},Ml={},Jh={exports:{}},Kh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function TR(){return vv||(vv=1,(function(t){function e(ee,de){var ye=ee.length;ee.push(de);e:for(;0<ye;){var Oe=ye-1>>>1,Be=ee[Oe];if(0<s(Be,de))ee[Oe]=de,ee[ye]=Be,ye=Oe;else break e}}function n(ee){return ee.length===0?null:ee[0]}function o(ee){if(ee.length===0)return null;var de=ee[0],ye=ee.pop();if(ye!==de){ee[0]=ye;e:for(var Oe=0,Be=ee.length,F=Be>>>1;Oe<F;){var te=2*(Oe+1)-1,se=ee[te],fe=te+1,we=ee[fe];if(0>s(se,ye))fe<Be&&0>s(we,se)?(ee[Oe]=we,ee[fe]=ye,Oe=fe):(ee[Oe]=se,ee[te]=ye,Oe=te);else if(fe<Be&&0>s(we,ye))ee[Oe]=we,ee[fe]=ye,Oe=fe;else break e}}return de}function s(ee,de){var ye=ee.sortIndex-de.sortIndex;return ye!==0?ye:ee.id-de.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var g=[],m=[],v=1,E=null,S=3,I=!1,M=!1,L=!1,V=!1,$=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function ne(ee){for(var de=n(m);de!==null;){if(de.callback===null)o(m);else if(de.startTime<=ee)o(m),de.sortIndex=de.expirationTime,e(g,de);else break;de=n(m)}}function he(ee){if(L=!1,ne(ee),!M)if(n(g)!==null)M=!0,W||(W=!0,q());else{var de=n(m);de!==null&&$e(he,de.startTime-ee)}}var W=!1,D=-1,N=5,x=-1;function U(){return V?!0:!(t.unstable_now()-x<N)}function O(){if(V=!1,W){var ee=t.unstable_now();x=ee;var de=!0;try{e:{M=!1,L&&(L=!1,X(D),D=-1),I=!0;var ye=S;try{t:{for(ne(ee),E=n(g);E!==null&&!(E.expirationTime>ee&&U());){var Oe=E.callback;if(typeof Oe=="function"){E.callback=null,S=E.priorityLevel;var Be=Oe(E.expirationTime<=ee);if(ee=t.unstable_now(),typeof Be=="function"){E.callback=Be,ne(ee),de=!0;break t}E===n(g)&&o(g),ne(ee)}else o(g);E=n(g)}if(E!==null)de=!0;else{var F=n(m);F!==null&&$e(he,F.startTime-ee),de=!1}}break e}finally{E=null,S=ye,I=!1}de=void 0}}finally{de?q():W=!1}}}var q;if(typeof J=="function")q=function(){J(O)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ce=P.port2;P.port1.onmessage=O,q=function(){Ce.postMessage(null)}}else q=function(){$(O,0)};function $e(ee,de){D=$(function(){ee(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(ee){switch(S){case 1:case 2:case 3:var de=3;break;default:de=S}var ye=S;S=de;try{return ee()}finally{S=ye}},t.unstable_requestPaint=function(){V=!0},t.unstable_runWithPriority=function(ee,de){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ye=S;S=ee;try{return de()}finally{S=ye}},t.unstable_scheduleCallback=function(ee,de,ye){var Oe=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Oe+ye:Oe):ye=Oe,ee){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=ye+Be,ee={id:v++,callback:de,priorityLevel:ee,startTime:ye,expirationTime:Be,sortIndex:-1},ye>Oe?(ee.sortIndex=ye,e(m,ee),n(g)===null&&ee===n(m)&&(L?(X(D),D=-1):L=!0,$e(he,ye-Oe))):(ee.sortIndex=Be,e(g,ee),M||I||(M=!0,W||(W=!0,q()))),ee},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(ee){var de=S;return function(){var ye=S;S=de;try{return ee.apply(this,arguments)}finally{S=ye}}}})(Kh)),Kh}var Tv;function ER(){return Tv||(Tv=1,Jh.exports=TR()),Jh.exports}var Qh={exports:{}},pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function SR(){if(Ev)return pn;Ev=1;var t=Qp();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(g,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:g,containerInfo:m,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,pn.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,v)},pn.flushSync=function(g){var m=u.T,v=o.p;try{if(u.T=null,o.p=2,g)return g()}finally{u.T=m,o.p=v,o.d.f()}},pn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},pn.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},pn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,I=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:I}):v==="script"&&o.d.X(g,{crossOrigin:E,integrity:S,fetchPriority:I,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},pn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},pn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin);o.d.L(g,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},pn.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=d(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},pn.requestFormReset=function(g){o.d.r(g)},pn.unstable_batchedUpdates=function(g,m){return g(m)},pn.useFormState=function(g,m,v){return u.H.useFormState(g,m,v)},pn.useFormStatus=function(){return u.H.useHostTransitionStatus()},pn.version="19.2.4",pn}var Sv;function AR(){if(Sv)return Qh.exports;Sv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qh.exports=SR(),Qh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function CR(){if(Av)return Ml;Av=1;var t=ER(),e=Qp(),n=AR();function o(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(o(188))}function m(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(o(188));return r!==i?null:i}for(var a=i,c=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return g(y),i;if(_===c)return g(y),r;_=_.sibling}throw Error(o(188))}if(a.return!==c.return)a=y,c=_;else{for(var A=!1,R=y.child;R;){if(R===a){A=!0,a=y,c=_;break}if(R===c){A=!0,c=y,a=_;break}R=R.sibling}if(!A){for(R=_.child;R;){if(R===a){A=!0,a=_,c=y;break}if(R===c){A=!0,c=_,a=y;break}R=R.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),J=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var P=Symbol.for("react.client.reference");function Ce(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===P?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case L:return"Fragment";case $:return"Profiler";case V:return"StrictMode";case he:return"Suspense";case W:return"SuspenseList";case x:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case M:return"Portal";case J:return i.displayName||"Context";case X:return(i._context.displayName||"Context")+".Consumer";case ne:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return r=i.displayName||null,r!==null?r:Ce(i.type)||"Memo";case N:r=i._payload,i=i._init;try{return Ce(i(r))}catch{}}return null}var $e=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Oe=[],Be=-1;function F(i){return{current:i}}function te(i){0>Be||(i.current=Oe[Be],Oe[Be]=null,Be--)}function se(i,r){Be++,Oe[Be]=i.current,i.current=r}var fe=F(null),we=F(null),Me=F(null),De=F(null);function gt(i,r){switch(se(Me,r),se(we,i),se(fe,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?O_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=O_(r),i=F_(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}te(fe),se(fe,i)}function dt(){te(fe),te(we),te(Me)}function xn(i){i.memoizedState!==null&&se(De,i);var r=fe.current,a=F_(r,i.type);r!==a&&(se(we,i),se(fe,a))}function Fn(i){we.current===i&&(te(fe),te(we)),De.current===i&&(te(De),Rl._currentValue=ye)}var Bn,_i;function fn(i){if(Bn===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Bn=r&&r[1]||"",_i=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bn+i+_i}var ti=!1;function ni(i,r){if(!i||ti)return"";ti=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Z){var Q=Z}Reflect.construct(i,[],re)}else{try{re.call()}catch(Z){Q=Z}i.call(re.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(re=i())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],R=_[1];if(A&&R){var k=A.split(`
`),Y=R.split(`
`);for(y=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===k.length||y===Y.length)for(c=k.length-1,y=Y.length-1;1<=c&&0<=y&&k[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(k[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||k[c]!==Y[y]){var ie=`
`+k[c].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=c&&0<=y);break}}}finally{ti=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?fn(a):""}function Po(i,r){switch(i.tag){case 26:case 27:case 5:return fn(i.type);case 16:return fn("Lazy");case 13:return i.child!==r&&r!==null?fn("Suspense Fallback"):fn("Suspense");case 19:return fn("SuspenseList");case 0:case 15:return ni(i.type,!1);case 11:return ni(i.type.render,!1);case 1:return ni(i.type,!0);case 31:return fn("Activity");default:return""}}function Vo(i){try{var r="",a=null;do r+=Po(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Di=Object.prototype.hasOwnProperty,vi=t.unstable_scheduleCallback,vn=t.unstable_cancelCallback,K=t.unstable_shouldYield,le=t.unstable_requestPaint,ce=t.unstable_now,me=t.unstable_getCurrentPriorityLevel,Te=t.unstable_ImmediatePriority,be=t.unstable_UserBlockingPriority,Xe=t.unstable_NormalPriority,Mt=t.unstable_LowPriority,Pi=t.unstable_IdlePriority,Ti=t.log,qn=t.unstable_setDisableYieldValue,zn=null,kt=null;function ht(i){if(typeof Ti=="function"&&qn(i),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(zn,i)}catch{}}var en=Math.clz32?Math.clz32:Lr,kr=Math.log,Uo=Math.LN2;function Lr(i){return i>>>=0,i===0?32:31-(kr(i)/Uo|0)|0}var Vi=256,Gn=262144,Hn=4194304;function Nn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Tn(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var R=c&134217727;return R!==0?(c=R&~_,c!==0?y=Nn(c):(A&=R,A!==0?y=Nn(A):a||(a=R&~i,a!==0&&(y=Nn(a))))):(R=c&~_,R!==0?y=Nn(R):A!==0?y=Nn(A):a||(a=c&~i,a!==0&&(y=Nn(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function Ei(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function eo(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(){var i=Hn;return Hn<<=1,(Hn&62914560)===0&&(Hn=4194304),i}function tn(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function dn(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function pt(i,r,a,c,y,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var R=i.entanglements,k=i.expirationTimes,Y=i.hiddenUpdates;for(a=A&~a;0<a;){var ie=31-en(a),re=1<<ie;R[ie]=0,k[ie]=-1;var Q=Y[ie];if(Q!==null)for(Y[ie]=null,ie=0;ie<Q.length;ie++){var Z=Q[ie];Z!==null&&(Z.lane&=-536870913)}a&=~re}c!==0&&Pa(i,c,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~r))}function Pa(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-en(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function ko(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-en(a),y=1<<c;y&r|i[c]&r&&(i[c]|=r),a&=~y}}function Lo(i,r){var a=r&-r;return a=(a&42)!==0?1:Va(a),(a&(i.suspendedLanes|r))!==0?0:a}function Va(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ua(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function to(){var i=de.p;return i!==0?i:(i=window.event,i===void 0?32:lv(i.type))}function cu(i,r){var a=de.p;try{return de.p=i,r()}finally{de.p=a}}var Ui=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Ui,nn="__reactProps$"+Ui,ki="__reactContainer$"+Ui,Oo="__reactEvents$"+Ui,Li="__reactListeners$"+Ui,fu="__reactHandles$"+Ui,ka="__reactResources$"+Ui,no="__reactMarker$"+Ui;function Or(i){delete i[Ct],delete i[nn],delete i[Oo],delete i[Li],delete i[fu]}function io(i){var r=i[Ct];if(r)return r;for(var a=i.parentNode;a;){if(r=a[ki]||a[Ct]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=$_(i);i!==null;){if(a=i[Ct])return a;i=$_(i)}return r}i=a,a=i.parentNode}return null}function oo(i){if(i=i[Ct]||i[ki]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Fr(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(o(33))}function Si(i){var r=i[ka];return r||(r=i[ka]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Dt(i){i[no]=!0}var As=new Set,Fo={};function En(i,r){Oi(i,r),Oi(i+"Capture",r)}function Oi(i,r){for(Fo[i]=r,i=0;i<r.length;i++)As.add(r[i])}var Yf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),La={},Oa={};function du(i){return Di.call(Oa,i)?!0:Di.call(La,i)?!1:Yf.test(i)?Oa[i]=!0:(La[i]=!0,!1)}function Bo(i,r,a){if(du(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function qo(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function oi(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function Sn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function hu(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function $f(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Cs(i){if(!i._valueTracker){var r=hu(i)?"checked":"value";i._valueTracker=$f(i,r,""+i[r])}}function Fa(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=hu(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function Is(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ro=/[\n"\\]/g;function It(i){return i.replace(ro,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function zo(i,r,a,c,y,_,A,R){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),r!=null?A==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Sn(r)):i.value!==""+Sn(r)&&(i.value=""+Sn(r)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),r!=null?Rs(i,A,Sn(r)):a!=null?Rs(i,A,Sn(a)):c!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+Sn(R):i.removeAttribute("name")}function Br(i,r,a,c,y,_,A,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Cs(i);return}a=a!=null?""+Sn(a):"",r=r!=null?""+Sn(r):a,R||r===i.value||(i.value=r),i.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=R?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Cs(i)}function Rs(i,r,a){r==="number"&&Is(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function et(i,r,a,c){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Sn(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function qr(i,r,a){if(r!=null&&(r=""+Sn(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Sn(a):""}function Go(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(o(92));if($e(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=Sn(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),Cs(i)}function ri(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ba(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||Jf.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function pu(i,r,a){if(r!=null&&typeof r!="object")throw Error(o(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&Ba(i,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&Ba(i,_,r[_])}function qa(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fi(i){return Qf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Jt(){}var ws=null;function bs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var so=null,Yn=null;function mu(i){var r=oo(i);if(r&&(i=r.stateNode)){var a=i[nn]||null;e:switch(i=r.stateNode,r.type){case"input":if(zo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+It(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var y=c[nn]||null;if(!y)throw Error(o(90));zo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&Fa(c)}break e;case"textarea":qr(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&et(i,!!a.multiple,r,!1)}}}var za=!1;function gu(i,r,a){if(za)return i(r,a);za=!0;try{var c=i(r);return c}finally{if(za=!1,(so!==null||Yn!==null)&&(dc(),so&&(r=so,i=Yn,Yn=so=null,mu(r),i)))for(r=0;r<i.length;r++)mu(i[r])}}function Mn(i,r){var a=i.stateNode;if(a===null)return null;var c=a[nn]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,r,typeof a));return a}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(Ai)try{var Bi={};Object.defineProperty(Bi,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",Bi,Bi),window.removeEventListener("test",Bi,Bi)}catch{Ga=!1}var $n=null,xs=null,qi=null;function Ho(){if(qi)return qi;var i,r=xs,a=r.length,c,y="value"in $n?$n.value:$n.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&r[a-c]===y[_-c];c++);return qi=y.slice(i,1<c?1-c:void 0)}function zr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Yo(){return!0}function vt(){return!1}function hn(i){function r(a,c,y,_,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(a=i[R],this[R]=a?a(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Yo:vt,this.isPropagationStopped=vt,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yo)},persist:function(){},isPersistent:Yo}),r}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gr=hn(ao),$o=E({},ao,{view:0,detail:0}),yu=hn($o),Jo,Ns,An,Hr=E({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==An&&(An&&i.type==="mousemove"?(Jo=i.screenX-An.screenX,Ns=i.screenY-An.screenY):Ns=Jo=0,An=i),Jo)},movementY:function(i){return"movementY"in i?i.movementY:Ns}}),_u=hn(Hr),Yr=E({},Hr,{dataTransfer:0}),vu=hn(Yr),Ha=E({},$o,{relatedTarget:0}),Ko=hn(Ha),Tu=E({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),Ms=hn(Tu),Xf=E({},ao,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Eu=hn(Xf),$r=E({},ao,{data:0}),Ya=hn($r),Su={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ja={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Au(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Ja[i])?!!r[i]:!1}function Qo(){return Au}var Cu=E({},$o,{key:function(i){if(i.key){var r=Su[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=zr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?$a[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qo,charCode:function(i){return i.type==="keypress"?zr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?zr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Iu=hn(Cu),lo=E({},Hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ka=hn(lo),Ru=E({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qo}),wu=hn(Ru),bu=E({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ds=hn(bu),Cn=E({},Hr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),xu=hn(Cn),Nu=E({},ao,{newState:0,oldState:0}),Xo=hn(Nu),p=[9,13,27,32],T=Ai&&"CompositionEvent"in window,C=null;Ai&&"documentMode"in document&&(C=document.documentMode);var w=Ai&&"TextEvent"in window&&!C,G=Ai&&(!T||C&&8<C&&11>=C),j=" ",pe=!1;function rt(i,r){switch(i){case"keyup":return p.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var qe=!1;function Kt(i,r){switch(i){case"compositionend":return Lt(r);case"keypress":return r.which!==32?null:(pe=!0,j);case"textInput":return i=r.data,i===j&&pe?null:i;default:return null}}function Qt(i,r){if(qe)return i==="compositionend"||!T&&rt(i,r)?(i=Ho(),qi=xs=$n=null,qe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return G&&r.locale!=="ko"?null:r.data;default:return null}}var Wo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Wo[i.type]:r==="textarea"}function Jr(i,r,a,c){so?Yn?Yn.push(c):Yn=[c]:so=c,r=vc(r,"onChange"),0<r.length&&(a=new Gr("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var uo=null,Qa=null;function GC(i){D_(i,0)}function Mu(i){var r=Fr(i);if(Fa(r))return i}function Wm(i,r){if(i==="change")return r}var Zm=!1;if(Ai){var Wf;if(Ai){var Zf="oninput"in document;if(!Zf){var jm=document.createElement("div");jm.setAttribute("oninput","return;"),Zf=typeof jm.oninput=="function"}Wf=Zf}else Wf=!1;Zm=Wf&&(!document.documentMode||9<document.documentMode)}function eg(){uo&&(uo.detachEvent("onpropertychange",tg),Qa=uo=null)}function tg(i){if(i.propertyName==="value"&&Mu(Qa)){var r=[];Jr(r,Qa,i,bs(i)),gu(GC,r)}}function HC(i,r,a){i==="focusin"?(eg(),uo=r,Qa=a,uo.attachEvent("onpropertychange",tg)):i==="focusout"&&eg()}function YC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Mu(Qa)}function $C(i,r){if(i==="click")return Mu(r)}function JC(i,r){if(i==="input"||i==="change")return Mu(r)}function KC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Jn=typeof Object.is=="function"?Object.is:KC;function Xa(i,r){if(Jn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!Di.call(r,y)||!Jn(i[y],r[y]))return!1}return!0}function ng(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ig(i,r){var a=ng(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ng(a)}}function og(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?og(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function rg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Is(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Is(i.document)}return r}function jf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var QC=Ai&&"documentMode"in document&&11>=document.documentMode,Ps=null,ed=null,Wa=null,td=!1;function sg(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;td||Ps==null||Ps!==Is(c)||(c=Ps,"selectionStart"in c&&jf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Wa&&Xa(Wa,c)||(Wa=c,c=vc(ed,"onSelect"),0<c.length&&(r=new Gr("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=Ps)))}function Kr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Vs={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},nd={},ag={};Ai&&(ag=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function Qr(i){if(nd[i])return nd[i];if(!Vs[i])return i;var r=Vs[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in ag)return nd[i]=r[a];return i}var lg=Qr("animationend"),ug=Qr("animationiteration"),cg=Qr("animationstart"),XC=Qr("transitionrun"),WC=Qr("transitionstart"),ZC=Qr("transitioncancel"),fg=Qr("transitionend"),dg=new Map,id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");id.push("scrollEnd");function Ci(i,r){dg.set(i,r),En(r,[i])}var Du=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},si=[],Us=0,od=0;function Pu(){for(var i=Us,r=od=Us=0;r<i;){var a=si[r];si[r++]=null;var c=si[r];si[r++]=null;var y=si[r];si[r++]=null;var _=si[r];if(si[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&hg(a,y,_)}}function Vu(i,r,a,c){si[Us++]=i,si[Us++]=r,si[Us++]=a,si[Us++]=c,od|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function rd(i,r,a,c){return Vu(i,r,a,c),Uu(i)}function Xr(i,r){return Vu(i,null,null,r),Uu(i)}function hg(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-en(a),i=_.hiddenUpdates,c=i[y],c===null?i[y]=[r]:c.push(r),r.lane=a|536870912),_):null}function Uu(i){if(50<vl)throw vl=0,ph=null,Error(o(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var ks={};function jC(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(i,r,a,c){return new jC(i,r,a,c)}function sd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function co(i,r){var a=i.alternate;return a===null?(a=Kn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function pg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ku(i,r,a,c,y,_){var A=0;if(c=i,typeof i=="function")sd(i)&&(A=1);else if(typeof i=="string")A=oR(i,a,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case x:return i=Kn(31,a,r,y),i.elementType=x,i.lanes=_,i;case L:return Wr(a.children,y,_,r);case V:A=8,y|=24;break;case $:return i=Kn(12,a,r,y|2),i.elementType=$,i.lanes=_,i;case he:return i=Kn(13,a,r,y),i.elementType=he,i.lanes=_,i;case W:return i=Kn(19,a,r,y),i.elementType=W,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case J:A=10;break e;case X:A=9;break e;case ne:A=11;break e;case D:A=14;break e;case N:A=16,c=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),c=null}return r=Kn(A,a,r,y),r.elementType=i,r.type=c,r.lanes=_,r}function Wr(i,r,a,c){return i=Kn(7,i,c,r),i.lanes=a,i}function ad(i,r,a){return i=Kn(6,i,null,r),i.lanes=a,i}function mg(i){var r=Kn(18,null,null,0);return r.stateNode=i,r}function ld(i,r,a){return r=Kn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var gg=new WeakMap;function ai(i,r){if(typeof i=="object"&&i!==null){var a=gg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Vo(r)},gg.set(i,r),r)}return{value:i,source:r,stack:Vo(r)}}var Ls=[],Os=0,Lu=null,Za=0,li=[],ui=0,Zo=null,zi=1,Gi="";function fo(i,r){Ls[Os++]=Za,Ls[Os++]=Lu,Lu=i,Za=r}function yg(i,r,a){li[ui++]=zi,li[ui++]=Gi,li[ui++]=Zo,Zo=i;var c=zi;i=Gi;var y=32-en(c)-1;c&=~(1<<y),a+=1;var _=32-en(r)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,zi=1<<32-en(r)+y|a<<y|c,Gi=_+i}else zi=1<<_|a<<y|c,Gi=i}function ud(i){i.return!==null&&(fo(i,1),yg(i,1,0))}function cd(i){for(;i===Lu;)Lu=Ls[--Os],Ls[Os]=null,Za=Ls[--Os],Ls[Os]=null;for(;i===Zo;)Zo=li[--ui],li[ui]=null,Gi=li[--ui],li[ui]=null,zi=li[--ui],li[ui]=null}function _g(i,r){li[ui++]=zi,li[ui++]=Gi,li[ui++]=Zo,zi=r.id,Gi=r.overflow,Zo=i}var on=null,Tt=null,We=!1,jo=null,ci=!1,fd=Error(o(519));function er(i){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ja(ai(r,i)),fd}function vg(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[Ct]=i,r[nn]=c,a){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(a=0;a<El.length;a++)Ye(El[a],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":Ye("invalid",r),Br(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ye("invalid",r);break;case"textarea":Ye("invalid",r),Go(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||k_(r.textContent,a)?(c.popover!=null&&(Ye("beforetoggle",r),Ye("toggle",r)),c.onScroll!=null&&Ye("scroll",r),c.onScrollEnd!=null&&Ye("scrollend",r),c.onClick!=null&&(r.onclick=Jt),r=!0):r=!1,r||er(i,!0)}function Tg(i){for(on=i.return;on;)switch(on.tag){case 5:case 31:case 13:ci=!1;return;case 27:case 3:ci=!0;return;default:on=on.return}}function Fs(i){if(i!==on)return!1;if(!We)return Tg(i),We=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||xh(i.type,i.memoizedProps)),a=!a),a&&Tt&&er(i),Tg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));Tt=Y_(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));Tt=Y_(i)}else r===27?(r=Tt,pr(i.type)?(i=Vh,Vh=null,Tt=i):Tt=r):Tt=on?di(i.stateNode.nextSibling):null;return!0}function Zr(){Tt=on=null,We=!1}function dd(){var i=jo;return i!==null&&(kn===null?kn=i:kn.push.apply(kn,i),jo=null),i}function ja(i){jo===null?jo=[i]:jo.push(i)}var hd=F(null),jr=null,ho=null;function tr(i,r,a){se(hd,r._currentValue),r._currentValue=a}function po(i){i._currentValue=hd.current,te(hd)}function pd(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function md(i,r,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=y;for(var k=0;k<r.length;k++)if(R.context===r[k]){_.lanes|=a,R=_.alternate,R!==null&&(R.lanes|=a),pd(_.return,a,i),c||(A=null);break e}_=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(o(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),pd(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Bs(i,r,a,c){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var R=y.type;Jn(y.pendingProps.value,A.value)||(i!==null?i.push(R):i=[R])}}else if(y===De.current){if(A=y.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Rl):i=[Rl])}y=y.return}i!==null&&md(r,i,a,c),r.flags|=262144}function Ou(i){for(i=i.firstContext;i!==null;){if(!Jn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function es(i){jr=i,ho=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function rn(i){return Eg(jr,i)}function Fu(i,r){return jr===null&&es(i),Eg(i,r)}function Eg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ho===null){if(i===null)throw Error(o(308));ho=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ho=ho.next=r;return a}var eI=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},tI=t.unstable_scheduleCallback,nI=t.unstable_NormalPriority,Ot={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gd(){return{controller:new eI,data:new Map,refCount:0}}function el(i){i.refCount--,i.refCount===0&&tI(nI,function(){i.controller.abort()})}var tl=null,yd=0,qs=0,zs=null;function iI(i,r){if(tl===null){var a=tl=[];yd=0,qs=Th(),zs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return yd++,r.then(Sg,Sg),r}function Sg(){if(--yd===0&&tl!==null){zs!==null&&(zs.status="fulfilled");var i=tl;tl=null,qs=0,zs=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function oI(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Ag=ee.S;ee.S=function(i,r){s_=ce(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&iI(i,r),Ag!==null&&Ag(i,r)};var ts=F(null);function _d(){var i=ts.current;return i!==null?i:mt.pooledCache}function Bu(i,r){r===null?se(ts,ts.current):se(ts,r.pool)}function Cg(){var i=_d();return i===null?null:{parent:Ot._currentValue,pool:i}}var Gs=Error(o(460)),vd=Error(o(474)),qu=Error(o(542)),zu={then:function(){}};function Ig(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Rg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Jt,Jt),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,bg(i),i;default:if(typeof r.status=="string")r.then(Jt,Jt);else{if(i=mt,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,bg(i),i}throw is=r,Gs}}function ns(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(is=a,Gs):a}}var is=null;function wg(){if(is===null)throw Error(o(459));var i=is;return is=null,i}function bg(i){if(i===Gs||i===qu)throw Error(o(483))}var Hs=null,nl=0;function Gu(i){var r=nl;return nl+=1,Hs===null&&(Hs=[]),Rg(Hs,i,r)}function il(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Hu(i,r){throw r.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(r),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function xg(i){function r(z,B){if(i){var H=z.deletions;H===null?(z.deletions=[B],z.flags|=16):H.push(B)}}function a(z,B){if(!i)return null;for(;B!==null;)r(z,B),B=B.sibling;return null}function c(z){for(var B=new Map;z!==null;)z.key!==null?B.set(z.key,z):B.set(z.index,z),z=z.sibling;return B}function y(z,B){return z=co(z,B),z.index=0,z.sibling=null,z}function _(z,B,H){return z.index=H,i?(H=z.alternate,H!==null?(H=H.index,H<B?(z.flags|=67108866,B):H):(z.flags|=67108866,B)):(z.flags|=1048576,B)}function A(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function R(z,B,H,oe){return B===null||B.tag!==6?(B=ad(H,z.mode,oe),B.return=z,B):(B=y(B,H),B.return=z,B)}function k(z,B,H,oe){var Ie=H.type;return Ie===L?ie(z,B,H.props.children,oe,H.key):B!==null&&(B.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===N&&ns(Ie)===B.type)?(B=y(B,H.props),il(B,H),B.return=z,B):(B=ku(H.type,H.key,H.props,null,z.mode,oe),il(B,H),B.return=z,B)}function Y(z,B,H,oe){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=ld(H,z.mode,oe),B.return=z,B):(B=y(B,H.children||[]),B.return=z,B)}function ie(z,B,H,oe,Ie){return B===null||B.tag!==7?(B=Wr(H,z.mode,oe,Ie),B.return=z,B):(B=y(B,H),B.return=z,B)}function re(z,B,H){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=ad(""+B,z.mode,H),B.return=z,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return H=ku(B.type,B.key,B.props,null,z.mode,H),il(H,B),H.return=z,H;case M:return B=ld(B,z.mode,H),B.return=z,B;case N:return B=ns(B),re(z,B,H)}if($e(B)||q(B))return B=Wr(B,z.mode,H,null),B.return=z,B;if(typeof B.then=="function")return re(z,Gu(B),H);if(B.$$typeof===J)return re(z,Fu(z,B),H);Hu(z,B)}return null}function Q(z,B,H,oe){var Ie=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Ie!==null?null:R(z,B,""+H,oe);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case I:return H.key===Ie?k(z,B,H,oe):null;case M:return H.key===Ie?Y(z,B,H,oe):null;case N:return H=ns(H),Q(z,B,H,oe)}if($e(H)||q(H))return Ie!==null?null:ie(z,B,H,oe,null);if(typeof H.then=="function")return Q(z,B,Gu(H),oe);if(H.$$typeof===J)return Q(z,B,Fu(z,H),oe);Hu(z,H)}return null}function Z(z,B,H,oe,Ie){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return z=z.get(H)||null,R(B,z,""+oe,Ie);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case I:return z=z.get(oe.key===null?H:oe.key)||null,k(B,z,oe,Ie);case M:return z=z.get(oe.key===null?H:oe.key)||null,Y(B,z,oe,Ie);case N:return oe=ns(oe),Z(z,B,H,oe,Ie)}if($e(oe)||q(oe))return z=z.get(H)||null,ie(B,z,oe,Ie,null);if(typeof oe.then=="function")return Z(z,B,H,Gu(oe),Ie);if(oe.$$typeof===J)return Z(z,B,H,Fu(B,oe),Ie);Hu(B,oe)}return null}function Ee(z,B,H,oe){for(var Ie=null,tt=null,Ae=B,Fe=B=0,Ke=null;Ae!==null&&Fe<H.length;Fe++){Ae.index>Fe?(Ke=Ae,Ae=null):Ke=Ae.sibling;var nt=Q(z,Ae,H[Fe],oe);if(nt===null){Ae===null&&(Ae=Ke);break}i&&Ae&&nt.alternate===null&&r(z,Ae),B=_(nt,B,Fe),tt===null?Ie=nt:tt.sibling=nt,tt=nt,Ae=Ke}if(Fe===H.length)return a(z,Ae),We&&fo(z,Fe),Ie;if(Ae===null){for(;Fe<H.length;Fe++)Ae=re(z,H[Fe],oe),Ae!==null&&(B=_(Ae,B,Fe),tt===null?Ie=Ae:tt.sibling=Ae,tt=Ae);return We&&fo(z,Fe),Ie}for(Ae=c(Ae);Fe<H.length;Fe++)Ke=Z(Ae,z,Fe,H[Fe],oe),Ke!==null&&(i&&Ke.alternate!==null&&Ae.delete(Ke.key===null?Fe:Ke.key),B=_(Ke,B,Fe),tt===null?Ie=Ke:tt.sibling=Ke,tt=Ke);return i&&Ae.forEach(function(vr){return r(z,vr)}),We&&fo(z,Fe),Ie}function xe(z,B,H,oe){if(H==null)throw Error(o(151));for(var Ie=null,tt=null,Ae=B,Fe=B=0,Ke=null,nt=H.next();Ae!==null&&!nt.done;Fe++,nt=H.next()){Ae.index>Fe?(Ke=Ae,Ae=null):Ke=Ae.sibling;var vr=Q(z,Ae,nt.value,oe);if(vr===null){Ae===null&&(Ae=Ke);break}i&&Ae&&vr.alternate===null&&r(z,Ae),B=_(vr,B,Fe),tt===null?Ie=vr:tt.sibling=vr,tt=vr,Ae=Ke}if(nt.done)return a(z,Ae),We&&fo(z,Fe),Ie;if(Ae===null){for(;!nt.done;Fe++,nt=H.next())nt=re(z,nt.value,oe),nt!==null&&(B=_(nt,B,Fe),tt===null?Ie=nt:tt.sibling=nt,tt=nt);return We&&fo(z,Fe),Ie}for(Ae=c(Ae);!nt.done;Fe++,nt=H.next())nt=Z(Ae,z,Fe,nt.value,oe),nt!==null&&(i&&nt.alternate!==null&&Ae.delete(nt.key===null?Fe:nt.key),B=_(nt,B,Fe),tt===null?Ie=nt:tt.sibling=nt,tt=nt);return i&&Ae.forEach(function(mR){return r(z,mR)}),We&&fo(z,Fe),Ie}function ft(z,B,H,oe){if(typeof H=="object"&&H!==null&&H.type===L&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case I:e:{for(var Ie=H.key;B!==null;){if(B.key===Ie){if(Ie=H.type,Ie===L){if(B.tag===7){a(z,B.sibling),oe=y(B,H.props.children),oe.return=z,z=oe;break e}}else if(B.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===N&&ns(Ie)===B.type){a(z,B.sibling),oe=y(B,H.props),il(oe,H),oe.return=z,z=oe;break e}a(z,B);break}else r(z,B);B=B.sibling}H.type===L?(oe=Wr(H.props.children,z.mode,oe,H.key),oe.return=z,z=oe):(oe=ku(H.type,H.key,H.props,null,z.mode,oe),il(oe,H),oe.return=z,z=oe)}return A(z);case M:e:{for(Ie=H.key;B!==null;){if(B.key===Ie)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){a(z,B.sibling),oe=y(B,H.children||[]),oe.return=z,z=oe;break e}else{a(z,B);break}else r(z,B);B=B.sibling}oe=ld(H,z.mode,oe),oe.return=z,z=oe}return A(z);case N:return H=ns(H),ft(z,B,H,oe)}if($e(H))return Ee(z,B,H,oe);if(q(H)){if(Ie=q(H),typeof Ie!="function")throw Error(o(150));return H=Ie.call(H),xe(z,B,H,oe)}if(typeof H.then=="function")return ft(z,B,Gu(H),oe);if(H.$$typeof===J)return ft(z,B,Fu(z,H),oe);Hu(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,B!==null&&B.tag===6?(a(z,B.sibling),oe=y(B,H),oe.return=z,z=oe):(a(z,B),oe=ad(H,z.mode,oe),oe.return=z,z=oe),A(z)):a(z,B)}return function(z,B,H,oe){try{nl=0;var Ie=ft(z,B,H,oe);return Hs=null,Ie}catch(Ae){if(Ae===Gs||Ae===qu)throw Ae;var tt=Kn(29,Ae,null,z.mode);return tt.lanes=oe,tt.return=z,tt}finally{}}}var os=xg(!0),Ng=xg(!1),nr=!1;function Td(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ed(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ir(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function or(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(ot&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Uu(i),hg(i,null,a),r}return Vu(i,c,r,a),Uu(i)}function ol(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,ko(i,a)}}function Sd(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Ad=!1;function rl(){if(Ad){var i=zs;if(i!==null)throw i}}function sl(i,r,a,c){Ad=!1;var y=i.updateQueue;nr=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var k=R,Y=k.next;k.next=null,A===null?_=Y:A.next=Y,A=k;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,R=ie.lastBaseUpdate,R!==A&&(R===null?ie.firstBaseUpdate=Y:R.next=Y,ie.lastBaseUpdate=k))}if(_!==null){var re=y.baseState;A=0,ie=Y=k=null,R=_;do{var Q=R.lane&-536870913,Z=Q!==R.lane;if(Z?(Je&Q)===Q:(c&Q)===Q){Q!==0&&Q===qs&&(Ad=!0),ie!==null&&(ie=ie.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ee=i,xe=R;Q=r;var ft=a;switch(xe.tag){case 1:if(Ee=xe.payload,typeof Ee=="function"){re=Ee.call(ft,re,Q);break e}re=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=xe.payload,Q=typeof Ee=="function"?Ee.call(ft,re,Q):Ee,Q==null)break e;re=E({},re,Q);break e;case 2:nr=!0}}Q=R.callback,Q!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ie===null?(Y=ie=Z,k=re):ie=ie.next=Z,A|=Q;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;Z=R,R=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);ie===null&&(k=re),y.baseState=k,y.firstBaseUpdate=Y,y.lastBaseUpdate=ie,_===null&&(y.shared.lanes=0),ur|=A,i.lanes=A,i.memoizedState=re}}function Mg(i,r){if(typeof i!="function")throw Error(o(191,i));i.call(r)}function Dg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Mg(a[i],r)}var Ys=F(null),Yu=F(0);function Pg(i,r){i=Ao,se(Yu,i),se(Ys,r),Ao=i|r.baseLanes}function Cd(){se(Yu,Ao),se(Ys,Ys.current)}function Id(){Ao=Yu.current,te(Ys),te(Yu)}var Qn=F(null),fi=null;function rr(i){var r=i.alternate;se(Pt,Pt.current&1),se(Qn,i),fi===null&&(r===null||Ys.current!==null||r.memoizedState!==null)&&(fi=i)}function Rd(i){se(Pt,Pt.current),se(Qn,i),fi===null&&(fi=i)}function Vg(i){i.tag===22?(se(Pt,Pt.current),se(Qn,i),fi===null&&(fi=i)):sr()}function sr(){se(Pt,Pt.current),se(Qn,Qn.current)}function Xn(i){te(Qn),fi===i&&(fi=null),te(Pt)}var Pt=F(0);function $u(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Dh(a)||Ph(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var mo=0,Le=null,ut=null,Ft=null,Ju=!1,$s=!1,rs=!1,Ku=0,al=0,Js=null,rI=0;function Rt(){throw Error(o(321))}function wd(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Jn(i[a],r[a]))return!1;return!0}function bd(i,r,a,c,y,_){return mo=_,Le=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=i===null||i.memoizedState===null?yy:Gd,rs=!1,_=a(c,y),rs=!1,$s&&(_=kg(r,a,c,y)),Ug(i),_}function Ug(i){ee.H=cl;var r=ut!==null&&ut.next!==null;if(mo=0,Ft=ut=Le=null,Ju=!1,al=0,Js=null,r)throw Error(o(300));i===null||Bt||(i=i.dependencies,i!==null&&Ou(i)&&(Bt=!0))}function kg(i,r,a,c){Le=i;var y=0;do{if($s&&(Js=null),al=0,$s=!1,25<=y)throw Error(o(301));if(y+=1,Ft=ut=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ee.H=_y,_=r(a,c)}while($s);return _}function sI(){var i=ee.H,r=i.useState()[0];return r=typeof r.then=="function"?ll(r):r,i=i.useState()[0],(ut!==null?ut.memoizedState:null)!==i&&(Le.flags|=1024),r}function xd(){var i=Ku!==0;return Ku=0,i}function Nd(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function Md(i){if(Ju){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ju=!1}mo=0,Ft=ut=Le=null,$s=!1,al=Ku=0,Js=null}function In(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?Le.memoizedState=Ft=i:Ft=Ft.next=i,Ft}function Vt(){if(ut===null){var i=Le.alternate;i=i!==null?i.memoizedState:null}else i=ut.next;var r=Ft===null?Le.memoizedState:Ft.next;if(r!==null)Ft=r,ut=i;else{if(i===null)throw Le.alternate===null?Error(o(467)):Error(o(310));ut=i,i={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Ft===null?Le.memoizedState=Ft=i:Ft=Ft.next=i}return Ft}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(i){var r=al;return al+=1,Js===null&&(Js=[]),i=Rg(Js,i,r),r=Le,(Ft===null?r.memoizedState:Ft.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?yy:Gd),i}function Xu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ll(i);if(i.$$typeof===J)return rn(i)}throw Error(o(438,String(i)))}function Dd(i){var r=null,a=Le.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Le.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Qu(),Le.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=U;return r.index++,a}function go(i,r){return typeof r=="function"?r(i):r}function Wu(i){var r=Vt();return Pd(r,ut,i)}function Pd(i,r,a){var c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var y=i.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,c.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var R=A=null,k=null,Y=r,ie=!1;do{var re=Y.lane&-536870913;if(re!==Y.lane?(Je&re)===re:(mo&re)===re){var Q=Y.revertLane;if(Q===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),re===qs&&(ie=!0);else if((mo&Q)===Q){Y=Y.next,Q===qs&&(ie=!0);continue}else re={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(R=k=re,A=_):k=k.next=re,Le.lanes|=Q,ur|=Q;re=Y.action,rs&&a(_,re),_=Y.hasEagerState?Y.eagerState:a(_,re)}else Q={lane:re,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(R=k=Q,A=_):k=k.next=Q,Le.lanes|=re,ur|=re;Y=Y.next}while(Y!==null&&Y!==r);if(k===null?A=_:k.next=R,!Jn(_,i.memoizedState)&&(Bt=!0,ie&&(a=zs,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=k,c.lastRenderedState=_}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Vd(i){var r=Vt(),a=r.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do _=i(_,A.action),A=A.next;while(A!==y);Jn(_,r.memoizedState)||(Bt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,c]}function Lg(i,r,a){var c=Le,y=Vt(),_=We;if(_){if(a===void 0)throw Error(o(407));a=a()}else a=r();var A=!Jn((ut||y).memoizedState,a);if(A&&(y.memoizedState=a,Bt=!0),y=y.queue,Ld(Bg.bind(null,c,y,i),[i]),y.getSnapshot!==r||A||Ft!==null&&Ft.memoizedState.tag&1){if(c.flags|=2048,Ks(9,{destroy:void 0},Fg.bind(null,c,y,a,r),null),mt===null)throw Error(o(349));_||(mo&127)!==0||Og(c,r,a)}return a}function Og(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Le.updateQueue,r===null?(r=Qu(),Le.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function Fg(i,r,a,c){r.value=a,r.getSnapshot=c,qg(r)&&zg(i)}function Bg(i,r,a){return a(function(){qg(r)&&zg(i)})}function qg(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Jn(i,a)}catch{return!0}}function zg(i){var r=Xr(i,2);r!==null&&Ln(r,i,2)}function Ud(i){var r=In();if(typeof i=="function"){var a=i;if(i=a(),rs){ht(!0);try{a()}finally{ht(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:i},r}function Gg(i,r,a,c){return i.baseState=a,Pd(i,ut,typeof c=="function"?c:go)}function aI(i,r,a,c,y){if(ec(i))throw Error(o(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};ee.T!==null?a(!0):_.isTransition=!1,c(_),a=r.pending,a===null?(_.next=r.pending=_,Hg(r,_)):(_.next=a.next,r.pending=a.next=_)}}function Hg(i,r){var a=r.action,c=r.payload,y=i.state;if(r.isTransition){var _=ee.T,A={};ee.T=A;try{var R=a(y,c),k=ee.S;k!==null&&k(A,R),Yg(i,r,R)}catch(Y){kd(i,r,Y)}finally{_!==null&&A.types!==null&&(_.types=A.types),ee.T=_}}else try{_=a(y,c),Yg(i,r,_)}catch(Y){kd(i,r,Y)}}function Yg(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){$g(i,r,c)},function(c){return kd(i,r,c)}):$g(i,r,a)}function $g(i,r,a){r.status="fulfilled",r.value=a,Jg(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Hg(i,a)))}function kd(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,Jg(r),r=r.next;while(r!==c)}i.action=null}function Jg(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Kg(i,r){return r}function Qg(i,r){if(We){var a=mt.formState;if(a!==null){e:{var c=Le;if(We){if(Tt){t:{for(var y=Tt,_=ci;y.nodeType!==8;){if(!_){y=null;break t}if(y=di(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Tt=di(y.nextSibling),c=y.data==="F!";break e}}er(c)}c=!1}c&&(r=a[0])}}return a=In(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kg,lastRenderedState:r},a.queue=c,a=py.bind(null,Le,c),c.dispatch=a,c=Ud(!1),_=zd.bind(null,Le,!1,c.queue),c=In(),y={state:r,dispatch:null,action:i,pending:null},c.queue=y,a=aI.bind(null,Le,y,_,a),y.dispatch=a,c.memoizedState=i,[r,a,!1]}function Xg(i){var r=Vt();return Wg(r,ut,i)}function Wg(i,r,a){if(r=Pd(i,r,Kg)[0],i=Wu(go)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=ll(r)}catch(A){throw A===Gs?qu:A}else c=r;r=Vt();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Le.flags|=2048,Ks(9,{destroy:void 0},lI.bind(null,y,a),null)),[c,_,i]}function lI(i,r){i.action=r}function Zg(i){var r=Vt(),a=ut;if(a!==null)return Wg(r,a,i);Vt(),r=r.memoizedState,a=Vt();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function Ks(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=Le.updateQueue,r===null&&(r=Qu(),Le.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function jg(){return Vt().memoizedState}function Zu(i,r,a,c){var y=In();Le.flags|=i,y.memoizedState=Ks(1|r,{destroy:void 0},a,c===void 0?null:c)}function ju(i,r,a,c){var y=Vt();c=c===void 0?null:c;var _=y.memoizedState.inst;ut!==null&&c!==null&&wd(c,ut.memoizedState.deps)?y.memoizedState=Ks(r,_,a,c):(Le.flags|=i,y.memoizedState=Ks(1|r,_,a,c))}function ey(i,r){Zu(8390656,8,i,r)}function Ld(i,r){ju(2048,8,i,r)}function uI(i){Le.flags|=4;var r=Le.updateQueue;if(r===null)r=Qu(),Le.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function ty(i){var r=Vt().memoizedState;return uI({ref:r,nextImpl:i}),function(){if((ot&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function ny(i,r){return ju(4,2,i,r)}function iy(i,r){return ju(4,4,i,r)}function oy(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function ry(i,r,a){a=a!=null?a.concat([i]):null,ju(4,4,oy.bind(null,r,i),a)}function Od(){}function sy(i,r){var a=Vt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&wd(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function ay(i,r){var a=Vt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&wd(r,c[1]))return c[0];if(c=i(),rs){ht(!0);try{i()}finally{ht(!1)}}return a.memoizedState=[c,r],c}function Fd(i,r,a){return a===void 0||(mo&1073741824)!==0&&(Je&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=l_(),Le.lanes|=i,ur|=i,a)}function ly(i,r,a,c){return Jn(a,r)?a:Ys.current!==null?(i=Fd(i,a,c),Jn(i,r)||(Bt=!0),i):(mo&42)===0||(mo&1073741824)!==0&&(Je&261930)===0?(Bt=!0,i.memoizedState=a):(i=l_(),Le.lanes|=i,ur|=i,r)}function uy(i,r,a,c,y){var _=de.p;de.p=_!==0&&8>_?_:8;var A=ee.T,R={};ee.T=R,zd(i,!1,r,a);try{var k=y(),Y=ee.S;if(Y!==null&&Y(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ie=oI(k,c);ul(i,r,ie,jn(i))}else ul(i,r,c,jn(i))}catch(re){ul(i,r,{then:function(){},status:"rejected",reason:re},jn())}finally{de.p=_,A!==null&&R.types!==null&&(A.types=R.types),ee.T=A}}function cI(){}function Bd(i,r,a,c){if(i.tag!==5)throw Error(o(476));var y=cy(i).queue;uy(i,y,r,ye,a===null?cI:function(){return fy(i),a(c)})}function cy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:ye},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function fy(i){var r=cy(i);r.next===null&&(r=i.alternate.memoizedState),ul(i,r.next.queue,{},jn())}function qd(){return rn(Rl)}function dy(){return Vt().memoizedState}function hy(){return Vt().memoizedState}function fI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=jn();i=ir(a);var c=or(r,i,a);c!==null&&(Ln(c,r,a),ol(c,r,a)),r={cache:gd()},i.payload=r;return}r=r.return}}function dI(i,r,a){var c=jn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ec(i)?my(r,a):(a=rd(i,r,a,c),a!==null&&(Ln(a,i,c),gy(a,r,c)))}function py(i,r,a){var c=jn();ul(i,r,a,c)}function ul(i,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ec(i))my(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,R=_(A,a);if(y.hasEagerState=!0,y.eagerState=R,Jn(R,A))return Vu(i,r,y,0),mt===null&&Pu(),!1}catch{}finally{}if(a=rd(i,r,y,c),a!==null)return Ln(a,i,c),gy(a,r,c),!0}return!1}function zd(i,r,a,c){if(c={lane:2,revertLane:Th(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ec(i)){if(r)throw Error(o(479))}else r=rd(i,a,c,2),r!==null&&Ln(r,i,2)}function ec(i){var r=i.alternate;return i===Le||r!==null&&r===Le}function my(i,r){$s=Ju=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function gy(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,ko(i,a)}}var cl={readContext:rn,use:Xu,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};cl.useEffectEvent=Rt;var yy={readContext:rn,use:Xu,useCallback:function(i,r){return In().memoizedState=[i,r===void 0?null:r],i},useContext:rn,useEffect:ey,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,Zu(4194308,4,oy.bind(null,r,i),a)},useLayoutEffect:function(i,r){return Zu(4194308,4,i,r)},useInsertionEffect:function(i,r){Zu(4,2,i,r)},useMemo:function(i,r){var a=In();r=r===void 0?null:r;var c=i();if(rs){ht(!0);try{i()}finally{ht(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=In();if(a!==void 0){var y=a(r);if(rs){ht(!0);try{a(r)}finally{ht(!1)}}}else y=r;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=dI.bind(null,Le,i),[c.memoizedState,i]},useRef:function(i){var r=In();return i={current:i},r.memoizedState=i},useState:function(i){i=Ud(i);var r=i.queue,a=py.bind(null,Le,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:Od,useDeferredValue:function(i,r){var a=In();return Fd(a,i,r)},useTransition:function(){var i=Ud(!1);return i=uy.bind(null,Le,i.queue,!0,!1),In().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=Le,y=In();if(We){if(a===void 0)throw Error(o(407));a=a()}else{if(a=r(),mt===null)throw Error(o(349));(Je&127)!==0||Og(c,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,ey(Bg.bind(null,c,_,i),[i]),c.flags|=2048,Ks(9,{destroy:void 0},Fg.bind(null,c,_,a,r),null),a},useId:function(){var i=In(),r=mt.identifierPrefix;if(We){var a=Gi,c=zi;a=(c&~(1<<32-en(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Ku++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=rI++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:qd,useFormState:Qg,useActionState:Qg,useOptimistic:function(i){var r=In();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=zd.bind(null,Le,!0,a),a.dispatch=r,[i,r]},useMemoCache:Dd,useCacheRefresh:function(){return In().memoizedState=fI.bind(null,Le)},useEffectEvent:function(i){var r=In(),a={impl:i};return r.memoizedState=a,function(){if((ot&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Gd={readContext:rn,use:Xu,useCallback:sy,useContext:rn,useEffect:Ld,useImperativeHandle:ry,useInsertionEffect:ny,useLayoutEffect:iy,useMemo:ay,useReducer:Wu,useRef:jg,useState:function(){return Wu(go)},useDebugValue:Od,useDeferredValue:function(i,r){var a=Vt();return ly(a,ut.memoizedState,i,r)},useTransition:function(){var i=Wu(go)[0],r=Vt().memoizedState;return[typeof i=="boolean"?i:ll(i),r]},useSyncExternalStore:Lg,useId:dy,useHostTransitionStatus:qd,useFormState:Xg,useActionState:Xg,useOptimistic:function(i,r){var a=Vt();return Gg(a,ut,i,r)},useMemoCache:Dd,useCacheRefresh:hy};Gd.useEffectEvent=ty;var _y={readContext:rn,use:Xu,useCallback:sy,useContext:rn,useEffect:Ld,useImperativeHandle:ry,useInsertionEffect:ny,useLayoutEffect:iy,useMemo:ay,useReducer:Vd,useRef:jg,useState:function(){return Vd(go)},useDebugValue:Od,useDeferredValue:function(i,r){var a=Vt();return ut===null?Fd(a,i,r):ly(a,ut.memoizedState,i,r)},useTransition:function(){var i=Vd(go)[0],r=Vt().memoizedState;return[typeof i=="boolean"?i:ll(i),r]},useSyncExternalStore:Lg,useId:dy,useHostTransitionStatus:qd,useFormState:Zg,useActionState:Zg,useOptimistic:function(i,r){var a=Vt();return ut!==null?Gg(a,ut,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Dd,useCacheRefresh:hy};_y.useEffectEvent=ty;function Hd(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Yd={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=jn(),y=ir(c);y.payload=r,a!=null&&(y.callback=a),r=or(i,y,c),r!==null&&(Ln(r,i,c),ol(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=jn(),y=ir(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=or(i,y,c),r!==null&&(Ln(r,i,c),ol(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=jn(),c=ir(a);c.tag=2,r!=null&&(c.callback=r),r=or(i,c,a),r!==null&&(Ln(r,i,a),ol(r,i,a))}};function vy(i,r,a,c,y,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!Xa(a,c)||!Xa(y,_):!0}function Ty(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&Yd.enqueueReplaceState(r,r.state,null)}function ss(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Ey(i){Du(i)}function Sy(i){console.error(i)}function Ay(i){Du(i)}function tc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Cy(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function $d(i,r,a){return a=ir(a),a.tag=3,a.payload={element:null},a.callback=function(){tc(i,r)},a}function Iy(i){return i=ir(i),i.tag=3,i}function Ry(i,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;i.payload=function(){return y(_)},i.callback=function(){Cy(r,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Cy(r,a,c),typeof y!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function hI(i,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Bs(r,a,y,!0),a=Qn.current,a!==null){switch(a.tag){case 31:case 13:return fi===null?hc():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===zu?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),yh(i,c,y)),!1;case 22:return a.flags|=65536,c===zu?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),yh(i,c,y)),!1}throw Error(o(435,a.tag))}return yh(i,c,y),hc(),!1}if(We)return r=Qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==fd&&(i=Error(o(422),{cause:c}),ja(ai(i,a)))):(c!==fd&&(r=Error(o(423),{cause:c}),ja(ai(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=ai(c,a),y=$d(i.stateNode,c,y),Sd(i,y),wt!==4&&(wt=2)),!1;var _=Error(o(520),{cause:c});if(_=ai(_,a),_l===null?_l=[_]:_l.push(_),wt!==4&&(wt=2),r===null)return!0;c=ai(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=$d(a.stateNode,c,i),Sd(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(cr===null||!cr.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Iy(y),Ry(y,i,a,c),Sd(a,y),!1}a=a.return}while(a!==null);return!1}var Jd=Error(o(461)),Bt=!1;function sn(i,r,a,c){r.child=i===null?Ng(r,null,a,c):os(r,i.child,a,c)}function wy(i,r,a,c,y){a=a.render;var _=r.ref;if("ref"in c){var A={};for(var R in c)R!=="ref"&&(A[R]=c[R])}else A=c;return es(r),c=bd(i,r,a,A,_,y),R=xd(),i!==null&&!Bt?(Nd(i,r,y),yo(i,r,y)):(We&&R&&ud(r),r.flags|=1,sn(i,r,c,y),r.child)}function by(i,r,a,c,y){if(i===null){var _=a.type;return typeof _=="function"&&!sd(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,xy(i,r,_,c,y)):(i=ku(a.type,null,c,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!th(i,y)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:Xa,a(A,c)&&i.ref===r.ref)return yo(i,r,y)}return r.flags|=1,i=co(_,c),i.ref=r.ref,i.return=r,r.child=i}function xy(i,r,a,c,y){if(i!==null){var _=i.memoizedProps;if(Xa(_,c)&&i.ref===r.ref)if(Bt=!1,r.pendingProps=c=_,th(i,y))(i.flags&131072)!==0&&(Bt=!0);else return r.lanes=i.lanes,yo(i,r,y)}return Kd(i,r,a,c,y)}function Ny(i,r,a,c){var y=c.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(c=r.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return My(i,r,_,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bu(r,_!==null?_.cachePool:null),_!==null?Pg(r,_):Cd(),Vg(r);else return c=r.lanes=536870912,My(i,r,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(Bu(r,_.cachePool),Pg(r,_),sr(),r.memoizedState=null):(i!==null&&Bu(r,null),Cd(),sr());return sn(i,r,y,a),r.child}function fl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function My(i,r,a,c,y){var _=_d();return _=_===null?null:{parent:Ot._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&Bu(r,null),Cd(),Vg(r),i!==null&&Bs(i,r,c,!0),r.childLanes=y,null}function nc(i,r){return r=oc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Dy(i,r,a){return os(r,i.child,null,a),i=nc(r,r.pendingProps),i.flags|=2,Xn(r),r.memoizedState=null,i}function pI(i,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(We){if(c.mode==="hidden")return i=nc(r,c),r.lanes=536870912,fl(null,i);if(Rd(r),(i=Tt)?(i=H_(i,ci),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Zo!==null?{id:zi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=mg(i),a.return=r,r.child=a,on=r,Tt=null)):i=null,i===null)throw er(r);return r.lanes=536870912,null}return nc(r,c)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(Rd(r),y)if(r.flags&256)r.flags&=-257,r=Dy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(o(558));else if(Bt||Bs(i,r,a,!1),y=(a&i.childLanes)!==0,Bt||y){if(c=mt,c!==null&&(A=Lo(c,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Xr(i,A),Ln(c,i,A),Jd;hc(),r=Dy(i,r,a)}else i=_.treeContext,Tt=di(A.nextSibling),on=r,We=!0,jo=null,ci=!1,i!==null&&_g(r,i),r=nc(r,c),r.flags|=4096;return r}return i=co(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function ic(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function Kd(i,r,a,c,y){return es(r),a=bd(i,r,a,c,void 0,y),c=xd(),i!==null&&!Bt?(Nd(i,r,y),yo(i,r,y)):(We&&c&&ud(r),r.flags|=1,sn(i,r,a,y),r.child)}function Py(i,r,a,c,y,_){return es(r),r.updateQueue=null,a=kg(r,c,a,y),Ug(i),c=xd(),i!==null&&!Bt?(Nd(i,r,_),yo(i,r,_)):(We&&c&&ud(r),r.flags|=1,sn(i,r,a,_),r.child)}function Vy(i,r,a,c,y){if(es(r),r.stateNode===null){var _=ks,A=a.contextType;typeof A=="object"&&A!==null&&(_=rn(A)),_=new a(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Yd,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},Td(r),A=a.contextType,_.context=typeof A=="object"&&A!==null?rn(A):ks,_.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Hd(r,a,A,c),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Yd.enqueueReplaceState(_,_.state,null),sl(r,c,_,y),rl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){_=r.stateNode;var R=r.memoizedProps,k=ss(a,R);_.props=k;var Y=_.context,ie=a.contextType;A=ks,typeof ie=="object"&&ie!==null&&(A=rn(ie));var re=a.getDerivedStateFromProps;ie=typeof re=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,ie||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||Y!==A)&&Ty(r,_,c,A),nr=!1;var Q=r.memoizedState;_.state=Q,sl(r,c,_,y),rl(),Y=r.memoizedState,R||Q!==Y||nr?(typeof re=="function"&&(Hd(r,a,re,c),Y=r.memoizedState),(k=nr||vy(r,a,k,c,Q,Y,A))?(ie||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Y),_.props=c,_.state=Y,_.context=A,c=k):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Ed(i,r),A=r.memoizedProps,ie=ss(a,A),_.props=ie,re=r.pendingProps,Q=_.context,Y=a.contextType,k=ks,typeof Y=="object"&&Y!==null&&(k=rn(Y)),R=a.getDerivedStateFromProps,(Y=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==re||Q!==k)&&Ty(r,_,c,k),nr=!1,Q=r.memoizedState,_.state=Q,sl(r,c,_,y),rl();var Z=r.memoizedState;A!==re||Q!==Z||nr||i!==null&&i.dependencies!==null&&Ou(i.dependencies)?(typeof R=="function"&&(Hd(r,a,R,c),Z=r.memoizedState),(ie=nr||vy(r,a,ie,c,Q,Z,k)||i!==null&&i.dependencies!==null&&Ou(i.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Z,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Z,k)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Z),_.props=c,_.state=Z,_.context=k,c=ie):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),c=!1)}return _=c,ic(i,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&c?(r.child=os(r,i.child,null,y),r.child=os(r,null,a,y)):sn(i,r,a,y),r.memoizedState=_.state,i=r.child):i=yo(i,r,y),i}function Uy(i,r,a,c){return Zr(),r.flags|=256,sn(i,r,a,c),r.child}var Qd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xd(i){return{baseLanes:i,cachePool:Cg()}}function Wd(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Zn),i}function ky(i,r,a){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Pt.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,i===null){if(We){if(y?rr(r):sr(),(i=Tt)?(i=H_(i,ci),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Zo!==null?{id:zi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=mg(i),a.return=r,r.child=a,on=r,Tt=null)):i=null,i===null)throw er(r);return Ph(i)?r.lanes=32:r.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(sr(),y=r.mode,R=oc({mode:"hidden",children:R},y),c=Wr(c,y,a,null),R.return=r,c.return=r,R.sibling=c,r.child=R,c=r.child,c.memoizedState=Xd(a),c.childLanes=Wd(i,A,a),r.memoizedState=Qd,fl(null,c)):(rr(r),Zd(r,R))}var k=i.memoizedState;if(k!==null&&(R=k.dehydrated,R!==null)){if(_)r.flags&256?(rr(r),r.flags&=-257,r=jd(i,r,a)):r.memoizedState!==null?(sr(),r.child=i.child,r.flags|=128,r=null):(sr(),R=c.fallback,y=r.mode,c=oc({mode:"visible",children:c.children},y),R=Wr(R,y,a,null),R.flags|=2,c.return=r,R.return=r,c.sibling=R,r.child=c,os(r,i.child,null,a),c=r.child,c.memoizedState=Xd(a),c.childLanes=Wd(i,A,a),r.memoizedState=Qd,r=fl(null,c));else if(rr(r),Ph(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var Y=A.dgst;A=Y,c=Error(o(419)),c.stack="",c.digest=A,ja({value:c,source:null,stack:null}),r=jd(i,r,a)}else if(Bt||Bs(i,r,a,!1),A=(a&i.childLanes)!==0,Bt||A){if(A=mt,A!==null&&(c=Lo(A,a),c!==0&&c!==k.retryLane))throw k.retryLane=c,Xr(i,c),Ln(A,i,c),Jd;Dh(R)||hc(),r=jd(i,r,a)}else Dh(R)?(r.flags|=192,r.child=i.child,r=null):(i=k.treeContext,Tt=di(R.nextSibling),on=r,We=!0,jo=null,ci=!1,i!==null&&_g(r,i),r=Zd(r,c.children),r.flags|=4096);return r}return y?(sr(),R=c.fallback,y=r.mode,k=i.child,Y=k.sibling,c=co(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,Y!==null?R=co(Y,R):(R=Wr(R,y,a,null),R.flags|=2),R.return=r,c.return=r,c.sibling=R,r.child=c,fl(null,c),c=r.child,R=i.child.memoizedState,R===null?R=Xd(a):(y=R.cachePool,y!==null?(k=Ot._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=Cg(),R={baseLanes:R.baseLanes|a,cachePool:y}),c.memoizedState=R,c.childLanes=Wd(i,A,a),r.memoizedState=Qd,fl(i.child,c)):(rr(r),a=i.child,i=a.sibling,a=co(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(A=r.deletions,A===null?(r.deletions=[i],r.flags|=16):A.push(i)),r.child=a,r.memoizedState=null,a)}function Zd(i,r){return r=oc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function oc(i,r){return i=Kn(22,i,null,r),i.lanes=0,i}function jd(i,r,a){return os(r,i.child,null,a),i=Zd(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Ly(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),pd(i.return,r,a)}function eh(i,r,a,c,y,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=_)}function Oy(i,r,a){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=Pt.current,R=(A&2)!==0;if(R?(A=A&1|2,r.flags|=128):A&=1,se(Pt,A),sn(i,r,c,a),c=We?Za:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ly(i,a,r);else if(i.tag===19)Ly(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&$u(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),eh(r,!1,y,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&$u(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}eh(r,!0,a,null,_,c);break;case"together":eh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function yo(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),ur|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Bs(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(o(153));if(r.child!==null){for(i=r.child,a=co(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=co(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function th(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Ou(i)))}function mI(i,r,a){switch(r.tag){case 3:gt(r,r.stateNode.containerInfo),tr(r,Ot,i.memoizedState.cache),Zr();break;case 27:case 5:xn(r);break;case 4:gt(r,r.stateNode.containerInfo);break;case 10:tr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Rd(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(rr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?ky(i,r,a):(rr(r),i=yo(i,r,a),i!==null?i.sibling:null);rr(r);break;case 19:var y=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Bs(i,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return Oy(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),se(Pt,Pt.current),c)break;return null;case 22:return r.lanes=0,Ny(i,r,a,r.pendingProps);case 24:tr(r,Ot,i.memoizedState.cache)}return yo(i,r,a)}function Fy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Bt=!0;else{if(!th(i,a)&&(r.flags&128)===0)return Bt=!1,mI(i,r,a);Bt=(i.flags&131072)!==0}else Bt=!1,We&&(r.flags&1048576)!==0&&yg(r,Za,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=ns(r.elementType),r.type=i,typeof i=="function")sd(i)?(c=ss(i,c),r.tag=1,r=Vy(null,r,i,c,a)):(r.tag=0,r=Kd(null,r,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===ne){r.tag=11,r=wy(null,r,i,c,a);break e}else if(y===D){r.tag=14,r=by(null,r,i,c,a);break e}}throw r=Ce(i)||i,Error(o(306,r,""))}}return r;case 0:return Kd(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=ss(c,r.pendingProps),Vy(i,r,c,y,a);case 3:e:{if(gt(r,r.stateNode.containerInfo),i===null)throw Error(o(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,Ed(i,r),sl(r,c,null,a);var A=r.memoizedState;if(c=A.cache,tr(r,Ot,c),c!==_.cache&&md(r,[Ot],a,!0),rl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=Uy(i,r,c,a);break e}else if(c!==y){y=ai(Error(o(424)),r),ja(y),r=Uy(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Tt=di(i.firstChild),on=r,We=!0,jo=null,ci=!0,a=Ng(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Zr(),c===y){r=yo(i,r,a);break e}sn(i,r,c,a)}r=r.child}return r;case 26:return ic(i,r),i===null?(a=X_(r.type,null,r.pendingProps,null))?r.memoizedState=a:We||(a=r.type,i=r.pendingProps,c=Tc(Me.current).createElement(a),c[Ct]=r,c[nn]=i,an(c,a,i),Dt(c),r.stateNode=c):r.memoizedState=X_(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return xn(r),i===null&&We&&(c=r.stateNode=J_(r.type,r.pendingProps,Me.current),on=r,ci=!0,y=Tt,pr(r.type)?(Vh=y,Tt=di(c.firstChild)):Tt=y),sn(i,r,r.pendingProps.children,a),ic(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&We&&((y=c=Tt)&&(c=YI(c,r.type,r.pendingProps,ci),c!==null?(r.stateNode=c,on=r,Tt=di(c.firstChild),ci=!1,y=!0):y=!1),y||er(r)),xn(r),y=r.type,_=r.pendingProps,A=i!==null?i.memoizedProps:null,c=_.children,xh(y,_)?c=null:A!==null&&xh(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=bd(i,r,sI,null,null,a),Rl._currentValue=y),ic(i,r),sn(i,r,c,a),r.child;case 6:return i===null&&We&&((i=a=Tt)&&(a=$I(a,r.pendingProps,ci),a!==null?(r.stateNode=a,on=r,Tt=null,i=!0):i=!1),i||er(r)),null;case 13:return ky(i,r,a);case 4:return gt(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=os(r,null,c,a):sn(i,r,c,a),r.child;case 11:return wy(i,r,r.type,r.pendingProps,a);case 7:return sn(i,r,r.pendingProps,a),r.child;case 8:return sn(i,r,r.pendingProps.children,a),r.child;case 12:return sn(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,tr(r,r.type,c.value),sn(i,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,es(r),y=rn(y),c=c(y),r.flags|=1,sn(i,r,c,a),r.child;case 14:return by(i,r,r.type,r.pendingProps,a);case 15:return xy(i,r,r.type,r.pendingProps,a);case 19:return Oy(i,r,a);case 31:return pI(i,r,a);case 22:return Ny(i,r,a,r.pendingProps);case 24:return es(r),c=rn(Ot),i===null?(y=_d(),y===null&&(y=mt,_=gd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:c,cache:y},Td(r),tr(r,Ot,y)):((i.lanes&a)!==0&&(Ed(i,r),sl(r,null,null,a),rl()),y=i.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),tr(r,Ot,c)):(c=_.cache,tr(r,Ot,c),c!==y.cache&&md(r,[Ot],a,!0))),sn(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function _o(i){i.flags|=4}function nh(i,r,a,c,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(d_())i.flags|=8192;else throw is=zu,vd}else i.flags&=-16777217}function By(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!tv(r))if(d_())i.flags|=8192;else throw is=zu,vd}function rc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?ii():536870912,i.lanes|=r,Zs|=r)}function dl(i,r){if(!We)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Et(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function gI(i,r,a){var c=r.pendingProps;switch(cd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(r),null;case 1:return Et(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),po(Ot),dt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Fs(r)?_o(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,dd())),Et(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(_o(r),_!==null?(Et(r),By(r,_)):(Et(r),nh(r,y,null,c,a))):_?_!==i.memoizedState?(_o(r),Et(r),By(r,_)):(Et(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&_o(r),Et(r),nh(r,y,i,c,a)),null;case 27:if(Fn(r),a=Me.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&_o(r);else{if(!c){if(r.stateNode===null)throw Error(o(166));return Et(r),null}i=fe.current,Fs(r)?vg(r):(i=J_(y,c,a),r.stateNode=i,_o(r))}return Et(r),null;case 5:if(Fn(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&_o(r);else{if(!c){if(r.stateNode===null)throw Error(o(166));return Et(r),null}if(_=fe.current,Fs(r))vg(r);else{var A=Tc(Me.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[Ct]=r,_[nn]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch(an(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&_o(r)}}return Et(r),nh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&_o(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(o(166));if(i=Me.current,Fs(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,y=on,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[Ct]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||k_(i.nodeValue,a)),i||er(r,!0)}else i=Tc(i).createTextNode(c),i[Ct]=r,r.stateNode=i}return Et(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=Fs(r),a!==null){if(i===null){if(!c)throw Error(o(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[Ct]=r}else Zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Et(r),i=!1}else a=dd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Xn(r),r):(Xn(r),null);if((r.flags&128)!==0)throw Error(o(558))}return Et(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Fs(r),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(o(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Ct]=r}else Zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Et(r),y=!1}else y=dd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Xn(r),r):(Xn(r),null)}return Xn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),rc(r,r.updateQueue),Et(r),null);case 4:return dt(),i===null&&Ch(r.stateNode.containerInfo),Et(r),null;case 10:return po(r.type),Et(r),null;case 19:if(te(Pt),c=r.memoizedState,c===null)return Et(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)dl(c,!1);else{if(wt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=$u(i),_!==null){for(r.flags|=128,dl(c,!1),i=_.updateQueue,r.updateQueue=i,rc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)pg(a,i),a=a.sibling;return se(Pt,Pt.current&1|2),We&&fo(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&ce()>cc&&(r.flags|=128,y=!0,dl(c,!1),r.lanes=4194304)}else{if(!y)if(i=$u(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,rc(r,i),dl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!We)return Et(r),null}else 2*ce()-c.renderingStartTime>cc&&a!==536870912&&(r.flags|=128,y=!0,dl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(i=c.last,i!==null?i.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=ce(),i.sibling=null,a=Pt.current,se(Pt,y?a&1|2:a&1),We&&fo(r,c.treeForkCount),i):(Et(r),null);case 22:case 23:return Xn(r),Id(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(Et(r),r.subtreeFlags&6&&(r.flags|=8192)):Et(r),a=r.updateQueue,a!==null&&rc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&te(ts),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),po(Ot),Et(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function yI(i,r){switch(cd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return po(Ot),dt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Fn(r),null;case 31:if(r.memoizedState!==null){if(Xn(r),r.alternate===null)throw Error(o(340));Zr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Xn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(o(340));Zr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return te(Pt),null;case 4:return dt(),null;case 10:return po(r.type),null;case 22:case 23:return Xn(r),Id(),i!==null&&te(ts),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return po(Ot),null;case 25:return null;default:return null}}function qy(i,r){switch(cd(r),r.tag){case 3:po(Ot),dt();break;case 26:case 27:case 5:Fn(r);break;case 4:dt();break;case 31:r.memoizedState!==null&&Xn(r);break;case 13:Xn(r);break;case 19:te(Pt);break;case 10:po(r.type);break;case 22:case 23:Xn(r),Id(),i!==null&&te(ts);break;case 24:po(Ot)}}function hl(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var _=a.create,A=a.inst;c=_(),A.destroy=c}a=a.next}while(a!==y)}}catch(R){lt(r,r.return,R)}}function ar(i,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&i)===i){var A=c.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=r;var k=a,Y=R;try{Y()}catch(ie){lt(y,k,ie)}}}c=c.next}while(c!==_)}}catch(ie){lt(r,r.return,ie)}}function zy(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Dg(r,a)}catch(c){lt(i,i.return,c)}}}function Gy(i,r,a){a.props=ss(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){lt(i,r,c)}}function pl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){lt(i,r,y)}}function Hi(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){lt(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){lt(i,r,y)}else a.current=null}function Hy(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){lt(i,i.return,y)}}function ih(i,r,a){try{var c=i.stateNode;FI(c,i.type,a,r),c[nn]=r}catch(y){lt(i,i.return,y)}}function Yy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&pr(i.type)||i.tag===4}function oh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Yy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&pr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rh(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Jt));else if(c!==4&&(c===27&&pr(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(rh(i,r,a),i=i.sibling;i!==null;)rh(i,r,a),i=i.sibling}function sc(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&pr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(sc(i,r,a),i=i.sibling;i!==null;)sc(i,r,a),i=i.sibling}function $y(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);an(r,c,a),r[Ct]=i,r[nn]=a}catch(_){lt(i,i.return,_)}}var vo=!1,qt=!1,sh=!1,Jy=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function _I(i,r){if(i=i.containerInfo,wh=wc,i=rg(i),jf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,R=-1,k=-1,Y=0,ie=0,re=i,Q=null;t:for(;;){for(var Z;re!==a||y!==0&&re.nodeType!==3||(R=A+y),re!==_||c!==0&&re.nodeType!==3||(k=A+c),re.nodeType===3&&(A+=re.nodeValue.length),(Z=re.firstChild)!==null;)Q=re,re=Z;for(;;){if(re===i)break t;if(Q===a&&++Y===y&&(R=A),Q===_&&++ie===c&&(k=A),(Z=re.nextSibling)!==null)break;re=Q,Q=re.parentNode}re=Z}a=R===-1||k===-1?null:{start:R,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(bh={focusedElem:i,selectionRange:a},wc=!1,Xt=r;Xt!==null;)if(r=Xt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Xt=i;else for(;Xt!==null;){switch(r=Xt,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var Ee=ss(a.type,y);i=c.getSnapshotBeforeUpdate(Ee,_),c.__reactInternalSnapshotBeforeUpdate=i}catch(xe){lt(a,a.return,xe)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)Mh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Mh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=r.sibling,i!==null){i.return=r.return,Xt=i;break}Xt=r.return}}function Ky(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Eo(i,a),c&4&&hl(5,a);break;case 1:if(Eo(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(A){lt(a,a.return,A)}else{var y=ss(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(A){lt(a,a.return,A)}}c&64&&zy(a),c&512&&pl(a,a.return);break;case 3:if(Eo(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Dg(i,r)}catch(A){lt(a,a.return,A)}}break;case 27:r===null&&c&4&&$y(a);case 26:case 5:Eo(i,a),r===null&&c&4&&Hy(a),c&512&&pl(a,a.return);break;case 12:Eo(i,a);break;case 31:Eo(i,a),c&4&&Wy(i,a);break;case 13:Eo(i,a),c&4&&Zy(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=wI.bind(null,a),JI(i,a))));break;case 22:if(c=a.memoizedState!==null||vo,!c){r=r!==null&&r.memoizedState!==null||qt,y=vo;var _=qt;vo=c,(qt=r)&&!_?So(i,a,(a.subtreeFlags&8772)!==0):Eo(i,a),vo=y,qt=_}break;case 30:break;default:Eo(i,a)}}function Qy(i){var r=i.alternate;r!==null&&(i.alternate=null,Qy(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Or(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var St=null,Pn=!1;function To(i,r,a){for(a=a.child;a!==null;)Xy(i,r,a),a=a.sibling}function Xy(i,r,a){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(zn,a)}catch{}switch(a.tag){case 26:qt||Hi(a,r),To(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:qt||Hi(a,r);var c=St,y=Pn;pr(a.type)&&(St=a.stateNode,Pn=!1),To(i,r,a),Al(a.stateNode),St=c,Pn=y;break;case 5:qt||Hi(a,r);case 6:if(c=St,y=Pn,St=null,To(i,r,a),St=c,Pn=y,St!==null)if(Pn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(a.stateNode)}catch(_){lt(a,r,_)}else try{St.removeChild(a.stateNode)}catch(_){lt(a,r,_)}break;case 18:St!==null&&(Pn?(i=St,z_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),sa(i)):z_(St,a.stateNode));break;case 4:c=St,y=Pn,St=a.stateNode.containerInfo,Pn=!0,To(i,r,a),St=c,Pn=y;break;case 0:case 11:case 14:case 15:ar(2,a,r),qt||ar(4,a,r),To(i,r,a);break;case 1:qt||(Hi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Gy(a,r,c)),To(i,r,a);break;case 21:To(i,r,a);break;case 22:qt=(c=qt)||a.memoizedState!==null,To(i,r,a),qt=c;break;default:To(i,r,a)}}function Wy(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{sa(i)}catch(a){lt(r,r.return,a)}}}function Zy(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{sa(i)}catch(a){lt(r,r.return,a)}}function vI(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Jy),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Jy),r;default:throw Error(o(435,i.tag))}}function ac(i,r){var a=vI(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=bI.bind(null,i,c);c.then(y,y)}})}function Vn(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],_=i,A=r,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(pr(R.type)){St=R.stateNode,Pn=!1;break e}break;case 5:St=R.stateNode,Pn=!1;break e;case 3:case 4:St=R.stateNode.containerInfo,Pn=!0;break e}R=R.return}if(St===null)throw Error(o(160));Xy(_,A,y),St=null,Pn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)jy(r,i),r=r.sibling}var Ii=null;function jy(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Vn(r,i),Un(i),c&4&&(ar(3,i,i.return),hl(3,i),ar(5,i,i.return));break;case 1:Vn(r,i),Un(i),c&512&&(qt||a===null||Hi(a,a.return)),c&64&&vo&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=Ii;if(Vn(r,i),Un(i),c&512&&(qt||a===null||Hi(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[no]||_[Ct]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),an(_,c,a),_[Ct]=i,Dt(_),c=_;break e;case"link":var A=j_("link","href",y).get(c+(a.href||""));if(A){for(var R=0;R<A.length;R++)if(_=A[R],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(R,1);break t}}_=y.createElement(c),an(_,c,a),y.head.appendChild(_);break;case"meta":if(A=j_("meta","content",y).get(c+(a.content||""))){for(R=0;R<A.length;R++)if(_=A[R],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(R,1);break t}}_=y.createElement(c),an(_,c,a),y.head.appendChild(_);break;default:throw Error(o(468,c))}_[Ct]=i,Dt(_),c=_}i.stateNode=c}else ev(y,i.type,i.stateNode);else i.stateNode=Z_(y,c,i.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?ev(y,i.type,i.stateNode):Z_(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&ih(i,i.memoizedProps,a.memoizedProps)}break;case 27:Vn(r,i),Un(i),c&512&&(qt||a===null||Hi(a,a.return)),a!==null&&c&4&&ih(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Vn(r,i),Un(i),c&512&&(qt||a===null||Hi(a,a.return)),i.flags&32){y=i.stateNode;try{ri(y,"")}catch(Ee){lt(i,i.return,Ee)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,ih(i,y,a!==null?a.memoizedProps:y)),c&1024&&(sh=!0);break;case 6:if(Vn(r,i),Un(i),c&4){if(i.stateNode===null)throw Error(o(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(Ee){lt(i,i.return,Ee)}}break;case 3:if(Ac=null,y=Ii,Ii=Ec(r.containerInfo),Vn(r,i),Ii=y,Un(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{sa(r.containerInfo)}catch(Ee){lt(i,i.return,Ee)}sh&&(sh=!1,e_(i));break;case 4:c=Ii,Ii=Ec(i.stateNode.containerInfo),Vn(r,i),Un(i),Ii=c;break;case 12:Vn(r,i),Un(i);break;case 31:Vn(r,i),Un(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 13:Vn(r,i),Un(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uc=ce()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 22:y=i.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,Y=vo,ie=qt;if(vo=Y||y,qt=ie||k,Vn(r,i),qt=ie,vo=Y,Un(i),c&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||k||vo||qt||as(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){k=a=r;try{if(_=k.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=k.stateNode;var re=k.memoizedProps.style,Q=re!=null&&re.hasOwnProperty("display")?re.display:null;R.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Ee){lt(k,k.return,Ee)}}}else if(r.tag===6){if(a===null){k=r;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(Ee){lt(k,k.return,Ee)}}}else if(r.tag===18){if(a===null){k=r;try{var Z=k.stateNode;y?G_(Z,!0):G_(k.stateNode,!1)}catch(Ee){lt(k,k.return,Ee)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,ac(i,a))));break;case 19:Vn(r,i),Un(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 30:break;case 21:break;default:Vn(r,i),Un(i)}}function Un(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(Yy(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var y=a.stateNode,_=oh(i);sc(i,_,y);break;case 5:var A=a.stateNode;a.flags&32&&(ri(A,""),a.flags&=-33);var R=oh(i);sc(i,R,A);break;case 3:case 4:var k=a.stateNode.containerInfo,Y=oh(i);rh(i,Y,k);break;default:throw Error(o(161))}}catch(ie){lt(i,i.return,ie)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function e_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;e_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Eo(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Ky(i,r.alternate,r),r=r.sibling}function as(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ar(4,r,r.return),as(r);break;case 1:Hi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Gy(r,r.return,a),as(r);break;case 27:Al(r.stateNode);case 26:case 5:Hi(r,r.return),as(r);break;case 22:r.memoizedState===null&&as(r);break;case 30:as(r);break;default:as(r)}i=i.sibling}}function So(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=i,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:So(y,_,a),hl(4,_);break;case 1:if(So(y,_,a),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){lt(c,c.return,Y)}if(c=_,y=c.updateQueue,y!==null){var R=c.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)Mg(k[y],R)}catch(Y){lt(c,c.return,Y)}}a&&A&64&&zy(_),pl(_,_.return);break;case 27:$y(_);case 26:case 5:So(y,_,a),a&&c===null&&A&4&&Hy(_),pl(_,_.return);break;case 12:So(y,_,a);break;case 31:So(y,_,a),a&&A&4&&Wy(y,_);break;case 13:So(y,_,a),a&&A&4&&Zy(y,_);break;case 22:_.memoizedState===null&&So(y,_,a),pl(_,_.return);break;case 30:break;default:So(y,_,a)}r=r.sibling}}function ah(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&el(a))}function lh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&el(i))}function Ri(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)t_(i,r,a,c),r=r.sibling}function t_(i,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Ri(i,r,a,c),y&2048&&hl(9,r);break;case 1:Ri(i,r,a,c);break;case 3:Ri(i,r,a,c),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&el(i)));break;case 12:if(y&2048){Ri(i,r,a,c),i=r.stateNode;try{var _=r.memoizedProps,A=_.id,R=_.onPostCommit;typeof R=="function"&&R(A,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){lt(r,r.return,k)}}else Ri(i,r,a,c);break;case 31:Ri(i,r,a,c);break;case 13:Ri(i,r,a,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?Ri(i,r,a,c):ml(i,r):_._visibility&2?Ri(i,r,a,c):(_._visibility|=2,Qs(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&ah(A,r);break;case 24:Ri(i,r,a,c),y&2048&&lh(r.alternate,r);break;default:Ri(i,r,a,c)}}function Qs(i,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,A=r,R=a,k=c,Y=A.flags;switch(A.tag){case 0:case 11:case 15:Qs(_,A,R,k,y),hl(8,A);break;case 23:break;case 22:var ie=A.stateNode;A.memoizedState!==null?ie._visibility&2?Qs(_,A,R,k,y):ml(_,A):(ie._visibility|=2,Qs(_,A,R,k,y)),y&&Y&2048&&ah(A.alternate,A);break;case 24:Qs(_,A,R,k,y),y&&Y&2048&&lh(A.alternate,A);break;default:Qs(_,A,R,k,y)}r=r.sibling}}function ml(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,y=c.flags;switch(c.tag){case 22:ml(a,c),y&2048&&ah(c.alternate,c);break;case 24:ml(a,c),y&2048&&lh(c.alternate,c);break;default:ml(a,c)}r=r.sibling}}var gl=8192;function Xs(i,r,a){if(i.subtreeFlags&gl)for(i=i.child;i!==null;)n_(i,r,a),i=i.sibling}function n_(i,r,a){switch(i.tag){case 26:Xs(i,r,a),i.flags&gl&&i.memoizedState!==null&&rR(a,Ii,i.memoizedState,i.memoizedProps);break;case 5:Xs(i,r,a);break;case 3:case 4:var c=Ii;Ii=Ec(i.stateNode.containerInfo),Xs(i,r,a),Ii=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=gl,gl=16777216,Xs(i,r,a),gl=c):Xs(i,r,a));break;default:Xs(i,r,a)}}function i_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function yl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Xt=c,r_(c,i)}i_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)o_(i),i=i.sibling}function o_(i){switch(i.tag){case 0:case 11:case 15:yl(i),i.flags&2048&&ar(9,i,i.return);break;case 3:yl(i);break;case 12:yl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,lc(i)):yl(i);break;default:yl(i)}}function lc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Xt=c,r_(c,i)}i_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ar(8,r,r.return),lc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,lc(r));break;default:lc(r)}i=i.sibling}}function r_(i,r){for(;Xt!==null;){var a=Xt;switch(a.tag){case 0:case 11:case 15:ar(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:el(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Xt=c;else e:for(a=i;Xt!==null;){c=Xt;var y=c.sibling,_=c.return;if(Qy(c),c===a){Xt=null;break e}if(y!==null){y.return=_,Xt=y;break e}Xt=_}}}var TI={getCacheForType:function(i){var r=rn(Ot),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return rn(Ot).controller.signal}},EI=typeof WeakMap=="function"?WeakMap:Map,ot=0,mt=null,He=null,Je=0,at=0,Wn=null,lr=!1,Ws=!1,uh=!1,Ao=0,wt=0,ur=0,ls=0,ch=0,Zn=0,Zs=0,_l=null,kn=null,fh=!1,uc=0,s_=0,cc=1/0,fc=null,cr=null,Yt=0,fr=null,js=null,Co=0,dh=0,hh=null,a_=null,vl=0,ph=null;function jn(){return(ot&2)!==0&&Je!==0?Je&-Je:ee.T!==null?Th():to()}function l_(){if(Zn===0)if((Je&536870912)===0||We){var i=Gn;Gn<<=1,(Gn&3932160)===0&&(Gn=262144),Zn=i}else Zn=536870912;return i=Qn.current,i!==null&&(i.flags|=32),Zn}function Ln(i,r,a){(i===mt&&(at===2||at===9)||i.cancelPendingCommit!==null)&&(ea(i,0),dr(i,Je,Zn,!1)),dn(i,a),((ot&2)===0||i!==mt)&&(i===mt&&((ot&2)===0&&(ls|=a),wt===4&&dr(i,Je,Zn,!1)),Yi(i))}function u_(i,r,a){if((ot&6)!==0)throw Error(o(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||Ei(i,r),y=c?CI(i,r):gh(i,r,!0),_=c;do{if(y===0){Ws&&!c&&dr(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!SI(a)){y=gh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var R=i;y=_l;var k=R.current.memoizedState.isDehydrated;if(k&&(ea(R,A).flags|=256),A=gh(R,A,!1),A!==2){if(uh&&!k){R.errorRecoveryDisabledLanes|=_,ls|=_,y=4;break e}_=kn,kn=y,_!==null&&(kn===null?kn=_:kn.push.apply(kn,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){ea(i,0),dr(i,r,0,!0);break}e:{switch(c=i,_=y,_){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:dr(c,r,Zn,!lr);break e;case 2:kn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(y=uc+300-ce(),10<y)){if(dr(c,r,Zn,!lr),Tn(c,0,!0)!==0)break e;Co=r,c.timeoutHandle=B_(c_.bind(null,c,a,kn,fc,fh,r,Zn,ls,Zs,lr,_,"Throttled",-0,0),y);break e}c_(c,a,kn,fc,fh,r,Zn,ls,Zs,lr,_,null,-0,0)}}break}while(!0);Yi(i)}function c_(i,r,a,c,y,_,A,R,k,Y,ie,re,Q,Z){if(i.timeoutHandle=-1,re=r.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jt},n_(r,_,re);var Ee=(_&62914560)===_?uc-ce():(_&4194048)===_?s_-ce():0;if(Ee=sR(re,Ee),Ee!==null){Co=_,i.cancelPendingCommit=Ee(__.bind(null,i,r,_,a,c,y,A,R,k,ie,re,null,Q,Z)),dr(i,_,A,!Y);return}}__(i,r,_,a,c,y,A,R,k)}function SI(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],_=y.getSnapshot;y=y.value;try{if(!Jn(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function dr(i,r,a,c){r&=~ch,r&=~ls,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var y=r;0<y;){var _=31-en(y),A=1<<_;c[_]=-1,y&=~A}a!==0&&Pa(i,a,r)}function dc(){return(ot&6)===0?(Tl(0),!1):!0}function mh(){if(He!==null){if(at===0)var i=He.return;else i=He,ho=jr=null,Md(i),Hs=null,nl=0,i=He;for(;i!==null;)qy(i.alternate,i),i=i.return;He=null}}function ea(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,zI(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Co=0,mh(),mt=i,He=a=co(i.current,null),Je=r,at=0,Wn=null,lr=!1,Ws=Ei(i,r),uh=!1,Zs=Zn=ch=ls=ur=wt=0,kn=_l=null,fh=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var y=31-en(c),_=1<<y;r|=i[y],c&=~_}return Ao=r,Pu(),a}function f_(i,r){Le=null,ee.H=cl,r===Gs||r===qu?(r=wg(),at=3):r===vd?(r=wg(),at=4):at=r===Jd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Wn=r,He===null&&(wt=1,tc(i,ai(r,i.current)))}function d_(){var i=Qn.current;return i===null?!0:(Je&4194048)===Je?fi===null:(Je&62914560)===Je||(Je&536870912)!==0?i===fi:!1}function h_(){var i=ee.H;return ee.H=cl,i===null?cl:i}function p_(){var i=ee.A;return ee.A=TI,i}function hc(){wt=4,lr||(Je&4194048)!==Je&&Qn.current!==null||(Ws=!0),(ur&134217727)===0&&(ls&134217727)===0||mt===null||dr(mt,Je,Zn,!1)}function gh(i,r,a){var c=ot;ot|=2;var y=h_(),_=p_();(mt!==i||Je!==r)&&(fc=null,ea(i,r)),r=!1;var A=wt;e:do try{if(at!==0&&He!==null){var R=He,k=Wn;switch(at){case 8:mh(),A=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(r=!0);var Y=at;if(at=0,Wn=null,ta(i,R,k,Y),a&&Ws){A=0;break e}break;default:Y=at,at=0,Wn=null,ta(i,R,k,Y)}}AI(),A=wt;break}catch(ie){f_(i,ie)}while(!0);return r&&i.shellSuspendCounter++,ho=jr=null,ot=c,ee.H=y,ee.A=_,He===null&&(mt=null,Je=0,Pu()),A}function AI(){for(;He!==null;)m_(He)}function CI(i,r){var a=ot;ot|=2;var c=h_(),y=p_();mt!==i||Je!==r?(fc=null,cc=ce()+500,ea(i,r)):Ws=Ei(i,r);e:do try{if(at!==0&&He!==null){r=He;var _=Wn;t:switch(at){case 1:at=0,Wn=null,ta(i,r,_,1);break;case 2:case 9:if(Ig(_)){at=0,Wn=null,g_(r);break}r=function(){at!==2&&at!==9||mt!==i||(at=7),Yi(i)},_.then(r,r);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Ig(_)?(at=0,Wn=null,g_(r)):(at=0,Wn=null,ta(i,r,_,7));break;case 5:var A=null;switch(He.tag){case 26:A=He.memoizedState;case 5:case 27:var R=He;if(A?tv(A):R.stateNode.complete){at=0,Wn=null;var k=R.sibling;if(k!==null)He=k;else{var Y=R.return;Y!==null?(He=Y,pc(Y)):He=null}break t}}at=0,Wn=null,ta(i,r,_,5);break;case 6:at=0,Wn=null,ta(i,r,_,6);break;case 8:mh(),wt=6;break e;default:throw Error(o(462))}}II();break}catch(ie){f_(i,ie)}while(!0);return ho=jr=null,ee.H=c,ee.A=y,ot=a,He!==null?0:(mt=null,Je=0,Pu(),wt)}function II(){for(;He!==null&&!K();)m_(He)}function m_(i){var r=Fy(i.alternate,i,Ao);i.memoizedProps=i.pendingProps,r===null?pc(i):He=r}function g_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Py(a,r,r.pendingProps,r.type,void 0,Je);break;case 11:r=Py(a,r,r.pendingProps,r.type.render,r.ref,Je);break;case 5:Md(r);default:qy(a,r),r=He=pg(r,Ao),r=Fy(a,r,Ao)}i.memoizedProps=i.pendingProps,r===null?pc(i):He=r}function ta(i,r,a,c){ho=jr=null,Md(r),Hs=null,nl=0;var y=r.return;try{if(hI(i,y,r,a,Je)){wt=1,tc(i,ai(a,i.current)),He=null;return}}catch(_){if(y!==null)throw He=y,_;wt=1,tc(i,ai(a,i.current)),He=null;return}r.flags&32768?(We||c===1?i=!0:Ws||(Je&536870912)!==0?i=!1:(lr=i=!0,(c===2||c===9||c===3||c===6)&&(c=Qn.current,c!==null&&c.tag===13&&(c.flags|=16384))),y_(r,i)):pc(r)}function pc(i){var r=i;do{if((r.flags&32768)!==0){y_(r,lr);return}i=r.return;var a=gI(r.alternate,r,Ao);if(a!==null){He=a;return}if(r=r.sibling,r!==null){He=r;return}He=r=i}while(r!==null);wt===0&&(wt=5)}function y_(i,r){do{var a=yI(i.alternate,i);if(a!==null){a.flags&=32767,He=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){He=i;return}He=i=a}while(i!==null);wt=6,He=null}function __(i,r,a,c,y,_,A,R,k){i.cancelPendingCommit=null;do mc();while(Yt!==0);if((ot&6)!==0)throw Error(o(327));if(r!==null){if(r===i.current)throw Error(o(177));if(_=r.lanes|r.childLanes,_|=od,pt(i,a,_,A,R,k),i===mt&&(He=mt=null,Je=0),js=r,fr=i,Co=a,dh=_,hh=y,a_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,xI(Xe,function(){return A_(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null,y=de.p,de.p=2,A=ot,ot|=4;try{_I(i,r,a)}finally{ot=A,de.p=y,ee.T=c}}Yt=1,v_(),T_(),E_()}}function v_(){if(Yt===1){Yt=0;var i=fr,r=js,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ee.T,ee.T=null;var c=de.p;de.p=2;var y=ot;ot|=4;try{jy(r,i);var _=bh,A=rg(i.containerInfo),R=_.focusedElem,k=_.selectionRange;if(A!==R&&R&&R.ownerDocument&&og(R.ownerDocument.documentElement,R)){if(k!==null&&jf(R)){var Y=k.start,ie=k.end;if(ie===void 0&&(ie=Y),"selectionStart"in R)R.selectionStart=Y,R.selectionEnd=Math.min(ie,R.value.length);else{var re=R.ownerDocument||document,Q=re&&re.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Ee=R.textContent.length,xe=Math.min(k.start,Ee),ft=k.end===void 0?xe:Math.min(k.end,Ee);!Z.extend&&xe>ft&&(A=ft,ft=xe,xe=A);var z=ig(R,xe),B=ig(R,ft);if(z&&B&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==B.node||Z.focusOffset!==B.offset)){var H=re.createRange();H.setStart(z.node,z.offset),Z.removeAllRanges(),xe>ft?(Z.addRange(H),Z.extend(B.node,B.offset)):(H.setEnd(B.node,B.offset),Z.addRange(H))}}}}for(re=[],Z=R;Z=Z.parentNode;)Z.nodeType===1&&re.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<re.length;R++){var oe=re[R];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}wc=!!wh,bh=wh=null}finally{ot=y,de.p=c,ee.T=a}}i.current=r,Yt=2}}function T_(){if(Yt===2){Yt=0;var i=fr,r=js,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ee.T,ee.T=null;var c=de.p;de.p=2;var y=ot;ot|=4;try{Ky(i,r.alternate,r)}finally{ot=y,de.p=c,ee.T=a}}Yt=3}}function E_(){if(Yt===4||Yt===3){Yt=0,le();var i=fr,r=js,a=Co,c=a_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Yt=5:(Yt=0,js=fr=null,S_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(cr=null),Ua(a),r=r.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(zn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=ee.T,y=de.p,de.p=2,ee.T=null;try{for(var _=i.onRecoverableError,A=0;A<c.length;A++){var R=c[A];_(R.value,{componentStack:R.stack})}}finally{ee.T=r,de.p=y}}(Co&3)!==0&&mc(),Yi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===ph?vl++:(vl=0,ph=i):vl=0,Tl(0)}}function S_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,el(r)))}function mc(){return v_(),T_(),E_(),A_()}function A_(){if(Yt!==5)return!1;var i=fr,r=dh;dh=0;var a=Ua(Co),c=ee.T,y=de.p;try{de.p=32>a?32:a,ee.T=null,a=hh,hh=null;var _=fr,A=Co;if(Yt=0,js=fr=null,Co=0,(ot&6)!==0)throw Error(o(331));var R=ot;if(ot|=4,o_(_.current),t_(_,_.current,A,a),ot=R,Tl(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(zn,_)}catch{}return!0}finally{de.p=y,ee.T=c,S_(i,r)}}function C_(i,r,a){r=ai(a,r),r=$d(i.stateNode,r,2),i=or(i,r,2),i!==null&&(dn(i,2),Yi(i))}function lt(i,r,a){if(i.tag===3)C_(i,i,a);else for(;r!==null;){if(r.tag===3){C_(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(cr===null||!cr.has(c))){i=ai(a,i),a=Iy(2),c=or(r,a,2),c!==null&&(Ry(a,c,r,i),dn(c,2),Yi(c));break}}r=r.return}}function yh(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new EI;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(uh=!0,y.add(a),i=RI.bind(null,i,r,a),r.then(i,i))}function RI(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,mt===i&&(Je&a)===a&&(wt===4||wt===3&&(Je&62914560)===Je&&300>ce()-uc?(ot&2)===0&&ea(i,0):ch|=a,Zs===Je&&(Zs=0)),Yi(i)}function I_(i,r){r===0&&(r=ii()),i=Xr(i,r),i!==null&&(dn(i,r),Yi(i))}function wI(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),I_(i,a)}function bI(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(r),I_(i,a)}function xI(i,r){return vi(i,r)}var gc=null,na=null,_h=!1,yc=!1,vh=!1,hr=0;function Yi(i){i!==na&&i.next===null&&(na===null?gc=na=i:na=na.next=i),yc=!0,_h||(_h=!0,MI())}function Tl(i,r){if(!vh&&yc){vh=!0;do for(var a=!1,c=gc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,R=c.pingedLanes;_=(1<<31-en(42|i)+1)-1,_&=y&~(A&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,x_(c,_))}else _=Je,_=Tn(c,c===mt?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Ei(c,_)||(a=!0,x_(c,_));c=c.next}while(a);vh=!1}}function NI(){R_()}function R_(){yc=_h=!1;var i=0;hr!==0&&qI()&&(i=hr);for(var r=ce(),a=null,c=gc;c!==null;){var y=c.next,_=w_(c,r);_===0?(c.next=null,a===null?gc=y:a.next=y,y===null&&(na=a)):(a=c,(i!==0||(_&3)!==0)&&(yc=!0)),c=y}Yt!==0&&Yt!==5||Tl(i),hr!==0&&(hr=0)}function w_(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-en(_),R=1<<A,k=y[A];k===-1?((R&a)===0||(R&c)!==0)&&(y[A]=eo(R,r)):k<=r&&(i.expiredLanes|=R),_&=~R}if(r=mt,a=Je,a=Tn(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(at===2||at===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&vn(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Ei(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&vn(c),Ua(a)){case 2:case 8:a=be;break;case 32:a=Xe;break;case 268435456:a=Pi;break;default:a=Xe}return c=b_.bind(null,i),a=vi(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&vn(c),i.callbackPriority=2,i.callbackNode=null,2}function b_(i,r){if(Yt!==0&&Yt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(mc()&&i.callbackNode!==a)return null;var c=Je;return c=Tn(i,i===mt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(u_(i,c,r),w_(i,ce()),i.callbackNode!=null&&i.callbackNode===a?b_.bind(null,i):null)}function x_(i,r){if(mc())return null;u_(i,r,!0)}function MI(){GI(function(){(ot&6)!==0?vi(Te,NI):R_()})}function Th(){if(hr===0){var i=qs;i===0&&(i=Vi,Vi<<=1,(Vi&261888)===0&&(Vi=256)),hr=i}return hr}function N_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Fi(""+i)}function M_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function DI(i,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var _=N_((y[nn]||null).action),A=c.submitter;A&&(r=(r=A[nn]||null)?N_(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var R=new Gr("action","action",null,c,y);i.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hr!==0){var k=A?M_(y,A):new FormData(y);Bd(a,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(R.preventDefault(),k=A?M_(y,A):new FormData(y),Bd(a,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var Eh=0;Eh<id.length;Eh++){var Sh=id[Eh],PI=Sh.toLowerCase(),VI=Sh[0].toUpperCase()+Sh.slice(1);Ci(PI,"on"+VI)}Ci(lg,"onAnimationEnd"),Ci(ug,"onAnimationIteration"),Ci(cg,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(XC,"onTransitionRun"),Ci(WC,"onTransitionStart"),Ci(ZC,"onTransitionCancel"),Ci(fg,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),En("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),En("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),En("onBeforeInput",["compositionend","keypress","textInput","paste"]),En("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function D_(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var R=c[A],k=R.instance,Y=R.currentTarget;if(R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=Y;try{_(y)}catch(ie){Du(ie)}y.currentTarget=null,_=k}else for(A=0;A<c.length;A++){if(R=c[A],k=R.instance,Y=R.currentTarget,R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=Y;try{_(y)}catch(ie){Du(ie)}y.currentTarget=null,_=k}}}}function Ye(i,r){var a=r[Oo];a===void 0&&(a=r[Oo]=new Set);var c=i+"__bubble";a.has(c)||(P_(r,i,2,!1),a.add(c))}function Ah(i,r,a){var c=0;r&&(c|=4),P_(a,i,c,r)}var _c="_reactListening"+Math.random().toString(36).slice(2);function Ch(i){if(!i[_c]){i[_c]=!0,As.forEach(function(a){a!=="selectionchange"&&(UI.has(a)||Ah(a,!1,i),Ah(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[_c]||(r[_c]=!0,Ah("selectionchange",!1,r))}}function P_(i,r,a,c){switch(lv(r)){case 2:var y=uR;break;case 8:y=cR;break;default:y=Fh}a=y.bind(null,r,a,i),y=void 0,!Ga||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function Ih(i,r,a,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var R=c.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=c.return;A!==null;){var k=A.tag;if((k===3||k===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=io(R),A===null)return;if(k=A.tag,k===5||k===6||k===26||k===27){c=_=A;continue e}R=R.parentNode}}c=c.return}gu(function(){var Y=_,ie=bs(a),re=[];e:{var Q=dg.get(i);if(Q!==void 0){var Z=Gr,Ee=i;switch(i){case"keypress":if(zr(a)===0)break e;case"keydown":case"keyup":Z=Iu;break;case"focusin":Ee="focus",Z=Ko;break;case"focusout":Ee="blur",Z=Ko;break;case"beforeblur":case"afterblur":Z=Ko;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=wu;break;case lg:case ug:case cg:Z=Ms;break;case fg:Z=Ds;break;case"scroll":case"scrollend":Z=yu;break;case"wheel":Z=xu;break;case"copy":case"cut":case"paste":Z=Eu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Ka;break;case"toggle":case"beforetoggle":Z=Xo}var xe=(r&4)!==0,ft=!xe&&(i==="scroll"||i==="scrollend"),z=xe?Q!==null?Q+"Capture":null:Q;xe=[];for(var B=Y,H;B!==null;){var oe=B;if(H=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||H===null||z===null||(oe=Mn(B,z),oe!=null&&xe.push(Sl(B,oe,H))),ft)break;B=B.return}0<xe.length&&(Q=new Z(Q,Ee,null,a,ie),re.push({event:Q,listeners:xe}))}}if((r&7)===0){e:{if(Q=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",Q&&a!==ws&&(Ee=a.relatedTarget||a.fromElement)&&(io(Ee)||Ee[ki]))break e;if((Z||Q)&&(Q=ie.window===ie?ie:(Q=ie.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Ee=a.relatedTarget||a.toElement,Z=Y,Ee=Ee?io(Ee):null,Ee!==null&&(ft=l(Ee),xe=Ee.tag,Ee!==ft||xe!==5&&xe!==27&&xe!==6)&&(Ee=null)):(Z=null,Ee=Y),Z!==Ee)){if(xe=_u,oe="onMouseLeave",z="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(xe=Ka,oe="onPointerLeave",z="onPointerEnter",B="pointer"),ft=Z==null?Q:Fr(Z),H=Ee==null?Q:Fr(Ee),Q=new xe(oe,B+"leave",Z,a,ie),Q.target=ft,Q.relatedTarget=H,oe=null,io(ie)===Y&&(xe=new xe(z,B+"enter",Ee,a,ie),xe.target=H,xe.relatedTarget=ft,oe=xe),ft=oe,Z&&Ee)t:{for(xe=kI,z=Z,B=Ee,H=0,oe=z;oe;oe=xe(oe))H++;oe=0;for(var Ie=B;Ie;Ie=xe(Ie))oe++;for(;0<H-oe;)z=xe(z),H--;for(;0<oe-H;)B=xe(B),oe--;for(;H--;){if(z===B||B!==null&&z===B.alternate){xe=z;break t}z=xe(z),B=xe(B)}xe=null}else xe=null;Z!==null&&V_(re,Q,Z,xe,!1),Ee!==null&&ft!==null&&V_(re,ft,Ee,xe,!0)}}e:{if(Q=Y?Fr(Y):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var tt=Wm;else if(Dn(Q))if(Zm)tt=JC;else{tt=YC;var Ae=HC}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?Y&&qa(Y.elementType)&&(tt=Wm):tt=$C;if(tt&&(tt=tt(i,Y))){Jr(re,tt,a,ie);break e}Ae&&Ae(i,Q,Y),i==="focusout"&&Y&&Q.type==="number"&&Y.memoizedProps.value!=null&&Rs(Q,"number",Q.value)}switch(Ae=Y?Fr(Y):window,i){case"focusin":(Dn(Ae)||Ae.contentEditable==="true")&&(Ps=Ae,ed=Y,Wa=null);break;case"focusout":Wa=ed=Ps=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,sg(re,a,ie);break;case"selectionchange":if(QC)break;case"keydown":case"keyup":sg(re,a,ie)}var Fe;if(T)e:{switch(i){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else qe?rt(i,a)&&(Ke="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ke="onCompositionStart");Ke&&(G&&a.locale!=="ko"&&(qe||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&qe&&(Fe=Ho()):($n=ie,xs="value"in $n?$n.value:$n.textContent,qe=!0)),Ae=vc(Y,Ke),0<Ae.length&&(Ke=new Ya(Ke,i,null,a,ie),re.push({event:Ke,listeners:Ae}),Fe?Ke.data=Fe:(Fe=Lt(a),Fe!==null&&(Ke.data=Fe)))),(Fe=w?Kt(i,a):Qt(i,a))&&(Ke=vc(Y,"onBeforeInput"),0<Ke.length&&(Ae=new Ya("onBeforeInput","beforeinput",null,a,ie),re.push({event:Ae,listeners:Ke}),Ae.data=Fe)),DI(re,i,Y,a,ie)}D_(re,r)})}function Sl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function vc(i,r){for(var a=r+"Capture",c=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Mn(i,a),y!=null&&c.unshift(Sl(i,y,_)),y=Mn(i,r),y!=null&&c.push(Sl(i,y,_))),i.tag===3)return c;i=i.return}return[]}function kI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function V_(i,r,a,c,y){for(var _=r._reactName,A=[];a!==null&&a!==c;){var R=a,k=R.alternate,Y=R.stateNode;if(R=R.tag,k!==null&&k===c)break;R!==5&&R!==26&&R!==27||Y===null||(k=Y,y?(Y=Mn(a,_),Y!=null&&A.unshift(Sl(a,Y,k))):y||(Y=Mn(a,_),Y!=null&&A.push(Sl(a,Y,k)))),a=a.return}A.length!==0&&i.push({event:r,listeners:A})}var LI=/\r\n?/g,OI=/\u0000|\uFFFD/g;function U_(i){return(typeof i=="string"?i:""+i).replace(LI,`
`).replace(OI,"")}function k_(i,r){return r=U_(r),U_(i)===r}function ct(i,r,a,c,y,_){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||ri(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&ri(i,""+c);break;case"className":qo(i,"class",c);break;case"tabIndex":qo(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":qo(i,a,c);break;case"style":pu(i,c,_);break;case"data":if(r!=="object"){qo(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Fi(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&ct(i,r,"name",y.name,y,null),ct(i,r,"formEncType",y.formEncType,y,null),ct(i,r,"formMethod",y.formMethod,y,null),ct(i,r,"formTarget",y.formTarget,y,null)):(ct(i,r,"encType",y.encType,y,null),ct(i,r,"method",y.method,y,null),ct(i,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Fi(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Jt);break;case"onScroll":c!=null&&Ye("scroll",i);break;case"onScrollEnd":c!=null&&Ye("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Fi(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Ye("beforetoggle",i),Ye("toggle",i),Bo(i,"popover",c);break;case"xlinkActuate":oi(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":oi(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":oi(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":oi(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":oi(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":oi(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":oi(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":oi(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":oi(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Bo(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Kf.get(a)||a,Bo(i,a,c))}}function Rh(i,r,a,c,y,_){switch(a){case"style":pu(i,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof c=="string"?ri(i,c):(typeof c=="number"||typeof c=="bigint")&&ri(i,""+c);break;case"onScroll":c!=null&&Ye("scroll",i);break;case"onScrollEnd":c!=null&&Ye("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Jt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[nn]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Bo(i,a,c)}}}function an(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",i),Ye("load",i);var c=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:ct(i,r,_,A,a,null)}}y&&ct(i,r,"srcSet",a.srcSet,a,null),c&&ct(i,r,"src",a.src,a,null);return;case"input":Ye("invalid",i);var R=_=A=y=null,k=null,Y=null;for(c in a)if(a.hasOwnProperty(c)){var ie=a[c];if(ie!=null)switch(c){case"name":y=ie;break;case"type":A=ie;break;case"checked":k=ie;break;case"defaultChecked":Y=ie;break;case"value":_=ie;break;case"defaultValue":R=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(o(137,r));break;default:ct(i,r,c,ie,a,null)}}Br(i,_,R,k,Y,A,y,!1);return;case"select":Ye("invalid",i),c=A=_=null;for(y in a)if(a.hasOwnProperty(y)&&(R=a[y],R!=null))switch(y){case"value":_=R;break;case"defaultValue":A=R;break;case"multiple":c=R;default:ct(i,r,y,R,a,null)}r=_,a=A,i.multiple=!!c,r!=null?et(i,!!c,r,!1):a!=null&&et(i,!!c,a,!0);return;case"textarea":Ye("invalid",i),_=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(R=a[A],R!=null))switch(A){case"value":c=R;break;case"defaultValue":y=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(91));break;default:ct(i,r,A,R,a,null)}Go(i,c,y,_);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(c=a[k],c!=null))switch(k){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ct(i,r,k,c,a,null)}return;case"dialog":Ye("beforetoggle",i),Ye("toggle",i),Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":Ye("load",i);break;case"video":case"audio":for(c=0;c<El.length;c++)Ye(El[c],i);break;case"image":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"embed":case"source":case"link":Ye("error",i),Ye("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(c=a[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:ct(i,r,Y,c,a,null)}return;default:if(qa(r)){for(ie in a)a.hasOwnProperty(ie)&&(c=a[ie],c!==void 0&&Rh(i,r,ie,c,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(c=a[R],c!=null&&ct(i,r,R,c,a,null))}function FI(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,R=null,k=null,Y=null,ie=null;for(Z in a){var re=a[Z];if(a.hasOwnProperty(Z)&&re!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":k=re;default:c.hasOwnProperty(Z)||ct(i,r,Z,null,c,re)}}for(var Q in c){var Z=c[Q];if(re=a[Q],c.hasOwnProperty(Q)&&(Z!=null||re!=null))switch(Q){case"type":_=Z;break;case"name":y=Z;break;case"checked":Y=Z;break;case"defaultChecked":ie=Z;break;case"value":A=Z;break;case"defaultValue":R=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,r));break;default:Z!==re&&ct(i,r,Q,Z,c,re)}}zo(i,A,R,k,Y,ie,_,y);return;case"select":Z=A=R=Q=null;for(_ in a)if(k=a[_],a.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":Z=k;default:c.hasOwnProperty(_)||ct(i,r,_,null,c,k)}for(y in c)if(_=c[y],k=a[y],c.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":Q=_;break;case"defaultValue":R=_;break;case"multiple":A=_;default:_!==k&&ct(i,r,y,_,c,k)}r=R,a=A,c=Z,Q!=null?et(i,!!a,Q,!1):!!c!=!!a&&(r!=null?et(i,!!a,r,!0):et(i,!!a,a?[]:"",!1));return;case"textarea":Z=Q=null;for(R in a)if(y=a[R],a.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ct(i,r,R,null,c,y)}for(A in c)if(y=c[A],_=a[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":Q=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==_&&ct(i,r,A,y,c,_)}qr(i,Q,Z);return;case"option":for(var Ee in a)if(Q=a[Ee],a.hasOwnProperty(Ee)&&Q!=null&&!c.hasOwnProperty(Ee))switch(Ee){case"selected":i.selected=!1;break;default:ct(i,r,Ee,null,c,Q)}for(k in c)if(Q=c[k],Z=a[k],c.hasOwnProperty(k)&&Q!==Z&&(Q!=null||Z!=null))switch(k){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ct(i,r,k,Q,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)Q=a[xe],a.hasOwnProperty(xe)&&Q!=null&&!c.hasOwnProperty(xe)&&ct(i,r,xe,null,c,Q);for(Y in c)if(Q=c[Y],Z=a[Y],c.hasOwnProperty(Y)&&Q!==Z&&(Q!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,r));break;default:ct(i,r,Y,Q,c,Z)}return;default:if(qa(r)){for(var ft in a)Q=a[ft],a.hasOwnProperty(ft)&&Q!==void 0&&!c.hasOwnProperty(ft)&&Rh(i,r,ft,void 0,c,Q);for(ie in c)Q=c[ie],Z=a[ie],!c.hasOwnProperty(ie)||Q===Z||Q===void 0&&Z===void 0||Rh(i,r,ie,Q,c,Z);return}}for(var z in a)Q=a[z],a.hasOwnProperty(z)&&Q!=null&&!c.hasOwnProperty(z)&&ct(i,r,z,null,c,Q);for(re in c)Q=c[re],Z=a[re],!c.hasOwnProperty(re)||Q===Z||Q==null&&Z==null||ct(i,r,re,Q,c,Z)}function L_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],_=y.transferSize,A=y.initiatorType,R=y.duration;if(_&&R&&L_(A)){for(A=0,R=y.responseEnd,c+=1;c<a.length;c++){var k=a[c],Y=k.startTime;if(Y>R)break;var ie=k.transferSize,re=k.initiatorType;ie&&L_(re)&&(k=k.responseEnd,A+=ie*(k<R?1:(R-Y)/(k-Y)))}if(--c,r+=8*(_+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var wh=null,bh=null;function Tc(i){return i.nodeType===9?i:i.ownerDocument}function O_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function xh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Nh=null;function qI(){var i=window.event;return i&&i.type==="popstate"?i===Nh?!1:(Nh=i,!0):(Nh=null,!1)}var B_=typeof setTimeout=="function"?setTimeout:void 0,zI=typeof clearTimeout=="function"?clearTimeout:void 0,q_=typeof Promise=="function"?Promise:void 0,GI=typeof queueMicrotask=="function"?queueMicrotask:typeof q_<"u"?function(i){return q_.resolve(null).then(i).catch(HI)}:B_;function HI(i){setTimeout(function(){throw i})}function pr(i){return i==="head"}function z_(i,r){var a=r,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),sa(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Al(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Al(a);for(var _=a.firstChild;_;){var A=_.nextSibling,R=_.nodeName;_[no]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&Al(i.ownerDocument.body);a=y}while(a);sa(r)}function G_(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function Mh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Mh(a),Or(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function YI(i,r,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[no])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=di(i.nextSibling),i===null)break}return null}function $I(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=di(i.nextSibling),i===null))return null;return i}function H_(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=di(i.nextSibling),i===null))return null;return i}function Dh(i){return i.data==="$?"||i.data==="$~"}function Ph(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function JI(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function di(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Vh=null;function Y_(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return di(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function $_(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function J_(i,r,a){switch(r=Tc(a),i){case"html":if(i=r.documentElement,!i)throw Error(o(452));return i;case"head":if(i=r.head,!i)throw Error(o(453));return i;case"body":if(i=r.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function Al(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Or(i)}var hi=new Map,K_=new Set;function Ec(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Io=de.d;de.d={f:KI,r:QI,D:XI,C:WI,L:ZI,m:jI,X:tR,S:eR,M:nR};function KI(){var i=Io.f(),r=dc();return i||r}function QI(i){var r=oo(i);r!==null&&r.tag===5&&r.type==="form"?fy(r):Io.r(i)}var ia=typeof document>"u"?null:document;function Q_(i,r,a){var c=ia;if(c&&typeof r=="string"&&r){var y=It(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),K_.has(y)||(K_.add(y),i={rel:i,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),an(r,"link",i),Dt(r),c.head.appendChild(r)))}}function XI(i){Io.D(i),Q_("dns-prefetch",i,null)}function WI(i,r){Io.C(i,r),Q_("preconnect",i,r)}function ZI(i,r,a){Io.L(i,r,a);var c=ia;if(c&&i&&r){var y='link[rel="preload"][as="'+It(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+It(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+It(a.imageSizes)+'"]')):y+='[href="'+It(i)+'"]';var _=y;switch(r){case"style":_=oa(i);break;case"script":_=ra(i)}hi.has(_)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),hi.set(_,i),c.querySelector(y)!==null||r==="style"&&c.querySelector(Cl(_))||r==="script"&&c.querySelector(Il(_))||(r=c.createElement("link"),an(r,"link",i),Dt(r),c.head.appendChild(r)))}}function jI(i,r){Io.m(i,r);var a=ia;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+It(c)+'"][href="'+It(i)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ra(i)}if(!hi.has(_)&&(i=E({rel:"modulepreload",href:i},r),hi.set(_,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Il(_)))return}c=a.createElement("link"),an(c,"link",i),Dt(c),a.head.appendChild(c)}}}function eR(i,r,a){Io.S(i,r,a);var c=ia;if(c&&i){var y=Si(c).hoistableStyles,_=oa(i);r=r||"default";var A=y.get(_);if(!A){var R={loading:0,preload:null};if(A=c.querySelector(Cl(_)))R.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=hi.get(_))&&Uh(i,a);var k=A=c.createElement("link");Dt(k),an(k,"link",i),k._p=new Promise(function(Y,ie){k.onload=Y,k.onerror=ie}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Sc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(_,A)}}}function tR(i,r){Io.X(i,r);var a=ia;if(a&&i){var c=Si(a).hoistableScripts,y=ra(i),_=c.get(y);_||(_=a.querySelector(Il(y)),_||(i=E({src:i,async:!0},r),(r=hi.get(y))&&kh(i,r),_=a.createElement("script"),Dt(_),an(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function nR(i,r){Io.M(i,r);var a=ia;if(a&&i){var c=Si(a).hoistableScripts,y=ra(i),_=c.get(y);_||(_=a.querySelector(Il(y)),_||(i=E({src:i,async:!0,type:"module"},r),(r=hi.get(y))&&kh(i,r),_=a.createElement("script"),Dt(_),an(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function X_(i,r,a,c){var y=(y=Me.current)?Ec(y):null;if(!y)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=oa(a.href),a=Si(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=oa(a.href);var _=Si(y).hoistableStyles,A=_.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=y.querySelector(Cl(i)))&&!_._p&&(A.instance=_,A.state.loading=5),hi.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},hi.set(i,a),_||iR(y,i,a,A.state))),r&&c===null)throw Error(o(528,""));return A}if(r&&c!==null)throw Error(o(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ra(a),a=Si(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function oa(i){return'href="'+It(i)+'"'}function Cl(i){return'link[rel="stylesheet"]['+i+"]"}function W_(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function iR(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),an(r,"link",a),Dt(r),i.head.appendChild(r))}function ra(i){return'[src="'+It(i)+'"]'}function Il(i){return"script[async]"+i}function Z_(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+It(a.href)+'"]');if(c)return r.instance=c,Dt(c),c;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Dt(c),an(c,"style",y),Sc(c,a.precedence,i),r.instance=c;case"stylesheet":y=oa(a.href);var _=i.querySelector(Cl(y));if(_)return r.state.loading|=4,r.instance=_,Dt(_),_;c=W_(a),(y=hi.get(y))&&Uh(c,y),_=(i.ownerDocument||i).createElement("link"),Dt(_);var A=_;return A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),an(_,"link",c),r.state.loading|=4,Sc(_,a.precedence,i),r.instance=_;case"script":return _=ra(a.src),(y=i.querySelector(Il(_)))?(r.instance=y,Dt(y),y):(c=a,(y=hi.get(_))&&(c=E({},a),kh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Dt(y),an(y,"link",c),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Sc(c,a.precedence,i));return r.instance}function Sc(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var R=c[A];if(R.dataset.precedence===r)_=R;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Uh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function kh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Ac=null;function j_(i,r,a){if(Ac===null){var c=new Map,y=Ac=new Map;y.set(a,c)}else y=Ac,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[no]||_[Ct]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=i+A;var R=c.get(A);R?R.push(_):c.set(A,[_])}}return c}function ev(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function oR(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function tv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function rR(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=oa(c.href),_=r.querySelector(Cl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Cc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,Dt(_);return}_=r.ownerDocument||r,c=W_(c),(y=hi.get(y))&&Uh(c,y),_=_.createElement("link"),Dt(_);var A=_;A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),an(_,"link",c),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Cc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var Lh=0;function sR(i,r){return i.stylesheets&&i.count===0&&Rc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Rc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&Lh===0&&(Lh=62500*BI());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Rc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Lh?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ic=null;function Rc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ic=new Map,r.forEach(aR,i),Ic=null,Cc.call(i))}function aR(i,r){if(!(r.state.loading&4)){var a=Ic.get(i);if(a)var c=a.get(null);else{a=new Map,Ic.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),_=a.get(A)||c,_===c&&a.set(null,y),a.set(A,y),this.count++,c=Cc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Rl={$$typeof:J,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function lR(i,r,a,c,y,_,A,R,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tn(0),this.hiddenUpdates=tn(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function nv(i,r,a,c,y,_,A,R,k,Y,ie,re){return i=new lR(i,r,a,A,k,Y,ie,re,R),r=1,_===!0&&(r|=24),_=Kn(3,null,null,r),i.current=_,_.stateNode=i,r=gd(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:r},Td(_),i}function iv(i){return i?(i=ks,i):ks}function ov(i,r,a,c,y,_){y=iv(y),c.context===null?c.context=y:c.pendingContext=y,c=ir(r),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=or(i,c,r),a!==null&&(Ln(a,i,r),ol(a,i,r))}function rv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function Oh(i,r){rv(i,r),(i=i.alternate)&&rv(i,r)}function sv(i){if(i.tag===13||i.tag===31){var r=Xr(i,67108864);r!==null&&Ln(r,i,67108864),Oh(i,67108864)}}function av(i){if(i.tag===13||i.tag===31){var r=jn();r=Va(r);var a=Xr(i,r);a!==null&&Ln(a,i,r),Oh(i,r)}}var wc=!0;function uR(i,r,a,c){var y=ee.T;ee.T=null;var _=de.p;try{de.p=2,Fh(i,r,a,c)}finally{de.p=_,ee.T=y}}function cR(i,r,a,c){var y=ee.T;ee.T=null;var _=de.p;try{de.p=8,Fh(i,r,a,c)}finally{de.p=_,ee.T=y}}function Fh(i,r,a,c){if(wc){var y=Bh(c);if(y===null)Ih(i,r,c,bc,a),uv(i,c);else if(dR(y,i,r,a,c))c.stopPropagation();else if(uv(i,c),r&4&&-1<fR.indexOf(i)){for(;y!==null;){var _=oo(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=Nn(_.pendingLanes);if(A!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var k=1<<31-en(A);R.entanglements[1]|=k,A&=~k}Yi(_),(ot&6)===0&&(cc=ce()+500,Tl(0))}}break;case 31:case 13:R=Xr(_,2),R!==null&&Ln(R,_,2),dc(),Oh(_,2)}if(_=Bh(c),_===null&&Ih(i,r,c,bc,a),_===y)break;y=_}y!==null&&c.stopPropagation()}else Ih(i,r,c,null,a)}}function Bh(i){return i=bs(i),qh(i)}var bc=null;function qh(i){if(bc=null,i=io(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return bc=i,null}function lv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case Te:return 2;case be:return 8;case Xe:case Mt:return 32;case Pi:return 268435456;default:return 32}default:return 32}}var zh=!1,mr=null,gr=null,yr=null,wl=new Map,bl=new Map,_r=[],fR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uv(i,r){switch(i){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":wl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(r.pointerId)}}function xl(i,r,a,c,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=oo(r),r!==null&&sv(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function dR(i,r,a,c,y){switch(r){case"focusin":return mr=xl(mr,i,r,a,c,y),!0;case"dragenter":return gr=xl(gr,i,r,a,c,y),!0;case"mouseover":return yr=xl(yr,i,r,a,c,y),!0;case"pointerover":var _=y.pointerId;return wl.set(_,xl(wl.get(_)||null,i,r,a,c,y)),!0;case"gotpointercapture":return _=y.pointerId,bl.set(_,xl(bl.get(_)||null,i,r,a,c,y)),!0}return!1}function cv(i){var r=io(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,cu(i.priority,function(){av(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,cu(i.priority,function(){av(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=Bh(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);ws=c,a.target.dispatchEvent(c),ws=null}else return r=oo(a),r!==null&&sv(r),i.blockedOn=a,!1;r.shift()}return!0}function fv(i,r,a){xc(i)&&a.delete(r)}function hR(){zh=!1,mr!==null&&xc(mr)&&(mr=null),gr!==null&&xc(gr)&&(gr=null),yr!==null&&xc(yr)&&(yr=null),wl.forEach(fv),bl.forEach(fv)}function Nc(i,r){i.blockedOn===r&&(i.blockedOn=null,zh||(zh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,hR)))}var Mc=null;function dv(i){Mc!==i&&(Mc=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Mc===i&&(Mc=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],y=i[r+2];if(typeof c!="function"){if(qh(c||a)===null)continue;break}var _=oo(a);_!==null&&(i.splice(r,3),r-=3,Bd(_,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function sa(i){function r(k){return Nc(k,i)}mr!==null&&Nc(mr,i),gr!==null&&Nc(gr,i),yr!==null&&Nc(yr,i),wl.forEach(r),bl.forEach(r);for(var a=0;a<_r.length;a++){var c=_r[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<_r.length&&(a=_r[0],a.blockedOn===null);)cv(a),a.blockedOn===null&&_r.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],_=a[c+1],A=y[nn]||null;if(typeof _=="function")A||dv(a);else if(A){var R=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[nn]||null)R=A.formAction;else if(qh(y)!==null)continue}else R=A.action;typeof R=="function"?a[c+1]=R:(a.splice(c,3),c-=3),dv(a)}}}function hv(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Gh(i){this._internalRoot=i}Dc.prototype.render=Gh.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(o(409));var a=r.current,c=jn();ov(a,c,i,r,null,null)},Dc.prototype.unmount=Gh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;ov(i.current,2,null,i,null,null),dc(),r[ki]=null}};function Dc(i){this._internalRoot=i}Dc.prototype.unstable_scheduleHydration=function(i){if(i){var r=to();i={blockedOn:null,target:i,priority:r};for(var a=0;a<_r.length&&r!==0&&r<_r[a].priority;a++);_r.splice(a,0,i),a===0&&cv(i)}};var pv=e.version;if(pv!=="19.2.4")throw Error(o(527,pv,"19.2.4"));de.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var pR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{zn=Pc.inject(pR),kt=Pc}catch{}}return Ml.createRoot=function(i,r){if(!s(i))throw Error(o(299));var a=!1,c="",y=Ey,_=Sy,A=Ay;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=nv(i,1,!1,null,null,a,c,null,y,_,A,hv),i[ki]=r.current,Ch(i),new Gh(r)},Ml.hydrateRoot=function(i,r,a){if(!s(i))throw Error(o(299));var c=!1,y="",_=Ey,A=Sy,R=Ay,k=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),r=nv(i,1,!0,r,a??null,c,y,k,_,A,R,hv),r.context=iv(null),a=r.current,c=jn(),c=Va(c),y=ir(c),y.callback=null,or(a,y,c),a=c,r.current.lanes=a,dn(r,a),Yi(r),i[ki]=r.current,Ch(i),new Dc(r)},Ml.version="19.2.4",Ml}var Cv;function IR(){if(Cv)return $h.exports;Cv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$h.exports=CR(),$h.exports}var RR=IR();const wR=bE(RR),bR=Object.prototype.toString,xR=t=>bR.call(t)==="[object Error]",NR=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function MR(t){if(!(t&&xR(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:o}=t;return n==="Load failed"?o===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:NR.has(n)}function DR(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Vc(t,e,{min:n=0,allowInfinity:o=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${o?" or Infinity":""}.`);if(!o&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}class xE extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function PR(t,e){const n=Math.max(1,t+1),o=e.randomize?Math.random()+1:1;let s=Math.round(o*e.minTimeout*e.factor**(n-1));return s=Math.min(s,e.maxTimeout),s}function Iv(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function VR({error:t,attemptNumber:e,retriesConsumed:n,startTime:o,options:s}){var I,M,L,V;const l=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(l instanceof xE)throw l.originalError;const u=Number.isFinite(s.retries)?Math.max(0,s.retries-n):s.retries,d=s.maxRetryTime??Number.POSITIVE_INFINITY,g=Object.freeze({error:l,attemptNumber:e,retriesLeft:u,retriesConsumed:n});if(await s.onFailedAttempt(g),Iv(o,d)<=0)throw l;const m=await s.shouldConsumeRetry(g),v=Iv(o,d);if(v<=0||u<=0)throw l;if(l instanceof TypeError&&!MR(l)){if(m)throw l;return(I=s.signal)==null||I.throwIfAborted(),!1}if(!await s.shouldRetry(g))throw l;if(!m)return(M=s.signal)==null||M.throwIfAborted(),!1;const E=PR(n,s),S=Math.min(E,v);return(L=s.signal)==null||L.throwIfAborted(),S>0&&await new Promise(($,X)=>{var he,W;const J=()=>{var D;clearTimeout(ne),(D=s.signal)==null||D.removeEventListener("abort",J),X(s.signal.reason)},ne=setTimeout(()=>{var D;(D=s.signal)==null||D.removeEventListener("abort",J),$()},S);s.unref&&((he=ne.unref)==null||he.call(ne)),(W=s.signal)==null||W.addEventListener("abort",J,{once:!0})}),(V=s.signal)==null||V.throwIfAborted(),!0}async function UR(t,e={}){var l,u,d;if(e={...e},DR(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),Vc("factor",e.factor,{min:0,allowInfinity:!1}),Vc("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Vc("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Vc("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(l=e.signal)==null||l.throwIfAborted();let n=0,o=0;const s=performance.now();for(;!Number.isFinite(e.retries)||o<=e.retries;){n++;try{(u=e.signal)==null||u.throwIfAborted();const g=await t(n);return(d=e.signal)==null||d.throwIfAborted(),g}catch(g){await VR({error:g,attemptNumber:n,retriesConsumed:o,startTime:s,options:e})&&o++}}throw new Error("Retry attempts exhausted without throwing an error.")}var kR={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let LR,OR;function FR(){return{geminiUrl:LR,vertexUrl:OR}}function BR(t,e,n,o){var s,l;if(!(t!=null&&t.baseUrl)){const u=FR();return e?(s=u.vertexUrl)!==null&&s!==void 0?s:n:(l=u.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mo{}function ge(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function h(t,e,n){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const g=t[d];if(Array.isArray(n))for(let m=0;m<g.length;m++){const v=g[m];h(v,e.slice(l+1),n[m])}else for(const m of g)h(m,e.slice(l+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const g=t[d];h(g[0],e.slice(l+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(o+1),n)):n}else return n}else t=t[s]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function qR(t,e){for(const[n,o]of Object.entries(e)){const s=n.split("."),l=o.split("."),u=new Set;let d=-1;for(let g=0;g<s.length;g++)if(s[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const m=l[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}cp(t,s,l,0,u)}}function cp(t,e,n,o,s){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const g of d[u])cp(g,e,n,o+1,s)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!s.has(m)),g={};for(const m of d)g[m]=u[m];for(const[m,v]of Object.entries(g)){const E=[];for(const S of n.slice(o))S==="*"?E.push(m):E.push(S);h(u,E,v)}for(const m of d)delete u[m]}}else{const u=t;l in u&&cp(u[l],e,n,o+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zR(t){const e={},n=f(t,["operationName"]);n!=null&&h(e,["operationName"],n);const o=f(t,["resourceName"]);return o!=null&&h(e,["_url","resourceName"],o),e}function GR(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],YR(u)),e}function HR(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],$R(u)),e}function YR(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>JR(u))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function $R(t){const e={},n=f(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>KR(u))),h(e,["generatedVideos"],l)}const o=f(t,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const s=f(t,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function JR(t){const e={},n=f(t,["video"]);return n!=null&&h(e,["video"],ew(n)),e}function KR(t){const e={},n=f(t,["_self"]);return n!=null&&h(e,["video"],tw(n)),e}function QR(t){const e={},n=f(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function XR(t){const e={},n=f(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function WR(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],ZR(u)),e}function ZR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const s=f(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function NE(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],jR(u)),e}function jR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const s=f(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function ew(t){const e={},n=f(t,["uri"]);n!=null&&h(e,["uri"],n);const o=f(t,["encodedVideo"]);o!=null&&h(e,["videoBytes"],Xp(o));const s=f(t,["encoding"]);return s!=null&&h(e,["mimeType"],s),e}function tw(t){const e={},n=f(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const o=f(t,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],Xp(o));const s=f(t,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rv;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Rv||(Rv={}));var wv;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(wv||(wv={}));var bv;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(bv||(bv={}));var bt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(bt||(bt={}));var xv;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(xv||(xv={}));var Nv;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Nv||(Nv={}));var Mv;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Mv||(Mv={}));var Dv;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Dv||(Dv={}));var Pv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Pv||(Pv={}));var Vv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Vv||(Vv={}));var Uv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Uv||(Uv={}));var kv;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(kv||(kv={}));var Lv;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Lv||(Lv={}));var Ov;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Ov||(Ov={}));var Fv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Fv||(Fv={}));var Bv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Bv||(Bv={}));var qv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(qv||(qv={}));var zv;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(zv||(zv={}));var Gv;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Gv||(Gv={}));var Hv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Hv||(Hv={}));var Yv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Yv||(Yv={}));var of;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(of||(of={}));var $v;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})($v||($v={}));var Jv;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Jv||(Jv={}));var Kv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Kv||(Kv={}));var fp;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(fp||(fp={}));var Qv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Qv||(Qv={}));var Xv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Xv||(Xv={}));var dp;(function(t){t.COLLECTION="COLLECTION"})(dp||(dp={}));var Wv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Wv||(Wv={}));var Zv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Zv||(Zv={}));var jv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(jv||(jv={}));var e0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(e0||(e0={}));var t0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(t0||(t0={}));var n0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(n0||(n0={}));var i0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(i0||(i0={}));var o0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(o0||(o0={}));var r0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(r0||(r0={}));var s0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(s0||(s0={}));var a0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(a0||(a0={}));var l0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(l0||(l0={}));var u0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(u0||(u0={}));var c0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(c0||(c0={}));var f0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(f0||(f0={}));var d0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(d0||(d0={}));var h0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(h0||(h0={}));var p0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(p0||(p0={}));var m0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(m0||(m0={}));var g0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(g0||(g0={}));var y0;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(y0||(y0={}));var _0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_0||(_0={}));var v0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(v0||(v0={}));var T0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(T0||(T0={}));var E0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(E0||(E0={}));var S0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(S0||(S0={}));var A0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(A0||(A0={}));var da;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(da||(da={}));class hp{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Dl{get text(){var e,n,o,s,l,u,d,g;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const S of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[I,M]of Object.entries(S))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(M!==null||M!==void 0)&&E.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,n,o,s,l,u,d,g;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,I]of Object.entries(E))S!=="inlineData"&&(I!==null||I!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,o,s,l,u,d,g;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,o,s,l,u,d,g,m;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,o,s,l,u,d,g,m;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class C0{}class I0{}class nw{}class iw{}class ow{}class rw{}class R0{}class w0{}class b0{}class sw{}class rf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new rf;let s;const l=e;return n?s=HR(l):s=GR(l),Object.assign(o,s),o}}class x0{}class N0{}class M0{}class D0{}class aw{}class lw{}class uw{}class Wp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Wp,l=WR(e);return Object.assign(o,l),o}}class cw{}class fw{}class dw{}class hw{}class P0{}class pw{get text(){var e,n,o;let s="",l=!1;const u=[];for(const d of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[g,m]of Object.entries(d))g!=="text"&&g!=="thought"&&m!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,s+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,n,o;let s="";const l=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(s+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class mw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Zp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Zp,l=NE(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function it(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ME(t,e){const n=it(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function DE(t){return Array.isArray(t)?t.map(e=>sf(e)):[sf(t)]}function sf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function PE(t){const e=sf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function VE(t){const e=sf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function V0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function UE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>V0(e)):[V0(t)]}function pp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function U0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function k0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function _n(t){if(t==null)throw new Error("ContentUnion is required");return pp(t)?t:{role:"user",parts:UE(t)}}function jp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=_n(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=_n(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>_n(n)):[_n(e)]}function gi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(U0(t)||k0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[_n(t)]}const e=[],n=[],o=pp(t[0]);for(const s of t){const l=pp(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(U0(s)||k0(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:UE(n)}),e}function gw(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(bt).includes(n[0].toUpperCase())?n[0].toUpperCase():bt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(bt).includes(o.toUpperCase())?o.toUpperCase():bt.TYPE_UNSPECIFIED})}}function pa(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&gw(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(bt).includes(d.toUpperCase())?d.toUpperCase():bt.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=pa(d);else if(o.includes(u)){const g=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}g.push(pa(m))}e[u]=g}else if(s.includes(u)){const g={};for(const[m,v]of Object.entries(d))g[m]=pa(v);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function em(t){return pa(t)}function tm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function nm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ia(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=pa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=pa(e.response));return t}function Ra(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function yw(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Do(t,e){if(typeof e!="string")throw new Error("name must be a string");return yw(t,e,"cachedContents")}function kE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ur(t){return Xp(t)}function _w(t){return t!=null&&typeof t=="object"&&"name"in t}function vw(t){return t!=null&&typeof t=="object"&&"video"in t}function Tw(t){return t!=null&&typeof t=="object"&&"uri"in t}function LE(t){var e;let n;if(_w(t)&&(n=t.name),!(Tw(t)&&(n=t.uri,n===void 0))&&!(vw(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function OE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function FE(t){for(const e of["models","tunedModels","publisherModels"])if(Ew(t,e))return t[e];return[]}function Ew(t,e){return t!==null&&typeof t=="object"&&e in t}function Sw(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Aw(t,e={}){const n=[],o=new Set;for(const s of t){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const u=Sw(s,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function BE(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Cw(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function qE(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let l=!1;for(const u of s){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function wa(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function zE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iw(t){const e={},n=f(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const o=f(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>r1(u))),h(e,["inlinedResponses"],l)}const s=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function Rw(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const o=f(t,["gcsDestination","outputUriPrefix"]);o!=null&&h(e,["gcsUri"],o);const s=f(t,["bigqueryDestination","outputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function ww(t){const e={},n=f(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const o=f(t,["gcsUri"]);o!=null&&h(e,["gcsDestination","outputUriPrefix"],o);const s=f(t,["bigqueryUri"]);if(s!=null&&h(e,["bigqueryDestination","outputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Qc(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata","displayName"]);o!=null&&h(e,["displayName"],o);const s=f(t,["metadata","state"]);s!=null&&h(e,["state"],zE(s));const l=f(t,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=f(t,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(t,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(t,["metadata","model"]);g!=null&&h(e,["model"],g);const m=f(t,["metadata","output"]);return m!=null&&h(e,["dest"],Iw(qE(m))),e}function mp(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["displayName"]);o!=null&&h(e,["displayName"],o);const s=f(t,["state"]);s!=null&&h(e,["state"],zE(s));const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(t,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(t,["endTime"]);g!=null&&h(e,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&h(e,["updateTime"],m);const v=f(t,["model"]);v!=null&&h(e,["model"],v);const E=f(t,["inputConfig"]);E!=null&&h(e,["src"],bw(E));const S=f(t,["outputConfig"]);S!=null&&h(e,["dest"],Rw(qE(S)));const I=f(t,["completionStats"]);return I!=null&&h(e,["completionStats"],I),e}function bw(t){const e={},n=f(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const o=f(t,["gcsSource","uris"]);o!=null&&h(e,["gcsUri"],o);const s=f(t,["bigquerySource","inputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function xw(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&h(n,["fileName"],o);const s=f(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>o1(t,u))),h(n,["requests","requests"],l)}return n}function Nw(t){const e={},n=f(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const o=f(t,["gcsUri"]);o!=null&&h(e,["gcsSource","uris"],o);const s=f(t,["bigqueryUri"]);if(s!=null&&h(e,["bigquerySource","inputUri"],s),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Mw(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Dw(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],wa(t,o)),n}function Pw(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],wa(t,o)),n}function Vw(t){const e={},n=f(t,["content"]);n!=null&&h(e,["content"],n);const o=f(t,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],Uw(o));const s=f(t,["tokenCount"]);s!=null&&h(e,["tokenCount"],s);const l=f(t,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(t,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(t,["index"]);g!=null&&h(e,["index"],g);const m=f(t,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const v=f(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>I)),h(e,["safetyRatings"],S)}const E=f(t,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function Uw(t){const e={},n=f(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["citations"],o)}return e}function GE(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>d1(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function kw(t,e){const n={},o=f(t,["displayName"]);if(e!==void 0&&o!=null&&h(e,["batch","displayName"],o),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Lw(t,e){const n={},o=f(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const s=f(t,["dest"]);return e!==void 0&&s!=null&&h(e,["outputConfig"],ww(Cw(s))),n}function L0(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],it(t,o));const s=f(e,["src"]);s!=null&&h(n,["batch","inputConfig"],xw(t,BE(t,s)));const l=f(e,["config"]);return l!=null&&kw(l,n),n}function Ow(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["model"],it(t,o));const s=f(e,["src"]);s!=null&&h(n,["inputConfig"],Nw(BE(t,s)));const l=f(e,["config"]);return l!=null&&Lw(l,n),n}function Fw(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&h(e,["batch","displayName"],o),n}function Bw(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["_url","model"],it(t,o));const s=f(e,["src"]);s!=null&&h(n,["batch","inputConfig"],Jw(t,s));const l=f(e,["config"]);return l!=null&&Fw(l,n),n}function qw(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],wa(t,o)),n}function zw(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],wa(t,o)),n}function Gw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);return l!=null&&h(e,["error"],l),e}function Hw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);return l!=null&&h(e,["error"],l),e}function Yw(t,e){const n={},o=f(e,["contents"]);if(o!=null){let l=jp(t,o);Array.isArray(l)&&(l=l.map(u=>u)),h(n,["requests[]","request","content"],l)}const s=f(e,["config"]);return s!=null&&(h(n,["_self"],$w(s,n)),qR(n,{"requests[].*":"requests[].request.*"})),n}function $w(t,e){const n={},o=f(t,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const s=f(t,["title"]);e!==void 0&&s!=null&&h(e,["requests[]","title"],s);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Jw(t,e){const n={},o=f(e,["fileName"]);o!=null&&h(n,["file_name"],o);const s=f(e,["inlinedRequests"]);return s!=null&&h(n,["requests"],Yw(t,s)),n}function Kw(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Qw(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Xw(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&h(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ww(t,e,n){const o={},s=f(e,["systemInstruction"]);n!==void 0&&s!=null&&h(n,["systemInstruction"],GE(_n(s)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(o,["topP"],u);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(o,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(o,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&h(o,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&h(o,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&h(o,["presencePenalty"],I);const M=f(e,["frequencyPenalty"]);M!=null&&h(o,["frequencyPenalty"],M);const L=f(e,["seed"]);L!=null&&h(o,["seed"],L);const V=f(e,["responseMimeType"]);V!=null&&h(o,["responseMimeType"],V);const $=f(e,["responseSchema"]);$!=null&&h(o,["responseSchema"],em($));const X=f(e,["responseJsonSchema"]);if(X!=null&&h(o,["responseJsonSchema"],X),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=f(e,["safetySettings"]);if(n!==void 0&&J!=null){let P=J;Array.isArray(P)&&(P=P.map(Ce=>h1(Ce))),h(n,["safetySettings"],P)}const ne=f(e,["tools"]);if(n!==void 0&&ne!=null){let P=Ra(ne);Array.isArray(P)&&(P=P.map(Ce=>m1(Ia(Ce)))),h(n,["tools"],P)}const he=f(e,["toolConfig"]);if(n!==void 0&&he!=null&&h(n,["toolConfig"],p1(he)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=f(e,["cachedContent"]);n!==void 0&&W!=null&&h(n,["cachedContent"],Do(t,W));const D=f(e,["responseModalities"]);D!=null&&h(o,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&h(o,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&h(o,["speechConfig"],tm(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(o,["thinkingConfig"],U);const O=f(e,["imageConfig"]);O!=null&&h(o,["imageConfig"],i1(O));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&h(o,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function Zw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>Vw(m))),h(e,["candidates"],g)}const s=f(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const l=f(t,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(t,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function jw(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],wa(t,o)),n}function e1(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],wa(t,o)),n}function t1(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function n1(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function i1(t){const e={},n=f(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const o=f(t,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function o1(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["request","model"],it(t,o));const s=f(e,["contents"]);if(s!=null){let d=gi(s);Array.isArray(d)&&(d=d.map(g=>GE(g))),h(n,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(n,["metadata"],l);const u=f(e,["config"]);return u!=null&&h(n,["request","generationConfig"],Ww(t,u,f(n,["request"],{}))),n}function r1(t){const e={},n=f(t,["response"]);n!=null&&h(e,["response"],Zw(n));const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["error"]);return s!=null&&h(e,["error"],s),e}function s1(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);if(e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function a1(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const l=f(t,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),n}function l1(t){const e={},n=f(t,["config"]);return n!=null&&s1(n,e),e}function u1(t){const e={},n=f(t,["config"]);return n!=null&&a1(n,e),e}function c1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Qc(u))),h(e,["batchJobs"],l)}return e}function f1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>mp(u))),h(e,["batchJobs"],l)}return e}function d1(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],Kw(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],Qw(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],Mw(g));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const v=f(t,["thought"]);v!=null&&h(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function h1(t){const e={},n=f(t,["category"]);if(n!=null&&h(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(t,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function p1(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],Xw(o)),e}function m1(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],t1(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],n1(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wo;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(wo||(wo={}));class gs{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(s=u.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g1 extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new gs(wo.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=L0(this.apiClient,e),o=n._url,s=ge("{model}:batchGenerateContent",o),d=n.batch.inputConfig.requests,g=d.requests,m=[];for(const v of g){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=S,E.request=I}m.push(E)}return d.requests=m,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${s}`;else if(u)o.dest=`${u}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Ow(this.apiClient,e);return d=ge("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>mp(v))}else{const m=L0(this.apiClient,e);return d=ge("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Qc(v))}}async createEmbeddingsInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Bw(this.apiClient,e);return l=ge("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>Qc(g))}}async get(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=e1(this.apiClient,e);return d=ge("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>mp(v))}else{const m=jw(this.apiClient,e);return d=ge("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Qc(v))}}async cancel(e){var n,o,s,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=Pw(this.apiClient,e);u=ge("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=Dw(this.apiClient,e);u=ge("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=u1(e);return d=ge("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=f1(v),S=new P0;return Object.assign(S,E),S})}else{const m=l1(e);return d=ge("batches",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=c1(v),S=new P0;return Object.assign(S,E),S})}}async delete(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=zw(this.apiClient,e);return d=ge("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Hw(v))}else{const m=qw(this.apiClient,e);return d=ge("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Gw(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y1(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function O0(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>B1(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function _1(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const l=f(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let v=gi(u);Array.isArray(v)&&(v=v.map(E=>O0(E))),h(e,["contents"],v)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],O0(_n(d)));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>z1(E))),h(e,["tools"],v)}const m=f(t,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],q1(m)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function v1(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const l=f(t,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let E=gi(u);Array.isArray(E)&&(E=E.map(S=>S)),h(e,["contents"],E)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],_n(d));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(S=>G1(S))),h(e,["tools"],E)}const m=f(t,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const v=f(t,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),n}function T1(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["model"],ME(t,o));const s=f(e,["config"]);return s!=null&&_1(s,n),n}function E1(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["model"],ME(t,o));const s=f(e,["config"]);return s!=null&&v1(s,n),n}function S1(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],Do(t,o)),n}function A1(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],Do(t,o)),n}function C1(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function I1(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function R1(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function w1(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function b1(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&h(e,["allowedFunctionNames"],n);const o=f(t,["mode"]);if(o!=null&&h(e,["mode"],o),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function x1(t){const e={},n=f(t,["description"]);n!=null&&h(e,["description"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["parameters"]);s!=null&&h(e,["parameters"],s);const l=f(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(t,["response"]);u!=null&&h(e,["response"],u);const d=f(t,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function N1(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],Do(t,o)),n}function M1(t,e){const n={},o=f(e,["name"]);return o!=null&&h(n,["_url","name"],Do(t,o)),n}function D1(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function P1(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function V1(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function U1(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function k1(t){const e={},n=f(t,["config"]);return n!=null&&V1(n,e),e}function L1(t){const e={},n=f(t,["config"]);return n!=null&&U1(n,e),e}function O1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function F1(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function B1(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],R1(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],w1(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],y1(g));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const v=f(t,["thought"]);v!=null&&h(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function q1(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&h(e,["retrievalConfig"],n);const o=f(t,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],b1(o)),e}function z1(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],D1(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],P1(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function G1(t){const e={},n=f(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(t,["codeExecution"]);s!=null&&h(e,["codeExecution"],s);const l=f(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>x1(S))),h(e,["functionDeclarations"],E)}const d=f(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function H1(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),n}function Y1(t,e){const n={},o=f(t,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const s=f(t,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),n}function $1(t,e){const n={},o=f(e,["name"]);o!=null&&h(n,["_url","name"],Do(t,o));const s=f(e,["config"]);return s!=null&&H1(s,n),n}function J1(t,e){const n={},o=f(e,["name"]);o!=null&&h(n,["_url","name"],Do(t,o));const s=f(e,["config"]);return s!=null&&Y1(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K1 extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new gs(wo.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=E1(this.apiClient,e);return d=ge("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=T1(this.apiClient,e);return d=ge("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=M1(this.apiClient,e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=N1(this.apiClient,e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=A1(this.apiClient,e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=I1(v),S=new M0;return Object.assign(S,E),S})}else{const m=S1(this.apiClient,e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=C1(v),S=new M0;return Object.assign(S,E),S})}}async update(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=J1(this.apiClient,e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=$1(this.apiClient,e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=L1(e);return d=ge("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=F1(v),S=new D0;return Object.assign(S,E),S})}else{const m=k1(e);return d=ge("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=O1(v),S=new D0;return Object.assign(S,E),S})}}}function af(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}function F0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(t){return this instanceof Pe?(this.v=t,this):new Pe(t)}function bi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(I){return function(M){return Promise.resolve(M).then(I,E)}}function d(I,M){o[I]&&(s[I]=function(L){return new Promise(function(V,$){l.push([I,L,V,$])>1||g(I,L)})},M&&(s[I]=M(s[I])))}function g(I,M){try{m(o[I](M))}catch(L){S(l[0][3],L)}}function m(I){I.value instanceof Pe?Promise.resolve(I.value.v).then(v,E):S(l[0][2],I)}function v(I){g("next",I)}function E(I){g("throw",I)}function S(I,M){I(M),l.shift(),l.length&&g(l[0][0],l[0][1])}}function xi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof F0=="function"?F0(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(u){return new Promise(function(d,g){u=t[l](u),s(d,g,u.done,u.value)})}}function s(l,u,d,g){Promise.resolve(g).then(function(m){l({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q1(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:HE(n)}function HE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function X1(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function B0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let l=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),l&&!HE(t[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class W1{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Z1(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Z1{constructor(e,n,o,s={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),X1(l)}async sendMessage(e){var n;await this.sendPromise;const o=_n(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,u,d;const g=await s,m=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(E))!==null&&d!==void 0?d:[]);const I=m?[m]:[];this.recordHistory(o,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=_n(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?B0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return bi(this,arguments,function*(){var s,l,u,d,g,m;const v=[];try{for(var E=!0,S=xi(e),I;I=yield Pe(S.next()),s=I.done,!s;E=!0){d=I.value,E=!1;const M=d;if(Q1(M)){const L=(m=(g=M.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;L!==void 0&&v.push(L)}yield yield Pe(M)}}catch(M){l={error:M}}finally{try{!E&&!s&&(u=S.return)&&(yield Pe(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(n,v)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(l=>l.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...B0(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Yl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j1(t){const e={},n=f(t,["file"]);return n!=null&&h(e,["file"],n),e}function eb(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function tb(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","file"],LE(n)),e}function nb(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function ib(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","file"],LE(n)),e}function ob(t){const e={},n=f(t,["uris"]);return n!=null&&h(e,["uris"],n),e}function rb(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function sb(t){const e={},n=f(t,["config"]);return n!=null&&rb(n,e),e}function ab(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}function lb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),h(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ub extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new gs(wo.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sb(e);return l=ge("files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const m=ab(g),v=new cw;return Object.assign(v,m),v})}}async createInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=j1(e);return l=ge("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const m=eb(g),v=new fw;return Object.assign(v,m),v})}}async get(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ib(e);return l=ge("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tb(e);return l=ge("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const m=nb(g),v=new dw;return Object.assign(v,m),v})}}async registerFilesInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ob(e);return l=ge("files:register",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const m=lb(g),v=new hw;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xc(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function cb(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Rb(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function fb(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function db(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hb(t){const e={},n=f(t,["description"]);n!=null&&h(e,["description"],n);const o=f(t,["name"]);o!=null&&h(e,["name"],o);const s=f(t,["parameters"]);s!=null&&h(e,["parameters"],s);const l=f(t,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(t,["response"]);u!=null&&h(e,["response"],u);const d=f(t,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function pb(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const o=f(t,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const s=f(t,["audioTimestamp"]);s!=null&&h(e,["audioTimestamp"],s);const l=f(t,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(t,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(t,["logprobs"]);g!=null&&h(e,["logprobs"],g);const m=f(t,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const v=f(t,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const E=f(t,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const S=f(t,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const I=f(t,["responseMimeType"]);I!=null&&h(e,["responseMimeType"],I);const M=f(t,["responseModalities"]);M!=null&&h(e,["responseModalities"],M);const L=f(t,["responseSchema"]);L!=null&&h(e,["responseSchema"],L);const V=f(t,["routingConfig"]);V!=null&&h(e,["routingConfig"],V);const $=f(t,["seed"]);$!=null&&h(e,["seed"],$);const X=f(t,["speechConfig"]);X!=null&&h(e,["speechConfig"],X);const J=f(t,["stopSequences"]);J!=null&&h(e,["stopSequences"],J);const ne=f(t,["temperature"]);ne!=null&&h(e,["temperature"],ne);const he=f(t,["thinkingConfig"]);he!=null&&h(e,["thinkingConfig"],he);const W=f(t,["topK"]);W!=null&&h(e,["topK"],W);const D=f(t,["topP"]);if(D!=null&&h(e,["topP"],D),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mb(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function gb(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function yb(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],nm(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const M=f(t,["systemInstruction"]);e!==void 0&&M!=null&&h(e,["setup","systemInstruction"],cb(_n(M)));const L=f(t,["tools"]);if(e!==void 0&&L!=null){let W=Ra(L);Array.isArray(W)&&(W=W.map(D=>bb(Ia(D)))),h(e,["setup","tools"],W)}const V=f(t,["sessionResumption"]);e!==void 0&&V!=null&&h(e,["setup","sessionResumption"],wb(V));const $=f(t,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const X=f(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const J=f(t,["realtimeInputConfig"]);e!==void 0&&J!=null&&h(e,["setup","realtimeInputConfig"],J);const ne=f(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&h(e,["setup","contextWindowCompression"],ne);const he=f(t,["proactivity"]);if(e!==void 0&&he!=null&&h(e,["setup","proactivity"],he),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function _b(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],pb(o));const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],nm(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const M=f(t,["systemInstruction"]);e!==void 0&&M!=null&&h(e,["setup","systemInstruction"],_n(M));const L=f(t,["tools"]);if(e!==void 0&&L!=null){let D=Ra(L);Array.isArray(D)&&(D=D.map(N=>xb(Ia(N)))),h(e,["setup","tools"],D)}const V=f(t,["sessionResumption"]);e!==void 0&&V!=null&&h(e,["setup","sessionResumption"],V);const $=f(t,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const X=f(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const J=f(t,["realtimeInputConfig"]);e!==void 0&&J!=null&&h(e,["setup","realtimeInputConfig"],J);const ne=f(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&h(e,["setup","contextWindowCompression"],ne);const he=f(t,["proactivity"]);e!==void 0&&he!=null&&h(e,["setup","proactivity"],he);const W=f(t,["explicitVadSignal"]);return e!==void 0&&W!=null&&h(e,["setup","explicitVadSignal"],W),n}function vb(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["setup","model"],it(t,o));const s=f(e,["config"]);return s!=null&&h(n,["config"],yb(s,n)),n}function Tb(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["setup","model"],it(t,o));const s=f(e,["config"]);return s!=null&&h(n,["config"],_b(s,n)),n}function Eb(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function Sb(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),h(e,["weightedPrompts"],o)}return e}function Ab(t){const e={},n=f(t,["media"]);if(n!=null){let m=DE(n);Array.isArray(m)&&(m=m.map(v=>Xc(v))),h(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&h(e,["audio"],Xc(VE(o)));const s=f(t,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const l=f(t,["video"]);l!=null&&h(e,["video"],Xc(PE(l)));const u=f(t,["text"]);u!=null&&h(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(t,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function Cb(t){const e={},n=f(t,["media"]);if(n!=null){let m=DE(n);Array.isArray(m)&&(m=m.map(v=>v)),h(e,["mediaChunks"],m)}const o=f(t,["audio"]);o!=null&&h(e,["audio"],VE(o));const s=f(t,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const l=f(t,["video"]);l!=null&&h(e,["video"],PE(l));const u=f(t,["text"]);u!=null&&h(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(t,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function Ib(t){const e={},n=f(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const o=f(t,["serverContent"]);o!=null&&h(e,["serverContent"],o);const s=f(t,["toolCall"]);s!=null&&h(e,["toolCall"],s);const l=f(t,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=f(t,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],Nb(u));const d=f(t,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(t,["sessionResumptionUpdate"]);g!=null&&h(e,["sessionResumptionUpdate"],g);const m=f(t,["voiceActivityDetectionSignal"]);m!=null&&h(e,["voiceActivityDetectionSignal"],m);const v=f(t,["voiceActivity"]);return v!=null&&h(e,["voiceActivity"],Mb(v)),e}function Rb(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],fb(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],db(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],Xc(g));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const v=f(t,["thought"]);v!=null&&h(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function wb(t){const e={},n=f(t,["handle"]);if(n!=null&&h(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bb(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],mb(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],gb(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function xb(t){const e={},n=f(t,["retrieval"]);n!=null&&h(e,["retrieval"],n);const o=f(t,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(t,["codeExecution"]);s!=null&&h(e,["codeExecution"],s);const l=f(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>hb(S))),h(e,["functionDeclarations"],E)}const d=f(t,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(t,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const m=f(t,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function Nb(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const o=f(t,["cachedContentTokenCount"]);o!=null&&h(e,["cachedContentTokenCount"],o);const s=f(t,["candidatesTokenCount"]);s!=null&&h(e,["responseTokenCount"],s);const l=f(t,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=f(t,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(t,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(t,["promptTokensDetails"]);if(g!=null){let I=g;Array.isArray(I)&&(I=I.map(M=>M)),h(e,["promptTokensDetails"],I)}const m=f(t,["cacheTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(M=>M)),h(e,["cacheTokensDetails"],I)}const v=f(t,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(M=>M)),h(e,["responseTokensDetails"],I)}const E=f(t,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(M=>M)),h(e,["toolUsePromptTokensDetails"],I)}const S=f(t,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}function Mb(t){const e={},n=f(t,["type"]);return n!=null&&h(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Db(t,e){const n={},o=f(t,["data"]);if(o!=null&&h(n,["data"],o),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&h(n,["mimeType"],s),n}function Pb(t,e){const n={},o=f(t,["content"]);o!=null&&h(n,["content"],o);const s=f(t,["citationMetadata"]);s!=null&&h(n,["citationMetadata"],Vb(s));const l=f(t,["tokenCount"]);l!=null&&h(n,["tokenCount"],l);const u=f(t,["finishReason"]);u!=null&&h(n,["finishReason"],u);const d=f(t,["avgLogprobs"]);d!=null&&h(n,["avgLogprobs"],d);const g=f(t,["groundingMetadata"]);g!=null&&h(n,["groundingMetadata"],g);const m=f(t,["index"]);m!=null&&h(n,["index"],m);const v=f(t,["logprobsResult"]);v!=null&&h(n,["logprobsResult"],v);const E=f(t,["safetyRatings"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(M=>M)),h(n,["safetyRatings"],I)}const S=f(t,["urlContextMetadata"]);return S!=null&&h(n,["urlContextMetadata"],S),n}function Vb(t,e){const n={},o=f(t,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),h(n,["citations"],s)}return n}function Ub(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["contents"]);if(l!=null){let u=gi(l);Array.isArray(u)&&(u=u.map(d=>d)),h(o,["contents"],u)}return o}function kb(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["tokensInfo"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(n,["tokensInfo"],l)}return n}function Lb(t,e){const n={},o=f(t,["values"]);o!=null&&h(n,["values"],o);const s=f(t,["statistics"]);return s!=null&&h(n,["statistics"],Ob(s)),n}function Ob(t,e){const n={},o=f(t,["truncated"]);o!=null&&h(n,["truncated"],o);const s=f(t,["token_count"]);return s!=null&&h(n,["tokenCount"],s),n}function Rf(t,e){const n={},o=f(t,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Jx(u))),h(n,["parts"],l)}const s=f(t,["role"]);return s!=null&&h(n,["role"],s),n}function Fb(t,e){const n={},o=f(t,["controlType"]);o!=null&&h(n,["controlType"],o);const s=f(t,["enableControlImageComputation"]);return s!=null&&h(n,["computeControl"],s),n}function Bb(t,e){const n={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function qb(t,e,n){const o={},s=f(t,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],_n(s));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>KE(g))),h(e,["tools"],d)}const u=f(t,["generationConfig"]);return e!==void 0&&u!=null&&h(e,["generationConfig"],Dx(u)),o}function zb(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["contents"]);if(l!=null){let d=gi(l);Array.isArray(d)&&(d=d.map(g=>Rf(g))),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&Bb(u),o}function Gb(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["contents"]);if(l!=null){let d=gi(l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&qb(u,o),o}function Hb(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["totalTokens"]);s!=null&&h(n,["totalTokens"],s);const l=f(t,["cachedContentTokenCount"]);return l!=null&&h(n,["cachedContentTokenCount"],l),n}function Yb(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["totalTokens"]);return s!=null&&h(n,["totalTokens"],s),n}function $b(t,e,n){const o={},s=f(e,["model"]);return s!=null&&h(o,["_url","name"],it(t,s)),o}function Jb(t,e,n){const o={},s=f(e,["model"]);return s!=null&&h(o,["_url","name"],it(t,s)),o}function Kb(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function Qb(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function Xb(t,e,n){const o={},s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=f(t,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(t,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(t,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const m=f(t,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=f(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const E=f(t,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(t,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const I=f(t,["includeRaiReason"]);e!==void 0&&I!=null&&h(e,["parameters","includeRaiReason"],I);const M=f(t,["language"]);e!==void 0&&M!=null&&h(e,["parameters","language"],M);const L=f(t,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const V=f(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&h(e,["parameters","outputOptions","compressionQuality"],V);const $=f(t,["addWatermark"]);e!==void 0&&$!=null&&h(e,["parameters","addWatermark"],$);const X=f(t,["labels"]);e!==void 0&&X!=null&&h(e,["labels"],X);const J=f(t,["editMode"]);e!==void 0&&J!=null&&h(e,["parameters","editMode"],J);const ne=f(t,["baseSteps"]);return e!==void 0&&ne!=null&&h(e,["parameters","editConfig","baseSteps"],ne),o}function Wb(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(m=>jx(m))),h(o,["instances[0]","referenceImages"],g)}const d=f(e,["config"]);return d!=null&&Xb(d,o),o}function Zb(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>wf(u))),h(n,["generatedImages"],l)}return n}function jb(t,e,n){const o={},s=f(t,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const l=f(t,["title"]);e!==void 0&&l!=null&&h(e,["requests[]","title"],l);const u=f(t,["outputDimensionality"]);if(e!==void 0&&u!=null&&h(e,["requests[]","outputDimensionality"],u),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function ex(t,e,n){const o={},s=f(t,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const l=f(t,["title"]);e!==void 0&&l!=null&&h(e,["instances[]","title"],l);const u=f(t,["outputDimensionality"]);e!==void 0&&u!=null&&h(e,["parameters","outputDimensionality"],u);const d=f(t,["mimeType"]);e!==void 0&&d!=null&&h(e,["instances[]","mimeType"],d);const g=f(t,["autoTruncate"]);return e!==void 0&&g!=null&&h(e,["parameters","autoTruncate"],g),o}function tx(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["contents"]);if(l!=null){let g=jp(t,l);Array.isArray(g)&&(g=g.map(m=>m)),h(o,["requests[]","content"],g)}const u=f(e,["config"]);u!=null&&jb(u,o);const d=f(e,["model"]);return d!==void 0&&h(o,["requests[]","model"],it(t,d)),o}function nx(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["contents"]);if(l!=null){let d=jp(t,l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&ex(u,o),o}function ix(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),h(n,["embeddings"],u)}const l=f(t,["metadata"]);return l!=null&&h(n,["metadata"],l),n}function ox(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["predictions[]","embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Lb(d))),h(n,["embeddings"],u)}const l=f(t,["metadata"]);return l!=null&&h(n,["metadata"],l),n}function rx(t,e){const n={},o=f(t,["endpoint"]);o!=null&&h(n,["name"],o);const s=f(t,["deployedModelId"]);return s!=null&&h(n,["deployedModelId"],s),n}function sx(t,e){const n={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["fileUri"]);o!=null&&h(n,["fileUri"],o);const s=f(t,["mimeType"]);return s!=null&&h(n,["mimeType"],s),n}function ax(t,e){const n={},o=f(t,["id"]);o!=null&&h(n,["id"],o);const s=f(t,["args"]);s!=null&&h(n,["args"],s);const l=f(t,["name"]);if(l!=null&&h(n,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function lx(t,e){const n={},o=f(t,["allowedFunctionNames"]);o!=null&&h(n,["allowedFunctionNames"],o);const s=f(t,["mode"]);if(s!=null&&h(n,["mode"],s),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function ux(t,e){const n={},o=f(t,["description"]);o!=null&&h(n,["description"],o);const s=f(t,["name"]);s!=null&&h(n,["name"],s);const l=f(t,["parameters"]);l!=null&&h(n,["parameters"],l);const u=f(t,["parametersJsonSchema"]);u!=null&&h(n,["parametersJsonSchema"],u);const d=f(t,["response"]);d!=null&&h(n,["response"],d);const g=f(t,["responseJsonSchema"]);if(g!=null&&h(n,["responseJsonSchema"],g),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function cx(t,e,n,o){const s={},l=f(e,["systemInstruction"]);n!==void 0&&l!=null&&h(n,["systemInstruction"],Rf(_n(l)));const u=f(e,["temperature"]);u!=null&&h(s,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(s,["topP"],d);const g=f(e,["topK"]);g!=null&&h(s,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const v=f(e,["maxOutputTokens"]);v!=null&&h(s,["maxOutputTokens"],v);const E=f(e,["stopSequences"]);E!=null&&h(s,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&h(s,["responseLogprobs"],S);const I=f(e,["logprobs"]);I!=null&&h(s,["logprobs"],I);const M=f(e,["presencePenalty"]);M!=null&&h(s,["presencePenalty"],M);const L=f(e,["frequencyPenalty"]);L!=null&&h(s,["frequencyPenalty"],L);const V=f(e,["seed"]);V!=null&&h(s,["seed"],V);const $=f(e,["responseMimeType"]);$!=null&&h(s,["responseMimeType"],$);const X=f(e,["responseSchema"]);X!=null&&h(s,["responseSchema"],em(X));const J=f(e,["responseJsonSchema"]);if(J!=null&&h(s,["responseJsonSchema"],J),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ne=f(e,["safetySettings"]);if(n!==void 0&&ne!=null){let Ce=ne;Array.isArray(Ce)&&(Ce=Ce.map($e=>eN($e))),h(n,["safetySettings"],Ce)}const he=f(e,["tools"]);if(n!==void 0&&he!=null){let Ce=Ra(he);Array.isArray(Ce)&&(Ce=Ce.map($e=>aN(Ia($e)))),h(n,["tools"],Ce)}const W=f(e,["toolConfig"]);if(n!==void 0&&W!=null&&h(n,["toolConfig"],sN(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=f(e,["cachedContent"]);n!==void 0&&D!=null&&h(n,["cachedContent"],Do(t,D));const N=f(e,["responseModalities"]);N!=null&&h(s,["responseModalities"],N);const x=f(e,["mediaResolution"]);x!=null&&h(s,["mediaResolution"],x);const U=f(e,["speechConfig"]);if(U!=null&&h(s,["speechConfig"],tm(U)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=f(e,["thinkingConfig"]);O!=null&&h(s,["thinkingConfig"],O);const q=f(e,["imageConfig"]);q!=null&&h(s,["imageConfig"],Lx(q));const P=f(e,["enableEnhancedCivicAnswers"]);if(P!=null&&h(s,["enableEnhancedCivicAnswers"],P),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function fx(t,e,n,o){const s={},l=f(e,["systemInstruction"]);n!==void 0&&l!=null&&h(n,["systemInstruction"],_n(l));const u=f(e,["temperature"]);u!=null&&h(s,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(s,["topP"],d);const g=f(e,["topK"]);g!=null&&h(s,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const v=f(e,["maxOutputTokens"]);v!=null&&h(s,["maxOutputTokens"],v);const E=f(e,["stopSequences"]);E!=null&&h(s,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&h(s,["responseLogprobs"],S);const I=f(e,["logprobs"]);I!=null&&h(s,["logprobs"],I);const M=f(e,["presencePenalty"]);M!=null&&h(s,["presencePenalty"],M);const L=f(e,["frequencyPenalty"]);L!=null&&h(s,["frequencyPenalty"],L);const V=f(e,["seed"]);V!=null&&h(s,["seed"],V);const $=f(e,["responseMimeType"]);$!=null&&h(s,["responseMimeType"],$);const X=f(e,["responseSchema"]);X!=null&&h(s,["responseSchema"],em(X));const J=f(e,["responseJsonSchema"]);J!=null&&h(s,["responseJsonSchema"],J);const ne=f(e,["routingConfig"]);ne!=null&&h(s,["routingConfig"],ne);const he=f(e,["modelSelectionConfig"]);he!=null&&h(s,["modelConfig"],he);const W=f(e,["safetySettings"]);if(n!==void 0&&W!=null){let ye=W;Array.isArray(ye)&&(ye=ye.map(Oe=>Oe)),h(n,["safetySettings"],ye)}const D=f(e,["tools"]);if(n!==void 0&&D!=null){let ye=Ra(D);Array.isArray(ye)&&(ye=ye.map(Oe=>KE(Ia(Oe)))),h(n,["tools"],ye)}const N=f(e,["toolConfig"]);n!==void 0&&N!=null&&h(n,["toolConfig"],N);const x=f(e,["labels"]);n!==void 0&&x!=null&&h(n,["labels"],x);const U=f(e,["cachedContent"]);n!==void 0&&U!=null&&h(n,["cachedContent"],Do(t,U));const O=f(e,["responseModalities"]);O!=null&&h(s,["responseModalities"],O);const q=f(e,["mediaResolution"]);q!=null&&h(s,["mediaResolution"],q);const P=f(e,["speechConfig"]);P!=null&&h(s,["speechConfig"],tm(P));const Ce=f(e,["audioTimestamp"]);Ce!=null&&h(s,["audioTimestamp"],Ce);const $e=f(e,["thinkingConfig"]);$e!=null&&h(s,["thinkingConfig"],$e);const ee=f(e,["imageConfig"]);if(ee!=null&&h(s,["imageConfig"],Ox(ee)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const de=f(e,["modelArmorConfig"]);return n!==void 0&&de!=null&&h(n,["modelArmorConfig"],de),s}function q0(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["contents"]);if(l!=null){let d=gi(l);Array.isArray(d)&&(d=d.map(g=>Rf(g))),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(o,["generationConfig"],cx(t,u,o)),o}function z0(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["contents"]);if(l!=null){let d=gi(l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(o,["generationConfig"],fx(t,u,o)),o}function G0(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>Pb(v))),h(n,["candidates"],m)}const l=f(t,["modelVersion"]);l!=null&&h(n,["modelVersion"],l);const u=f(t,["promptFeedback"]);u!=null&&h(n,["promptFeedback"],u);const d=f(t,["responseId"]);d!=null&&h(n,["responseId"],d);const g=f(t,["usageMetadata"]);return g!=null&&h(n,["usageMetadata"],g),n}function H0(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(E=>E)),h(n,["candidates"],v)}const l=f(t,["createTime"]);l!=null&&h(n,["createTime"],l);const u=f(t,["modelVersion"]);u!=null&&h(n,["modelVersion"],u);const d=f(t,["promptFeedback"]);d!=null&&h(n,["promptFeedback"],d);const g=f(t,["responseId"]);g!=null&&h(n,["responseId"],g);const m=f(t,["usageMetadata"]);return m!=null&&h(n,["usageMetadata"],m),n}function dx(t,e,n){const o={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=f(t,["guidanceScale"]);if(e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const m=f(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const v=f(t,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);const E=f(t,["language"]);e!==void 0&&E!=null&&h(e,["parameters","language"],E);const S=f(t,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const I=f(t,["outputCompressionQuality"]);if(e!==void 0&&I!=null&&h(e,["parameters","outputOptions","compressionQuality"],I),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=f(t,["imageSize"]);if(e!==void 0&&M!=null&&h(e,["parameters","sampleImageSize"],M),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function hx(t,e,n){const o={},s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=f(t,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(t,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(t,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const m=f(t,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=f(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const E=f(t,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(t,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const I=f(t,["includeRaiReason"]);e!==void 0&&I!=null&&h(e,["parameters","includeRaiReason"],I);const M=f(t,["language"]);e!==void 0&&M!=null&&h(e,["parameters","language"],M);const L=f(t,["outputMimeType"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","mimeType"],L);const V=f(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&h(e,["parameters","outputOptions","compressionQuality"],V);const $=f(t,["addWatermark"]);e!==void 0&&$!=null&&h(e,["parameters","addWatermark"],$);const X=f(t,["labels"]);e!==void 0&&X!=null&&h(e,["labels"],X);const J=f(t,["imageSize"]);e!==void 0&&J!=null&&h(e,["parameters","sampleImageSize"],J);const ne=f(t,["enhancePrompt"]);return e!==void 0&&ne!=null&&h(e,["parameters","enhancePrompt"],ne),o}function px(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&dx(u,o),o}function mx(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&hx(u,o),o}function gx(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>bx(d))),h(n,["generatedImages"],u)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&h(n,["positivePromptSafetyAttributes"],$E(l)),n}function yx(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>wf(d))),h(n,["generatedImages"],u)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&h(n,["positivePromptSafetyAttributes"],JE(l)),n}function _x(t,e,n){const o={},s=f(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(t,["durationSeconds"]);if(e!==void 0&&l!=null&&h(e,["parameters","durationSeconds"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(t,["resolution"]);e!==void 0&&d!=null&&h(e,["parameters","resolution"],d);const g=f(t,["personGeneration"]);if(e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(t,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const v=f(t,["enhancePrompt"]);if(e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=f(t,["lastFrame"]);e!==void 0&&E!=null&&h(e,["instances[0]","lastFrame"],bf(E));const S=f(t,["referenceImages"]);if(e!==void 0&&S!=null){let I=S;Array.isArray(I)&&(I=I.map(M=>TN(M))),h(e,["instances[0]","referenceImages"],I)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function vx(t,e,n){const o={},s=f(t,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=f(t,["fps"]);e!==void 0&&u!=null&&h(e,["parameters","fps"],u);const d=f(t,["durationSeconds"]);e!==void 0&&d!=null&&h(e,["parameters","durationSeconds"],d);const g=f(t,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const m=f(t,["aspectRatio"]);e!==void 0&&m!=null&&h(e,["parameters","aspectRatio"],m);const v=f(t,["resolution"]);e!==void 0&&v!=null&&h(e,["parameters","resolution"],v);const E=f(t,["personGeneration"]);e!==void 0&&E!=null&&h(e,["parameters","personGeneration"],E);const S=f(t,["pubsubTopic"]);e!==void 0&&S!=null&&h(e,["parameters","pubsubTopic"],S);const I=f(t,["negativePrompt"]);e!==void 0&&I!=null&&h(e,["parameters","negativePrompt"],I);const M=f(t,["enhancePrompt"]);e!==void 0&&M!=null&&h(e,["parameters","enhancePrompt"],M);const L=f(t,["generateAudio"]);e!==void 0&&L!=null&&h(e,["parameters","generateAudio"],L);const V=f(t,["lastFrame"]);e!==void 0&&V!=null&&h(e,["instances[0]","lastFrame"],Mi(V));const $=f(t,["referenceImages"]);if(e!==void 0&&$!=null){let ne=$;Array.isArray(ne)&&(ne=ne.map(he=>EN(he))),h(e,["instances[0]","referenceImages"],ne)}const X=f(t,["mask"]);e!==void 0&&X!=null&&h(e,["instances[0]","mask"],vN(X));const J=f(t,["compressionQuality"]);return e!==void 0&&J!=null&&h(e,["parameters","compressionQuality"],J),o}function Tx(t,e){const n={},o=f(t,["name"]);o!=null&&h(n,["name"],o);const s=f(t,["metadata"]);s!=null&&h(n,["metadata"],s);const l=f(t,["done"]);l!=null&&h(n,["done"],l);const u=f(t,["error"]);u!=null&&h(n,["error"],u);const d=f(t,["response","generateVideoResponse"]);return d!=null&&h(n,["response"],Cx(d)),n}function Ex(t,e){const n={},o=f(t,["name"]);o!=null&&h(n,["name"],o);const s=f(t,["metadata"]);s!=null&&h(n,["metadata"],s);const l=f(t,["done"]);l!=null&&h(n,["done"],l);const u=f(t,["error"]);u!=null&&h(n,["error"],u);const d=f(t,["response"]);return d!=null&&h(n,["response"],Ix(d)),n}function Sx(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&h(o,["instances[0]","image"],bf(u));const d=f(e,["video"]);d!=null&&h(o,["instances[0]","video"],QE(d));const g=f(e,["source"]);g!=null&&Rx(g,o);const m=f(e,["config"]);return m!=null&&_x(m,o),o}function Ax(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&h(o,["instances[0]","image"],Mi(u));const d=f(e,["video"]);d!=null&&h(o,["instances[0]","video"],XE(d));const g=f(e,["source"]);g!=null&&wx(g,o);const m=f(e,["config"]);return m!=null&&vx(m,o),o}function Cx(t,e){const n={},o=f(t,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Nx(d))),h(n,["generatedVideos"],u)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&h(n,["raiMediaFilteredCount"],s);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&h(n,["raiMediaFilteredReasons"],l),n}function Ix(t,e){const n={},o=f(t,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Mx(d))),h(n,["generatedVideos"],u)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&h(n,["raiMediaFilteredCount"],s);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&h(n,["raiMediaFilteredReasons"],l),n}function Rx(t,e,n){const o={},s=f(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const l=f(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],bf(l));const u=f(t,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],QE(u)),o}function wx(t,e,n){const o={},s=f(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const l=f(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],Mi(l));const u=f(t,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],XE(u)),o}function bx(t,e){const n={},o=f(t,["_self"]);o!=null&&h(n,["image"],Fx(o));const s=f(t,["raiFilteredReason"]);s!=null&&h(n,["raiFilteredReason"],s);const l=f(t,["_self"]);return l!=null&&h(n,["safetyAttributes"],$E(l)),n}function wf(t,e){const n={},o=f(t,["_self"]);o!=null&&h(n,["image"],YE(o));const s=f(t,["raiFilteredReason"]);s!=null&&h(n,["raiFilteredReason"],s);const l=f(t,["_self"]);l!=null&&h(n,["safetyAttributes"],JE(l));const u=f(t,["prompt"]);return u!=null&&h(n,["enhancedPrompt"],u),n}function xx(t,e){const n={},o=f(t,["_self"]);o!=null&&h(n,["mask"],YE(o));const s=f(t,["labels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(n,["labels"],l)}return n}function Nx(t,e){const n={},o=f(t,["video"]);return o!=null&&h(n,["video"],yN(o)),n}function Mx(t,e){const n={},o=f(t,["_self"]);return o!=null&&h(n,["video"],_N(o)),n}function Dx(t,e){const n={},o=f(t,["modelSelectionConfig"]);o!=null&&h(n,["modelConfig"],o);const s=f(t,["responseJsonSchema"]);s!=null&&h(n,["responseJsonSchema"],s);const l=f(t,["audioTimestamp"]);l!=null&&h(n,["audioTimestamp"],l);const u=f(t,["candidateCount"]);u!=null&&h(n,["candidateCount"],u);const d=f(t,["enableAffectiveDialog"]);d!=null&&h(n,["enableAffectiveDialog"],d);const g=f(t,["frequencyPenalty"]);g!=null&&h(n,["frequencyPenalty"],g);const m=f(t,["logprobs"]);m!=null&&h(n,["logprobs"],m);const v=f(t,["maxOutputTokens"]);v!=null&&h(n,["maxOutputTokens"],v);const E=f(t,["mediaResolution"]);E!=null&&h(n,["mediaResolution"],E);const S=f(t,["presencePenalty"]);S!=null&&h(n,["presencePenalty"],S);const I=f(t,["responseLogprobs"]);I!=null&&h(n,["responseLogprobs"],I);const M=f(t,["responseMimeType"]);M!=null&&h(n,["responseMimeType"],M);const L=f(t,["responseModalities"]);L!=null&&h(n,["responseModalities"],L);const V=f(t,["responseSchema"]);V!=null&&h(n,["responseSchema"],V);const $=f(t,["routingConfig"]);$!=null&&h(n,["routingConfig"],$);const X=f(t,["seed"]);X!=null&&h(n,["seed"],X);const J=f(t,["speechConfig"]);J!=null&&h(n,["speechConfig"],J);const ne=f(t,["stopSequences"]);ne!=null&&h(n,["stopSequences"],ne);const he=f(t,["temperature"]);he!=null&&h(n,["temperature"],he);const W=f(t,["thinkingConfig"]);W!=null&&h(n,["thinkingConfig"],W);const D=f(t,["topK"]);D!=null&&h(n,["topK"],D);const N=f(t,["topP"]);if(N!=null&&h(n,["topP"],N),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function Px(t,e,n){const o={},s=f(e,["model"]);return s!=null&&h(o,["_url","name"],it(t,s)),o}function Vx(t,e,n){const o={},s=f(e,["model"]);return s!=null&&h(o,["_url","name"],it(t,s)),o}function Ux(t,e){const n={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(t,["enableWidget"]);return o!=null&&h(n,["enableWidget"],o),n}function kx(t,e){const n={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(t,["timeRangeFilter"]);return o!=null&&h(n,["timeRangeFilter"],o),n}function Lx(t,e){const n={},o=f(t,["aspectRatio"]);o!=null&&h(n,["aspectRatio"],o);const s=f(t,["imageSize"]);if(s!=null&&h(n,["imageSize"],s),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function Ox(t,e){const n={},o=f(t,["aspectRatio"]);o!=null&&h(n,["aspectRatio"],o);const s=f(t,["imageSize"]);s!=null&&h(n,["imageSize"],s);const l=f(t,["personGeneration"]);l!=null&&h(n,["personGeneration"],l);const u=f(t,["outputMimeType"]);u!=null&&h(n,["imageOutputOptions","mimeType"],u);const d=f(t,["outputCompressionQuality"]);return d!=null&&h(n,["imageOutputOptions","compressionQuality"],d),n}function Fx(t,e){const n={},o=f(t,["bytesBase64Encoded"]);o!=null&&h(n,["imageBytes"],Ur(o));const s=f(t,["mimeType"]);return s!=null&&h(n,["mimeType"],s),n}function YE(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&h(n,["gcsUri"],o);const s=f(t,["bytesBase64Encoded"]);s!=null&&h(n,["imageBytes"],Ur(s));const l=f(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function bf(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=f(t,["imageBytes"]);o!=null&&h(n,["bytesBase64Encoded"],Ur(o));const s=f(t,["mimeType"]);return s!=null&&h(n,["mimeType"],s),n}function Mi(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&h(n,["gcsUri"],o);const s=f(t,["imageBytes"]);s!=null&&h(n,["bytesBase64Encoded"],Ur(s));const l=f(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function Bx(t,e,n,o){const s={},l=f(e,["pageSize"]);n!==void 0&&l!=null&&h(n,["_query","pageSize"],l);const u=f(e,["pageToken"]);n!==void 0&&u!=null&&h(n,["_query","pageToken"],u);const d=f(e,["filter"]);n!==void 0&&d!=null&&h(n,["_query","filter"],d);const g=f(e,["queryBase"]);return n!==void 0&&g!=null&&h(n,["_url","models_url"],OE(t,g)),s}function qx(t,e,n,o){const s={},l=f(e,["pageSize"]);n!==void 0&&l!=null&&h(n,["_query","pageSize"],l);const u=f(e,["pageToken"]);n!==void 0&&u!=null&&h(n,["_query","pageToken"],u);const d=f(e,["filter"]);n!==void 0&&d!=null&&h(n,["_query","filter"],d);const g=f(e,["queryBase"]);return n!==void 0&&g!=null&&h(n,["_url","models_url"],OE(t,g)),s}function zx(t,e,n){const o={},s=f(e,["config"]);return s!=null&&Bx(t,s,o),o}function Gx(t,e,n){const o={},s=f(e,["config"]);return s!=null&&qx(t,s,o),o}function Hx(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["nextPageToken"]);s!=null&&h(n,["nextPageToken"],s);const l=f(t,["_self"]);if(l!=null){let u=FE(l);Array.isArray(u)&&(u=u.map(d=>gp(d))),h(n,["models"],u)}return n}function Yx(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["nextPageToken"]);s!=null&&h(n,["nextPageToken"],s);const l=f(t,["_self"]);if(l!=null){let u=FE(l);Array.isArray(u)&&(u=u.map(d=>yp(d))),h(n,["models"],u)}return n}function $x(t,e){const n={},o=f(t,["maskMode"]);o!=null&&h(n,["maskMode"],o);const s=f(t,["segmentationClasses"]);s!=null&&h(n,["maskClasses"],s);const l=f(t,["maskDilation"]);return l!=null&&h(n,["dilation"],l),n}function gp(t,e){const n={},o=f(t,["name"]);o!=null&&h(n,["name"],o);const s=f(t,["displayName"]);s!=null&&h(n,["displayName"],s);const l=f(t,["description"]);l!=null&&h(n,["description"],l);const u=f(t,["version"]);u!=null&&h(n,["version"],u);const d=f(t,["_self"]);d!=null&&h(n,["tunedModelInfo"],lN(d));const g=f(t,["inputTokenLimit"]);g!=null&&h(n,["inputTokenLimit"],g);const m=f(t,["outputTokenLimit"]);m!=null&&h(n,["outputTokenLimit"],m);const v=f(t,["supportedGenerationMethods"]);v!=null&&h(n,["supportedActions"],v);const E=f(t,["temperature"]);E!=null&&h(n,["temperature"],E);const S=f(t,["maxTemperature"]);S!=null&&h(n,["maxTemperature"],S);const I=f(t,["topP"]);I!=null&&h(n,["topP"],I);const M=f(t,["topK"]);M!=null&&h(n,["topK"],M);const L=f(t,["thinking"]);return L!=null&&h(n,["thinking"],L),n}function yp(t,e){const n={},o=f(t,["name"]);o!=null&&h(n,["name"],o);const s=f(t,["displayName"]);s!=null&&h(n,["displayName"],s);const l=f(t,["description"]);l!=null&&h(n,["description"],l);const u=f(t,["versionId"]);u!=null&&h(n,["version"],u);const d=f(t,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(I=>rx(I))),h(n,["endpoints"],S)}const g=f(t,["labels"]);g!=null&&h(n,["labels"],g);const m=f(t,["_self"]);m!=null&&h(n,["tunedModelInfo"],uN(m));const v=f(t,["defaultCheckpointId"]);v!=null&&h(n,["defaultCheckpointId"],v);const E=f(t,["checkpoints"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(I=>I)),h(n,["checkpoints"],S)}return n}function Jx(t,e){const n={},o=f(t,["mediaResolution"]);o!=null&&h(n,["mediaResolution"],o);const s=f(t,["codeExecutionResult"]);s!=null&&h(n,["codeExecutionResult"],s);const l=f(t,["executableCode"]);l!=null&&h(n,["executableCode"],l);const u=f(t,["fileData"]);u!=null&&h(n,["fileData"],sx(u));const d=f(t,["functionCall"]);d!=null&&h(n,["functionCall"],ax(d));const g=f(t,["functionResponse"]);g!=null&&h(n,["functionResponse"],g);const m=f(t,["inlineData"]);m!=null&&h(n,["inlineData"],Db(m));const v=f(t,["text"]);v!=null&&h(n,["text"],v);const E=f(t,["thought"]);E!=null&&h(n,["thought"],E);const S=f(t,["thoughtSignature"]);S!=null&&h(n,["thoughtSignature"],S);const I=f(t,["videoMetadata"]);return I!=null&&h(n,["videoMetadata"],I),n}function Kx(t,e){const n={},o=f(t,["productImage"]);return o!=null&&h(n,["image"],Mi(o)),n}function Qx(t,e,n){const o={},s=f(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const l=f(t,["baseSteps"]);e!==void 0&&l!=null&&h(e,["parameters","baseSteps"],l);const u=f(t,["outputGcsUri"]);e!==void 0&&u!=null&&h(e,["parameters","storageUri"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const m=f(t,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const v=f(t,["addWatermark"]);e!==void 0&&v!=null&&h(e,["parameters","addWatermark"],v);const E=f(t,["outputMimeType"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","mimeType"],E);const S=f(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S);const I=f(t,["enhancePrompt"]);e!==void 0&&I!=null&&h(e,["parameters","enhancePrompt"],I);const M=f(t,["labels"]);return e!==void 0&&M!=null&&h(e,["labels"],M),o}function Xx(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["source"]);l!=null&&Zx(l,o);const u=f(e,["config"]);return u!=null&&Qx(u,o),o}function Wx(t,e){const n={},o=f(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>wf(l))),h(n,["generatedImages"],s)}return n}function Zx(t,e,n){const o={},s=f(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const l=f(t,["personImage"]);e!==void 0&&l!=null&&h(e,["instances[0]","personImage","image"],Mi(l));const u=f(t,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(g=>Kx(g))),h(e,["instances[0]","productImages"],d)}return o}function jx(t,e){const n={},o=f(t,["referenceImage"]);o!=null&&h(n,["referenceImage"],Mi(o));const s=f(t,["referenceId"]);s!=null&&h(n,["referenceId"],s);const l=f(t,["referenceType"]);l!=null&&h(n,["referenceType"],l);const u=f(t,["maskImageConfig"]);u!=null&&h(n,["maskImageConfig"],$x(u));const d=f(t,["controlImageConfig"]);d!=null&&h(n,["controlImageConfig"],Fb(d));const g=f(t,["styleImageConfig"]);g!=null&&h(n,["styleImageConfig"],g);const m=f(t,["subjectImageConfig"]);return m!=null&&h(n,["subjectImageConfig"],m),n}function $E(t,e){const n={},o=f(t,["safetyAttributes","categories"]);o!=null&&h(n,["categories"],o);const s=f(t,["safetyAttributes","scores"]);s!=null&&h(n,["scores"],s);const l=f(t,["contentType"]);return l!=null&&h(n,["contentType"],l),n}function JE(t,e){const n={},o=f(t,["safetyAttributes","categories"]);o!=null&&h(n,["categories"],o);const s=f(t,["safetyAttributes","scores"]);s!=null&&h(n,["scores"],s);const l=f(t,["contentType"]);return l!=null&&h(n,["contentType"],l),n}function eN(t,e){const n={},o=f(t,["category"]);if(o!=null&&h(n,["category"],o),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(t,["threshold"]);return s!=null&&h(n,["threshold"],s),n}function tN(t,e){const n={},o=f(t,["image"]);return o!=null&&h(n,["image"],Mi(o)),n}function nN(t,e,n){const o={},s=f(t,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const l=f(t,["maxPredictions"]);e!==void 0&&l!=null&&h(e,["parameters","maxPredictions"],l);const u=f(t,["confidenceThreshold"]);e!==void 0&&u!=null&&h(e,["parameters","confidenceThreshold"],u);const d=f(t,["maskDilation"]);e!==void 0&&d!=null&&h(e,["parameters","maskDilation"],d);const g=f(t,["binaryColorThreshold"]);e!==void 0&&g!=null&&h(e,["parameters","binaryColorThreshold"],g);const m=f(t,["labels"]);return e!==void 0&&m!=null&&h(e,["labels"],m),o}function iN(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["source"]);l!=null&&rN(l,o);const u=f(e,["config"]);return u!=null&&nN(u,o),o}function oN(t,e){const n={},o=f(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>xx(l))),h(n,["generatedMasks"],s)}return n}function rN(t,e,n){const o={},s=f(t,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const l=f(t,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],Mi(l));const u=f(t,["scribbleImage"]);return e!==void 0&&u!=null&&h(e,["instances[0]","scribble"],tN(u)),o}function sN(t,e){const n={},o=f(t,["retrievalConfig"]);o!=null&&h(n,["retrievalConfig"],o);const s=f(t,["functionCallingConfig"]);return s!=null&&h(n,["functionCallingConfig"],lx(s)),n}function aN(t,e){const n={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(t,["computerUse"]);o!=null&&h(n,["computerUse"],o);const s=f(t,["fileSearch"]);s!=null&&h(n,["fileSearch"],s);const l=f(t,["codeExecution"]);if(l!=null&&h(n,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>S)),h(n,["functionDeclarations"],E)}const d=f(t,["googleMaps"]);d!=null&&h(n,["googleMaps"],Ux(d));const g=f(t,["googleSearch"]);g!=null&&h(n,["googleSearch"],kx(g));const m=f(t,["googleSearchRetrieval"]);m!=null&&h(n,["googleSearchRetrieval"],m);const v=f(t,["urlContext"]);return v!=null&&h(n,["urlContext"],v),n}function KE(t,e){const n={},o=f(t,["retrieval"]);o!=null&&h(n,["retrieval"],o);const s=f(t,["computerUse"]);if(s!=null&&h(n,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(t,["codeExecution"]);l!=null&&h(n,["codeExecution"],l);const u=f(t,["enterpriseWebSearch"]);u!=null&&h(n,["enterpriseWebSearch"],u);const d=f(t,["functionDeclarations"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(I=>ux(I))),h(n,["functionDeclarations"],S)}const g=f(t,["googleMaps"]);g!=null&&h(n,["googleMaps"],g);const m=f(t,["googleSearch"]);m!=null&&h(n,["googleSearch"],m);const v=f(t,["googleSearchRetrieval"]);v!=null&&h(n,["googleSearchRetrieval"],v);const E=f(t,["urlContext"]);return E!=null&&h(n,["urlContext"],E),n}function lN(t,e){const n={},o=f(t,["baseModel"]);o!=null&&h(n,["baseModel"],o);const s=f(t,["createTime"]);s!=null&&h(n,["createTime"],s);const l=f(t,["updateTime"]);return l!=null&&h(n,["updateTime"],l),n}function uN(t,e){const n={},o=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&h(n,["baseModel"],o);const s=f(t,["createTime"]);s!=null&&h(n,["createTime"],s);const l=f(t,["updateTime"]);return l!=null&&h(n,["updateTime"],l),n}function cN(t,e,n){const o={},s=f(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const l=f(t,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=f(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function fN(t,e,n){const o={},s=f(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const l=f(t,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=f(t,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function dN(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","name"],it(t,s));const l=f(e,["config"]);return l!=null&&cN(l,o),o}function hN(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["config"]);return l!=null&&fN(l,o),o}function pN(t,e,n){const o={},s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const l=f(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const u=f(t,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const d=f(t,["includeRaiReason"]);e!==void 0&&d!=null&&h(e,["parameters","includeRaiReason"],d);const g=f(t,["outputMimeType"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","mimeType"],g);const m=f(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const v=f(t,["enhanceInputImage"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],v);const E=f(t,["imagePreservationFactor"]);e!==void 0&&E!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const S=f(t,["labels"]);e!==void 0&&S!=null&&h(e,["labels"],S);const I=f(t,["numberOfImages"]);e!==void 0&&I!=null&&h(e,["parameters","sampleCount"],I);const M=f(t,["mode"]);return e!==void 0&&M!=null&&h(e,["parameters","mode"],M),o}function mN(t,e,n){const o={},s=f(e,["model"]);s!=null&&h(o,["_url","model"],it(t,s));const l=f(e,["image"]);l!=null&&h(o,["instances[0]","image"],Mi(l));const u=f(e,["upscaleFactor"]);u!=null&&h(o,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&pN(d,o),o}function gN(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>wf(u))),h(n,["generatedImages"],l)}return n}function yN(t,e){const n={},o=f(t,["uri"]);o!=null&&h(n,["uri"],o);const s=f(t,["encodedVideo"]);s!=null&&h(n,["videoBytes"],Ur(s));const l=f(t,["encoding"]);return l!=null&&h(n,["mimeType"],l),n}function _N(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&h(n,["uri"],o);const s=f(t,["bytesBase64Encoded"]);s!=null&&h(n,["videoBytes"],Ur(s));const l=f(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}function vN(t,e){const n={},o=f(t,["image"]);o!=null&&h(n,["_self"],Mi(o));const s=f(t,["maskMode"]);return s!=null&&h(n,["maskMode"],s),n}function TN(t,e){const n={},o=f(t,["image"]);o!=null&&h(n,["image"],bf(o));const s=f(t,["referenceType"]);return s!=null&&h(n,["referenceType"],s),n}function EN(t,e){const n={},o=f(t,["image"]);o!=null&&h(n,["image"],Mi(o));const s=f(t,["referenceType"]);return s!=null&&h(n,["referenceType"],s),n}function QE(t,e){const n={},o=f(t,["uri"]);o!=null&&h(n,["uri"],o);const s=f(t,["videoBytes"]);s!=null&&h(n,["encodedVideo"],Ur(s));const l=f(t,["mimeType"]);return l!=null&&h(n,["encoding"],l),n}function XE(t,e){const n={},o=f(t,["uri"]);o!=null&&h(n,["gcsUri"],o);const s=f(t,["videoBytes"]);s!=null&&h(n,["bytesBase64Encoded"],Ur(s));const l=f(t,["mimeType"]);return l!=null&&h(n,["mimeType"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SN(t,e){const n={},o=f(t,["displayName"]);return e!==void 0&&o!=null&&h(e,["displayName"],o),n}function AN(t){const e={},n=f(t,["config"]);return n!=null&&SN(n,e),e}function CN(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),n}function IN(t){const e={},n=f(t,["name"]);n!=null&&h(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&CN(o,e),e}function RN(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function wN(t,e){const n={},o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const s=f(t,["chunkingConfig"]);return e!==void 0&&s!=null&&h(e,["chunkingConfig"],s),n}function bN(t){const e={},n=f(t,["name"]);n!=null&&h(e,["name"],n);const o=f(t,["metadata"]);o!=null&&h(e,["metadata"],o);const s=f(t,["done"]);s!=null&&h(e,["done"],s);const l=f(t,["error"]);l!=null&&h(e,["error"],l);const u=f(t,["response"]);return u!=null&&h(e,["response"],NN(u)),e}function xN(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const o=f(t,["fileName"]);o!=null&&h(e,["fileName"],o);const s=f(t,["config"]);return s!=null&&wN(s,e),e}function NN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["parent"]);o!=null&&h(e,["parent"],o);const s=f(t,["documentName"]);return s!=null&&h(e,["documentName"],s),e}function MN(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function DN(t){const e={},n=f(t,["config"]);return n!=null&&MN(n,e),e}function PN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["fileSearchStores"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function WE(t,e){const n={},o=f(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["mimeType"],o);const s=f(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(t,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),n}function VN(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const o=f(t,["config"]);return o!=null&&WE(o,e),e}function UN(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kN="Content-Type",LN="X-Server-Timeout",ON="User-Agent",_p="x-goog-api-client",FN="1.41.0",BN=`google-genai-sdk/${FN}`,qN="v1beta1",zN="v1beta",GN=5,HN=[408,429,500,502,503,504];class YN{constructor(e){var n,o,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:qN}else{if(!this.clientOptions.apiKey)throw new Yl({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:zN,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===dp.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))s.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(n))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,s){if(n&&n.timeout||s){const l=new AbortController,u=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>l.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{l.abort()}),e.signal=u}return n&&n.extraBody!==null&&$N(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await Y0(s),new hp(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await Y0(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return bi(this,arguments,function*(){var o;const s=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield Pe(s.read());if(m){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=l.decode(v,{stream:!0});try{const M=JSON.parse(E);if("error"in M){const L=JSON.parse(JSON.stringify(M.error)),V=L.status,$=L.code,X=`got status: ${V}. ${JSON.stringify(M)}`;if($>=400&&$<600)throw new Yl({message:X,status:$})}}catch(M){if(M.name==="ApiError")throw M}u+=E;let S=-1,I=0;for(;;){S=-1,I=0;for(const V of g){const $=u.indexOf(V);$!==-1&&(S===-1||$<S)&&(S=$,I=V.length)}if(S===-1)break;const M=u.substring(0,S);u=u.substring(S+I);const L=M.trim();if(L.startsWith(d)){const V=L.substring(d.length).trim();try{const $=new Response(V,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Pe(new hp($))}catch($){throw new Error(`exception parsing stream chunk ${V}. ${$}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){var o;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,n);const s=this.clientOptions.httpOptions.retryOptions;return UR(async()=>{const u=await fetch(e,n);if(u.ok)return u;throw HN.includes(u.status)?new Error(`Retryable HTTP Error: ${u.statusText}`):new xE(`Non-retryable exception ${u.statusText} sending request`)},{retries:((o=s.attempts)!==null&&o!==void 0?o:GN)-1})}getDefaultHeaders(){const e={},n=BN+" "+this.clientOptions.userAgentExtra;return e[ON]=n,e[_p]=n,e[kN]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[s,l]of Object.entries(e.headers))o.append(s,l);e.timeout&&e.timeout>0&&o.append(LN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);s.sizeBytes=String(u.size);const d=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const g={file:s},m=this.getFileName(e),v=ge("upload/v1beta/files",g._url),E=await this.fetchUploadUrl(v,s.sizeBytes,s.mimeType,m,g,n==null?void 0:n.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,o){var s;const l=this.clientOptions.uploader,u=await l.stat(n),d=String(u.size),g=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),E={};o!=null&&WE(o,E);const S=await this.fetchUploadUrl(m,d,g,v,E,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,s,l,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Y0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new Yl({message:s,status:n}):new Error(s)}}function $N(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,u){const d=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const m=u[g],v=d[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[g]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[g]=m)}return d}const s=o(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JN="mcp_used/unknown";let KN=!1;function ZE(t){for(const e of t)if(QN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return KN}function jE(t){var e;const n=(e=t[_p])!==null&&e!==void 0?e:"";t[_p]=(n+` ${JN}`).trimStart()}function QN(t){return t!==null&&typeof t=="object"&&t instanceof im}function XN(t){return bi(this,arguments,function*(n,o=100){let s,l=0;for(;l<o;){const u=yield Pe(n.listTools({cursor:s}));for(const d of u.tools)yield yield Pe(d),l++;if(!u.nextCursor)break;s=u.nextCursor}})}class im{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new im(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var d=!0,g=(n=void 0,xi(XN(v))),m;m=await g.next(),e=m.done,!e;d=!0){s=m.value,d=!1;const E=s;u.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(E){n={error:E}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Aw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await s.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function WN(t,e,n){const o=new mw;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(o,s),e(o)}class ZN{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=tM(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(J=>{m=J}),E=e.callbacks,S=function(){m({})},I=this.apiClient,M={onopen:S,onmessage:J=>{WN(I,E.onmessage,J)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(J){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(J){}},L=this.webSocketFactory.create(g,eM(u),M);L.connect(),await v;const X={setup:{model:it(this.apiClient,e.model)}};return L.send(JSON.stringify(X)),new jN(L,this.apiClient)}}class jN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Sb(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Eb(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(da.PLAY)}pause(){this.sendPlaybackControl(da.PAUSE)}stop(){this.sendPlaybackControl(da.STOP)}resetContext(){this.sendPlaybackControl(da.RESET_CONTEXT)}close(){this.conn.close()}}function eM(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function tM(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function iM(t,e,n){const o=new pw;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const l=JSON.parse(s);if(t.isVertexAI()){const u=Ib(l);Object.assign(o,u)}else Object.assign(o,l);e(o)}class oM{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new ZN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&ZE(e.config.tools)&&jE(E);const S=lM(E);if(this.apiClient.isVertexAI()){const x=this.apiClient.getProject(),U=this.apiClient.getLocation(),O=this.apiClient.getApiKey(),q=!!x&&!!U||!!O;this.apiClient.getCustomBaseUrl()&&!q?v=g:(v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v))}else{const x=this.apiClient.getApiKey();let U="BidiGenerateContent",O="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",O="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${U}?${O}=${x}`}let I=()=>{};const M=new Promise(x=>{I=x}),L=e.callbacks,V=function(){var x;(x=L==null?void 0:L.onopen)===null||x===void 0||x.call(L),I({})},$=this.apiClient,X={onopen:V,onmessage:x=>{iM($,L.onmessage,x)},onerror:(n=L==null?void 0:L.onerror)!==null&&n!==void 0?n:function(x){},onclose:(o=L==null?void 0:L.onclose)!==null&&o!==void 0?o:function(x){}},J=this.webSocketFactory.create(v,aM(S),X);J.connect(),await M;let ne=it(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ne.startsWith("publishers/")){const x=this.apiClient.getProject(),U=this.apiClient.getLocation();x&&U&&(ne=`projects/${x}/locations/${U}/`+ne)}let he={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[of.AUDIO]}:e.config.responseModalities=[of.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],D=[];for(const x of W)if(this.isCallableTool(x)){const U=x;D.push(await U.tool())}else D.push(x);D.length>0&&(e.config.tools=D);const N={model:ne,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?he=Tb(this.apiClient,N):he=vb(this.apiClient,N),delete he.config,J.send(JSON.stringify(he)),new sM(J,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const rM={turnComplete:!0};class sM{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=gi(n.turns),e.isVertexAI()||(o=o.map(s=>Rf(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(nM)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},rM),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Cb(e)}:n={realtimeInput:Ab(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function aM(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function lM(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $0=10;function J0(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ma(u)){s=!0;break}if(!s)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ma(t){return"callTool"in t&&typeof t.callTool=="function"}function uM(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>ma(s)))!==null&&o!==void 0?o:!1}function K0(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,s)=>{if(ma(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(s)}),n}function Q0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cM extends Mo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,l,u,d;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!uM(n)||J0(n.config))return await this.generateContentInternal(g);const m=K0(n);if(m.length>0){const L=m.map(V=>`tools[${V}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${L}.`)}let v,E;const S=gi(g.contents),I=(l=(s=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:$0;let M=0;for(;M<I&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const L=v.candidates[0].content,V=[];for(const $ of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(ma($)){const J=await $.callTool(v.functionCalls);V.push(...J)}M++,E={role:"user",parts:V},g.contents=gi(g.contents),g.contents.push(L),g.contents.push(E),Q0(g.config)&&(S.push(L),S.push(E))}return Q0(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async n=>{var o,s,l,u,d;if(this.maybeMoveToResponseJsonSchem(n),J0(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const g=K0(n);if(g.length>0){const E=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(s=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(d=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let l;const u=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((s=g==null?void 0:g.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async n=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new gs(wo.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var o,s,l,u,d,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(d=n.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,s;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>ma(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&ZE(e.config.tools)){const g=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),jE(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var n,o,s;const l=new Map;for(const u of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(ma(u)){const d=u,g=await d.tool();for(const m of(s=g.functionDeclarations)!==null&&s!==void 0?s:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var n,o,s;const l=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:$0;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(m,v,E){return bi(this,arguments,function*(){for(var S,I,M,L,V,$;d<l;){u&&(d++,u=!1);const he=yield Pe(m.processParamsMaybeAddMcpUsage(E)),W=yield Pe(m.generateContentStreamInternal(he)),D=[],N=[];try{for(var X=!0,J=(I=void 0,xi(W)),ne;ne=yield Pe(J.next()),S=ne.done,!S;X=!0){L=ne.value,X=!1;const x=L;if(yield yield Pe(x),x.candidates&&(!((V=x.candidates[0])===null||V===void 0)&&V.content)){N.push(x.candidates[0].content);for(const U of($=x.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(d<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(U.functionCall.name)){const O=yield Pe(v.get(U.functionCall.name).callTool([U.functionCall]));D.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(x){I={error:x}}finally{try{!X&&!S&&(M=J.return)&&(yield Pe(M.call(J)))}finally{if(I)throw I.error}}if(D.length>0){u=!0;const x=new Dl;x.candidates=[{content:{role:"user",parts:D}}],yield yield Pe(x);const U=[];U.push(...N),U.push({role:"user",parts:D});const O=gi(E.contents).concat(U);E.contents=O}else break}})})(this,g,e)}async generateContentInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=z0(this.apiClient,e);return d=ge("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=H0(v),S=new Dl;return Object.assign(S,E),S})}else{const m=q0(this.apiClient,e);return d=ge("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=G0(v),S=new Dl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=z0(this.apiClient,e);return d=ge("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(E){return bi(this,arguments,function*(){var S,I,M,L;try{for(var V=!0,$=xi(E),X;X=yield Pe($.next()),S=X.done,!S;V=!0){L=X.value,V=!1;const J=L,ne=H0(yield Pe(J.json()),e);ne.sdkHttpResponse={headers:J.headers};const he=new Dl;Object.assign(he,ne),yield yield Pe(he)}}catch(J){I={error:J}}finally{try{!V&&!S&&(M=$.return)&&(yield Pe(M.call($)))}finally{if(I)throw I.error}}})})}else{const m=q0(this.apiClient,e);return d=ge("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(E){return bi(this,arguments,function*(){var S,I,M,L;try{for(var V=!0,$=xi(E),X;X=yield Pe($.next()),S=X.done,!S;V=!0){L=X.value,V=!1;const J=L,ne=G0(yield Pe(J.json()),e);ne.sdkHttpResponse={headers:J.headers};const he=new Dl;Object.assign(he,ne),yield yield Pe(he)}}catch(J){I={error:J}}finally{try{!V&&!S&&(M=$.return)&&(yield Pe(M.call($)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=nx(this.apiClient,e);return d=ge("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=ox(v),S=new C0;return Object.assign(S,E),S})}else{const m=tx(this.apiClient,e);return d=ge("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=ix(v),S=new C0;return Object.assign(S,E),S})}}async generateImagesInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=mx(this.apiClient,e);return d=ge("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=yx(v),S=new I0;return Object.assign(S,E),S})}else{const m=px(this.apiClient,e);return d=ge("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=gx(v),S=new I0;return Object.assign(S,E),S})}}async editImageInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Wb(this.apiClient,e);return l=ge("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const m=Zb(g),v=new nw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=mN(this.apiClient,e);return l=ge("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const m=gN(g),v=new iw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Xx(this.apiClient,e);return l=ge("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const m=Wx(g),v=new ow;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=iN(this.apiClient,e);return l=ge("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const m=oN(g),v=new rw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Vx(this.apiClient,e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>yp(v))}else{const m=Px(this.apiClient,e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>gp(v))}}async listInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Gx(this.apiClient,e);return d=ge("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Yx(v),S=new R0;return Object.assign(S,E),S})}else{const m=zx(this.apiClient,e);return d=ge("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Hx(v),S=new R0;return Object.assign(S,E),S})}}async update(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=hN(this.apiClient,e);return d=ge("{model}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>yp(v))}else{const m=dN(this.apiClient,e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>gp(v))}}async delete(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Jb(this.apiClient,e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Qb(v),S=new w0;return Object.assign(S,E),S})}else{const m=$b(this.apiClient,e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Kb(v),S=new w0;return Object.assign(S,E),S})}}async countTokens(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Gb(this.apiClient,e);return d=ge("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Yb(v),S=new b0;return Object.assign(S,E),S})}else{const m=zb(this.apiClient,e);return d=ge("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Hb(v),S=new b0;return Object.assign(S,E),S})}}async computeTokens(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Ub(this.apiClient,e);return l=ge("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const m=kb(g),v=new sw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Ax(this.apiClient,e);return d=ge("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>{const E=Ex(v),S=new rf;return Object.assign(S,E),S})}else{const m=Sx(this.apiClient,e);return d=ge("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const E=Tx(v),S=new rf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fM extends Mo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=XR(e);return d=ge("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u}else{const m=QR(e);return d=ge("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=zR(e);return l=ge("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dM(t){const e={},n=f(t,["data"]);if(n!=null&&h(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function hM(t){const e={},n=f(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>SM(l))),h(e,["parts"],s)}const o=f(t,["role"]);return o!=null&&h(e,["role"],o),e}function pM(t,e,n){const o={},s=f(e,["expireTime"]);n!==void 0&&s!=null&&h(n,["expireTime"],s);const l=f(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&h(n,["newSessionExpireTime"],l);const u=f(e,["uses"]);n!==void 0&&u!=null&&h(n,["uses"],u);const d=f(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&h(n,["bidiGenerateContentSetup"],EM(t,d));const g=f(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&h(n,["fieldMask"],g),o}function mM(t,e){const n={},o=f(e,["config"]);return o!=null&&h(n,["config"],pM(t,o,n)),n}function gM(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const o=f(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function yM(t){const e={},n=f(t,["id"]);n!=null&&h(e,["id"],n);const o=f(t,["args"]);o!=null&&h(e,["args"],o);const s=f(t,["name"]);if(s!=null&&h(e,["name"],s),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _M(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function vM(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function TM(t,e){const n={},o=f(t,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const s=f(t,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const l=f(t,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(t,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(t,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(t,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(t,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],nm(E));const S=f(t,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const I=f(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],I);const M=f(t,["systemInstruction"]);e!==void 0&&M!=null&&h(e,["setup","systemInstruction"],hM(_n(M)));const L=f(t,["tools"]);if(e!==void 0&&L!=null){let W=Ra(L);Array.isArray(W)&&(W=W.map(D=>CM(Ia(D)))),h(e,["setup","tools"],W)}const V=f(t,["sessionResumption"]);e!==void 0&&V!=null&&h(e,["setup","sessionResumption"],AM(V));const $=f(t,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const X=f(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const J=f(t,["realtimeInputConfig"]);e!==void 0&&J!=null&&h(e,["setup","realtimeInputConfig"],J);const ne=f(t,["contextWindowCompression"]);e!==void 0&&ne!=null&&h(e,["setup","contextWindowCompression"],ne);const he=f(t,["proactivity"]);if(e!==void 0&&he!=null&&h(e,["setup","proactivity"],he),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function EM(t,e){const n={},o=f(e,["model"]);o!=null&&h(n,["setup","model"],it(t,o));const s=f(e,["config"]);return s!=null&&h(n,["config"],TM(s,n)),n}function SM(t){const e={},n=f(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const o=f(t,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const s=f(t,["executableCode"]);s!=null&&h(e,["executableCode"],s);const l=f(t,["fileData"]);l!=null&&h(e,["fileData"],gM(l));const u=f(t,["functionCall"]);u!=null&&h(e,["functionCall"],yM(u));const d=f(t,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&h(e,["inlineData"],dM(g));const m=f(t,["text"]);m!=null&&h(e,["text"],m);const v=f(t,["thought"]);v!=null&&h(e,["thought"],v);const E=f(t,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const S=f(t,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function AM(t){const e={},n=f(t,["handle"]);if(n!=null&&h(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CM(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&h(e,["computerUse"],n);const o=f(t,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const s=f(t,["codeExecution"]);if(s!=null&&h(e,["codeExecution"],s),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}const u=f(t,["googleMaps"]);u!=null&&h(e,["googleMaps"],_M(u));const d=f(t,["googleSearch"]);d!=null&&h(e,["googleSearch"],vM(d));const g=f(t,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(t,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IM(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${n}.${l}`);e.push(...s)}else e.push(n)}return e.join(",")}function RM(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const l=IM(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(m=>u.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class wM extends Mo{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=mM(this.apiClient,e);l=ge("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=RM(d,e.config);return s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bM(t,e){const n={},o=f(t,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),n}function xM(t){const e={},n=f(t,["name"]);n!=null&&h(e,["_url","name"],n);const o=f(t,["config"]);return o!=null&&bM(o,e),e}function NM(t){const e={},n=f(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function MM(t,e){const n={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),n}function DM(t){const e={},n=f(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const o=f(t,["config"]);return o!=null&&MM(o,e),e}function PM(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const o=f(t,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const s=f(t,["documents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VM extends Mo{constructor(e){super(),this.apiClient=e,this.list=async n=>new gs(wo.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NM(e);return l=ge("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xM(e);s=ge("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DM(e);return l=ge("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const m=PM(g),v=new aw;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UM extends Mo{constructor(e,n=new VM(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new gs(wo.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=AN(e);return l=ge("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async get(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RN(e);return l=ge("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=IN(e);s=ge("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DN(e);return l=ge("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const m=PN(g),v=new lw;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=VN(e);return l=ge("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const m=UN(g),v=new uw;return Object.assign(v,m),v})}}async importFile(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xN(e);return l=ge("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>{const m=bN(g),v=new Wp;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eS=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return eS=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const kM=()=>eS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Tp=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yi extends Error{}class bn extends yi{constructor(e,n,o,s){super(`${bn.makeMessage(e,n,o)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,o){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,o,s){if(!e||!s)return new xf({message:o,cause:Tp(n)});const l=n;return e===400?new nS(e,l,o,s):e===401?new iS(e,l,o,s):e===403?new oS(e,l,o,s):e===404?new rS(e,l,o,s):e===409?new sS(e,l,o,s):e===422?new aS(e,l,o,s):e===429?new lS(e,l,o,s):e>=500?new uS(e,l,o,s):new bn(e,l,o,s)}}class Ep extends bn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class xf extends bn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class tS extends xf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class nS extends bn{}class iS extends bn{}class oS extends bn{}class rS extends bn{}class sS extends bn{}class aS extends bn{}class lS extends bn{}class uS extends bn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LM=/^[a-z][a-z0-9+.-]*:/i,OM=t=>LM.test(t);let Sp=t=>(Sp=Array.isArray,Sp(t));const FM=Sp;let BM=FM;const X0=BM;function qM(t){if(!t)return!0;for(const e in t)return!1;return!0}function zM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const GM=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new yi(`${t} must be an integer`);if(e<0)throw new yi(`${t} must be a positive integer`);return e},HM=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YM=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $M(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const JM=()=>{var t,e,n,o,s;const l=$M();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":Z0(Deno.build.os),"X-Stainless-Arch":W0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":Z0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":W0((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const u=KM();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function KM(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const s=o[1]||0,l=o[2]||0,u=o[3]||0;return{browser:e,version:`${s}.${l}.${u}`}}}return null}const W0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Z0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Uc;const QM=()=>Uc??(Uc=JM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function cS(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function WM(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return cS({start(){},async pull(n){const{done:o,value:s}=await e.next();o?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function fS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function ZM(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),s=o.cancel();o.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dS=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xh(t,e,n){return dS(),new File(t,e??"unknown_file",n)}function eD(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const tD=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hS=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",nD=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&hS(t),iD=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function oD(t,e,n){if(dS(),t=await t,nD(t))return t instanceof File?t:Xh([await t.arrayBuffer()],t.name);if(iD(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Xh(await Ap(s),e,n)}const o=await Ap(t);if(e||(e=eD(t)),!(n!=null&&n.type)){const s=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Xh(o,e,n)}async function Ap(t){var e,n,o,s,l;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(hS(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(tD(t))try{for(var d=!0,g=xi(t),m;m=await g.next(),e=m.done,!e;d=!0){s=m.value,d=!1;const v=s;u.push(...await Ap(v))}}catch(v){n={error:v}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}else{const v=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${rD(t)}`)}return u}function rD(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pS{constructor(e){this._client=e}}pS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mS(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const j0=Object.freeze(Object.create(null)),sD=(t=mS)=>(function(n,...o){if(n.length===1)return n[0];let s=!1;const l=[],u=n.reduce((v,E,S)=>{var I,M,L;/[?#]/.test(E)&&(s=!0);const V=o[S];let $=(s?encodeURIComponent:t)(""+V);return S!==o.length&&(V==null||typeof V=="object"&&V.toString===((L=Object.getPrototypeOf((M=Object.getPrototypeOf((I=V.hasOwnProperty)!==null&&I!==void 0?I:j0))!==null&&M!==void 0?M:j0))===null||L===void 0?void 0:L.toString))&&($=V+"",l.push({start:v.length+E.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(V).slice(8,-1)} is not a valid path parameter`})),v+E+(S===o.length?"":$)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(d))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((v,E)=>v.start-E.start),l.length>0){let v=0;const E=l.reduce((S,I)=>{const M=" ".repeat(I.start-v),L="^".repeat(I.length);return v=I.start+I.length,S+M+L},"");throw new yi(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${u}
${E}`)}return u}),kc=sD(mS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gS extends pS{create(e,n){var o;const{api_version:s=this._client.apiVersion}=e,l=af(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new yi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new yi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(kc`/${s}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(kc`/${s}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(kc`/${s}/interactions/${e}/cancel`,o)}get(e,n={},o){var s;const l=n??{},{api_version:u=this._client.apiVersion}=l,d=af(l,["api_version"]);return this._client.get(kc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},o),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}gS._key=Object.freeze(["interactions"]);class yS extends gS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aD(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let o=0;for(const s of t)n.set(s,o),o+=s.length;return n}let Lc;function om(t){let e;return(Lc??(e=new globalThis.TextEncoder,Lc=e.encode.bind(e)))(t)}let Oc;function eT(t){let e;return(Oc??(e=new globalThis.TextDecoder,Oc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?om(e):e;this.buffer=aD([this.buffer,n]);const o=[];let s;for(;(s=lD(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(eT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,u=eT(this.buffer.subarray(0,l));o.push(u),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Nf.NEWLINE_CHARS=new Set([`
`,"\r"]);Nf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lD(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function uD(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lf={off:0,error:200,warn:300,info:400,debug:500},tT=(t,e,n)=>{if(t){if(zM(lf,t))return t;wn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(lf))}`)}};function Ul(){}function Fc(t,e,n){return!e||lf[t]>lf[n]?Ul:e[t].bind(e)}const cD={error:Ul,warn:Ul,info:Ul,debug:Ul};let nT=new WeakMap;function wn(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return cD;const s=nT.get(n);if(s&&s[0]===o)return s[1];const l={error:Fc("error",n,o),warn:Fc("warn",n,o),info:Fc("info",n,o),debug:Fc("debug",n,o)};return nT.set(n,[o,l]),l}const us=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ha{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let s=!1;const l=o?wn(o):console;function u(){return bi(this,arguments,function*(){var g,m,v,E;if(s)throw new yi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var I=!0,M=xi(fD(e,n)),L;L=yield Pe(M.next()),g=L.done,!g;I=!0){E=L.value,I=!1;const V=E;if(!S)if(V.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Pe(JSON.parse(V.data))}catch($){throw l.error("Could not parse message into JSON:",V.data),l.error("From chunk:",V.raw),$}}}catch(V){m={error:V}}finally{try{!I&&!g&&(v=M.return)&&(yield Pe(v.call(M)))}finally{if(m)throw m.error}}S=!0}catch(V){if(vp(V))return yield Pe(void 0);throw V}finally{S||n.abort()}})}return new ha(u,n,o)}static fromReadableStream(e,n,o){let s=!1;function l(){return bi(this,arguments,function*(){var g,m,v,E;const S=new Nf,I=fS(e);try{for(var M=!0,L=xi(I),V;V=yield Pe(L.next()),g=V.done,!g;M=!0){E=V.value,M=!1;const $=E;for(const X of S.decode($))yield yield Pe(X)}}catch($){m={error:$}}finally{try{!M&&!g&&(v=L.return)&&(yield Pe(v.call(L)))}finally{if(m)throw m.error}}for(const $ of S.flush())yield yield Pe($)})}function u(){return bi(this,arguments,function*(){var g,m,v,E;if(s)throw new yi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var I=!0,M=xi(l()),L;L=yield Pe(M.next()),g=L.done,!g;I=!0){E=L.value,I=!1;const V=E;S||V&&(yield yield Pe(JSON.parse(V)))}}catch(V){m={error:V}}finally{try{!I&&!g&&(v=M.return)&&(yield Pe(v.call(M)))}finally{if(m)throw m.error}}S=!0}catch(V){if(vp(V))return yield Pe(void 0);throw V}finally{S||n.abort()}})}return new ha(u,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),s=l=>({next:()=>{if(l.length===0){const u=o.next();e.push(u),n.push(u)}return l.shift()}});return[new ha(()=>s(e),this.controller,this.client),new ha(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return cS({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:l}=await n.next();if(l)return o.close();const u=om(JSON.stringify(s)+`
`);o.enqueue(u)}catch(s){o.error(s)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function fD(t,e){return bi(this,arguments,function*(){var o,s,l,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new yi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new yi("Attempted to iterate over a response with no body");const d=new hD,g=new Nf,m=fS(t.body);try{for(var v=!0,E=xi(dD(m)),S;S=yield Pe(E.next()),o=S.done,!o;v=!0){u=S.value,v=!1;const I=u;for(const M of g.decode(I)){const L=d.decode(M);L&&(yield yield Pe(L))}}}catch(I){s={error:I}}finally{try{!v&&!o&&(l=E.return)&&(yield Pe(l.call(E)))}finally{if(s)throw s.error}}for(const I of g.flush()){const M=d.decode(I);M&&(yield yield Pe(M))}})}function dD(t){return bi(this,arguments,function*(){var n,o,s,l;let u=new Uint8Array;try{for(var d=!0,g=xi(t),m;m=yield Pe(g.next()),n=m.done,!n;d=!0){l=m.value,d=!1;const v=l;if(v==null)continue;const E=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?om(v):v;let S=new Uint8Array(u.length+E.length);S.set(u),S.set(E,u.length),u=S;let I;for(;(I=uD(u))!==-1;)yield yield Pe(u.slice(0,I)),u=u.slice(I)}}catch(v){o={error:v}}finally{try{!d&&!n&&(s=g.return)&&(yield Pe(s.call(g)))}finally{if(o)throw o.error}}u.length>0&&(yield yield Pe(u))})}class hD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,s]=pD(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function pD(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mD(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:s,startTime:l}=e,u=await(async()=>{var d;if(e.options.stream)return wn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ha.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),m=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return wn(t).debug(`[${o}] response parsed`,us({retryOfRequestLogID:s,url:n.url,status:n.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rm extends Promise{constructor(e,n,o=mD){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new rm(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _S=Symbol("brand.privateNullableHeaders");function*gD(t){if(!t)return;if(_S in t){const{values:o,nulls:s}=t;yield*o.entries();for(const l of s)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():X0(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const l=X0(o[1])?o[1]:[o[1]];let u=!1;for(const d of l)d!==void 0&&(e&&!u&&(u=!0,yield[s,null]),yield[s,d])}}const Pl=t=>{const e=new Headers,n=new Set;for(const o of t){const s=new Set;for(const[l,u]of gD(o)){const d=l.toLowerCase();s.has(d)||(e.delete(l),s.add(d)),u===null?(e.delete(l),n.add(d)):(e.append(l,u),n.delete(d))}}return{[_S]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wh=t=>{var e,n,o,s,l,u;if(typeof globalThis.process<"u")return(o=(n=(e=kR)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||l===void 0?void 0:l.call(s,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vS;class Mf{constructor(e){var n,o,s,l,u,d,g,{baseURL:m=Wh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=Wh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=e,S=af(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:v,apiVersion:E},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(o=I.timeout)!==null&&o!==void 0?o:Mf.DEFAULT_TIMEOUT,this.logger=(s=I.logger)!==null&&s!==void 0?s:console;const M="warn";this.logLevel=M,this.logLevel=(u=(l=tT(I.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:tT(Wh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:M,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=I.fetch)!==null&&g!==void 0?g:XM(),this.encoder=jM,this._options=I,this.apiKey=v,this.apiVersion=E,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Pl([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Pl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Pl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new yi(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${aa}`}defaultIdempotencyKey(){return`stainless-node-retry-${kM()}`}makeStatusError(e,n,o,s){return bn.generate(e,n,o,s)}buildURL(e,n,o){const s=!this.baseURLOverridden()&&o||this.baseURL,l=OM(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return qM(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new rm(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var s,l,u;const d=await e,g=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=g),await this.prepareOptions(d);const{req:m,url:v,timeout:E}=await this.buildRequest(d,{retryCount:g-n});await this.prepareRequest(m,{url:v,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=o===void 0?"":`, retryOf: ${o}`,M=Date.now();if(wn(this).debug(`[${S}] sending request`,us({retryOfRequestLogID:o,method:d.method,url:v,options:d,headers:m.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Ep;const L=new AbortController,V=await this.fetchWithTimeout(v,m,E,L).catch(Tp),$=Date.now();if(V instanceof globalThis.Error){const J=`retrying, ${n} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Ep;const ne=vp(V)||/timed? ?out/i.test(String(V)+("cause"in V?String(V.cause):""));if(n)return wn(this).info(`[${S}] connection ${ne?"timed out":"failed"} - ${J}`),wn(this).debug(`[${S}] connection ${ne?"timed out":"failed"} (${J})`,us({retryOfRequestLogID:o,url:v,durationMs:$-M,message:V.message})),this.retryRequest(d,n,o??S);throw wn(this).info(`[${S}] connection ${ne?"timed out":"failed"} - error; no more retries left`),wn(this).debug(`[${S}] connection ${ne?"timed out":"failed"} (error; no more retries left)`,us({retryOfRequestLogID:o,url:v,durationMs:$-M,message:V.message})),ne?new tS:new xf({cause:V})}const X=`[${S}${I}] ${m.method} ${v} ${V.ok?"succeeded":"failed"} with status ${V.status} in ${$-M}ms`;if(!V.ok){const J=await this.shouldRetry(V);if(n&&J){const x=`retrying, ${n} attempts remaining`;return await ZM(V.body),wn(this).info(`${X} - ${x}`),wn(this).debug(`[${S}] response error (${x})`,us({retryOfRequestLogID:o,url:V.url,status:V.status,headers:V.headers,durationMs:$-M})),this.retryRequest(d,n,o??S,V.headers)}const ne=J?"error; no more retries left":"error; not retryable";wn(this).info(`${X} - ${ne}`);const he=await V.text().catch(x=>Tp(x).message),W=HM(he),D=W?void 0:he;throw wn(this).debug(`[${S}] response error (${ne})`,us({retryOfRequestLogID:o,url:V.url,status:V.status,headers:V.headers,message:D,durationMs:Date.now()-M})),this.makeStatusError(V.status,W,D,V.headers)}return wn(this).info(X),wn(this).debug(`[${S}] response start`,us({retryOfRequestLogID:o,url:V.url,status:V.status,headers:V.headers,durationMs:$-M})),{response:V,options:d,controller:L,requestLogID:S,retryOfRequestLogID:o,startTime:M}}async fetchWithTimeout(e,n,o,s){const l=n||{},{signal:u,method:d}=l,g=af(l,["signal","method"]),m=this._makeAbort(s);u&&u.addEventListener("abort",m,{once:!0});const v=setTimeout(m,o),E=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,S=Object.assign(Object.assign(Object.assign({signal:s.signal},E?{duplex:"half"}:{}),{method:"GET"}),g);d&&(S.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(v)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,s){var l;let u;const d=s==null?void 0:s.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(u=m)}const g=s==null?void 0:s.get("retry-after");if(g&&!u){const m=parseFloat(g);Number.isNaN(m)?u=Date.parse(g)-Date.now():u=m*1e3}if(!(u&&0<=u&&u<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,m)}return await YM(u),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,u=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,s,l;const u=Object.assign({},e),{method:d,path:g,query:m,defaultBaseURL:v}=u,E=this.buildURL(g,m,v);"timeout"in u&&GM("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:I}=this.buildBody({options:u}),M=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:M},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:s}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Pl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),QM()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(d),d.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Pl([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:WM(e)}:this.encoder({body:e,headers:o})}}Mf.DEFAULT_TIMEOUT=6e4;class jt extends Mf{constructor(){super(...arguments),this.interactions=new yS(this)}}vS=jt;jt.GeminiNextGenAPIClient=vS;jt.GeminiNextGenAPIClientError=yi;jt.APIError=bn;jt.APIConnectionError=xf;jt.APIConnectionTimeoutError=tS;jt.APIUserAbortError=Ep;jt.NotFoundError=rS;jt.ConflictError=sS;jt.RateLimitError=lS;jt.BadRequestError=nS;jt.AuthenticationError=iS;jt.InternalServerError=uS;jt.PermissionDeniedError=oS;jt.UnprocessableEntityError=aS;jt.toFile=oD;jt.Interactions=yS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yD(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function _D(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function vD(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function TD(t,e){const n={},o=f(t,["sdkHttpResponse"]);return o!=null&&h(n,["sdkHttpResponse"],o),n}function ED(t,e,n){const o={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&h(e,["displayName"],s),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(t,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(t,["learningRateMultiplier"]);if(u!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(t,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(f(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return o}function SD(t,e,n){const o={};let s=f(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const W=f(t,["validationDataset"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec"],Zh(W))}else if(s==="PREFERENCE_TUNING"){const W=f(t,["validationDataset"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec"],Zh(W))}else if(s==="DISTILLATION"){const W=f(t,["validationDataset"]);e!==void 0&&W!=null&&h(e,["distillationSpec"],Zh(W))}const l=f(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=f(t,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const W=f(t,["epochCount"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],W)}else if(d==="PREFERENCE_TUNING"){const W=f(t,["epochCount"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],W)}else if(d==="DISTILLATION"){const W=f(t,["epochCount"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","epochCount"],W)}let g=f(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const W=f(t,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],W)}else if(g==="PREFERENCE_TUNING"){const W=f(t,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],W)}else if(g==="DISTILLATION"){const W=f(t,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","learningRateMultiplier"],W)}let m=f(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const W=f(t,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],W)}else if(m==="PREFERENCE_TUNING"){const W=f(t,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],W)}else if(m==="DISTILLATION"){const W=f(t,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["distillationSpec","exportLastCheckpointOnly"],W)}let v=f(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const W=f(t,["adapterSize"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],W)}else if(v==="PREFERENCE_TUNING"){const W=f(t,["adapterSize"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],W)}else if(v==="DISTILLATION"){const W=f(t,["adapterSize"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","adapterSize"],W)}let E=f(n,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const W=f(t,["tuningMode"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","tuningMode"],W)}const S=f(t,["customBaseModel"]);e!==void 0&&S!=null&&h(e,["customBaseModel"],S);let I=f(n,["config","method"]);if(I===void 0&&(I="SUPERVISED_FINE_TUNING"),I==="SUPERVISED_FINE_TUNING"){const W=f(t,["batchSize"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","batchSize"],W)}let M=f(n,["config","method"]);if(M===void 0&&(M="SUPERVISED_FINE_TUNING"),M==="SUPERVISED_FINE_TUNING"){const W=f(t,["learningRate"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRate"],W)}const L=f(t,["labels"]);e!==void 0&&L!=null&&h(e,["labels"],L);const V=f(t,["beta"]);e!==void 0&&V!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],V);const $=f(t,["baseTeacherModel"]);e!==void 0&&$!=null&&h(e,["distillationSpec","baseTeacherModel"],$);const X=f(t,["tunedTeacherModelSource"]);e!==void 0&&X!=null&&h(e,["distillationSpec","tunedTeacherModelSource"],X);const J=f(t,["sftLossWeightMultiplier"]);e!==void 0&&J!=null&&h(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],J);const ne=f(t,["outputUri"]);e!==void 0&&ne!=null&&h(e,["outputUri"],ne);const he=f(t,["encryptionSpec"]);return e!==void 0&&he!=null&&h(e,["encryptionSpec"],he),o}function AD(t,e){const n={},o=f(t,["baseModel"]);o!=null&&h(n,["baseModel"],o);const s=f(t,["preTunedModel"]);s!=null&&h(n,["preTunedModel"],s);const l=f(t,["trainingDataset"]);l!=null&&VD(l);const u=f(t,["config"]);return u!=null&&ED(u,n),n}function CD(t,e){const n={},o=f(t,["baseModel"]);o!=null&&h(n,["baseModel"],o);const s=f(t,["preTunedModel"]);s!=null&&h(n,["preTunedModel"],s);const l=f(t,["trainingDataset"]);l!=null&&UD(l,n,e);const u=f(t,["config"]);return u!=null&&SD(u,n,e),n}function ID(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function RD(t,e){const n={},o=f(t,["name"]);return o!=null&&h(n,["_url","name"],o),n}function wD(t,e,n){const o={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(t,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function bD(t,e,n){const o={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(t,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function xD(t,e){const n={},o=f(t,["config"]);return o!=null&&wD(o,n),n}function ND(t,e){const n={},o=f(t,["config"]);return o!=null&&bD(o,n),n}function MD(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["nextPageToken"]);s!=null&&h(n,["nextPageToken"],s);const l=f(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>TS(d))),h(n,["tuningJobs"],u)}return n}function DD(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["nextPageToken"]);s!=null&&h(n,["nextPageToken"],s);const l=f(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Cp(d))),h(n,["tuningJobs"],u)}return n}function PD(t,e){const n={},o=f(t,["name"]);o!=null&&h(n,["model"],o);const s=f(t,["name"]);return s!=null&&h(n,["endpoint"],s),n}function VD(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),h(n,["examples","examples"],s)}return n}function UD(t,e,n){const o={};let s=f(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(s==="PREFERENCE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(s==="DISTILLATION"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}let l=f(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function TS(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["name"]);s!=null&&h(n,["name"],s);const l=f(t,["state"]);l!=null&&h(n,["state"],kE(l));const u=f(t,["createTime"]);u!=null&&h(n,["createTime"],u);const d=f(t,["tuningTask","startTime"]);d!=null&&h(n,["startTime"],d);const g=f(t,["tuningTask","completeTime"]);g!=null&&h(n,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&h(n,["updateTime"],m);const v=f(t,["description"]);v!=null&&h(n,["description"],v);const E=f(t,["baseModel"]);E!=null&&h(n,["baseModel"],E);const S=f(t,["_self"]);return S!=null&&h(n,["tunedModel"],PD(S)),n}function Cp(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["name"]);s!=null&&h(n,["name"],s);const l=f(t,["state"]);l!=null&&h(n,["state"],kE(l));const u=f(t,["createTime"]);u!=null&&h(n,["createTime"],u);const d=f(t,["startTime"]);d!=null&&h(n,["startTime"],d);const g=f(t,["endTime"]);g!=null&&h(n,["endTime"],g);const m=f(t,["updateTime"]);m!=null&&h(n,["updateTime"],m);const v=f(t,["error"]);v!=null&&h(n,["error"],v);const E=f(t,["description"]);E!=null&&h(n,["description"],E);const S=f(t,["baseModel"]);S!=null&&h(n,["baseModel"],S);const I=f(t,["tunedModel"]);I!=null&&h(n,["tunedModel"],I);const M=f(t,["preTunedModel"]);M!=null&&h(n,["preTunedModel"],M);const L=f(t,["supervisedTuningSpec"]);L!=null&&h(n,["supervisedTuningSpec"],L);const V=f(t,["preferenceOptimizationSpec"]);V!=null&&h(n,["preferenceOptimizationSpec"],V);const $=f(t,["distillationSpec"]);$!=null&&h(n,["distillationSpec"],$);const X=f(t,["tuningDataStats"]);X!=null&&h(n,["tuningDataStats"],X);const J=f(t,["encryptionSpec"]);J!=null&&h(n,["encryptionSpec"],J);const ne=f(t,["partnerModelTuningSpec"]);ne!=null&&h(n,["partnerModelTuningSpec"],ne);const he=f(t,["customBaseModel"]);he!=null&&h(n,["customBaseModel"],he);const W=f(t,["experiment"]);W!=null&&h(n,["experiment"],W);const D=f(t,["labels"]);D!=null&&h(n,["labels"],D);const N=f(t,["outputUri"]);N!=null&&h(n,["outputUri"],N);const x=f(t,["pipelineJob"]);x!=null&&h(n,["pipelineJob"],x);const U=f(t,["serviceAccount"]);U!=null&&h(n,["serviceAccount"],U);const O=f(t,["tunedModelDisplayName"]);O!=null&&h(n,["tunedModelDisplayName"],O);const q=f(t,["veoTuningSpec"]);return q!=null&&h(n,["veoTuningSpec"],q),n}function kD(t,e){const n={},o=f(t,["sdkHttpResponse"]);o!=null&&h(n,["sdkHttpResponse"],o);const s=f(t,["name"]);s!=null&&h(n,["name"],s);const l=f(t,["metadata"]);l!=null&&h(n,["metadata"],l);const u=f(t,["done"]);u!=null&&h(n,["done"],u);const d=f(t,["error"]);return d!=null&&h(n,["error"],d),n}function Zh(t,e){const n={},o=f(t,["gcsUri"]);o!=null&&h(n,["validationDatasetUri"],o);const s=f(t,["vertexDatasetResource"]);return s!=null&&h(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LD extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new gs(wo.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:s});return l.baseModel=void 0,await this.tuneInternal(l)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),l=await this.tuneMldevInternal(s);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:fp.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=RD(e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Cp(v))}else{const m=ID(e);return d=ge("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>TS(v))}}async listInternal(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=ND(e);return d=ge("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=DD(v),S=new x0;return Object.assign(S,E),S})}else{const m=xD(e);return d=ge("tunedModels",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=MD(v),S=new x0;return Object.assign(S,E),S})}}async cancel(e){var n,o,s,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=_D(e);return d=ge("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=TD(v),S=new N0;return Object.assign(S,E),S})}else{const m=yD(e);return d=ge("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=vD(v),S=new N0;return Object.assign(S,E),S})}}async tuneInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=CD(e,e);return l=ge("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>Cp(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=AD(e);return l=ge("tunedModels",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>kD(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OD{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const FD=1024*1024*8,BD=3,qD=1e3,zD=2,uf="x-goog-upload-status";async function GD(t,e,n){var o;const s=await ES(t,e,n),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[uf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function HD(t,e,n){var o;const s=await ES(t,e,n),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[uf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=NE(l),d=new Zp;return Object.assign(d,u),d}async function ES(t,e,n){var o,s;let l=0,u=0,d=new hp(new Response),g="upload";for(l=t.size;u<l;){const m=Math.min(FD,l-u),v=t.slice(u,u+m);u+m>=l&&(g+=", finalize");let E=0,S=qD;for(;E<BD&&(d=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[uf]));)E++,await $D(S),S=S*zD;if(u+=m,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[uf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function YD(t){return{size:t.size,type:t.type}}function $D(t){return new Promise(e=>setTimeout(e,t))}class JD{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await GD(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await HD(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KD{create(e,n,o){return new QD(e,n,o)}}class QD{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iT="x-goog-api-key";class XD{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(iT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(iT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WD="gl-node/";class ZD{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const n=this.httpOptions;n!=null&&n.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new jt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n==null?void 0:n.timeout,maxRetries:(e=n==null?void 0:n.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=o.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=BR(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new XD(this.apiKey);this.apiClient=new YN({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:WD+"web",uploader:new JD,downloader:new OD}),this.models=new cM(this.apiClient),this.live=new oM(this.apiClient,s,new KD),this.batches=new g1(this.apiClient),this.chats=new W1(this.models,this.apiClient),this.caches=new K1(this.apiClient),this.files=new ub(this.apiClient),this.operations=new fM(this.apiClient),this.authTokens=new wM(this.apiClient),this.tunings=new LD(this.apiClient),this.fileSearchStores=new UM(this.apiClient)}}const sm=new ZD({apiKey:"YOUR_GEMINI_API_KEY_HERE"}),am=async t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{const l=o.result.split(",")[1];e(l)},o.onerror=n,o.readAsDataURL(t)}),jD=async(t,e)=>{const n=await am(t);let o=`
    Perform a deep acoustic analysis of this audio file for high-precision speaker diarization.

    **MISSION CRITICAL - SIMULTANEOUS SPEECH:**
    The most important requirement is detecting when people speak AT THE SAME TIME. 
    - If Speaker A and Speaker B overlap (even for 0.5 seconds), you MUST output separate segments for BOTH speakers covering that specific time range.
    - NEVER merge multiple people into a "Group" or "Both" label. Always separate them.
    - Example: If A and B laugh together from 00:10 to 00:15, output:
      { "speaker": "Speaker A", "start": 10, "end": 15 }
      { "speaker": "Speaker B", "start": 10, "end": 15 }
  `;e&&e>0&&(o+=`
    **STRICT CONSTRAINT - SPEAKER COUNT:**
    - There are EXACTLY ${e} distinct speakers in this recording.
    - Do NOT identify more than ${e} speakers.
    - Do NOT identify fewer than ${e} speakers (unless the file is empty).
    - Label them consistently (e.g., "Speaker 1", "Speaker 2"... up to "Speaker ${e}").
    `),o+=`
    **DEEP RESEARCH & REASONING:**
    1. Listen for subtle cues: breath intakes, timbre changes, and micro-affirmations ("mm-hm", "yeah").
    2. Identify distinct speakers even if they sound similar.
    3. Use the 'thinking' process to map out the exact flow of conversation before generating the JSON.

    **OUTPUT FORMAT:**
    Return ONLY a JSON object with:
    - uniqueSpeakers: A list of speaker identifiers.
    - segments: A chronological list of speech segments with 'speaker', 'start', and 'end'.
  `;try{const l=(await sm.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{inlineData:{mimeType:t.type,data:n}},{text:o}]},config:{thinkingConfig:{thinkingBudget:2048},responseMimeType:"application/json",responseSchema:{type:bt.OBJECT,properties:{uniqueSpeakers:{type:bt.ARRAY,items:{type:bt.STRING},description:"List of unique speaker labels (e.g. Speaker A, Speaker B)"},segments:{type:bt.ARRAY,items:{type:bt.OBJECT,properties:{speaker:{type:bt.STRING},start:{type:bt.NUMBER,description:"Start time in seconds"},end:{type:bt.NUMBER,description:"End time in seconds"}},required:["speaker","start","end"]}}},required:["uniqueSpeakers","segments"]}}})).text;if(!l)throw new Error("No response from AI");const u=l.replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(u)}catch(s){throw console.error("Error analyzing audio:",s),new Error("Failed to analyze audio segments.")}},e2=async(t,e)=>{var o,s,l;const n=await am(t);try{const u=await sm.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{data:n,mimeType:t.type}},{text:`Edit this image. ${e} Keep the main subject (person/face) exactly as is, only modify the background/surroundings. High quality, photorealistic.`}]}});for(const d of((l=(s=(o=u.candidates)==null?void 0:o[0])==null?void 0:s.content)==null?void 0:l.parts)||[])if(d.inlineData)return`data:image/png;base64,${d.inlineData.data}`;throw new Error("No image generated.")}catch(u){throw console.error("Error editing image:",u),new Error("Failed to edit image.")}},t2=async t=>{const e=await am(t);try{const o=(await sm.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:t.type,data:e}},{text:"Detect all human faces in this image. Return a list of bounding boxes with normalized coordinates (0 to 1)."}]},config:{responseMimeType:"application/json",responseSchema:{type:bt.ARRAY,items:{type:bt.OBJECT,properties:{ymin:{type:bt.NUMBER},xmin:{type:bt.NUMBER},ymax:{type:bt.NUMBER},xmax:{type:bt.NUMBER}},required:["ymin","xmin","ymax","xmax"]}}}})).text;return o?JSON.parse(o):[]}catch(n){return console.error("Error detecting faces:",n),[]}};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=(...t)=>t.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=t=>{const e=i2(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=Se.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:s="",children:l,iconNode:u,...d},g)=>Se.createElement("svg",{ref:g,...o2,width:e,height:e,stroke:t,strokeWidth:o?Number(n)*24/Number(e):n,className:SS("lucide",s),...!l&&!r2(d)&&{"aria-hidden":"true"},...d},[...u.map(([m,v])=>Se.createElement(m,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(t,e)=>{const n=Se.forwardRef(({className:o,...s},l)=>Se.createElement(s2,{ref:l,iconNode:e,className:SS(`lucide-${n2(oT(t))}`,`lucide-${t}`,o),...s}));return n.displayName=oT(t),n};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],l2=Ge("brain-circuit",a2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],cf=Ge("brush",u2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],f2=Ge("calendar",c2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],h2=Ge("check",d2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],m2=Ge("circle-check",p2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],y2=Ge("circle-x",g2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],v2=Ge("cloud-upload",_2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ff=Ge("cloud",T2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],S2=Ge("download",E2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],rT=Ge("eraser",A2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]],I2=Ge("file-headphone",C2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],w2=Ge("grid-3x3",R2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],x2=Ge("image",b2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],AS=Ge("keyboard",N2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$l=Ge("loader-circle",M2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],CS=Ge("maximize-2",D2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],V2=Ge("minimize-2",P2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],k2=Ge("monitor-play",U2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],O2=Ge("moon",L2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],sT=Ge("mouse-pointer-2",F2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"M11 7 6 2",key:"1jwth8"}],["path",{d:"M18.992 12H2.041",key:"xw1gg"}],["path",{d:"M21.145 18.38A3.34 3.34 0 0 1 20 16.5a3.3 3.3 0 0 1-1.145 1.88c-.575.46-.855 1.02-.855 1.595A2 2 0 0 0 20 22a2 2 0 0 0 2-2.025c0-.58-.285-1.13-.855-1.595",key:"1nkol4"}],["path",{d:"m8.5 4.5 2.148-2.148a1.205 1.205 0 0 1 1.704 0l7.296 7.296a1.205 1.205 0 0 1 0 1.704l-7.592 7.592a3.615 3.615 0 0 1-5.112 0l-3.888-3.888a3.615 3.615 0 0 1 0-5.112L5.67 7.33",key:"1nk1rd"}]],aT=Ge("paint-bucket",B2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],z2=Ge("palette",q2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],H2=Ge("pause",G2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$2=Ge("pen",Y2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],K2=Ge("play",J2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],X2=Ge("refresh-cw",Q2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Z2=Ge("rotate-ccw",W2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],eP=Ge("rotate-cw",j2);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],nP=Ge("scan",tP);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],lT=Ge("shield",iP);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],lm=Ge("sparkles",oP);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sP=Ge("trash-2",rP);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],lP=Ge("undo",aP);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cP=Ge("user",uP);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ip=Ge("users",fP);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],hP=Ge("volume-2",dP);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],mP=Ge("volume-x",pP);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],IS=Ge("x",gP);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],_P=Ge("zoom-in",yP),vP=({speakers:t,activeSpeakerIds:e,onUpdateImage:n,onDeleteImages:o,onEditExistingImage:s,onUpdateName:l,onUpdateColor:u,onRotateSpeaker:d,isManualMode:g=!1,isPlayMode:m=!1,isCinemaMode:v=!1})=>{const E=I=>I===1?"grid-cols-1":I===2?"grid-cols-1 md:grid-cols-2":I===3?"grid-cols-1 md:grid-cols-3":I===4?"grid-cols-2 md:grid-cols-2":"grid-cols-2 md:grid-cols-3",S=(I,M,L)=>{I.stopPropagation(),I.target.files&&I.target.files[0]&&(n(M,I.target.files[0],L),I.target.value="")};return b.jsx("div",{className:`grid ${E(t.length)} gap-4 w-full h-full min-h-[400px] p-4`,children:t.map(I=>{const M=e.includes(I.id),L=M&&I.activeImageUrl?I.activeImageUrl:I.imageUrl,V=!!I.imageUrl||!!I.activeImageUrl,$=I.rotation||0;return b.jsxs("div",{className:`
              relative rounded-2xl overflow-hidden border-2 
              flex flex-col items-center justify-center group
              transition-all duration-200 ease-out
              ${M?"shadow-[0_0_50px_rgba(0,0,0,0.6)] z-10 opacity-100 grayscale-0":"border-gray-800 opacity-40 scale-95 grayscale"}
            `,style:{borderColor:M?I.color:"#1f2937",boxShadow:M?`0 0 60px ${I.color}40`:"none"},children:[b.jsxs("div",{className:"absolute inset-0 w-full h-full transition-transform duration-500 ease-in-out",style:{transform:`rotate(${$}deg)`},children:[b.jsx("div",{className:`absolute inset-0 w-full h-full bg-gray-900 transition-all duration-300 ${M?"animate-beat":""}`,children:L?b.jsx("img",{src:L,alt:I.name,className:"w-full h-full object-cover transition-opacity duration-300"}):b.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:b.jsx(cP,{size:64,className:"text-gray-600"})})}),!v&&b.jsx("div",{className:`absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent transition-opacity duration-200 ${M?"opacity-20":"opacity-90"}`}),!v&&b.jsx("div",{className:"absolute bottom-6 left-6 right-6 z-20",children:b.jsxs("div",{className:"flex justify-between items-end",children:[b.jsxs("div",{className:"flex-1 mr-4",children:[b.jsxs("div",{className:"relative group/input",children:[b.jsx("input",{type:"text",value:I.name,onChange:X=>l(I.id,X.target.value),disabled:m,className:`bg-transparent text-2xl font-bold tracking-wider text-white border-b hover:border-white/30 focus:border-white focus:outline-none w-full transition-colors pb-1 ${m?"border-transparent cursor-default":"border-transparent"}`,style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)",color:M?I.color:"white"}}),!m&&b.jsx($2,{size:12,className:"absolute right-0 top-2 text-gray-500 opacity-0 group-hover/input:opacity-100 transition-opacity pointer-events-none"})]}),g&&I.triggerKey&&!m&&b.jsxs("div",{className:"mt-2 flex items-center gap-2 text-gray-400",children:[b.jsx(AS,{size:14}),b.jsx("span",{className:"text-xs font-mono border border-gray-600 rounded px-1.5 py-0.5 bg-gray-800/80",children:I.triggerKey.toUpperCase()})]})]}),b.jsx("div",{className:"flex flex-col items-center gap-3",children:b.jsxs("div",{className:"relative",children:[M&&b.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full opacity-75 animate-ping",style:{backgroundColor:I.color}}),b.jsxs("div",{className:`relative group/color ${m?"":"cursor-pointer"}`,children:[b.jsx("div",{className:"w-4 h-4 rounded-full shadow-lg transition-colors duration-200 border border-white/20",style:{backgroundColor:I.color}}),!m&&b.jsx("input",{type:"color",value:I.color,onChange:X=>u(I.id,X.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",title:"Change Speaker Color"})]})]})})]})})]}),!m&&b.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-40 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[b.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[I.imageUrl&&b.jsx("button",{onClick:X=>{X.stopPropagation(),s(I.id,"idle")},className:"p-2 rounded-full bg-black/40 hover:bg-black/80 text-white border border-white/10 hover:border-white/50 backdrop-blur-sm transition-all shadow-lg",title:"Edit Idle Image",type:"button",children:b.jsx(cf,{size:14})}),b.jsxs("label",{className:"cursor-pointer p-2 rounded-full bg-black/40 hover:bg-gray-800 text-gray-300 hover:text-white border border-white/10 hover:border-white/50 backdrop-blur-sm transition-all relative group/btn shadow-lg",children:[b.jsx(O2,{size:16}),b.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:X=>S(X,I.id,"idle")}),b.jsx("span",{className:"absolute right-full mr-2 bg-black/80 text-xs px-2 py-1 rounded text-white whitespace-nowrap opacity-0 group-hover/btn:opacity-100 pointer-events-none",children:"Upload Idle Photo"})]})]}),b.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[I.activeImageUrl&&b.jsx("button",{onClick:X=>{X.stopPropagation(),s(I.id,"active")},className:"p-2 rounded-full bg-black/40 hover:bg-black/80 text-white border border-white/10 hover:border-white/50 backdrop-blur-sm transition-all shadow-lg",title:"Edit Active Image",type:"button",children:b.jsx(cf,{size:14})}),b.jsxs("label",{className:`cursor-pointer p-2 rounded-full bg-black/40 hover:bg-primary-900/80 hover:text-primary-400 border border-white/10 hover:border-primary-500/50 backdrop-blur-sm transition-all relative group/btn shadow-lg ${I.activeImageUrl?"text-primary-400 border-primary-500/30":"text-gray-300"}`,children:[b.jsx(lm,{size:16}),b.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:X=>S(X,I.id,"active")}),b.jsx("span",{className:"absolute right-full mr-2 bg-black/80 text-xs px-2 py-1 rounded text-white whitespace-nowrap opacity-0 group-hover/btn:opacity-100 pointer-events-none",children:"Upload Speaking Photo"})]})]}),b.jsx("div",{className:"flex justify-end",children:b.jsx("button",{onClick:X=>{X.stopPropagation(),d(I.id)},className:"p-2 rounded-full bg-black/40 hover:bg-blue-900/80 text-gray-400 hover:text-blue-400 border border-white/10 hover:border-blue-500/50 backdrop-blur-sm transition-all mt-1 shadow-lg",title:"Rotate Speaker",type:"button",children:b.jsx(eP,{size:16})})}),V&&b.jsx("div",{className:"flex justify-end",children:b.jsx("button",{onClick:X=>{X.preventDefault(),X.stopPropagation(),o(I.id)},className:"p-2 rounded-full bg-black/40 hover:bg-red-900/80 text-gray-400 hover:text-red-400 border border-white/10 hover:border-red-500/50 backdrop-blur-sm transition-all mt-1 shadow-lg z-50 pointer-events-auto",title:"Remove All Images",type:"button",children:b.jsx(sP,{size:16})})})]})]},I.id)})})},TP=({file:t,onTimeUpdate:e,onReset:n,isPlayMode:o,onTogglePlayMode:s,isCinemaMode:l,onToggleCinemaMode:u})=>{const d=Se.useRef(null),g=Se.useRef(null),[m,v]=Se.useState(!1),[E,S]=Se.useState(0),[I,M]=Se.useState(0),[L,V]=Se.useState(null),[$,X]=Se.useState(1),[J,ne]=Se.useState(!1);Se.useEffect(()=>{if(t){const P=URL.createObjectURL(t);return V(P),()=>{URL.revokeObjectURL(P)}}},[t]),Se.useEffect(()=>{d.current&&(d.current.volume=J?0:$)},[$,J]),Se.useEffect(()=>{const P=Ce=>{Ce.code==="Space"&&(Ce.preventDefault(),W())};return window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P)}},[m]);const he=()=>{if(d.current){const P=d.current.currentTime;M(P),e(P),!d.current.paused&&!d.current.ended&&(g.current=requestAnimationFrame(he))}},W=()=>{d.current&&(d.current.paused?(d.current.play(),g.current=requestAnimationFrame(he),v(!0)):(d.current.pause(),g.current&&cancelAnimationFrame(g.current),v(!1)))},D=()=>{ne(!J)},N=()=>{v(!1),g.current&&cancelAnimationFrame(g.current)},x=()=>{d.current&&S(d.current.duration)},U=P=>{const Ce=Number(P.target.value);d.current&&(d.current.currentTime=Ce,M(Ce),e(Ce))},O=P=>{const Ce=parseFloat(P.target.value);X(Ce),Ce>0&&J&&ne(!1)},q=P=>{const Ce=Math.floor(P/60),$e=Math.floor(P%60);return`${Ce}:${$e.toString().padStart(2,"0")}`};return b.jsxs("div",{className:`w-full bg-gray-900 border-t border-gray-800 p-4 shadow-2xl z-50 transition-all duration-300 ${l?"border-t-0 bg-transparent":""}`,children:[L&&b.jsx("audio",{ref:d,src:L,onLoadedMetadata:x,onEnded:N}),b.jsxs("div",{className:`max-w-6xl mx-auto flex items-center gap-6 transition-opacity duration-300 ${l?"opacity-30 hover:opacity-100":"opacity-100"}`,children:[!l&&b.jsx("button",{onClick:W,className:"w-12 h-12 flex-shrink-0 flex items-center justify-center rounded-full bg-primary-600 hover:bg-primary-500 text-white transition-all shadow-lg hover:shadow-primary-500/30",children:m?b.jsx(H2,{size:20,fill:"currentColor"}):b.jsx(K2,{size:20,fill:"currentColor",className:"ml-1"})}),b.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[!l&&b.jsxs("div",{className:"flex justify-between text-xs text-gray-400 font-mono mb-1",children:[b.jsx("span",{children:q(I)}),b.jsx("span",{children:q(E)})]}),b.jsx("input",{type:"range",min:"0",max:E,value:I,onChange:U,step:"0.01",className:`w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary-500 hover:accent-primary-400 ${l?"h-2 opacity-50":""}`})]}),!l&&b.jsxs("div",{className:"flex items-center gap-2 w-32 group",children:[b.jsx("button",{onClick:D,className:"text-gray-400 hover:text-white transition-colors",children:J||$===0?b.jsx(mP,{size:20}):b.jsx(hP,{size:20})}),b.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:J?0:$,onChange:O,className:"w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-gray-400 hover:accent-white"})]}),b.jsx("div",{className:"h-8 w-px bg-gray-800 mx-2"}),b.jsx("button",{onClick:s,className:`p-2 transition-colors ${o?"text-neon-blue":"text-gray-500 hover:text-white"}`,title:o?"Exit Play Mode":"Enter Play Mode",children:o?b.jsx(V2,{size:20}):b.jsx(CS,{size:20})}),o&&b.jsx("button",{onClick:u,className:`p-2 transition-colors ${l?"text-neon-purple animate-pulse":"text-gray-500 hover:text-white"}`,title:l?"Exit Cinema Mode":"Enter Cinema Mode (Space to Play/Pause)",children:b.jsx(k2,{size:20})}),!l&&b.jsx("button",{onClick:n,className:"p-2 text-gray-500 hover:text-white transition-colors",title:"Reset & Upload New",children:b.jsx(X2,{size:20})})]})]})},EP=({isOpen:t,imageSource:e,onClose:n,onSave:o,onAiEdit:s,onDetectFaces:l})=>{const[u,d]=Se.useState(null),[g,m]=Se.useState(1),[v,E]=Se.useState({x:0,y:0}),[S,I]=Se.useState(!0),[M,L]=Se.useState(1),[V,$]=Se.useState("move"),[X,J]=Se.useState(!1),[ne,he]=Se.useState({x:0,y:0}),[W,D]=Se.useState(!1),[N,x]=Se.useState(!1),[U,O]=Se.useState(!1),[q,P]=Se.useState([]),[Ce,$e]=Se.useState(-1),[ee,de]=Se.useState("#ff0055"),[ye,Oe]=Se.useState(20),[Be,F]=Se.useState("neon cyber city background"),te=Se.useRef(null),se=Se.useRef(null),fe=Se.useRef(null),we=Se.useRef(null),Me=500;Se.useEffect(()=>{if(e){let K="",le=!1;return e instanceof File?(K=URL.createObjectURL(e),le=!0):K=e,d(K),m(1),E({x:0,y:0}),$("move"),L(1),De(se.current),De(fe.current),P([]),$e(-1),()=>{le&&URL.revokeObjectURL(K)}}},[e]);const De=K=>{if(K){const le=K.getContext("2d");le&&le.clearRect(0,0,K.width,K.height)}},gt=()=>{if(!se.current||!fe.current)return;const K=se.current.getContext("2d"),le=fe.current.getContext("2d");if(!K||!le)return;const ce=se.current.width,me=se.current.height,Te=K.getImageData(0,0,ce,me),be=le.getImageData(0,0,ce,me),Xe=q.slice(0,Ce+1);Xe.push({drawing:Te,mask:be}),Xe.length>20&&Xe.shift(),P(Xe),$e(Xe.length-1)},dt=()=>{if(Ce>0){const K=Ce-1,le=q[K];if(se.current&&fe.current){const ce=se.current.getContext("2d"),me=fe.current.getContext("2d");ce&&ce.putImageData(le.drawing,0,0),me&&me.putImageData(le.mask,0,0)}$e(K)}else Ce===0&&(De(se.current),De(fe.current),$e(-1))},xn=()=>{if(te.current){const{naturalWidth:K,naturalHeight:le}=te.current,ce=Me/le;L(ce),se.current&&(se.current.width=K,se.current.height=le),fe.current&&(fe.current.width=K,fe.current.height=le),gt()}},Fn=async()=>{if(!te.current||!fe.current)return;D(!0);let K=!1,le=[];try{if(window.FaceDetector){const Te=await new window.FaceDetector().detect(te.current);Te.length>0&&(le=Te.map(be=>({type:"system",box:be.boundingBox})),K=!0)}}catch(me){console.warn("System Face Detection failed, falling back to AI.",me)}if(!K)try{let me;if(e instanceof File)me=e;else if(typeof e=="string"){const Xe=await(await fetch(e)).blob();me=new File([Xe],"image.png",{type:Xe.type})}else throw new Error("Invalid image source");const Te=await l(me);if(Te.length>0){const{naturalWidth:be,naturalHeight:Xe}=te.current;le=Te.map(Mt=>({type:"ai",box:{left:Mt.xmin*be,top:Mt.ymin*Xe,width:(Mt.xmax-Mt.xmin)*be,height:(Mt.ymax-Mt.ymin)*Xe}})),K=!0}}catch(me){console.error("AI Face Detection failed",me)}const ce=fe.current.getContext("2d");ce&&K?(ce.fillStyle="rgba(0, 255, 100, 0.5)",le.forEach(me=>{const{width:Te,height:be,top:Xe,left:Mt}=me.box;ce.beginPath();const Pi=Te*.1,Ti=be*.2,qn=Mt+Te/2,zn=Xe+be/2-be*.05,kt=Te/2+Pi,ht=be/2+Ti;ce.ellipse(qn,zn,kt,ht,0,0,2*Math.PI),ce.fill()}),gt()):K||alert("No faces detected by System or AI."),D(!1)};if(!t||!e)return null;const Bn=K=>"touches"in K?{x:K.touches[0].clientX,y:K.touches[0].clientY}:{x:K.clientX,y:K.clientY},_i=(K,le)=>{const ce=le.getBoundingClientRect(),me=Bn(K),Te=(me.x-ce.left)*(le.width/ce.width),be=(me.y-ce.top)*(le.height/ce.height);return{x:Te,y:be}},fn=K=>{if(V==="move"){J(!0);const le=Bn(K);he({x:le.x-v.x,y:le.y-v.y})}else V==="bucket"?(Vo(K),gt()):(x(!0),O(!0),Po(K))},ti=K=>{if(V==="move"&&X){const le=Bn(K);E({x:le.x-ne.x,y:le.y-ne.y})}else N&&V!=="move"&&V!=="bucket"&&Po(K)},ni=()=>{var ce,me;J(!1),N&&U&&gt(),x(!1),O(!1);const K=(ce=se.current)==null?void 0:ce.getContext("2d");K&&K.beginPath();const le=(me=fe.current)==null?void 0:me.getContext("2d");le&&le.beginPath()},Po=K=>{let le=se.current,ce=ee,me="source-over";if(V==="mask"?(le=fe.current,ce="rgba(0, 255, 100, 0.5)"):V==="eraser"&&(me="destination-out"),!le)return;const Te=le.getContext("2d");if(!Te)return;const{x:be,y:Xe}=_i(K,le);Te.lineWidth=ye,Te.lineCap="round",Te.lineJoin="round",Te.strokeStyle=ce,Te.globalCompositeOperation=me,Te.lineTo(be,Xe),Te.stroke(),Te.beginPath(),Te.moveTo(be,Xe),Te.globalCompositeOperation="source-over"},Vo=K=>{if(!se.current||!fe.current)return;const le=se.current,ce=fe.current,me=le.getContext("2d"),Te=ce.getContext("2d");if(!me||!Te)return;const{x:be,y:Xe}=_i(K,le),Mt=Math.floor(be),Pi=Math.floor(Xe),Ti=le.width,qn=le.height,zn=me.getImageData(0,0,Ti,qn),kt=Te.getImageData(0,0,Ti,qn),ht=zn.data,en=kt.data,kr=ee.replace("#",""),Uo=parseInt(kr.substring(0,2),16),Lr=parseInt(kr.substring(2,4),16),Vi=parseInt(kr.substring(4,6),16),Gn=255,Hn=(Pi*Ti+Mt)*4,Nn=ht[Hn],Tn=ht[Hn+1],Ei=ht[Hn+2],eo=ht[Hn+3];if(Nn===Uo&&Tn===Lr&&Ei===Vi&&eo===Gn)return;const ii=[[Mt,Pi]];for(;ii.length;){const[tn,dn]=ii.pop(),pt=(dn*Ti+tn)*4;tn<0||tn>=Ti||dn<0||dn>=qn||en[pt+3]>10||ht[pt]===Nn&&ht[pt+1]===Tn&&ht[pt+2]===Ei&&ht[pt+3]===eo&&(ht[pt]=Uo,ht[pt+1]=Lr,ht[pt+2]=Vi,ht[pt+3]=Gn,ii.push([tn+1,dn]),ii.push([tn-1,dn]),ii.push([tn,dn+1]),ii.push([tn,dn-1]))}me.putImageData(zn,0,0)},Di=()=>{if(!te.current)return;const K=2048,le=document.createElement("canvas");le.width=K,le.height=K;const ce=le.getContext("2d");if(!ce)return;ce.imageSmoothingEnabled=!0,ce.imageSmoothingQuality="high",ce.fillStyle="#000",ce.fillRect(0,0,K,K);const me=K/Me;ce.translate(K/2,K/2),ce.translate(v.x*me,v.y*me),ce.scale(g,g);const Te=te.current.naturalWidth/te.current.naturalHeight,be=K,Xe=be*Te;ce.drawImage(te.current,-Xe/2,-be/2,Xe,be),se.current&&ce.drawImage(se.current,-Xe/2,-be/2,Xe,be),le.toBlob(Mt=>{Mt&&o(Mt)},"image/jpeg",.95)},vi=async()=>{if(!e||typeof e=="string"){alert("AI Edit requires a fresh file upload for now. Please re-upload.");return}D(!0);try{const K=await s(e,Be);d(K),m(1),E({x:0,y:0}),De(se.current),De(fe.current),P([]),$e(-1),$("move"),gt()}catch(K){console.error("AI Edit failed",K),alert("Failed to generate image.")}finally{D(!1)}},vn=({tool:K,icon:le,label:ce})=>b.jsxs("button",{onClick:()=>$(K),className:`flex flex-col items-center justify-center p-3 rounded-xl transition-all w-full border ${V===K?"bg-primary-600/20 border-primary-500 text-white shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-gray-800 border-transparent text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,children:[b.jsx(le,{size:20,className:"mb-1"}),b.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider",children:ce})]});return b.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-md p-4",children:b.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-6xl max-h-[95vh] flex flex-col shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[b.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-950/50 flex-shrink-0",children:[b.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[b.jsx(x2,{size:18,className:"text-primary-400"}),"Image Studio"]}),b.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:b.jsx(IS,{size:20})})]}),b.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[b.jsxs("div",{className:"w-full md:w-24 bg-gray-900 border-r border-gray-800 p-2 flex md:flex-col gap-2 overflow-x-auto md:overflow-visible flex-shrink-0 z-10",children:[b.jsx(vn,{tool:"move",icon:sT,label:"Move"}),b.jsx("div",{className:"w-full h-px bg-gray-800 my-1 hidden md:block"}),b.jsx(vn,{tool:"mask",icon:lT,label:"Preserve"}),b.jsx(vn,{tool:"bucket",icon:aT,label:"Fill"}),b.jsx(vn,{tool:"brush",icon:cf,label:"Paint"}),b.jsx(vn,{tool:"eraser",icon:rT,label:"Erase"})]}),b.jsxs("div",{className:"flex-1 bg-black/40 relative overflow-hidden flex items-center justify-center",children:[b.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#4f46e5 1px, transparent 1px)",backgroundSize:"20px 20px"}}),b.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:"linear-gradient(45deg, #333 25%, transparent 25%), linear-gradient(-45deg, #333 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #333 75%), linear-gradient(-45deg, transparent 75%, #333 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"}}),b.jsx("div",{className:"relative w-full h-full p-8 flex items-center justify-center overflow-hidden",children:u?b.jsx(b.Fragment,{children:b.jsxs("div",{ref:we,className:`relative border-2 border-white/20 shadow-[0_0_0_9999px_rgba(0,0,0,0.8)] overflow-hidden bg-black ${V==="move"?"cursor-move":V==="bucket"?"cursor-crosshair":"cursor-none"}`,style:{width:`${Me}px`,height:`${Me}px`},onMouseDown:fn,onMouseMove:ti,onMouseUp:ni,onMouseLeave:ni,onTouchStart:fn,onTouchMove:ti,onTouchEnd:ni,children:[b.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",transform:`translate(${v.x}px, ${v.y}px) scale(${g})`,transformOrigin:"center center",transition:X?"none":"transform 0.1s ease-out"},children:b.jsxs("div",{className:"relative",children:[b.jsx("img",{ref:te,src:u,onLoad:xn,alt:"Edit",className:"max-w-none pointer-events-none select-none block",style:{height:`${Me}px`,width:"auto"},draggable:!1}),b.jsx("canvas",{ref:se,className:"absolute inset-0 w-full h-full pointer-events-none"}),b.jsx("canvas",{ref:fe,className:"absolute inset-0 w-full h-full pointer-events-none opacity-60 mix-blend-screen"})]})}),S&&b.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10 border border-white/10",children:[b.jsx("div",{className:"w-full h-full grid grid-cols-3 grid-rows-3",children:[...Array(9)].map((K,le)=>b.jsx("div",{className:"border border-white/10"},le))}),b.jsx("div",{className:"absolute top-0 left-0 w-full h-full border border-white/50"})]}),(V==="brush"||V==="mask"||V==="eraser")&&!X&&b.jsx("div",{className:"pointer-events-none fixed border-2 rounded-full z-50 -translate-x-1/2 -translate-y-1/2",style:{width:ye*M*g,height:ye*M*g,borderColor:V==="mask"?"#0aff60":V==="eraser"?"white":ee,left:"var(--cursor-x, -100px)",top:"var(--cursor-y, -100px)"},ref:K=>{K&&document.addEventListener("mousemove",le=>{K.style.setProperty("--cursor-x",`${le.clientX}px`),K.style.setProperty("--cursor-y",`${le.clientY}px`)})}})]})}):b.jsxs("div",{className:"text-gray-500 flex flex-col items-center",children:[b.jsx($l,{className:"animate-spin mb-2"}),"Loading Image..."]})}),W&&b.jsxs("div",{className:"absolute inset-0 bg-black/80 flex flex-col items-center justify-center z-50 backdrop-blur-sm",children:[b.jsx($l,{size:48,className:"text-neon-purple animate-spin mb-4"}),b.jsx("span",{className:"text-white text-lg font-medium animate-pulse",children:"Generating AI Background..."})]})]}),b.jsxs("div",{className:"w-full md:w-80 bg-gray-900 border-l border-gray-800 p-6 overflow-y-auto flex-shrink-0",children:[b.jsxs("div",{className:"mb-6 p-4 bg-gray-800 rounded-xl border border-gray-700",children:[b.jsxs("h4",{className:"text-white font-bold mb-1 flex items-center gap-2",children:[V==="move"&&b.jsx(sT,{size:16}),V==="mask"&&b.jsx(lT,{size:16}),V==="bucket"&&b.jsx(aT,{size:16}),V==="brush"&&b.jsx(cf,{size:16}),V==="eraser"&&b.jsx(rT,{size:16}),b.jsxs("span",{className:"capitalize",children:[V," Tool"]})]}),b.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[V==="move"&&"Drag image to position inside the square frame.",V==="mask"&&"Draw over subject to PROTECT it from fills.",V==="bucket"&&"Fill empty areas. Respects protective mask.",V==="brush"&&"Freehand paint.",V==="eraser"&&"Erase paint."]})]}),b.jsxs("div",{className:"space-y-4 mb-6",children:[b.jsxs("div",{className:"flex justify-between",children:[b.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Zoom"}),b.jsxs("span",{className:"text-xs text-primary-400 font-mono",children:[g.toFixed(1),"x"]})]}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(_P,{size:16,className:"text-gray-500"}),b.jsx("input",{type:"range",min:"0.5",max:"15",step:"0.1",value:g,onChange:K=>m(parseFloat(K.target.value)),className:"flex-1 h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary-500"})]})]}),b.jsxs("div",{className:"flex items-center justify-between mb-8 pb-4 border-b border-gray-800",children:[b.jsxs("label",{className:"text-xs font-bold text-gray-400 uppercase flex items-center gap-2",children:[b.jsx(w2,{size:14})," Show Grid"]}),b.jsx("button",{onClick:()=>I(!S),className:`w-10 h-5 rounded-full relative transition-colors ${S?"bg-primary-600":"bg-gray-700"}`,children:b.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${S?"translate-x-5":"translate-x-0"}`})})]}),V!=="move"&&b.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex justify-between text-xs text-gray-400 font-bold uppercase",children:[b.jsx("span",{children:"Brush Size"}),b.jsxs("span",{children:[ye,"px"]})]}),b.jsx("input",{type:"range",min:"1",max:"150",value:ye,onChange:K=>Oe(parseInt(K.target.value)),className:"w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-white"})]}),(V==="brush"||V==="bucket")&&b.jsxs("div",{className:"space-y-3",children:[b.jsxs("label",{className:"text-xs font-bold text-gray-400 uppercase flex items-center gap-2",children:[b.jsx(z2,{size:14})," Color"]}),b.jsxs("div",{className:"flex gap-2 flex-wrap",children:[["#ff0055","#00f3ff","#bc13fe","#0aff60","#ffffff","#000000"].map(K=>b.jsx("button",{onClick:()=>de(K),className:`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 ${ee===K?"border-white scale-110":"border-transparent"}`,style:{backgroundColor:K}},K)),b.jsx("input",{type:"color",value:ee,onChange:K=>de(K.target.value),className:"w-8 h-8 rounded-full cursor-pointer bg-transparent border-0 p-0 overflow-hidden"})]})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs("button",{onClick:dt,disabled:Ce<0,className:"flex-1 py-2 text-xs font-bold text-gray-300 hover:bg-gray-800 border border-gray-700 rounded transition-colors flex items-center justify-center gap-2 disabled:opacity-50",title:"Undo last stroke",children:[b.jsx(lP,{size:14})," Undo"]}),b.jsxs("button",{onClick:()=>{De(se.current),De(fe.current),gt()},className:"flex-1 py-2 text-xs font-bold text-red-400 hover:bg-red-900/20 border border-red-900/30 rounded transition-colors flex items-center justify-center gap-2",children:[b.jsx(Z2,{size:14})," Reset"]})]})]}),V==="mask"&&b.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800",children:[b.jsxs("button",{onClick:Fn,className:"w-full py-2 bg-green-900/30 text-green-400 border border-green-800 rounded hover:bg-green-900/50 transition-colors flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-wider",children:[b.jsx(nP,{size:14})," Auto-Detect Face"]}),b.jsx("p",{className:"text-[10px] text-gray-500 mt-2 text-center",children:"Attempts to auto-mask faces using system detection."})]}),b.jsxs("div",{className:"mt-4 pt-6 border-t border-gray-800 space-y-4",children:[b.jsxs("label",{className:"text-xs font-bold text-neon-blue uppercase flex items-center gap-2",children:[b.jsx(lm,{size:14}),"Generative Fill"]}),b.jsx("textarea",{value:Be,onChange:K=>F(K.target.value),placeholder:"Describe the background...",className:"w-full bg-black/30 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-neon-blue placeholder-gray-600 resize-none h-20"}),b.jsx("button",{onClick:vi,disabled:W,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-500 text-white px-4 py-3 rounded-lg font-bold text-sm hover:brightness-110 disabled:opacity-50 transition-all shadow-lg shadow-blue-900/20",children:W?"Generating...":"Generate New Image"})]})]})]}),b.jsxs("div",{className:"p-4 border-t border-gray-800 flex justify-end gap-3 bg-gray-950/50 flex-shrink-0",children:[b.jsx("button",{onClick:n,className:"px-5 py-2.5 text-gray-400 hover:text-white text-sm font-medium transition-colors",children:"Discard"}),b.jsxs("button",{onClick:Di,className:"px-8 py-2.5 bg-white text-black rounded-full text-sm font-bold hover:bg-gray-200 transition-colors flex items-center gap-2 shadow-[0_0_20px_rgba(255,255,255,0.2)]",children:[b.jsx(h2,{size:18}),"Save & Apply"]})]})]})})},SP=()=>{};var uT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let s=t.charCodeAt(o);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++o)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},AP=function(t){const e=[];let n=0,o=0;for(;n<t.length;){const s=t[n++];if(s<128)e[o++]=String.fromCharCode(s);else if(s>191&&s<224){const l=t[n++];e[o++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=t[n++],u=t[n++],d=t[n++],g=((s&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const l=t[n++],u=t[n++];e[o++]=String.fromCharCode((s&15)<<12|(l&63)<<6|u&63)}}return e.join("")},wS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let s=0;s<t.length;s+=3){const l=t[s],u=s+1<t.length,d=u?t[s+1]:0,g=s+2<t.length,m=g?t[s+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|m>>6,I=m&63;g||(I=64,u||(S=64)),o.push(n[v],n[E],n[S],n[I])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let s=0;s<t.length;){const l=n[t.charAt(s++)],d=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,l==null||d==null||m==null||E==null)throw new CP;const S=l<<2|d>>4;if(o.push(S),m!==64){const I=d<<4&240|m>>2;if(o.push(I),E!==64){const M=m<<6&192|E;o.push(M)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IP=function(t){const e=RS(t);return wS.encodeByteArray(e,!0)},df=function(t){return IP(t).replace(/\./g,"")},RP=function(t){try{return wS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=()=>wP().__FIREBASE_DEFAULTS__,xP=()=>{if(typeof process>"u"||typeof uT>"u")return;const t=uT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RP(t[1]);return e&&JSON.parse(e)},um=()=>{try{return SP()||bP()||xP()||NP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MP=t=>{var e,n;return(n=(e=um())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bS=t=>{const e=MP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},xS=()=>{var t;return(t=um())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function NS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",s=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[df(JSON.stringify(n)),df(JSON.stringify(u)),""].join(".")}const Fl={};function PP(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fl))Fl[e]?t.emulator.push(e):t.prod.push(e);return t}function VP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let cT=!1;function DS(t,e){if(typeof window>"u"||typeof document>"u"||!iu(window.location.host)||Fl[t]===e||Fl[t]||cT)return;Fl[t]=e;function n(S){return`__firebase__banner__${S}`}const o="__firebase__banner",l=PP().prod.length>0;function u(){const S=document.getElementById(o);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{cT=!0,u()},S}function v(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=VP(o),I=n("text"),M=document.getElementById(I)||document.createElement("span"),L=n("learnmore"),V=document.getElementById(L)||document.createElement("a"),$=n("preprendIcon"),X=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const J=S.element;d(J),v(V,L);const ne=m();g(X,$),J.append(X,M,V,ne),document.body.appendChild(J)}l?(M.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kP(){var t;const e=(t=um())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LP(){return!kP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OP(){try{return typeof indexedDB=="object"}catch{return!1}}function FP(){return new Promise((t,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(o);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(o),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP="FirebaseError";class ys extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=BP,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,PS.prototype.create)}}class PS{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},s=`${this.service}/${e}`,l=this.errors[e],u=l?qP(l,o):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new ys(s,d,o)}}function qP(t,e){return t.replace(zP,(n,o)=>{const s=e[o];return s!=null?String(s):`<${o}?>`})}const zP=/\{\$([^}]+)}/g;function hf(t,e){if(t===e)return!0;const n=Object.keys(t),o=Object.keys(e);for(const s of n){if(!o.includes(s))return!1;const l=t[s],u=e[s];if(fT(l)&&fT(u)){if(!hf(l,u))return!1}else if(l!==u)return!1}for(const s of o)if(!n.includes(s))return!1;return!0}function fT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t){return t&&t._delegate?t._delegate:t}class va{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new DP;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&o.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YP(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:s});o.resolve(l)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&u.resolve(s)}return s}onInit(e,n){var o;const s=this.normalizeInstanceIdentifier(n),l=(o=this.onInitCallbacks.get(s))!==null&&o!==void 0?o:new Set;l.add(e),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&e(u,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const s of o)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:HP(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HP(t){return t===cs?void 0:t}function YP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const JP={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},KP=je.INFO,QP={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},XP=(t,e,...n)=>{if(e<t.logLevel)return;const o=new Date().toISOString(),s=QP[e];if(s)console[s](`[${o}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class VS{constructor(e){this.name=e,this._logLevel=KP,this._logHandler=XP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const WP=(t,e)=>e.some(n=>t instanceof n);let dT,hT;function ZP(){return dT||(dT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jP(){return hT||(hT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const US=new WeakMap,Rp=new WeakMap,kS=new WeakMap,jh=new WeakMap,cm=new WeakMap;function eV(t){const e=new Promise((n,o)=>{const s=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(Sr(t.result)),s()},u=()=>{o(t.error),s()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&US.set(n,t)}).catch(()=>{}),cm.set(e,t),e}function tV(t){if(Rp.has(t))return;const e=new Promise((n,o)=>{const s=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),s()},u=()=>{o(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});Rp.set(t,e)}let wp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nV(t){wp=t(wp)}function iV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(ep(this),e,...n);return kS.set(o,e.sort?e.sort():[e]),Sr(o)}:jP().includes(t)?function(...e){return t.apply(ep(this),e),Sr(US.get(this))}:function(...e){return Sr(t.apply(ep(this),e))}}function oV(t){return typeof t=="function"?iV(t):(t instanceof IDBTransaction&&tV(t),WP(t,ZP())?new Proxy(t,wp):t)}function Sr(t){if(t instanceof IDBRequest)return eV(t);if(jh.has(t))return jh.get(t);const e=oV(t);return e!==t&&(jh.set(t,e),cm.set(e,t)),e}const ep=t=>cm.get(t);function rV(t,e,{blocked:n,upgrade:o,blocking:s,terminated:l}={}){const u=indexedDB.open(t,e),d=Sr(u);return o&&u.addEventListener("upgradeneeded",g=>{o(Sr(u.result),g.oldVersion,g.newVersion,Sr(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),s&&g.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const sV=["get","getKey","getAll","getAllKeys","count"],aV=["put","add","delete","clear"],tp=new Map;function pT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tp.get(e))return tp.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,s=aV.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(s||sV.includes(n)))return;const l=async function(u,...d){const g=this.transaction(u,s?"readwrite":"readonly");let m=g.store;return o&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),s&&g.done]))[0]};return tp.set(e,l),l}nV(t=>({...t,get:(e,n,o)=>pT(e,n)||t.get(e,n,o),has:(e,n)=>!!pT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uV(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function uV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bp="@firebase/app",mT="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new VS("@firebase/app"),cV="@firebase/app-compat",fV="@firebase/analytics-compat",dV="@firebase/analytics",hV="@firebase/app-check-compat",pV="@firebase/app-check",mV="@firebase/auth",gV="@firebase/auth-compat",yV="@firebase/database",_V="@firebase/data-connect",vV="@firebase/database-compat",TV="@firebase/functions",EV="@firebase/functions-compat",SV="@firebase/installations",AV="@firebase/installations-compat",CV="@firebase/messaging",IV="@firebase/messaging-compat",RV="@firebase/performance",wV="@firebase/performance-compat",bV="@firebase/remote-config",xV="@firebase/remote-config-compat",NV="@firebase/storage",MV="@firebase/storage-compat",DV="@firebase/firestore",PV="@firebase/ai",VV="@firebase/firestore-compat",UV="firebase",kV="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="[DEFAULT]",LV={[bp]:"fire-core",[cV]:"fire-core-compat",[dV]:"fire-analytics",[fV]:"fire-analytics-compat",[pV]:"fire-app-check",[hV]:"fire-app-check-compat",[mV]:"fire-auth",[gV]:"fire-auth-compat",[yV]:"fire-rtdb",[_V]:"fire-data-connect",[vV]:"fire-rtdb-compat",[TV]:"fire-fn",[EV]:"fire-fn-compat",[SV]:"fire-iid",[AV]:"fire-iid-compat",[CV]:"fire-fcm",[IV]:"fire-fcm-compat",[RV]:"fire-perf",[wV]:"fire-perf-compat",[bV]:"fire-rc",[xV]:"fire-rc-compat",[NV]:"fire-gcs",[MV]:"fire-gcs-compat",[DV]:"fire-fst",[VV]:"fire-fst-compat",[PV]:"fire-vertex","fire-js":"fire-js",[UV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Map,OV=new Map,Np=new Map;function gT(t,e){try{t.container.addComponent(e)}catch(n){bo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Kl(t){const e=t.name;if(Np.has(e))return bo.debug(`There were multiple attempts to register component ${e}.`),!1;Np.set(e,t);for(const n of Jl.values())gT(n,t);for(const n of OV.values())gT(n,t);return!0}function LS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function OS(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new PS("app","Firebase",FV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=kV;function BS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const o=Object.assign({name:xp,automaticDataCollectionEnabled:!0},e),s=o.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(n||(n=xS()),!n)throw Ar.create("no-options");const l=Jl.get(s);if(l){if(hf(n,l.options)&&hf(o,l.config))return l;throw Ar.create("duplicate-app",{appName:s})}const u=new $P(s);for(const g of Np.values())u.addComponent(g);const d=new BV(n,o,u);return Jl.set(s,d),d}function qS(t=xp){const e=Jl.get(t);if(!e&&t===xp&&xS())return BS();if(!e)throw Ar.create("no-app",{appName:t});return e}function yT(){return Array.from(Jl.values())}function Cr(t,e,n){var o;let s=(o=LV[t])!==null&&o!==void 0?o:t;n&&(s+=`-${n}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bo.warn(d.join(" "));return}Kl(new va(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="firebase-heartbeat-database",zV=1,Ql="firebase-heartbeat-store";let np=null;function zS(){return np||(np=rV(qV,zV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ql)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),np}async function GV(t){try{const n=(await zS()).transaction(Ql),o=await n.objectStore(Ql).get(GS(t));return await n.done,o}catch(e){if(e instanceof ys)bo.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bo.warn(n.message)}}}async function _T(t,e){try{const o=(await zS()).transaction(Ql,"readwrite");await o.objectStore(Ql).put(e,GS(t)),await o.done}catch(n){if(n instanceof ys)bo.warn(n.message);else{const o=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bo.warn(o.message)}}}function GS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=1024,YV=30;class $V{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KV(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=vT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>YV){const u=QV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){bo.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vT(),{heartbeatsToSend:o,unsentEntries:s}=JV(this._heartbeatsCache.heartbeats),l=df(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return bo.warn(n),""}}}function vT(){return new Date().toISOString().substring(0,10)}function JV(t,e=HV){const n=[];let o=t.slice();for(const s of t){const l=n.find(u=>u.agent===s.agent);if(l){if(l.dates.push(s.date),TT(n)>e){l.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),TT(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class KV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OP()?FP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _T(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _T(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function TT(t){return df(JSON.stringify({version:2,heartbeats:t})).length}function QV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let o=1;o<t.length;o++)t[o].date<n&&(n=t[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t){Kl(new va("platform-logger",e=>new lV(e),"PRIVATE")),Kl(new va("heartbeat",e=>new $V(e),"PRIVATE")),Cr(bp,mT,t),Cr(bp,mT,"esm2017"),Cr("fire-js","")}XV("");var WV="firebase",ZV="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(WV,ZV,"app");var ET=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ir,HS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function x(){}x.prototype=N.prototype,D.D=N.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(U,O,q){for(var P=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)P[Ce-2]=arguments[Ce];return N.prototype[O].apply(U,P)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,n),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,N,x){x||(x=0);var U=Array(16);if(typeof N=="string")for(var O=0;16>O;++O)U[O]=N.charCodeAt(x++)|N.charCodeAt(x++)<<8|N.charCodeAt(x++)<<16|N.charCodeAt(x++)<<24;else for(O=0;16>O;++O)U[O]=N[x++]|N[x++]<<8|N[x++]<<16|N[x++]<<24;N=D.g[0],x=D.g[1],O=D.g[2];var q=D.g[3],P=N+(q^x&(O^q))+U[0]+3614090360&4294967295;N=x+(P<<7&4294967295|P>>>25),P=q+(O^N&(x^O))+U[1]+3905402710&4294967295,q=N+(P<<12&4294967295|P>>>20),P=O+(x^q&(N^x))+U[2]+606105819&4294967295,O=q+(P<<17&4294967295|P>>>15),P=x+(N^O&(q^N))+U[3]+3250441966&4294967295,x=O+(P<<22&4294967295|P>>>10),P=N+(q^x&(O^q))+U[4]+4118548399&4294967295,N=x+(P<<7&4294967295|P>>>25),P=q+(O^N&(x^O))+U[5]+1200080426&4294967295,q=N+(P<<12&4294967295|P>>>20),P=O+(x^q&(N^x))+U[6]+2821735955&4294967295,O=q+(P<<17&4294967295|P>>>15),P=x+(N^O&(q^N))+U[7]+4249261313&4294967295,x=O+(P<<22&4294967295|P>>>10),P=N+(q^x&(O^q))+U[8]+1770035416&4294967295,N=x+(P<<7&4294967295|P>>>25),P=q+(O^N&(x^O))+U[9]+2336552879&4294967295,q=N+(P<<12&4294967295|P>>>20),P=O+(x^q&(N^x))+U[10]+4294925233&4294967295,O=q+(P<<17&4294967295|P>>>15),P=x+(N^O&(q^N))+U[11]+2304563134&4294967295,x=O+(P<<22&4294967295|P>>>10),P=N+(q^x&(O^q))+U[12]+1804603682&4294967295,N=x+(P<<7&4294967295|P>>>25),P=q+(O^N&(x^O))+U[13]+4254626195&4294967295,q=N+(P<<12&4294967295|P>>>20),P=O+(x^q&(N^x))+U[14]+2792965006&4294967295,O=q+(P<<17&4294967295|P>>>15),P=x+(N^O&(q^N))+U[15]+1236535329&4294967295,x=O+(P<<22&4294967295|P>>>10),P=N+(O^q&(x^O))+U[1]+4129170786&4294967295,N=x+(P<<5&4294967295|P>>>27),P=q+(x^O&(N^x))+U[6]+3225465664&4294967295,q=N+(P<<9&4294967295|P>>>23),P=O+(N^x&(q^N))+U[11]+643717713&4294967295,O=q+(P<<14&4294967295|P>>>18),P=x+(q^N&(O^q))+U[0]+3921069994&4294967295,x=O+(P<<20&4294967295|P>>>12),P=N+(O^q&(x^O))+U[5]+3593408605&4294967295,N=x+(P<<5&4294967295|P>>>27),P=q+(x^O&(N^x))+U[10]+38016083&4294967295,q=N+(P<<9&4294967295|P>>>23),P=O+(N^x&(q^N))+U[15]+3634488961&4294967295,O=q+(P<<14&4294967295|P>>>18),P=x+(q^N&(O^q))+U[4]+3889429448&4294967295,x=O+(P<<20&4294967295|P>>>12),P=N+(O^q&(x^O))+U[9]+568446438&4294967295,N=x+(P<<5&4294967295|P>>>27),P=q+(x^O&(N^x))+U[14]+3275163606&4294967295,q=N+(P<<9&4294967295|P>>>23),P=O+(N^x&(q^N))+U[3]+4107603335&4294967295,O=q+(P<<14&4294967295|P>>>18),P=x+(q^N&(O^q))+U[8]+1163531501&4294967295,x=O+(P<<20&4294967295|P>>>12),P=N+(O^q&(x^O))+U[13]+2850285829&4294967295,N=x+(P<<5&4294967295|P>>>27),P=q+(x^O&(N^x))+U[2]+4243563512&4294967295,q=N+(P<<9&4294967295|P>>>23),P=O+(N^x&(q^N))+U[7]+1735328473&4294967295,O=q+(P<<14&4294967295|P>>>18),P=x+(q^N&(O^q))+U[12]+2368359562&4294967295,x=O+(P<<20&4294967295|P>>>12),P=N+(x^O^q)+U[5]+4294588738&4294967295,N=x+(P<<4&4294967295|P>>>28),P=q+(N^x^O)+U[8]+2272392833&4294967295,q=N+(P<<11&4294967295|P>>>21),P=O+(q^N^x)+U[11]+1839030562&4294967295,O=q+(P<<16&4294967295|P>>>16),P=x+(O^q^N)+U[14]+4259657740&4294967295,x=O+(P<<23&4294967295|P>>>9),P=N+(x^O^q)+U[1]+2763975236&4294967295,N=x+(P<<4&4294967295|P>>>28),P=q+(N^x^O)+U[4]+1272893353&4294967295,q=N+(P<<11&4294967295|P>>>21),P=O+(q^N^x)+U[7]+4139469664&4294967295,O=q+(P<<16&4294967295|P>>>16),P=x+(O^q^N)+U[10]+3200236656&4294967295,x=O+(P<<23&4294967295|P>>>9),P=N+(x^O^q)+U[13]+681279174&4294967295,N=x+(P<<4&4294967295|P>>>28),P=q+(N^x^O)+U[0]+3936430074&4294967295,q=N+(P<<11&4294967295|P>>>21),P=O+(q^N^x)+U[3]+3572445317&4294967295,O=q+(P<<16&4294967295|P>>>16),P=x+(O^q^N)+U[6]+76029189&4294967295,x=O+(P<<23&4294967295|P>>>9),P=N+(x^O^q)+U[9]+3654602809&4294967295,N=x+(P<<4&4294967295|P>>>28),P=q+(N^x^O)+U[12]+3873151461&4294967295,q=N+(P<<11&4294967295|P>>>21),P=O+(q^N^x)+U[15]+530742520&4294967295,O=q+(P<<16&4294967295|P>>>16),P=x+(O^q^N)+U[2]+3299628645&4294967295,x=O+(P<<23&4294967295|P>>>9),P=N+(O^(x|~q))+U[0]+4096336452&4294967295,N=x+(P<<6&4294967295|P>>>26),P=q+(x^(N|~O))+U[7]+1126891415&4294967295,q=N+(P<<10&4294967295|P>>>22),P=O+(N^(q|~x))+U[14]+2878612391&4294967295,O=q+(P<<15&4294967295|P>>>17),P=x+(q^(O|~N))+U[5]+4237533241&4294967295,x=O+(P<<21&4294967295|P>>>11),P=N+(O^(x|~q))+U[12]+1700485571&4294967295,N=x+(P<<6&4294967295|P>>>26),P=q+(x^(N|~O))+U[3]+2399980690&4294967295,q=N+(P<<10&4294967295|P>>>22),P=O+(N^(q|~x))+U[10]+4293915773&4294967295,O=q+(P<<15&4294967295|P>>>17),P=x+(q^(O|~N))+U[1]+2240044497&4294967295,x=O+(P<<21&4294967295|P>>>11),P=N+(O^(x|~q))+U[8]+1873313359&4294967295,N=x+(P<<6&4294967295|P>>>26),P=q+(x^(N|~O))+U[15]+4264355552&4294967295,q=N+(P<<10&4294967295|P>>>22),P=O+(N^(q|~x))+U[6]+2734768916&4294967295,O=q+(P<<15&4294967295|P>>>17),P=x+(q^(O|~N))+U[13]+1309151649&4294967295,x=O+(P<<21&4294967295|P>>>11),P=N+(O^(x|~q))+U[4]+4149444226&4294967295,N=x+(P<<6&4294967295|P>>>26),P=q+(x^(N|~O))+U[11]+3174756917&4294967295,q=N+(P<<10&4294967295|P>>>22),P=O+(N^(q|~x))+U[2]+718787259&4294967295,O=q+(P<<15&4294967295|P>>>17),P=x+(q^(O|~N))+U[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+q&4294967295}o.prototype.u=function(D,N){N===void 0&&(N=D.length);for(var x=N-this.blockSize,U=this.B,O=this.h,q=0;q<N;){if(O==0)for(;q<=x;)s(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<N;)if(U[O++]=D.charCodeAt(q++),O==this.blockSize){s(this,U),O=0;break}}else for(;q<N;)if(U[O++]=D[q++],O==this.blockSize){s(this,U),O=0;break}}this.h=O,this.o+=N},o.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;var x=8*this.o;for(N=D.length-8;N<D.length;++N)D[N]=x&255,x/=256;for(this.u(D),D=Array(16),N=x=0;4>N;++N)for(var U=0;32>U;U+=8)D[x++]=this.g[N]>>>U&255;return D};function l(D,N){var x=d;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=N(D)}function u(D,N){this.h=N;for(var x=[],U=!0,O=D.length-1;0<=O;O--){var q=D[O]|0;U&&q==N||(x[O]=q,U=!1)}this.g=x}var d={};function g(D){return-128<=D&&128>D?l(D,function(N){return new u([N|0],0>N?-1:0)}):new u([D|0],0>D?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return V(m(-D));for(var N=[],x=1,U=0;D>=x;U++)N[U]=D/x|0,x*=4294967296;return new u(N,0)}function v(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return V(v(D.substring(1),N));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=m(Math.pow(N,8)),U=E,O=0;O<D.length;O+=8){var q=Math.min(8,D.length-O),P=parseInt(D.substring(O,O+q),N);8>q?(q=m(Math.pow(N,q)),U=U.j(q).add(m(P))):(U=U.j(x),U=U.add(m(P)))}return U}var E=g(0),S=g(1),I=g(16777216);t=u.prototype,t.m=function(){if(L(this))return-V(this).m();for(var D=0,N=1,x=0;x<this.g.length;x++){var U=this.i(x);D+=(0<=U?U:4294967296+U)*N,N*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(L(this))return"-"+V(this).toString(D);for(var N=m(Math.pow(D,6)),x=this,U="";;){var O=ne(x,N).g;x=$(x,O.j(N));var q=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=O,M(x))return q+U;for(;6>q.length;)q="0"+q;U=q+U}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(var N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function L(D){return D.h==-1}t.l=function(D){return D=$(this,D),L(D)?-1:M(D)?0:1};function V(D){for(var N=D.g.length,x=[],U=0;U<N;U++)x[U]=~D.g[U];return new u(x,~D.h).add(S)}t.abs=function(){return L(this)?V(this):this},t.add=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],U=0,O=0;O<=N;O++){var q=U+(this.i(O)&65535)+(D.i(O)&65535),P=(q>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);U=P>>>16,q&=65535,P&=65535,x[O]=P<<16|q}return new u(x,x[x.length-1]&-2147483648?-1:0)};function $(D,N){return D.add(V(N))}t.j=function(D){if(M(this)||M(D))return E;if(L(this))return L(D)?V(this).j(V(D)):V(V(this).j(D));if(L(D))return V(this.j(V(D)));if(0>this.l(I)&&0>D.l(I))return m(this.m()*D.m());for(var N=this.g.length+D.g.length,x=[],U=0;U<2*N;U++)x[U]=0;for(U=0;U<this.g.length;U++)for(var O=0;O<D.g.length;O++){var q=this.i(U)>>>16,P=this.i(U)&65535,Ce=D.i(O)>>>16,$e=D.i(O)&65535;x[2*U+2*O]+=P*$e,X(x,2*U+2*O),x[2*U+2*O+1]+=q*$e,X(x,2*U+2*O+1),x[2*U+2*O+1]+=P*Ce,X(x,2*U+2*O+1),x[2*U+2*O+2]+=q*Ce,X(x,2*U+2*O+2)}for(U=0;U<N;U++)x[U]=x[2*U+1]<<16|x[2*U];for(U=N;U<2*N;U++)x[U]=0;return new u(x,0)};function X(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function J(D,N){this.g=D,this.h=N}function ne(D,N){if(M(N))throw Error("division by zero");if(M(D))return new J(E,E);if(L(D))return N=ne(V(D),N),new J(V(N.g),V(N.h));if(L(N))return N=ne(D,V(N)),new J(V(N.g),N.h);if(30<D.g.length){if(L(D)||L(N))throw Error("slowDivide_ only works with positive integers.");for(var x=S,U=N;0>=U.l(D);)x=he(x),U=he(U);var O=W(x,1),q=W(U,1);for(U=W(U,2),x=W(x,2);!M(U);){var P=q.add(U);0>=P.l(D)&&(O=O.add(x),q=P),U=W(U,1),x=W(x,1)}return N=$(D,O.j(N)),new J(O,N)}for(O=E;0<=D.l(N);){for(x=Math.max(1,Math.floor(D.m()/N.m())),U=Math.ceil(Math.log(x)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),q=m(x),P=q.j(N);L(P)||0<P.l(D);)x-=U,q=m(x),P=q.j(N);M(q)&&(q=S),O=O.add(q),D=$(D,P)}return new J(O,D)}t.A=function(D){return ne(this,D).h},t.and=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],U=0;U<N;U++)x[U]=this.i(U)&D.i(U);return new u(x,this.h&D.h)},t.or=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],U=0;U<N;U++)x[U]=this.i(U)|D.i(U);return new u(x,this.h|D.h)},t.xor=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],U=0;U<N;U++)x[U]=this.i(U)^D.i(U);return new u(x,this.h^D.h)};function he(D){for(var N=D.g.length+1,x=[],U=0;U<N;U++)x[U]=D.i(U)<<1|D.i(U-1)>>>31;return new u(x,D.h)}function W(D,N){var x=N>>5;N%=32;for(var U=D.g.length-x,O=[],q=0;q<U;q++)O[q]=0<N?D.i(q+x)>>>N|D.i(q+x+1)<<32-N:D.i(q+x);return new u(O,D.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,HS=o,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Ir=u}).apply(typeof ET<"u"?ET:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YS,kl,$S,Wc,Mp,JS,KS,QS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,T,C){return p==Array.prototype||p==Object.prototype||(p[T]=C.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var T=0;T<p.length;++T){var C=p[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=n(this);function s(p,T){if(T)e:{var C=o;p=p.split(".");for(var w=0;w<p.length-1;w++){var G=p[w];if(!(G in C))break e;C=C[G]}p=p[p.length-1],w=C[p],T=T(w),T!=w&&T!=null&&e(C,p,{configurable:!0,writable:!0,value:T})}}function l(p,T){p instanceof String&&(p+="");var C=0,w=!1,G={next:function(){if(!w&&C<p.length){var j=C++;return{value:T(j,p[j]),done:!1}}return w=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(p){return p||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function g(p){var T=typeof p;return T=T!="object"?T:p?Array.isArray(p)?"array":T:"null",T=="array"||T=="object"&&typeof p.length=="number"}function m(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function v(p,T,C){return p.call.apply(p.bind,arguments)}function E(p,T,C){if(!p)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,w),p.apply(T,G)}}return function(){return p.apply(T,arguments)}}function S(p,T,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function I(p,T){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),p.apply(this,w)}}function M(p,T){function C(){}C.prototype=T.prototype,p.aa=T.prototype,p.prototype=new C,p.prototype.constructor=p,p.Qb=function(w,G,j){for(var pe=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)pe[rt-2]=arguments[rt];return T.prototype[G].apply(w,pe)}}function L(p){const T=p.length;if(0<T){const C=Array(T);for(let w=0;w<T;w++)C[w]=p[w];return C}return[]}function V(p,T){for(let C=1;C<arguments.length;C++){const w=arguments[C];if(g(w)){const G=p.length||0,j=w.length||0;p.length=G+j;for(let pe=0;pe<j;pe++)p[G+pe]=w[pe]}else p.push(w)}}class ${constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function X(p){return/^[\s\xa0]*$/.test(p)}function J(){var p=d.navigator;return p&&(p=p.userAgent)?p:""}function ne(p){return ne[" "](p),p}ne[" "]=function(){};var he=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function W(p,T,C){for(const w in p)T.call(C,p[w],w,p)}function D(p,T){for(const C in p)T.call(void 0,p[C],C,p)}function N(p){const T={};for(const C in p)T[C]=p[C];return T}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(p,T){let C,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(C in w)p[C]=w[C];for(let j=0;j<x.length;j++)C=x[j],Object.prototype.hasOwnProperty.call(w,C)&&(p[C]=w[C])}}function O(p){var T=1;p=p.split(":");const C=[];for(;0<T&&p.length;)C.push(p.shift()),T--;return p.length&&C.push(p.join(":")),C}function q(p){d.setTimeout(()=>{throw p},0)}function P(){var p=Oe;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class Ce{constructor(){this.h=this.g=null}add(T,C){const w=$e.get();w.set(T,C),this.h?this.h.next=w:this.g=w,this.h=w}}var $e=new $(()=>new ee,p=>p.reset());class ee{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ye=!1,Oe=new Ce,Be=()=>{const p=d.Promise.resolve(void 0);de=()=>{p.then(F)}};var F=()=>{for(var p;p=P();){try{p.h.call(p.g)}catch(C){q(C)}var T=$e;T.j(p),100>T.h&&(T.h++,p.next=T.g,T.g=p)}ye=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var fe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};d.addEventListener("test",C,T),d.removeEventListener("test",C,T)}catch{}return p})();function we(p,T){if(se.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var C=this.type=p.type,w=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget){if(he){e:{try{ne(T.nodeName);var G=!0;break e}catch{}G=!1}G||(T=null)}}else C=="mouseover"?T=p.fromElement:C=="mouseout"&&(T=p.toElement);this.relatedTarget=T,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Me[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&we.aa.h.call(this)}}M(we,se);var Me={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),gt=0;function dt(p,T,C,w,G){this.listener=p,this.proxy=null,this.src=T,this.type=C,this.capture=!!w,this.ha=G,this.key=++gt,this.da=this.fa=!1}function xn(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Fn(p){this.src=p,this.g={},this.h=0}Fn.prototype.add=function(p,T,C,w,G){var j=p.toString();p=this.g[j],p||(p=this.g[j]=[],this.h++);var pe=_i(p,T,w,G);return-1<pe?(T=p[pe],C||(T.fa=!1)):(T=new dt(T,this.src,j,!!w,G),T.fa=C,p.push(T)),T};function Bn(p,T){var C=T.type;if(C in p.g){var w=p.g[C],G=Array.prototype.indexOf.call(w,T,void 0),j;(j=0<=G)&&Array.prototype.splice.call(w,G,1),j&&(xn(T),p.g[C].length==0&&(delete p.g[C],p.h--))}}function _i(p,T,C,w){for(var G=0;G<p.length;++G){var j=p[G];if(!j.da&&j.listener==T&&j.capture==!!C&&j.ha==w)return G}return-1}var fn="closure_lm_"+(1e6*Math.random()|0),ti={};function ni(p,T,C,w,G){if(Array.isArray(T)){for(var j=0;j<T.length;j++)ni(p,T[j],C,w,G);return null}return C=me(C),p&&p[De]?p.K(T,C,m(w)?!!w.capture:!1,G):Po(p,T,C,!1,w,G)}function Po(p,T,C,w,G,j){if(!T)throw Error("Invalid event type");var pe=m(G)?!!G.capture:!!G,rt=le(p);if(rt||(p[fn]=rt=new Fn(p)),C=rt.add(T,C,w,pe,j),C.proxy)return C;if(w=Vo(),C.proxy=w,w.src=p,w.listener=C,p.addEventListener)fe||(G=pe),G===void 0&&(G=!1),p.addEventListener(T.toString(),w,G);else if(p.attachEvent)p.attachEvent(vn(T.toString()),w);else if(p.addListener&&p.removeListener)p.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Vo(){function p(C){return T.call(p.src,p.listener,C)}const T=K;return p}function Di(p,T,C,w,G){if(Array.isArray(T))for(var j=0;j<T.length;j++)Di(p,T[j],C,w,G);else w=m(w)?!!w.capture:!!w,C=me(C),p&&p[De]?(p=p.i,T=String(T).toString(),T in p.g&&(j=p.g[T],C=_i(j,C,w,G),-1<C&&(xn(j[C]),Array.prototype.splice.call(j,C,1),j.length==0&&(delete p.g[T],p.h--)))):p&&(p=le(p))&&(T=p.g[T.toString()],p=-1,T&&(p=_i(T,C,w,G)),(C=-1<p?T[p]:null)&&vi(C))}function vi(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[De])Bn(T.i,p);else{var C=p.type,w=p.proxy;T.removeEventListener?T.removeEventListener(C,w,p.capture):T.detachEvent?T.detachEvent(vn(C),w):T.addListener&&T.removeListener&&T.removeListener(w),(C=le(T))?(Bn(C,p),C.h==0&&(C.src=null,T[fn]=null)):xn(p)}}}function vn(p){return p in ti?ti[p]:ti[p]="on"+p}function K(p,T){if(p.da)p=!0;else{T=new we(T,this);var C=p.listener,w=p.ha||p.src;p.fa&&vi(p),p=C.call(w,T)}return p}function le(p){return p=p[fn],p instanceof Fn?p:null}var ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(p){return typeof p=="function"?p:(p[ce]||(p[ce]=function(T){return p.handleEvent(T)}),p[ce])}function Te(){te.call(this),this.i=new Fn(this),this.M=this,this.F=null}M(Te,te),Te.prototype[De]=!0,Te.prototype.removeEventListener=function(p,T,C,w){Di(this,p,T,C,w)};function be(p,T){var C,w=p.F;if(w)for(C=[];w;w=w.F)C.push(w);if(p=p.M,w=T.type||T,typeof T=="string")T=new se(T,p);else if(T instanceof se)T.target=T.target||p;else{var G=T;T=new se(w,p),U(T,G)}if(G=!0,C)for(var j=C.length-1;0<=j;j--){var pe=T.g=C[j];G=Xe(pe,w,!0,T)&&G}if(pe=T.g=p,G=Xe(pe,w,!0,T)&&G,G=Xe(pe,w,!1,T)&&G,C)for(j=0;j<C.length;j++)pe=T.g=C[j],G=Xe(pe,w,!1,T)&&G}Te.prototype.N=function(){if(Te.aa.N.call(this),this.i){var p=this.i,T;for(T in p.g){for(var C=p.g[T],w=0;w<C.length;w++)xn(C[w]);delete p.g[T],p.h--}}this.F=null},Te.prototype.K=function(p,T,C,w){return this.i.add(String(p),T,!1,C,w)},Te.prototype.L=function(p,T,C,w){return this.i.add(String(p),T,!0,C,w)};function Xe(p,T,C,w){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();for(var G=!0,j=0;j<T.length;++j){var pe=T[j];if(pe&&!pe.da&&pe.capture==C){var rt=pe.listener,Lt=pe.ha||pe.src;pe.fa&&Bn(p.i,pe),G=rt.call(Lt,w)!==!1&&G}}return G&&!w.defaultPrevented}function Mt(p,T,C){if(typeof p=="function")C&&(p=S(p,C));else if(p&&typeof p.handleEvent=="function")p=S(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:d.setTimeout(p,T||0)}function Pi(p){p.g=Mt(()=>{p.g=null,p.i&&(p.i=!1,Pi(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class Ti extends te{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Pi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qn(p){te.call(this),this.h=p,this.g={}}M(qn,te);var zn=[];function kt(p){W(p.g,function(T,C){this.g.hasOwnProperty(C)&&vi(T)},p),p.g={}}qn.prototype.N=function(){qn.aa.N.call(this),kt(this)},qn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=d.JSON.stringify,en=d.JSON.parse,kr=class{stringify(p){return d.JSON.stringify(p,void 0)}parse(p){return d.JSON.parse(p,void 0)}};function Uo(){}Uo.prototype.h=null;function Lr(p){return p.h||(p.h=p.i())}function Vi(){}var Gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hn(){se.call(this,"d")}M(Hn,se);function Nn(){se.call(this,"c")}M(Nn,se);var Tn={},Ei=null;function eo(){return Ei=Ei||new Te}Tn.La="serverreachability";function ii(p){se.call(this,Tn.La,p)}M(ii,se);function tn(p){const T=eo();be(T,new ii(T))}Tn.STAT_EVENT="statevent";function dn(p,T){se.call(this,Tn.STAT_EVENT,p),this.stat=T}M(dn,se);function pt(p){const T=eo();be(T,new dn(T,p))}Tn.Ma="timingevent";function Pa(p,T){se.call(this,Tn.Ma,p),this.size=T}M(Pa,se);function ko(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){p()},T)}function Lo(){this.g=!0}Lo.prototype.xa=function(){this.g=!1};function Va(p,T,C,w,G,j){p.info(function(){if(p.g)if(j)for(var pe="",rt=j.split("&"),Lt=0;Lt<rt.length;Lt++){var qe=rt[Lt].split("=");if(1<qe.length){var Kt=qe[0];qe=qe[1];var Qt=Kt.split("_");pe=2<=Qt.length&&Qt[1]=="type"?pe+(Kt+"="+qe+"&"):pe+(Kt+"=redacted&")}}else pe=null;else pe=j;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+T+`
`+C+`
`+pe})}function Ua(p,T,C,w,G,j,pe){p.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+T+`
`+C+`
`+j+" "+pe})}function to(p,T,C,w){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+Ui(p,C)+(w?" "+w:"")})}function cu(p,T){p.info(function(){return"TIMEOUT: "+T})}Lo.prototype.info=function(){};function Ui(p,T){if(!p.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(p=0;p<C.length;p++)if(Array.isArray(C[p])){var w=C[p];if(!(2>w.length)){var G=w[1];if(Array.isArray(G)&&!(1>G.length)){var j=G[0];if(j!="noop"&&j!="stop"&&j!="close")for(var pe=1;pe<G.length;pe++)G[pe]=""}}}}return ht(C)}catch{return T}}var Ct={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ki;function Oo(){}M(Oo,Uo),Oo.prototype.g=function(){return new XMLHttpRequest},Oo.prototype.i=function(){return{}},ki=new Oo;function Li(p,T,C,w){this.j=p,this.i=T,this.l=C,this.R=w||1,this.U=new qn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fu}function fu(){this.i=null,this.g="",this.h=!1}var ka={},no={};function Or(p,T,C){p.L=1,p.v=qr(It(T)),p.m=C,p.P=!0,io(p,null)}function io(p,T){p.F=Date.now(),Si(p),p.A=It(p.v);var C=p.A,w=p.R;Array.isArray(w)||(w=[String(w)]),so(C.i,"t",w),p.C=0,C=p.j.J,p.h=new fu,p.g=wu(p.j,C?T:null,!p.m),0<p.O&&(p.M=new Ti(S(p.Y,p,p.g),p.O)),T=p.U,C=p.g,w=p.ca;var G="readystatechange";Array.isArray(G)||(G&&(zn[0]=G.toString()),G=zn);for(var j=0;j<G.length;j++){var pe=ni(C,G[j],w||T.handleEvent,!1,T.h||T);if(!pe)break;T.g[pe.key]=pe}T=p.H?N(p.H):{},p.m?(p.u||(p.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,T)):(p.u="GET",p.g.ea(p.A,p.u,null,T)),tn(),Va(p.i,p.u,p.A,p.l,p.R,p.m)}Li.prototype.ca=function(p){p=p.target;const T=this.M;T&&An(p)==3?T.j():this.Y(p)},Li.prototype.Y=function(p){try{if(p==this.g)e:{const Qt=An(this.g);var T=this.g.Ba();const Wo=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Hr(this.g)))){this.J||Qt!=4||T==7||(T==8||0>=Wo?tn(3):tn(2)),As(this);var C=this.g.Z();this.X=C;t:if(oo(this)){var w=Hr(this.g);p="";var G=w.length,j=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),Fo(this);var pe="";break t}this.h.i=new d.TextDecoder}for(T=0;T<G;T++)this.h.h=!0,p+=this.h.i.decode(w[T],{stream:!(j&&T==G-1)});w.length=0,this.h.g+=p,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=C==200,Ua(this.i,this.u,this.A,this.l,this.R,Qt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,Lt=this.g;if((rt=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(rt)){var qe=rt;break t}}qe=null}if(C=qe)to(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oi(this,C);else{this.o=!1,this.s=3,pt(12),En(this),Fo(this);break e}}if(this.P){C=!0;let Dn;for(;!this.J&&this.C<pe.length;)if(Dn=Fr(this,pe),Dn==no){Qt==4&&(this.s=4,pt(14),C=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==ka){this.s=4,pt(15),to(this.i,this.l,pe,"[Invalid Chunk]"),C=!1;break}else to(this.i,this.l,Dn,null),Oi(this,Dn);if(oo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||pe.length!=0||this.h.h||(this.s=1,pt(16),C=!1),this.o=this.o&&C,!C)to(this.i,this.l,pe,"[Invalid Chunked Response]"),En(this),Fo(this);else if(0<pe.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),Ja(Kt),Kt.M=!0,pt(11))}}else to(this.i,this.l,pe,null),Oi(this,pe);Qt==4&&En(this),this.o&&!this.J&&(Qt==4?Cu(this.j,this):(this.o=!1,Si(this)))}else _u(this.g),C==400&&0<pe.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),En(this),Fo(this)}}}catch{}finally{}};function oo(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Fr(p,T){var C=p.C,w=T.indexOf(`
`,C);return w==-1?no:(C=Number(T.substring(C,w)),isNaN(C)?ka:(w+=1,w+C>T.length?no:(T=T.slice(w,w+C),p.C=w+C,T)))}Li.prototype.cancel=function(){this.J=!0,En(this)};function Si(p){p.S=Date.now()+p.I,Dt(p,p.I)}function Dt(p,T){if(p.B!=null)throw Error("WatchDog timer not null");p.B=ko(S(p.ba,p),T)}function As(p){p.B&&(d.clearTimeout(p.B),p.B=null)}Li.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(cu(this.i,this.A),this.L!=2&&(tn(),pt(17)),En(this),this.s=2,Fo(this)):Dt(this,this.S-p)};function Fo(p){p.j.G==0||p.J||Cu(p.j,p)}function En(p){As(p);var T=p.M;T&&typeof T.ma=="function"&&T.ma(),p.M=null,kt(p.U),p.g&&(T=p.g,p.g=null,T.abort(),T.ma())}function Oi(p,T){try{var C=p.j;if(C.G!=0&&(C.g==p||Bo(C.h,p))){if(!p.K&&Bo(C.h,p)&&C.G==3){try{var w=C.Da.g.parse(T)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<p.F)Qo(C),Ko(C);else break e;$a(C),pt(18)}}else C.za=G[1],0<C.za-C.T&&37500>G[2]&&C.F&&C.v==0&&!C.C&&(C.C=ko(S(C.Za,C),6e3));if(1>=du(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else lo(C,11)}else if((p.K||C.g==p)&&Qo(C),!X(T))for(G=C.Da.g.parse(T),T=0;T<G.length;T++){let qe=G[T];if(C.T=qe[0],qe=qe[1],C.G==2)if(qe[0]=="c"){C.K=qe[1],C.ia=qe[2];const Kt=qe[3];Kt!=null&&(C.la=Kt,C.j.info("VER="+C.la));const Qt=qe[4];Qt!=null&&(C.Aa=Qt,C.j.info("SVER="+C.Aa));const Wo=qe[5];Wo!=null&&typeof Wo=="number"&&0<Wo&&(w=1.5*Wo,C.L=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const Dn=p.g;if(Dn){const Jr=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var j=w.h;j.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(qo(j,j.h),j.h=null))}if(w.D){const uo=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(w.ya=uo,et(w.I,w.D,uo))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-p.F,C.j.info("Handshake RTT: "+C.R+"ms")),w=C;var pe=p;if(w.qa=Ru(w,w.J?w.ia:null,w.W),pe.K){oi(w.h,pe);var rt=pe,Lt=w.L;Lt&&(rt.I=Lt),rt.B&&(As(rt),Si(rt)),w.g=pe}else Su(w);0<C.i.length&&Ms(C)}else qe[0]!="stop"&&qe[0]!="close"||lo(C,7);else C.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?lo(C,7):Ha(C):qe[0]!="noop"&&C.l&&C.l.ta(qe),C.v=0)}}tn(4)}catch{}}var Yf=class{constructor(p,T){this.g=p,this.map=T}};function La(p){this.l=p||10,d.PerformanceNavigationTiming?(p=d.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oa(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function du(p){return p.h?1:p.g?p.g.size:0}function Bo(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function qo(p,T){p.g?p.g.add(T):p.h=T}function oi(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}La.prototype.cancel=function(){if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Sn(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const C of p.g.values())T=T.concat(C.D);return T}return L(p.i)}function hu(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(g(p)){for(var T=[],C=p.length,w=0;w<C;w++)T.push(p[w]);return T}T=[],C=0;for(w in p)T[C++]=p[w];return T}function $f(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(g(p)||typeof p=="string"){var T=[];p=p.length;for(var C=0;C<p;C++)T.push(C);return T}T=[],C=0;for(const w in p)T[C++]=w;return T}}}function Cs(p,T){if(p.forEach&&typeof p.forEach=="function")p.forEach(T,void 0);else if(g(p)||typeof p=="string")Array.prototype.forEach.call(p,T,void 0);else for(var C=$f(p),w=hu(p),G=w.length,j=0;j<G;j++)T.call(void 0,w[j],C&&C[j],p)}var Fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Is(p,T){if(p){p=p.split("&");for(var C=0;C<p.length;C++){var w=p[C].indexOf("="),G=null;if(0<=w){var j=p[C].substring(0,w);G=p[C].substring(w+1)}else j=p[C];T(j,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function ro(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof ro){this.h=p.h,zo(this,p.j),this.o=p.o,this.g=p.g,Br(this,p.s),this.l=p.l;var T=p.i,C=new Fi;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),Rs(this,C),this.m=p.m}else p&&(T=String(p).match(Fa))?(this.h=!1,zo(this,T[1]||"",!0),this.o=Go(T[2]||""),this.g=Go(T[3]||"",!0),Br(this,T[4]),this.l=Go(T[5]||"",!0),Rs(this,T[6]||"",!0),this.m=Go(T[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}ro.prototype.toString=function(){var p=[],T=this.j;T&&p.push(ri(T,Ba,!0),":");var C=this.g;return(C||T=="file")&&(p.push("//"),(T=this.o)&&p.push(ri(T,Ba,!0),"@"),p.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&p.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(ri(C,C.charAt(0)=="/"?qa:pu,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",ri(C,Qf)),p.join("")};function It(p){return new ro(p)}function zo(p,T,C){p.j=C?Go(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function Br(p,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);p.s=T}else p.s=null}function Rs(p,T,C){T instanceof Fi?(p.i=T,mu(p.i,p.h)):(C||(T=ri(T,Kf)),p.i=new Fi(T,p.h))}function et(p,T,C){p.i.set(T,C)}function qr(p){return et(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Go(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ri(p,T,C){return typeof p=="string"?(p=encodeURI(p).replace(T,Jf),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Jf(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ba=/[#\/\?@]/g,pu=/[#\?:]/g,qa=/[#\?]/g,Kf=/[#\?@]/g,Qf=/#/g;function Fi(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function Jt(p){p.g||(p.g=new Map,p.h=0,p.i&&Is(p.i,function(T,C){p.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}t=Fi.prototype,t.add=function(p,T){Jt(this),this.i=null,p=Yn(this,p);var C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(T),this.h+=1,this};function ws(p,T){Jt(p),T=Yn(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function bs(p,T){return Jt(p),T=Yn(p,T),p.g.has(T)}t.forEach=function(p,T){Jt(this),this.g.forEach(function(C,w){C.forEach(function(G){p.call(T,G,w,this)},this)},this)},t.na=function(){Jt(this);const p=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let w=0;w<T.length;w++){const G=p[w];for(let j=0;j<G.length;j++)C.push(T[w])}return C},t.V=function(p){Jt(this);let T=[];if(typeof p=="string")bs(this,p)&&(T=T.concat(this.g.get(Yn(this,p))));else{p=Array.from(this.g.values());for(let C=0;C<p.length;C++)T=T.concat(p[C])}return T},t.set=function(p,T){return Jt(this),this.i=null,p=Yn(this,p),bs(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},t.get=function(p,T){return p?(p=this.V(p),0<p.length?String(p[0]):T):T};function so(p,T,C){ws(p,T),0<C.length&&(p.i=null,p.g.set(Yn(p,T),L(C)),p.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var w=T[C];const j=encodeURIComponent(String(w)),pe=this.V(w);for(w=0;w<pe.length;w++){var G=j;pe[w]!==""&&(G+="="+encodeURIComponent(String(pe[w]))),p.push(G)}}return this.i=p.join("&")};function Yn(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function mu(p,T){T&&!p.j&&(Jt(p),p.i=null,p.g.forEach(function(C,w){var G=w.toLowerCase();w!=G&&(ws(this,w),so(this,G,C))},p)),p.j=T}function za(p,T){const C=new Lo;if(d.Image){const w=new Image;w.onload=I(Mn,C,"TestLoadImage: loaded",!0,T,w),w.onerror=I(Mn,C,"TestLoadImage: error",!1,T,w),w.onabort=I(Mn,C,"TestLoadImage: abort",!1,T,w),w.ontimeout=I(Mn,C,"TestLoadImage: timeout",!1,T,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=p}else T(!1)}function gu(p,T){const C=new Lo,w=new AbortController,G=setTimeout(()=>{w.abort(),Mn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:w.signal}).then(j=>{clearTimeout(G),j.ok?Mn(C,"TestPingServer: ok",!0,T):Mn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(G),Mn(C,"TestPingServer: error",!1,T)})}function Mn(p,T,C,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(C)}catch{}}function Ai(){this.g=new kr}function Ga(p,T,C){const w=C||"";try{Cs(p,function(G,j){let pe=G;m(G)&&(pe=ht(G)),T.push(w+j+"="+encodeURIComponent(pe))})}catch(G){throw T.push(w+"type="+encodeURIComponent("_badmap")),G}}function Bi(p){this.l=p.Ub||null,this.j=p.eb||!1}M(Bi,Uo),Bi.prototype.g=function(){return new $n(this.l,this.j)},Bi.prototype.i=(function(p){return function(){return p}})({});function $n(p,T){Te.call(this),this.D=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M($n,Te),t=$n.prototype,t.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=T,this.readyState=1,Ho(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(T.body=p),(this.D||d).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Ho(this)),this.g&&(this.readyState=3,Ho(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xs(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function xs(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?qi(this):Ho(this),this.readyState==3&&xs(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,qi(this))},t.Qa=function(p){this.g&&(this.response=p,qi(this))},t.ga=function(){this.g&&qi(this)};function qi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Ho(p)}t.setRequestHeader=function(p,T){this.u.append(p,T)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=T.next();return p.join(`\r
`)};function Ho(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty($n.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function zr(p){let T="";return W(p,function(C,w){T+=w,T+=":",T+=C,T+=`\r
`}),T}function Yo(p,T,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=zr(C),typeof p=="string"?C!=null&&encodeURIComponent(String(C)):et(p,T,C))}function vt(p){Te.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(vt,Te);var hn=/^https?$/i,ao=["POST","PUT"];t=vt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,T,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ki.g(),this.v=this.o?Lr(this.o):Lr(ki),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(j){Gr(this,j);return}if(p=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)C.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const j of w.keys())C.set(j,w.get(j));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(j=>j.toLowerCase()=="content-type"),G=d.FormData&&p instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ao,T,void 0))||w||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,pe]of C)this.g.setRequestHeader(j,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ns(this),this.u=!0,this.g.send(p),this.u=!1}catch(j){Gr(this,j)}};function Gr(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.m=5,$o(p),Jo(p)}function $o(p){p.A||(p.A=!0,be(p,"complete"),be(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,be(this,"complete"),be(this,"abort"),Jo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),vt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yu(this):this.bb())},t.bb=function(){yu(this)};function yu(p){if(p.h&&typeof u<"u"&&(!p.v[1]||An(p)!=4||p.Z()!=2)){if(p.u&&An(p)==4)Mt(p.Ea,0,p);else if(be(p,"readystatechange"),An(p)==4){p.h=!1;try{const pe=p.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var w;if(w=pe===0){var G=String(p.D).match(Fa)[1]||null;!G&&d.self&&d.self.location&&(G=d.self.location.protocol.slice(0,-1)),w=!hn.test(G?G.toLowerCase():"")}C=w}if(C)be(p,"complete"),be(p,"success");else{p.m=6;try{var j=2<An(p)?p.g.statusText:""}catch{j=""}p.l=j+" ["+p.Z()+"]",$o(p)}}finally{Jo(p)}}}}function Jo(p,T){if(p.g){Ns(p);const C=p.g,w=p.v[0]?()=>{}:null;p.g=null,p.v=null,T||be(p,"ready");try{C.onreadystatechange=w}catch{}}}function Ns(p){p.I&&(d.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function An(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),en(T)}};function Hr(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function _u(p){const T={};p=(p.g&&2<=An(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<p.length;w++){if(X(p[w]))continue;var C=O(p[w]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const j=T[G]||[];T[G]=j,j.push(C)}D(T,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yr(p,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||T}function vu(p){this.Aa=0,this.i=[],this.j=new Lo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yr("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yr("baseRetryDelayMs",5e3,p),this.cb=Yr("retryDelaySeedMs",1e4,p),this.Wa=Yr("forwardChannelMaxRetries",2,p),this.wa=Yr("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new La(p&&p.concurrentRequestLimit),this.Da=new Ai,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vu.prototype,t.la=8,t.G=1,t.connect=function(p,T,C,w){pt(0),this.W=p,this.H=T||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.I=Ru(this,null,this.W),Ms(this)};function Ha(p){if(Tu(p),p.G==3){var T=p.U++,C=It(p.I);if(et(C,"SID",p.K),et(C,"RID",T),et(C,"TYPE","terminate"),$r(p,C),T=new Li(p,p.j,T),T.L=2,T.v=qr(It(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=T.v,C=!0),C||(T.g=wu(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Si(T)}Ka(p)}function Ko(p){p.g&&(Ja(p),p.g.cancel(),p.g=null)}function Tu(p){Ko(p),p.u&&(d.clearTimeout(p.u),p.u=null),Qo(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&d.clearTimeout(p.s),p.s=null)}function Ms(p){if(!Oa(p.h)&&!p.s){p.s=!0;var T=p.Ga;de||Be(),ye||(de(),ye=!0),Oe.add(T,p),p.B=0}}function Xf(p,T){return du(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=T.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=ko(S(p.Ga,p,T),Iu(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const G=new Li(this,this.j,p);let j=this.o;if(this.S&&(j?(j=N(j),U(j,this.S)):j=this.S),this.m!==null||this.O||(G.H=j,j=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(T+=w,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=Ya(this,G,T),C=It(this.I),et(C,"RID",p),et(C,"CVER",22),this.D&&et(C,"X-HTTP-Session-Id",this.D),$r(this,C),j&&(this.O?T="headers="+encodeURIComponent(String(zr(j)))+"&"+T:this.m&&Yo(C,this.m,j)),qo(this.h,G),this.Ua&&et(C,"TYPE","init"),this.P?(et(C,"$req",T),et(C,"SID","null"),G.T=!0,Or(G,C,null)):Or(G,C,T),this.G=2}}else this.G==3&&(p?Eu(this,p):this.i.length==0||Oa(this.h)||Eu(this))};function Eu(p,T){var C;T?C=T.l:C=p.U++;const w=It(p.I);et(w,"SID",p.K),et(w,"RID",C),et(w,"AID",p.T),$r(p,w),p.m&&p.o&&Yo(w,p.m,p.o),C=new Li(p,p.j,C,p.B+1),p.m===null&&(C.H=p.o),T&&(p.i=T.D.concat(p.i)),T=Ya(p,C,1e3),C.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),qo(p.h,C),Or(C,w,T)}function $r(p,T){p.H&&W(p.H,function(C,w){et(T,w,C)}),p.l&&Cs({},function(C,w){et(T,w,C)})}function Ya(p,T,C){C=Math.min(p.i.length,C);var w=p.l?S(p.l.Na,p.l,p):null;e:{var G=p.i;let j=-1;for(;;){const pe=["count="+C];j==-1?0<C?(j=G[0].g,pe.push("ofs="+j)):j=0:pe.push("ofs="+j);let rt=!0;for(let Lt=0;Lt<C;Lt++){let qe=G[Lt].g;const Kt=G[Lt].map;if(qe-=j,0>qe)j=Math.max(0,G[Lt].g-100),rt=!1;else try{Ga(Kt,pe,"req"+qe+"_")}catch{w&&w(Kt)}}if(rt){w=pe.join("&");break e}}}return p=p.i.splice(0,C),T.D=p,w}function Su(p){if(!p.g&&!p.u){p.Y=1;var T=p.Fa;de||Be(),ye||(de(),ye=!0),Oe.add(T,p),p.v=0}}function $a(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=ko(S(p.Fa,p),Iu(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,Au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=ko(S(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Ko(this),Au(this))};function Ja(p){p.A!=null&&(d.clearTimeout(p.A),p.A=null)}function Au(p){p.g=new Li(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var T=It(p.qa);et(T,"RID","rpc"),et(T,"SID",p.K),et(T,"AID",p.T),et(T,"CI",p.F?"0":"1"),!p.F&&p.ja&&et(T,"TO",p.ja),et(T,"TYPE","xmlhttp"),$r(p,T),p.m&&p.o&&Yo(T,p.m,p.o),p.L&&(p.g.I=p.L);var C=p.g;p=p.ia,C.L=1,C.v=qr(It(T)),C.m=null,C.P=!0,io(C,p)}t.Za=function(){this.C!=null&&(this.C=null,Ko(this),$a(this),pt(19))};function Qo(p){p.C!=null&&(d.clearTimeout(p.C),p.C=null)}function Cu(p,T){var C=null;if(p.g==T){Qo(p),Ja(p),p.g=null;var w=2}else if(Bo(p.h,T))C=T.D,oi(p.h,T),w=1;else return;if(p.G!=0){if(T.o)if(w==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var G=p.B;w=eo(),be(w,new Pa(w,C)),Ms(p)}else Su(p);else if(G=T.s,G==3||G==0&&0<T.X||!(w==1&&Xf(p,T)||w==2&&$a(p)))switch(C&&0<C.length&&(T=p.h,T.i=T.i.concat(C)),G){case 1:lo(p,5);break;case 4:lo(p,10);break;case 3:lo(p,6);break;default:lo(p,2)}}}function Iu(p,T){let C=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(C*=2),C*T}function lo(p,T){if(p.j.info("Error code "+T),T==2){var C=S(p.fb,p),w=p.Xa;const G=!w;w=new ro(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||zo(w,"https"),qr(w),G?za(w.toString(),C):gu(w.toString(),C)}else pt(2);p.G=0,p.l&&p.l.sa(T),Ka(p),Tu(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Ka(p){if(p.G=0,p.ka=[],p.l){const T=Sn(p.h);(T.length!=0||p.i.length!=0)&&(V(p.ka,T),V(p.ka,p.i),p.h.i.length=0,L(p.i),p.i.length=0),p.l.ra()}}function Ru(p,T,C){var w=C instanceof ro?It(C):new ro(C);if(w.g!="")T&&(w.g=T+"."+w.g),Br(w,w.s);else{var G=d.location;w=G.protocol,T=T?T+"."+G.hostname:G.hostname,G=+G.port;var j=new ro(null);w&&zo(j,w),T&&(j.g=T),G&&Br(j,G),C&&(j.l=C),w=j}return C=p.D,T=p.ya,C&&T&&et(w,C,T),et(w,"VER",p.la),$r(p,w),w}function wu(p,T,C){if(T&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Ca&&!p.pa?new vt(new Bi({eb:C})):new vt(p.pa),T.Ha(p.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bu(){}t=bu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ds(){}Ds.prototype.g=function(p,T){return new Cn(p,T)};function Cn(p,T){Te.call(this),this.g=new vu(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(p?p["X-WebChannel-Client-Profile"]=T.va:p={"X-WebChannel-Client-Profile":T.va}),this.g.S=p,(p=T&&T.Sb)&&!X(p)&&(this.g.m=p),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!X(T)&&(this.g.D=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new Xo(this)}M(Cn,Te),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Ha(this.g)},Cn.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.u&&(C={},C.__data__=ht(p),p=C);T.i.push(new Yf(T.Ya++,p)),T.G==3&&Ms(T)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Ha(this.g),delete this.g,Cn.aa.N.call(this)};function xu(p){Hn.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const C in T){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}M(xu,Hn);function Nu(){Nn.call(this),this.status=1}M(Nu,Nn);function Xo(p){this.g=p}M(Xo,bu),Xo.prototype.ua=function(){be(this.g,"a")},Xo.prototype.ta=function(p){be(this.g,new xu(p))},Xo.prototype.sa=function(p){be(this.g,new Nu)},Xo.prototype.ra=function(){be(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,QS=function(){return new Ds},KS=function(){return eo()},JS=Tn,Mp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ct.NO_ERROR=0,Ct.TIMEOUT=8,Ct.HTTP_ERROR=6,Wc=Ct,nn.COMPLETE="complete",$S=nn,Vi.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",Te.prototype.listen=Te.prototype.K,kl=Vi,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,YS=vt}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const ST="@firebase/firestore",AT="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new VS("@firebase/firestore");function la(){return hs.logLevel}function ve(t,...e){if(hs.logLevel<=je.DEBUG){const n=e.map(fm);hs.debug(`Firestore (${ba}): ${t}`,...n)}}function xo(t,...e){if(hs.logLevel<=je.ERROR){const n=e.map(fm);hs.error(`Firestore (${ba}): ${t}`,...n)}}function br(t,...e){if(hs.logLevel<=je.WARN){const n=e.map(fm);hs.warn(`Firestore (${ba}): ${t}`,...n)}}function fm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,XS(t,o,n)}function XS(t,e,n){let o=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw xo(o),new Error(o)}function st(t,e,n,o){let s="Unexpected state";typeof n=="string"?s=n:o=n,t||XS(e,s,o)}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(gn.UNAUTHENTICATED)))}shutdown(){}}class eU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class tU{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){st(this.o===void 0,42304);let o=this.i;const s=g=>this.i!==o?(o=this.i,n(g)):Promise.resolve();let l=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Rr,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await s(this.currentUser)}))},d=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Rr)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(st(typeof o.accessToken=="string",31837,{l:o}),new WS(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new gn(e)}}class nU{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iU{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new nU(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class CT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oU{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,OS(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){st(this.o===void 0,3512);const o=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const s=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new CT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(st(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new CT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<t;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const s=rU(40);for(let l=0;l<s.length;++l)o.length<20&&s[l]<n&&(o+=e.charAt(s[l]%62))}return o}}function ze(t,e){return t<e?-1:t>e?1:0}function Dp(t,e){let n=0;for(;n<t.length&&n<e.length;){const o=t.codePointAt(n),s=e.codePointAt(n);if(o!==s){if(o<128&&s<128)return ze(o,s);{const l=ZS(),u=sU(l.encode(IT(t,n)),l.encode(IT(e,n)));return u!==0?u:ze(o,s)}}n+=o>65535?2:1}return ze(t.length,e.length)}function IT(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function sU(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ze(t[n],e[n]);return ze(t.length,e.length)}function Ta(t,e,n){return t.length===e.length&&t.every(((o,s)=>n(o,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="__name__";class $i{constructor(e,n,o){n===void 0?n=0:n>e.length&&Ne(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&Ne(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return $i.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $i?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let s=0;s<o;s++){const l=$i.compareSegments(e.get(s),n.get(s));if(l!==0)return l}return ze(e.length,n.length)}static compareSegments(e,n){const o=$i.isNumericId(e),s=$i.isNumericId(n);return o&&!s?-1:!o&&s?1:o&&s?$i.extractNumericId(e).compare($i.extractNumericId(n)):Dp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ir.fromString(e.substring(4,e.length-2))}}class yt extends $i{construct(e,n,o){return new yt(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new _e(ae.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((s=>s.length>0)))}return new yt(n)}static emptyPath(){return new yt([])}}const aU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends $i{construct(e,n,o){return new un(e,n,o)}static isValidIdentifier(e){return aU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===RT}static keyField(){return new un([RT])}static fromServerFormat(e){const n=[];let o="",s=0;const l=()=>{if(o.length===0)throw new _e(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new _e(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[s+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new _e(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=g,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(o+=d,s++):(l(),s++)}if(l(),u)throw new _e(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(n)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(yt.fromString(e))}static fromName(e){return new Re(yt.fromString(e).popFirst(5))}static empty(){return new Re(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return yt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t,e,n){if(!n)throw new _e(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lU(t,e,n,o){if(e===!0&&o===!0)throw new _e(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wT(t){if(!Re.isDocumentKey(t))throw new _e(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bT(t){if(Re.isDocumentKey(t))throw new _e(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Df(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne(12329,{type:typeof t})}function pf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Df(t);throw new _e(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,e){const n={typeString:t};return e&&(n.value=e),n}function ou(t,e){if(!eA(t))throw new _e(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const s=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in t)){n=`JSON missing required field: '${o}'`;break}const u=t[o];if(s&&typeof u!==s){n=`JSON field '${o}' must be a ${s}.`;break}if(l!==void 0&&u!==l.value){n=`Expected '${o}' field to equal '${l.value}'`;break}}if(n)throw new _e(ae.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=-62135596800,NT=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*NT);return new _t(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xT)throw new _e(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NT}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ou(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:Ht("string",_t._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new _t(0,0))}static max(){return new Ve(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=-1;function uU(t,e){const n=t.toTimestamp().seconds,o=t.toTimestamp().nanoseconds+1,s=Ve.fromTimestamp(o===1e9?new _t(n+1,0):new _t(n,o));return new xr(s,Re.empty(),e)}function cU(t){return new xr(t.readTime,t.key,Xl)}class xr{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new xr(Ve.min(),Re.empty(),Xl)}static max(){return new xr(Ve.max(),Re.empty(),Xl)}}function fU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(t.documentKey,e.documentKey),n!==0?n:ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==dU)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((o,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,s)},this.catchCallback=l=>{this.wrapFailure(n,l).next(o,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,o)=>{n(e)}))}static reject(e){return new ue(((n,o)=>{o(e)}))}static waitFor(e){return new ue(((n,o)=>{let s=0,l=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++l,u&&l===s&&n()}),(g=>o(g)))})),u=!0,l===s&&n()}))}static or(e){let n=ue.resolve(!1);for(const o of e)n=n.next((s=>s?ue.resolve(s):o()));return n}static forEach(e,n){const o=[];return e.forEach(((s,l)=>{o.push(n.call(this,s,l))})),this.waitFor(o)}static mapArray(e,n){return new ue(((o,s)=>{const l=e.length,u=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;n(e[m]).next((v=>{u[m]=v,++d,d===l&&o(u)}),(v=>s(v)))}}))}static doWhile(e,n){return new ue(((o,s)=>{const l=()=>{e()===!0?n().next((()=>{l()}),s):o()};l()}))}}function pU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Na(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this._e(o),this.ae=o=>n.writeSequenceNumber(o))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Pf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=-1;function Vf(t){return t==null}function mf(t){return t===0&&1/t==-1/0}function mU(t){return typeof t=="number"&&Number.isInteger(t)&&!mf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="";function gU(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=MT(e)),e=yU(t.get(n),e);return MT(e)}function yU(t,e){let n=e;const o=t.length;for(let s=0;s<o;s++){const l=t.charAt(s);switch(l){case"\0":n+="";break;case tA:n+="";break;default:n+=l}}return n}function MT(t){return t+tA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _s(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const s=this.comparator(e,o.key);if(s===0)return n+o.left.size;s<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qc(this.root,e,this.comparator,!0)}}class qc{constructor(e,n,o,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?o(e.key,n):1,n&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,o,s,l){this.key=e,this.value=n,this.color=o??ln.RED,this.left=s??ln.EMPTY,this.right=l??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,s,l){return new ln(e??this.key,n??this.value,o??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let s=this;const l=o(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,n,o),null):l===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,o)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ln.EMPTY;o=s.right.min(),s=s.copy(o.key,o.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,n,o,s,l){return this}insert(e,n,o){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const s=o.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PT(this.data.getIterator())}getIteratorFrom(e){return new PT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,l=o.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class PT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new wi([])}unionWith(e){let n=new $t(un.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new wi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ta(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new iA("Invalid base64 string: "+l):l}})(e);return new cn(n)}static fromUint8Array(e){const n=(function(s){let l="";for(let u=0;u<s.length;++u)l+=String.fromCharCode(s[u]);return l})(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const _U=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(st(!!t,39018),typeof t=="string"){let e=0;const n=_U.exec(t);if(st(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const o=new Date(t);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mr(t){return typeof t=="string"?cn.fromBase64String(t):cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="server_timestamp",rA="__type__",sA="__previous_value__",aA="__local_write_time__";function pm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[rA])===null||n===void 0?void 0:n.stringValue)===oA}function Uf(t){const e=t.mapValue.fields[sA];return pm(e)?Uf(e):e}function Wl(t){const e=Nr(t.mapValue.fields[aA].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e,n,o,s,l,u,d,g,m,v){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=s,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=v}}const gf="(default)";class Zl{constructor(e,n){this.projectId=e,this.database=n||gf}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===gf}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="__type__",TU="__max__",zc={mapValue:{}},uA="__vector__",yf="value";function Dr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pm(t)?4:SU(t)?9007199254740991:EU(t)?10:11:Ne(28295,{value:t})}function ji(t,e){if(t===e)return!0;const n=Dr(t);if(n!==Dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wl(t).isEqual(Wl(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const u=Nr(s.timestampValue),d=Nr(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,l){return Mr(s.bytesValue).isEqual(Mr(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,l){return Ut(s.geoPointValue.latitude)===Ut(l.geoPointValue.latitude)&&Ut(s.geoPointValue.longitude)===Ut(l.geoPointValue.longitude)})(t,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return Ut(s.integerValue)===Ut(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const u=Ut(s.doubleValue),d=Ut(l.doubleValue);return u===d?mf(u)===mf(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return Ta(t.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return(function(s,l){const u=s.mapValue.fields||{},d=l.mapValue.fields||{};if(DT(u)!==DT(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!ji(u[g],d[g])))return!1;return!0})(t,e);default:return Ne(52216,{left:t})}}function jl(t,e){return(t.values||[]).find((n=>ji(n,e)))!==void 0}function Ea(t,e){if(t===e)return 0;const n=Dr(t),o=Dr(e);if(n!==o)return ze(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=Ut(l.integerValue||l.doubleValue),g=Ut(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(t,e);case 3:return VT(t.timestampValue,e.timestampValue);case 4:return VT(Wl(t),Wl(e));case 5:return Dp(t.stringValue,e.stringValue);case 6:return(function(l,u){const d=Mr(l),g=Mr(u);return d.compareTo(g)})(t.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),g=u.split("/");for(let m=0;m<d.length&&m<g.length;m++){const v=ze(d[m],g[m]);if(v!==0)return v}return ze(d.length,g.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=ze(Ut(l.latitude),Ut(u.latitude));return d!==0?d:ze(Ut(l.longitude),Ut(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return UT(t.arrayValue,e.arrayValue);case 10:return(function(l,u){var d,g,m,v;const E=l.fields||{},S=u.fields||{},I=(d=E[yf])===null||d===void 0?void 0:d.arrayValue,M=(g=S[yf])===null||g===void 0?void 0:g.arrayValue,L=ze(((m=I==null?void 0:I.values)===null||m===void 0?void 0:m.length)||0,((v=M==null?void 0:M.values)===null||v===void 0?void 0:v.length)||0);return L!==0?L:UT(I,M)})(t.mapValue,e.mapValue);case 11:return(function(l,u){if(l===zc.mapValue&&u===zc.mapValue)return 0;if(l===zc.mapValue)return 1;if(u===zc.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=u.fields||{},v=Object.keys(m);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const S=Dp(g[E],v[E]);if(S!==0)return S;const I=Ea(d[g[E]],m[v[E]]);if(I!==0)return I}return ze(g.length,v.length)})(t.mapValue,e.mapValue);default:throw Ne(23264,{le:n})}}function VT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const n=Nr(t),o=Nr(e),s=ze(n.seconds,o.seconds);return s!==0?s:ze(n.nanos,o.nanos)}function UT(t,e){const n=t.values||[],o=e.values||[];for(let s=0;s<n.length&&s<o.length;++s){const l=Ea(n[s],o[s]);if(l)return l}return ze(n.length,o.length)}function Sa(t){return Pp(t)}function Pp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const o=Nr(n);return`time(${o.seconds},${o.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Mr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Re.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let o="[",s=!0;for(const l of n.values||[])s?s=!1:o+=",",o+=Pp(l);return o+"]"})(t.arrayValue):"mapValue"in t?(function(n){const o=Object.keys(n.fields||{}).sort();let s="{",l=!0;for(const u of o)l?l=!1:s+=",",s+=`${u}:${Pp(n.fields[u])}`;return s+"}"})(t.mapValue):Ne(61005,{value:t})}function Zc(t){switch(Dr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uf(t);return e?16+Zc(e):16;case 5:return 2*t.stringValue.length;case 6:return Mr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((s,l)=>s+Zc(l)),0)})(t.arrayValue);case 10:case 11:return(function(o){let s=0;return _s(o.fields,((l,u)=>{s+=l.length+Zc(u)})),s})(t.mapValue);default:throw Ne(13486,{value:t})}}function kT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vp(t){return!!t&&"integerValue"in t}function mm(t){return!!t&&"arrayValue"in t}function LT(t){return!!t&&"nullValue"in t}function OT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jc(t){return!!t&&"mapValue"in t}function EU(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[lA])===null||n===void 0?void 0:n.stringValue)===uA}function Bl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _s(t.mapValue.fields,((n,o)=>e.mapValue.fields[n]=Bl(o))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!jc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bl(n)}setAll(e){let n=un.emptyPath(),o={},s=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,o,s),o={},s=[],n=d.popLast()}u?o[d.lastSegment()]=Bl(u):s.push(d.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,o,s)}delete(e){const n=this.field(e.popLast());jc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let s=n.mapValue.fields[e.get(o)];jc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,o){_s(n,((s,l)=>e[s]=l));for(const s of o)delete e[s]}clone(){return new pi(Bl(this.value))}}function cA(t){const e=[];return _s(t.fields,((n,o)=>{const s=new un([n]);if(jc(o)){const l=cA(o.mapValue).fields;if(l.length===0)e.push(s);else for(const u of l)e.push(s.child(u))}else e.push(s)})),new wi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n,o,s,l,u,d){this.key=e,this.documentType=n,this.version=o,this.readTime=s,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new yn(e,0,Ve.min(),Ve.min(),Ve.min(),pi.empty(),0)}static newFoundDocument(e,n,o,s){return new yn(e,1,n,Ve.min(),o,s,0)}static newNoDocument(e,n){return new yn(e,2,n,Ve.min(),Ve.min(),pi.empty(),0)}static newUnknownDocument(e,n){return new yn(e,3,n,Ve.min(),Ve.min(),pi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n){this.position=e,this.inclusive=n}}function FT(t,e,n){let o=0;for(let s=0;s<t.position.length;s++){const l=e[s],u=t.position[s];if(l.field.isKeyField()?o=Re.comparator(Re.fromName(u.referenceValue),n.key):o=Ea(u,n.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function BT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ji(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n="asc"){this.field=e,this.dir=n}}function AU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{}class Gt extends fA{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new IU(e,n,o):n==="array-contains"?new bU(e,o):n==="in"?new xU(e,o):n==="not-in"?new NU(e,o):n==="array-contains-any"?new MU(e,o):new Gt(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new RU(e,o):new wU(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ea(n,this.value)):n!==null&&Dr(this.value)===Dr(n)&&this.matchesComparison(Ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends fA{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ni(e,n)}matches(e){return dA(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function dA(t){return t.op==="and"}function hA(t){return CU(t)&&dA(t)}function CU(t){for(const e of t.filters)if(e instanceof Ni)return!1;return!0}function Up(t){if(t instanceof Gt)return t.field.canonicalString()+t.op.toString()+Sa(t.value);if(hA(t))return t.filters.map((e=>Up(e))).join(",");{const e=t.filters.map((n=>Up(n))).join(",");return`${t.op}(${e})`}}function pA(t,e){return t instanceof Gt?(function(o,s){return s instanceof Gt&&o.op===s.op&&o.field.isEqual(s.field)&&ji(o.value,s.value)})(t,e):t instanceof Ni?(function(o,s){return s instanceof Ni&&o.op===s.op&&o.filters.length===s.filters.length?o.filters.reduce(((l,u,d)=>l&&pA(u,s.filters[d])),!0):!1})(t,e):void Ne(19439)}function mA(t){return t instanceof Gt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Sa(n.value)}`})(t):t instanceof Ni?(function(n){return n.op.toString()+" {"+n.getFilters().map(mA).join(" ,")+"}"})(t):"Filter"}class IU extends Gt{constructor(e,n,o){super(e,n,o),this.key=Re.fromName(o.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class RU extends Gt{constructor(e,n){super(e,"in",n),this.keys=gA("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class wU extends Gt{constructor(e,n){super(e,"not-in",n),this.keys=gA("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function gA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((o=>Re.fromName(o.referenceValue)))}class bU extends Gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mm(n)&&jl(n.arrayValue,this.value)}}class xU extends Gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jl(this.value.arrayValue,n)}}class NU extends Gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jl(this.value.arrayValue,n)}}class MU extends Gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>jl(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,n=null,o=[],s=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=s,this.limit=l,this.startAt=u,this.endAt=d,this.Pe=null}}function qT(t,e=null,n=[],o=[],s=null,l=null,u=null){return new DU(t,e,n,o,s,l,u)}function gm(t){const e=ke(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>Up(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),Vf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>Sa(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>Sa(o))).join(",")),e.Pe=n}return e.Pe}function ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!AU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BT(t.startAt,e.startAt)&&BT(t.endAt,e.endAt)}function kp(t){return Re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n=null,o=[],s=[],l=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=s,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function PU(t,e,n,o,s,l,u,d){return new Ma(t,e,n,o,s,l,u,d)}function yA(t){return new Ma(t)}function zT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _A(t){return t.collectionGroup!==null}function ql(t){const e=ke(t);if(e.Te===null){e.Te=[];const n=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),n.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new $t(un.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Te.push(new eu(l,o))})),n.has(un.keyField().canonicalString())||e.Te.push(new eu(un.keyField(),o))}return e.Te}function Ki(t){const e=ke(t);return e.Ie||(e.Ie=VU(e,ql(t))),e.Ie}function VU(t,e){if(t.limitType==="F")return qT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new eu(s.field,l)}));const n=t.endAt?new _f(t.endAt.position,t.endAt.inclusive):null,o=t.startAt?new _f(t.startAt.position,t.startAt.inclusive):null;return qT(t.path,t.collectionGroup,e,t.filters,t.limit,n,o)}}function Lp(t,e){const n=t.filters.concat([e]);return new Ma(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Op(t,e,n){return new Ma(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kf(t,e){return ym(Ki(t),Ki(e))&&t.limitType===e.limitType}function vA(t){return`${gm(Ki(t))}|lt:${t.limitType}`}function ua(t){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((s=>mA(s))).join(", ")}]`),Vf(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((s=>Sa(s))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((s=>Sa(s))).join(",")),`Target(${o})`})(Ki(t))}; limitType=${t.limitType})`}function Lf(t,e){return e.isFoundDocument()&&(function(o,s){const l=s.key.path;return o.collectionGroup!==null?s.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):Re.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(t,e)&&(function(o,s){for(const l of ql(o))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(o,s){for(const l of o.filters)if(!l.matches(s))return!1;return!0})(t,e)&&(function(o,s){return!(o.startAt&&!(function(u,d,g){const m=FT(u,d,g);return u.inclusive?m<=0:m<0})(o.startAt,ql(o),s)||o.endAt&&!(function(u,d,g){const m=FT(u,d,g);return u.inclusive?m>=0:m>0})(o.endAt,ql(o),s))})(t,e)}function UU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TA(t){return(e,n)=>{let o=!1;for(const s of ql(t)){const l=kU(s,e,n);if(l!==0)return l;o=o||s.field.isKeyField()}return 0}}function kU(t,e,n){const o=t.field.isKeyField()?Re.comparator(e.key,n.key):(function(l,u,d){const g=u.data.field(l),m=d.data.field(l);return g!==null&&m!==null?Ea(g,m):Ne(42886)})(t.field,e,n);switch(t.dir){case"asc":return o;case"desc":return-1*o;default:return Ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[s,l]of o)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),s=this.inner[o];if(s===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return o.length===1?delete this.inner[n]:o.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,((n,o)=>{for(const[s,l]of o)e(s,l)}))}isEmpty(){return nA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=new At(Re.comparator);function No(){return LU}const EA=new At(Re.comparator);function Ll(...t){let e=EA;for(const n of t)e=e.insert(n.key,n);return e}function SA(t){let e=EA;return t.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function fs(){return zl()}function AA(){return zl()}function zl(){return new vs((t=>t.toString()),((t,e)=>t.isEqual(e)))}const OU=new At(Re.comparator),FU=new $t(Re.comparator);function Qe(...t){let e=FU;for(const n of t)e=e.add(n);return e}const BU=new $t(ze);function qU(){return BU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(e)?"-0":e}}function CA(t){return{integerValue:""+t}}function zU(t,e){return mU(e)?CA(e):_m(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function GU(t,e,n){return t instanceof vf?(function(s,l){const u={fields:{[rA]:{stringValue:oA},[aA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&pm(l)&&(l=Uf(l)),l&&(u.fields[sA]=l),{mapValue:u}})(n,e):t instanceof tu?RA(t,e):t instanceof nu?wA(t,e):(function(s,l){const u=IA(s,l),d=GT(u)+GT(s.Ee);return Vp(u)&&Vp(s.Ee)?CA(d):_m(s.serializer,d)})(t,e)}function HU(t,e,n){return t instanceof tu?RA(t,e):t instanceof nu?wA(t,e):n}function IA(t,e){return t instanceof Tf?(function(o){return Vp(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class vf extends Of{}class tu extends Of{constructor(e){super(),this.elements=e}}function RA(t,e){const n=bA(e);for(const o of t.elements)n.some((s=>ji(s,o)))||n.push(o);return{arrayValue:{values:n}}}class nu extends Of{constructor(e){super(),this.elements=e}}function wA(t,e){let n=bA(e);for(const o of t.elements)n=n.filter((s=>!ji(s,o)));return{arrayValue:{values:n}}}class Tf extends Of{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function GT(t){return Ut(t.integerValue||t.doubleValue)}function bA(t){return mm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function YU(t,e){return t.field.isEqual(e.field)&&(function(o,s){return o instanceof tu&&s instanceof tu||o instanceof nu&&s instanceof nu?Ta(o.elements,s.elements,ji):o instanceof Tf&&s instanceof Tf?ji(o.Ee,s.Ee):o instanceof vf&&s instanceof vf})(t.transform,e.transform)}class $U{constructor(e,n){this.version=e,this.transformResults=n}}class Ro{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ro}static exists(e){return new Ro(void 0,e)}static updateTime(e){return new Ro(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ef(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ff{}function xA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new MA(t.key,Ro.none()):new ru(t.key,t.data,Ro.none());{const n=t.data,o=pi.empty();let s=new $t(un.comparator);for(let l of e.fields)if(!s.has(l)){let u=n.field(l);u===null&&l.length>1&&(l=l.popLast(),u=n.field(l)),u===null?o.delete(l):o.set(l,u),s=s.add(l)}return new Ts(t.key,o,new wi(s.toArray()),Ro.none())}}function JU(t,e,n){t instanceof ru?(function(s,l,u){const d=s.value.clone(),g=YT(s.fieldTransforms,l,u.transformResults);d.setAll(g),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof Ts?(function(s,l,u){if(!ef(s.precondition,l))return void l.convertToUnknownDocument(u.version);const d=YT(s.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(NA(s)),g.setAll(d),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(t,e,n):(function(s,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Gl(t,e,n,o){return t instanceof ru?(function(l,u,d,g){if(!ef(l.precondition,u))return d;const m=l.value.clone(),v=$T(l.fieldTransforms,g,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(t,e,n,o):t instanceof Ts?(function(l,u,d,g){if(!ef(l.precondition,u))return d;const m=$T(l.fieldTransforms,g,u),v=u.data;return v.setAll(NA(l)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(t,e,n,o):(function(l,u,d){return ef(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function KU(t,e){let n=null;for(const o of t.fieldTransforms){const s=e.data.field(o.field),l=IA(o.transform,s||null);l!=null&&(n===null&&(n=pi.empty()),n.set(o.field,l))}return n||null}function HT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(o,s){return o===void 0&&s===void 0||!(!o||!s)&&Ta(o,s,((l,u)=>YU(l,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ru extends Ff{constructor(e,n,o,s=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ts extends Ff{constructor(e,n,o,s,l=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function NA(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=t.data.field(n);e.set(n,o)}})),e}function YT(t,e,n){const o=new Map;st(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const l=t[s],u=l.transform,d=e.data.field(l.field);o.set(l.field,HU(u,d,n[s]))}return o}function $T(t,e,n){const o=new Map;for(const s of t){const l=s.transform,u=n.data.field(s.field);o.set(s.field,GU(l,u,e))}return o}class MA extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QU extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e,n,o,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=s}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&JU(l,e,o[s])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Gl(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Gl(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=AA();return this.mutations.forEach((s=>{const l=e.get(s.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=n.has(s.key)?null:d;const g=xA(u,d);g!==null&&o.set(s.key,g),u.isValidDocument()||u.convertToNoDocument(Ve.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&Ta(this.mutations,e.mutations,((n,o)=>HT(n,o)))&&Ta(this.baseMutations,e.baseMutations,((n,o)=>HT(n,o)))}}class vm{constructor(e,n,o,s){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=s}static from(e,n,o){st(e.mutations.length===o.length,58842,{Ve:e.mutations.length,me:o.length});let s=(function(){return OU})();const l=e.mutations;for(let u=0;u<l.length;u++)s=s.insert(l[u].key,o[u].version);return new vm(e,n,o,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,Ze;function jU(t){switch(t){case ae.OK:return Ne(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ne(15467,{code:t})}}function DA(t){if(t===void 0)return xo("GRPC error has no .code"),ae.UNKNOWN;switch(t){case zt.OK:return ae.OK;case zt.CANCELLED:return ae.CANCELLED;case zt.UNKNOWN:return ae.UNKNOWN;case zt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case zt.INTERNAL:return ae.INTERNAL;case zt.UNAVAILABLE:return ae.UNAVAILABLE;case zt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case zt.NOT_FOUND:return ae.NOT_FOUND;case zt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case zt.ABORTED:return ae.ABORTED;case zt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case zt.DATA_LOSS:return ae.DATA_LOSS;default:return Ne(39323,{code:t})}}(Ze=zt||(zt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new Ir([4294967295,4294967295],0);function JT(t){const e=ZS().encode(t),n=new HS;return n.update(e),new Uint8Array(n.digest())}function KT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ir([n,o],0),new Ir([s,l],0)]}class Tm{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Ol(`Invalid padding: ${n}`);if(o<0)throw new Ol(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Ol(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Ol(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ir.fromNumber(this.fe)}pe(e,n,o){let s=e.add(n.multiply(Ir.fromNumber(o)));return s.compare(e4)===1&&(s=new Ir([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=JT(e),[o,s]=KT(n);for(let l=0;l<this.hashCount;l++){const u=this.pe(o,s,l);if(!this.ye(u))return!1}return!0}static create(e,n,o){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Tm(l,s,n);return o.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const n=JT(e),[o,s]=KT(n);for(let l=0;l<this.hashCount;l++){const u=this.pe(o,s,l);this.we(u)}}we(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n,o,s,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const s=new Map;return s.set(e,su.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Bf(Ve.min(),s,new At(ze),No(),Qe())}}class su{constructor(e,n,o,s,l){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new su(o,n,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n,o,s){this.Se=e,this.removedTargetIds=n,this.key=o,this.be=s}}class PA{constructor(e,n){this.targetId=e,this.De=n}}class VA{constructor(e,n,o=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=s}}class QT{constructor(){this.ve=0,this.Ce=XT(),this.Fe=cn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Qe(),n=Qe(),o=Qe();return this.Ce.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:o=o.add(s);break;default:Ne(38017,{changeType:l})}})),new su(this.Fe,this.Me,e,n,o)}ke(){this.xe=!1,this.Ce=XT()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class t4{constructor(e){this.We=e,this.Ge=new Map,this.ze=No(),this.je=Gc(),this.Je=Gc(),this.He=new At(ze)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const o=this.tt(n);switch(e.state){case 0:this.nt(n)&&o.Be(e.resumeToken);break;case 1:o.Ue(),o.Oe||o.ke(),o.Be(e.resumeToken);break;case 2:o.Ue(),o.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(o.Ke(),o.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),o.Be(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((o,s)=>{this.nt(s)&&n(s)}))}it(e){const n=e.targetId,o=e.De.count,s=this.st(n);if(s){const l=s.target;if(kp(l))if(o===0){const u=new Re(l.path);this.Xe(n,u,yn.newNoDocument(u,Ve.min()))}else st(o===1,20013,{expectedCount:o});else{const u=this.ot(n);if(u!==o){const d=this._t(e),g=d?this.ut(d,e,u):1;if(g!==0){this.rt(n);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,m)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:s=0},hashCount:l=0}=n;let u,d;try{u=Mr(o).toUint8Array()}catch(g){if(g instanceof iA)return br("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Tm(u,s,l)}catch(g){return br(g instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.fe===0?null:d}ut(e,n,o){return n.De.count===o-this.ht(e,n.targetId)?0:2}ht(e,n){const o=this.We.getRemoteKeysForTarget(n);let s=0;return o.forEach((l=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(n,l,null),s++)})),s}Pt(e){const n=new Map;this.Ge.forEach(((l,u)=>{const d=this.st(u);if(d){if(l.current&&kp(d.target)){const g=new Re(d.target.path);this.Tt(g).has(u)||this.It(u,g)||this.Xe(u,g,yn.newNoDocument(g,e))}l.Ne&&(n.set(u,l.Le()),l.ke())}}));let o=Qe();this.Je.forEach(((l,u)=>{let d=!0;u.forEachWhile((g=>{const m=this.st(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.ze.forEach(((l,u)=>u.setReadTime(e)));const s=new Bf(e,n,this.He,this.ze,o);return this.ze=No(),this.je=Gc(),this.Je=Gc(),this.He=new At(ze),s}Ze(e,n){if(!this.nt(e))return;const o=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,o),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,o){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),o&&(this.ze=this.ze.insert(n,o))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new QT,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new $t(ze),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new $t(ze),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new QT),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Gc(){return new At(Re.comparator)}function XT(){return new At(Re.comparator)}const n4={asc:"ASCENDING",desc:"DESCENDING"},i4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o4={and:"AND",or:"OR"};class r4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fp(t,e){return t.useProto3Json||Vf(e)?e:{value:e}}function Ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function s4(t,e){return Ef(t,e.toTimestamp())}function Qi(t){return st(!!t,49232),Ve.fromTimestamp((function(n){const o=Nr(n);return new _t(o.seconds,o.nanos)})(t))}function Em(t,e){return Bp(t,e).canonicalString()}function Bp(t,e){const n=(function(s){return new yt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function kA(t){const e=yt.fromString(t);return st(qA(e),10190,{key:e.toString()}),e}function qp(t,e){return Em(t.databaseId,e.path)}function ip(t,e){const n=kA(e);if(n.get(1)!==t.databaseId.projectId)throw new _e(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _e(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Re(OA(n))}function LA(t,e){return Em(t.databaseId,e)}function a4(t){const e=kA(t);return e.length===4?yt.emptyPath():OA(e)}function zp(t){return new yt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OA(t){return st(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function WT(t,e,n){return{name:qp(t,e),fields:n.value.mapValue.fields}}function l4(t,e){let n;if("targetChange"in e){e.targetChange;const o=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ne(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(st(v===void 0||typeof v=="string",58123),cn.fromBase64String(v||"")):(st(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),cn.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?ae.UNKNOWN:DA(m.code);return new _e(v,m.message||"")})(u);n=new VA(o,s,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const s=ip(t,o.document.name),l=Qi(o.document.updateTime),u=o.document.createTime?Qi(o.document.createTime):Ve.min(),d=new pi({mapValue:{fields:o.document.fields}}),g=yn.newFoundDocument(s,l,u,d),m=o.targetIds||[],v=o.removedTargetIds||[];n=new tf(m,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const s=ip(t,o.document),l=o.readTime?Qi(o.readTime):Ve.min(),u=yn.newNoDocument(s,l),d=o.removedTargetIds||[];n=new tf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const s=ip(t,o.document),l=o.removedTargetIds||[];n=new tf([],l,s,null)}else{if(!("filter"in e))return Ne(11601,{At:e});{e.filter;const o=e.filter;o.targetId;const{count:s=0,unchangedNames:l}=o,u=new ZU(s,l),d=o.targetId;n=new PA(d,u)}}return n}function u4(t,e){let n;if(e instanceof ru)n={update:WT(t,e.key,e.value)};else if(e instanceof MA)n={delete:qp(t,e.key)};else if(e instanceof Ts)n={update:WT(t,e.key,e.data),updateMask:_4(e.fieldMask)};else{if(!(e instanceof QU))return Ne(16599,{Rt:e.type});n={verify:qp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(l,u){const d=u.transform;if(d instanceof vf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof nu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Tf)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Ne(20930,{transform:u.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:s4(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ne(27497)})(t,e.precondition)),n}function c4(t,e){return t&&t.length>0?(st(e!==void 0,14353),t.map((n=>(function(s,l){let u=s.updateTime?Qi(s.updateTime):Qi(l);return u.isEqual(Ve.min())&&(u=Qi(l)),new $U(u,s.transformResults||[])})(n,e)))):[]}function f4(t,e){return{documents:[LA(t,e.path)]}}function d4(t,e){const n={structuredQuery:{}},o=e.path;let s;e.collectionGroup!==null?(s=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=LA(t,s);const l=(function(m){if(m.length!==0)return BA(Ni.create(m,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:ca(S.field),direction:m4(S.dir)}})(v)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=Fp(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:n,parent:s}}function h4(t){let e=a4(t.parent);const n=t.structuredQuery,o=n.from?n.from.length:0;let s=null;if(o>0){st(o===1,65062);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];n.where&&(l=(function(E){const S=FA(E);return S instanceof Ni&&hA(S)?S.getFilters():[S]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((S=>(function(M){return new eu(fa(M.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(S)))})(n.orderBy));let d=null;n.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Vf(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(E){const S=!!E.before,I=E.values||[];return new _f(I,S)})(n.startAt));let m=null;return n.endAt&&(m=(function(E){const S=!E.before,I=E.values||[];return new _f(I,S)})(n.endAt)),PU(e,s,u,l,d,"F",g,m)}function p4(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=fa(n.unaryFilter.field);return Gt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const s=fa(n.unaryFilter.field);return Gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fa(n.unaryFilter.field);return Gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fa(n.unaryFilter.field);return Gt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Gt.create(fa(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ni.create(n.compositeFilter.filters.map((o=>FA(o))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(n.compositeFilter.op))})(t):Ne(30097,{filter:t})}function m4(t){return n4[t]}function g4(t){return i4[t]}function y4(t){return o4[t]}function ca(t){return{fieldPath:t.canonicalString()}}function fa(t){return un.fromServerFormat(t.fieldPath)}function BA(t){return t instanceof Gt?(function(n){if(n.op==="=="){if(OT(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NAN"}};if(LT(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OT(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NOT_NAN"}};if(LT(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ca(n.field),op:g4(n.op),value:n.value}}})(t):t instanceof Ni?(function(n){const o=n.getFilters().map((s=>BA(s)));return o.length===1?o[0]:{compositeFilter:{op:y4(n.op),filters:o}}})(t):Ne(54877,{filter:t})}function _4(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function qA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,o,s,l=Ve.min(),u=Ve.min(),d=cn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.gt=e}}function T4(t){const e=h4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Op(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this.Dn=new S4}addToCollectionParentIndex(e,n){return this.Dn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(xr.min())}updateCollectionGroup(e,n,o){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class S4{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),s=this.index[n]||new $t(yt.comparator),l=!s.has(o);return this.index[n]=s.add(o),l}has(e){const n=e.lastSegment(),o=e.popLast(),s=this.index[n];return s&&s.has(o)}getEntries(e){return(this.index[e]||new $t(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zA=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(zA,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Aa(0)}static ur(){return new Aa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="LruGarbageCollector",A4=1048576;function eE([t,e],[n,o]){const s=ze(t,n);return s===0?ze(e,o):s}class C4{constructor(e){this.Tr=e,this.buffer=new $t(eE),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();eE(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class I4{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ve(jT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Na(n)?ve(jT,"Ignoring IndexedDB error during garbage collection: ",n):await xa(n)}await this.Rr(3e5)}))}}class R4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(Pf.ue);const o=new C4(n);return this.Vr.forEachTarget(e,(s=>o.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>o.Er(s))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.Vr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(ZT)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZT):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let o,s,l,u,d,g,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(o=E,d=Date.now(),this.removeTargets(e,o,n)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,o)))).next((E=>(m=Date.now(),la()<=je.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${E} documents in `+(m-g)+`ms
Total Duration: ${m-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function w4(t,e){return new R4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.changes=new vs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?ue.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n,o,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=s}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(o=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(o!==null&&Gl(o.mutation,s,wi.empty(),_t.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,Qe()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=Qe()){const s=fs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,o).next((l=>{let u=Ll();return l.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const o=fs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,Qe())))}populateOverlays(e,n,o){const s=[];return o.forEach((l=>{n.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,o,s){let l=No();const u=zl(),d=(function(){return zl()})();return n.forEach(((g,m)=>{const v=o.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof Ts)?l=l.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),Gl(v.mutation,m,v.mutation.getFieldMask(),_t.now())):u.set(m.key,wi.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((m,v)=>u.set(m,v))),n.forEach(((m,v)=>{var E;return d.set(m,new x4(v,(E=u.get(m))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,n){const o=zl();let s=new At(((u,d)=>u-d)),l=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((g=>{const m=n.get(g);if(m===null)return;let v=o.get(g)||wi.empty();v=d.applyToLocalView(m,v),o.set(g,v);const E=(s.get(d.batchId)||Qe()).add(g);s=s.insert(d.batchId,E)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,v=g.value,E=AA();v.forEach((S=>{if(!l.has(S)){const I=xA(n.get(S),o.get(S));I!==null&&E.set(S,I),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return ue.waitFor(u)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,s){return(function(u){return Re.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_A(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,s):this.getDocumentsMatchingCollectionQuery(e,n,o,s)}getNextDocuments(e,n,o,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,s).next((l=>{const u=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,s-l.size):ue.resolve(fs());let d=Xl,g=l;return u.next((m=>ue.forEach(m,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,g,m,Qe()))).next((v=>({batchId:d,changes:SA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next((o=>{let s=Ll();return o.isFoundDocument()&&(s=s.insert(o.key,o)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,s){const l=n.collectionGroup;let u=Ll();return this.indexManager.getCollectionParents(e,l).next((d=>ue.forEach(d,(g=>{const m=(function(E,S){return new Ma(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,o,s).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,o,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,l,s)))).next((u=>{l.forEach(((g,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,yn.newInvalidDocument(v)))}));let d=Ll();return u.forEach(((g,m)=>{const v=l.get(g);v!==void 0&&Gl(v.mutation,m,wi.empty(),_t.now()),Lf(n,m)&&(d=d.insert(g,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Qi(s.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:T4(s.bundledQuery),readTime:Qi(s.readTime)}})(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this.overlays=new At(Re.comparator),this.kr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const o=fs();return ue.forEach(n,(s=>this.getOverlay(e,s).next((l=>{l!==null&&o.set(s,l)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((s,l)=>{this.wt(e,n,l)})),ue.resolve()}removeOverlaysForBatchId(e,n,o){const s=this.kr.get(o);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(o)),ue.resolve()}getOverlaysForCollection(e,n,o){const s=fs(),l=n.length+1,u=new Re(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>o&&s.set(g.getKey(),g)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,n,o,s){let l=new At(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>o){let v=l.get(m.largestBatchId);v===null&&(v=fs(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=fs(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=s)););return ue.resolve(d)}wt(e,n,o){const s=this.overlays.get(o.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(o.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new WU(n,o));let l=this.kr.get(n);l===void 0&&(l=Qe(),this.kr.set(n,l)),this.kr.set(n,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this.qr=new $t(Wt.Qr),this.$r=new $t(Wt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const o=new Wt(e,n);this.qr=this.qr.add(o),this.$r=this.$r.add(o)}Kr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Wr(new Wt(e,n))}Gr(e,n){e.forEach((o=>this.removeReference(o,n)))}zr(e){const n=new Re(new yt([])),o=new Wt(n,e),s=new Wt(n,e+1),l=[];return this.$r.forEachInRange([o,s],(u=>{this.Wr(u),l.push(u.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Re(new yt([])),o=new Wt(n,e),s=new Wt(n,e+1);let l=Qe();return this.$r.forEachInRange([o,s],(u=>{l=l.add(u.key)})),l}containsKey(e){const n=new Wt(e,0),o=this.qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class Wt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Re.comparator(e.key,n.key)||ze(e.Hr,n.Hr)}static Ur(e,n){return ze(e.Hr,n.Hr)||Re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new $t(Wt.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,s){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new XU(l,n,o,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new Wt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,n){return ue.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,s=this.Xr(o),l=s<0?0:s;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?hm:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Wt(n,0),s=new Wt(n,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([o,s],(u=>{const d=this.Zr(u.Hr);l.push(d)})),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new $t(ze);return n.forEach((s=>{const l=new Wt(s,0),u=new Wt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,u],(d=>{o=o.add(d.Hr)}))})),ue.resolve(this.ei(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,s=o.length+1;let l=o;Re.isDocumentKey(l)||(l=l.child(""));const u=new Wt(new Re(l),0);let d=new $t(ze);return this.Yr.forEachWhile((g=>{const m=g.key.path;return!!o.isPrefixOf(m)&&(m.length===s&&(d=d.add(g.Hr)),!0)}),u),ue.resolve(this.ei(d))}ei(e){const n=[];return e.forEach((o=>{const s=this.Zr(o);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){st(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Yr;return ue.forEach(n.mutations,(s=>{const l=new Wt(s.key,n.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=o}))}rr(e){}containsKey(e,n){const o=new Wt(n,0),s=this.Yr.firstAfterOrEqual(o);return ue.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.ni=e,this.docs=(function(){return new At(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,s=this.docs.get(o),l=s?s.size:0,u=this.ni(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return ue.resolve(o?o.document.mutableCopy():yn.newInvalidDocument(n))}getEntries(e,n){let o=No();return n.forEach((s=>{const l=this.docs.get(s);o=o.insert(s,l?l.document.mutableCopy():yn.newInvalidDocument(s))})),ue.resolve(o)}getDocumentsMatchingQuery(e,n,o,s){let l=No();const u=n.path,d=new Re(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:v}}=g.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||fU(cU(v),o)<=0||(s.has(v.key)||Lf(n,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ue.resolve(l)}getAllFromCollectionGroup(e,n,o,s){Ne(9500)}ri(e,n){return ue.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new k4(this)}getSize(e){return ue.resolve(this.size)}}class k4 extends b4{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((o,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(o)})),ue.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.persistence=e,this.ii=new vs((n=>gm(n)),ym),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.si=0,this.oi=new Sm,this.targetCount=0,this._i=Aa.ar()}forEachTarget(e,n){return this.ii.forEach(((o,s)=>n(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.si&&(this.si=n),ue.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Aa(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.hr(n),ue.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,o){let s=0;const l=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=n&&o.get(d.targetId)===null&&(this.ii.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ue.waitFor(l).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const o=this.ii.get(n)||null;return ue.resolve(o)}addMatchingKeys(e,n,o){return this.oi.Kr(n,o),ue.resolve()}removeMatchingKeys(e,n,o){this.oi.Gr(n,o);const s=this.persistence.referenceDelegate,l=[];return s&&n.forEach((u=>{l.push(s.markPotentiallyOrphaned(e,u))})),ue.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const o=this.oi.Jr(n);return ue.resolve(o)}containsKey(e,n){return ue.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n){this.ai={},this.overlays={},this.ui=new Pf(0),this.ci=!1,this.ci=!0,this.li=new P4,this.referenceDelegate=e(this),this.hi=new L4(this),this.indexManager=new E4,this.remoteDocumentCache=(function(s){return new U4(s)})((o=>this.referenceDelegate.Pi(o))),this.serializer=new v4(n),this.Ti=new M4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new D4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ai[e.toKey()];return o||(o=new V4(n,this.referenceDelegate),this.ai[e.toKey()]=o),o}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,o){ve("MemoryPersistence","Starting transaction:",e);const s=new O4(this.ui.next());return this.referenceDelegate.Ii(),o(s).next((l=>this.referenceDelegate.di(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,n){return ue.or(Object.values(this.ai).map((o=>()=>o.containsKey(e,n))))}}class O4 extends hU{constructor(e){super(),this.currentSequenceNumber=e}}class Am{constructor(e){this.persistence=e,this.Ai=new Sm,this.Ri=null}static Vi(e){return new Am(e)}get mi(){if(this.Ri)return this.Ri;throw Ne(60996)}addReference(e,n,o){return this.Ai.addReference(o,n),this.mi.delete(o.toString()),ue.resolve()}removeReference(e,n,o){return this.Ai.removeReference(o,n),this.mi.add(o.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((l=>this.mi.add(l.toString())))})).next((()=>o.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,(o=>{const s=Re.fromPath(o);return this.fi(e,s).next((l=>{l||n.removeEntry(s,Ve.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((o=>{o?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return ue.or([()=>ue.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Sf{constructor(e,n){this.persistence=e,this.gi=new vs((o=>gU(o.path)),((o,s)=>o.isEqual(s))),this.garbageCollector=w4(this,n)}static Vi(e,n){return new Sf(e,n)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((s=>o+s))))}yr(e){let n=0;return this.gr(e,(o=>{n++})).next((()=>n))}gr(e,n){return ue.forEach(this.gi,((o,s)=>this.Sr(e,o,s).next((l=>l?ue.resolve():n(s)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,n).next((d=>{d||(o++,l.removeEntry(u,Ve.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.gi.set(o,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,o){return this.gi.set(o,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zc(e.data.value)),n}Sr(e,n,o){return ue.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return ue.resolve(s!==void 0&&s>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n,o,s){this.targetId=e,this.fromCache=n,this.Is=o,this.ds=s}static Es(e,n){let o=Qe(),s=Qe();for(const l of n.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Cm(e,n.fromCache,o,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return LP()?8:pU(UP())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,o,s){const l={result:null};return this.ps(e,n).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ys(e,n,s,o).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new F4;return this.ws(e,n,u).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,n,u,d.size)}))})).next((()=>l.result))}Ss(e,n,o,s){return o.documentReadCount<this.Vs?(la()<=je.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",ua(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(la()<=je.DEBUG&&ve("QueryEngine","Query:",ua(n),"scans",o.documentReadCount,"local documents and returns",s,"documents as results."),o.documentReadCount>this.fs*s?(la()<=je.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",ua(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ki(n))):ue.resolve())}ps(e,n){if(zT(n))return ue.resolve(null);let o=Ki(n);return this.indexManager.getIndexType(e,o).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Op(n,null,"F"),o=Ki(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const u=Qe(...l);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,o).next((g=>{const m=this.bs(n,d);return this.Ds(n,m,u,g.readTime)?this.ps(e,Op(n,null,"F")):this.vs(e,m,n,g)}))))})))))}ys(e,n,o,s){return zT(n)||s.isEqual(Ve.min())?ue.resolve(null):this.gs.getDocuments(e,o).next((l=>{const u=this.bs(n,l);return this.Ds(n,u,o,s)?ue.resolve(null):(la()<=je.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ua(n)),this.vs(e,u,n,uU(s,Xl)).next((d=>d)))}))}bs(e,n){let o=new $t(TA(e));return n.forEach(((s,l)=>{Lf(e,l)&&(o=o.add(l))})),o}Ds(e,n,o,s){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ws(e,n,o){return la()<=je.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",ua(n)),this.gs.getDocumentsMatchingQuery(e,n,xr.min(),o)}vs(e,n,o,s){return this.gs.getDocumentsMatchingQuery(e,o,s).next((l=>(n.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="LocalStore",q4=3e8;class z4{constructor(e,n,o,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new At(ze),this.Ms=new vs((l=>gm(l)),ym),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(o)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N4(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function G4(t,e,n,o){return new z4(t,e,n,o)}async function HA(t,e){const n=ke(t);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let s;return n.mutationQueue.getAllMutationBatches(o).next((l=>(s=l,n.Ns(e),n.mutationQueue.getAllMutationBatches(o)))).next((l=>{const u=[],d=[];let g=Qe();for(const m of s){u.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}return n.localDocuments.getDocuments(o,g).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function H4(t,e){const n=ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const s=e.batch.keys(),l=n.Os.newChangeBuffer({trackRemovals:!0});return(function(d,g,m,v){const E=m.batch,S=E.keys();let I=ue.resolve();return S.forEach((M=>{I=I.next((()=>v.getEntry(g,M))).next((L=>{const V=m.docVersions.get(M);st(V!==null,48541),L.version.compareTo(V)<0&&(E.applyToRemoteDocument(L,m),L.isValidDocument()&&(L.setReadTime(m.commitVersion),v.addEntry(L)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(g,E)))})(n,o,e,l).next((()=>l.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let g=Qe();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(o,s)))}))}function YA(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function Y4(t,e){const n=ke(t),o=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=s.get(E);if(!S)return;d.push(n.hi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>n.hi.addMatchingKeys(l,v.addedDocuments,E))));let I=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(cn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,o)),s=s.insert(E,I),(function(L,V,$){return L.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=q4?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,I,v)&&d.push(n.hi.updateTargetData(l,I))}));let g=No(),m=Qe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push($4(l,u,e.documentUpdates).next((v=>{g=v.Ls,m=v.ks}))),!o.isEqual(Ve.min())){const v=n.hi.getLastRemoteSnapshotVersion(l).next((E=>n.hi.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(v)}return ue.waitFor(d).next((()=>u.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,g,m))).next((()=>g))})).then((l=>(n.Fs=s,l)))}function $4(t,e,n){let o=Qe(),s=Qe();return n.forEach((l=>o=o.add(l))),e.getEntries(t,o).next((l=>{let u=No();return n.forEach(((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):ve(Im,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)})),{Ls:u,ks:s}}))}function J4(t,e){const n=ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=hm),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function K4(t,e){const n=ke(t);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let s;return n.hi.getTargetData(o,e).next((l=>l?(s=l,ue.resolve(s)):n.hi.allocateTargetId(o).next((u=>(s=new Er(e,u,"TargetPurposeListen",o.currentSequenceNumber),n.hi.addTargetData(o,s).next((()=>s)))))))})).then((o=>{const s=n.Fs.get(o.targetId);return(s===null||o.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(o.targetId,o),n.Ms.set(e,o.targetId)),o}))}async function Gp(t,e,n){const o=ke(t),s=o.Fs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",l,(u=>o.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Na(u))throw u;ve(Im,`Failed to update sequence numbers for target ${e}: ${u}`)}o.Fs=o.Fs.remove(e),o.Ms.delete(s.target)}function tE(t,e,n){const o=ke(t);let s=Ve.min(),l=Qe();return o.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,m,v){const E=ke(g),S=E.Ms.get(v);return S!==void 0?ue.resolve(E.Fs.get(S)):E.hi.getTargetData(m,v)})(o,u,Ki(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,o.hi.getMatchingKeysForTargetId(u,d.targetId).next((g=>{l=g}))})).next((()=>o.Cs.getDocumentsMatchingQuery(u,e,n?s:Ve.min(),n?l:Qe()))).next((d=>(Q4(o,UU(e),d),{documents:d,qs:l})))))}function Q4(t,e,n){let o=t.xs.get(e)||Ve.min();n.forEach(((s,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),t.xs.set(e,o)}class nE{constructor(){this.activeTargetIds=qU()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X4{constructor(){this.Fo=new nE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,o){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new nE,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="ConnectivityMonitor";class oE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ve(iE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ve(iE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc=null;function Hp(){return Hc===null?Hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hc++,"0x"+Hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="RestConnection",Z4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j4{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${o}/databases/${s}`,this.Ko=this.databaseId.database===gf?`project_id=${o}`:`project_id=${o}&database_id=${s}`}Wo(e,n,o,s,l){const u=Hp(),d=this.Go(e,n.toUriEncodedString());ve(op,`Sending RPC '${e}' ${u}:`,d,o);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,s,l);const{host:m}=new URL(d),v=iu(m);return this.jo(e,d,g,o,v).then((E=>(ve(op,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw br(op,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",o),E}))}Jo(e,n,o,s,l,u){return this.Wo(e,n,o,s,l)}zo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ba})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,l)=>e[l]=s)),o&&o.headers.forEach(((s,l)=>e[l]=s))}Go(e,n){const o=Z4[e];return`${this.$o}/v1/${n}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class tk extends j4{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,o,s,l){const u=Hp();return new Promise(((d,g)=>{const m=new YS;m.setWithCredentials(!0),m.listenOnce($S.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Wc.NO_ERROR:const E=m.getResponseJson();ve(mn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Wc.TIMEOUT:ve(mn,`RPC '${e}' ${u} timed out`),g(new _e(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const S=m.getStatus();if(ve(mn,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const M=I==null?void 0:I.error;if(M&&M.status&&M.message){const L=(function($){const X=$.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(X)>=0?X:ae.UNKNOWN})(M.status);g(new _e(L,M.message))}else g(new _e(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new _e(ae.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ve(mn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(s);ve(mn,`RPC '${e}' ${u} sending request:`,s),m.send(n,"POST",v,o,15)}))}P_(e,n,o){const s=Hp(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=QS(),d=KS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,n,o),g.encodeInitMessageHeaders=!0;const v=l.join("");ve(mn,`Creating RPC '${e}' stream ${s}: ${v}`,g);const E=u.createWebChannel(v,g);this.T_(E);let S=!1,I=!1;const M=new ek({Ho:V=>{I?ve(mn,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(S||(ve(mn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),S=!0),ve(mn,`RPC '${e}' stream ${s} sending:`,V),E.send(V))},Yo:()=>E.close()}),L=(V,$,X)=>{V.listen($,(J=>{try{X(J)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return L(E,kl.EventType.OPEN,(()=>{I||(ve(mn,`RPC '${e}' stream ${s} transport opened.`),M.s_())})),L(E,kl.EventType.CLOSE,(()=>{I||(I=!0,ve(mn,`RPC '${e}' stream ${s} transport closed`),M.__(),this.I_(E))})),L(E,kl.EventType.ERROR,(V=>{I||(I=!0,br(mn,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),M.__(new _e(ae.UNAVAILABLE,"The operation could not be completed")))})),L(E,kl.EventType.MESSAGE,(V=>{var $;if(!I){const X=V.data[0];st(!!X,16349);const J=X,ne=(J==null?void 0:J.error)||(($=J[0])===null||$===void 0?void 0:$.error);if(ne){ve(mn,`RPC '${e}' stream ${s} received error:`,ne);const he=ne.status;let W=(function(x){const U=zt[x];if(U!==void 0)return DA(U)})(he),D=ne.message;W===void 0&&(W=ae.INTERNAL,D="Unknown error status: "+he+" with message "+ne.message),I=!0,M.__(new _e(W,D)),E.close()}else ve(mn,`RPC '${e}' stream ${s} received:`,X),M.a_(X)}})),L(d,JS.STAT_EVENT,(V=>{V.stat===Mp.PROXY?ve(mn,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Mp.NOPROXY&&ve(mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{M.o_()}),0),M}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function rp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t){return new r4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n,o=1e3,s=1.5,l=6e4){this.Fi=e,this.timerId=n,this.d_=o,this.E_=s,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),o=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-o);s>0&&ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="PersistentStream";class JA{constructor(e,n,o,s,l,u,d,g){this.Fi=e,this.w_=o,this.S_=s,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new $A(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(xo(n.toString()),xo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,s])=>{this.b_===n&&this.W_(o,s)}),(o=>{e((()=>{const s=new _e(ae.UNKNOWN,"Fetching auth token failed: "+o.message);return this.G_(s)}))}))}W_(e,n){const o=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.e_((()=>{o((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{o((()=>this.G_(s)))})),this.stream.onMessage((s=>{o((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ve(rE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(ve(rE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nk extends JA{constructor(e,n,o,s,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,s,u),this.serializer=l}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=l4(this.serializer,e),o=(function(l){if(!("targetChange"in l))return Ve.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ve.min():u.readTime?Qi(u.readTime):Ve.min()})(e);return this.listener.J_(n,o)}H_(e){const n={};n.database=zp(this.serializer),n.addTarget=(function(l,u){let d;const g=u.target;if(d=kp(g)?{documents:f4(l,g)}:{query:d4(l,g).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=UA(l,u.resumeToken);const m=Fp(l,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ve.min())>0){d.readTime=Ef(l,u.snapshotVersion.toTimestamp());const m=Fp(l,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const o=p4(this.serializer,e);o&&(n.labels=o),this.k_(n)}Y_(e){const n={};n.database=zp(this.serializer),n.removeTarget=e,this.k_(n)}}class ik extends JA{constructor(e,n,o,s,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,s,u),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=c4(e.writeResults,e.commitTime),o=Qi(e.commitTime);return this.listener.ta(o,n)}na(){const e={};e.database=zp(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>u4(this.serializer,o)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{}class rk extends ok{constructor(e,n,o,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new _e(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,o,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,Bp(n,o),s,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(ae.UNKNOWN,l.toString())}))}Jo(e,n,o,s,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,Bp(n,o),s,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(ae.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class sk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xo(n),this._a=!1):ve("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="RemoteStore";class ak{constructor(e,n,o,s,l){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((u=>{o.enqueueAndForget((async()=>{Es(this)&&(ve(ps,"Restarting streams for network reachability change."),await(async function(g){const m=ke(g);m.Ia.add(4),await au(m),m.Aa.set("Unknown"),m.Ia.delete(4),await zf(m)})(this))}))})),this.Aa=new sk(o,s)}}async function zf(t){if(Es(t))for(const e of t.da)await e(!0)}async function au(t){for(const e of t.da)await e(!1)}function KA(t,e){const n=ke(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),xm(n)?bm(n):Da(n).x_()&&wm(n,e))}function Rm(t,e){const n=ke(t),o=Da(n);n.Ta.delete(e),o.x_()&&QA(n,e),n.Ta.size===0&&(o.x_()?o.B_():Es(n)&&n.Aa.set("Unknown"))}function wm(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Da(t).H_(e)}function QA(t,e){t.Ra.$e(e),Da(t).Y_(e)}function bm(t){t.Ra=new t4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Da(t).start(),t.Aa.aa()}function xm(t){return Es(t)&&!Da(t).M_()&&t.Ta.size>0}function Es(t){return ke(t).Ia.size===0}function XA(t){t.Ra=void 0}async function lk(t){t.Aa.set("Online")}async function uk(t){t.Ta.forEach(((e,n)=>{wm(t,e)}))}async function ck(t,e){XA(t),xm(t)?(t.Aa.la(e),bm(t)):t.Aa.set("Unknown")}async function fk(t,e,n){if(t.Aa.set("Online"),e instanceof VA&&e.state===2&&e.cause)try{await(async function(s,l){const u=l.cause;for(const d of l.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(t,e)}catch(o){ve(ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Af(t,o)}else if(e instanceof tf?t.Ra.Ye(e):e instanceof PA?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ve.min()))try{const o=await YA(t.localStore);n.compareTo(o)>=0&&await(function(l,u){const d=l.Ra.Pt(u);return d.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ta.get(m);v&&l.Ta.set(m,v.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,m)=>{const v=l.Ta.get(g);if(!v)return;l.Ta.set(g,v.withResumeToken(cn.EMPTY_BYTE_STRING,v.snapshotVersion)),QA(l,g);const E=new Er(v.target,g,m,v.sequenceNumber);wm(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(o){ve(ps,"Failed to raise snapshot:",o),await Af(t,o)}}async function Af(t,e,n){if(!Na(e))throw e;t.Ia.add(1),await au(t),t.Aa.set("Offline"),n||(n=()=>YA(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ve(ps,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await zf(t)}))}function WA(t,e){return e().catch((n=>Af(t,n,e)))}async function Gf(t){const e=ke(t),n=Pr(e);let o=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:hm;for(;dk(e);)try{const s=await J4(e.localStore,o);if(s===null){e.Pa.length===0&&n.B_();break}o=s.batchId,hk(e,s)}catch(s){await Af(e,s)}ZA(e)&&jA(e)}function dk(t){return Es(t)&&t.Pa.length<10}function hk(t,e){t.Pa.push(e);const n=Pr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function ZA(t){return Es(t)&&!Pr(t).M_()&&t.Pa.length>0}function jA(t){Pr(t).start()}async function pk(t){Pr(t).na()}async function mk(t){const e=Pr(t);for(const n of t.Pa)e.X_(n.mutations)}async function gk(t,e,n){const o=t.Pa.shift(),s=vm.from(o,e,n);await WA(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Gf(t)}async function yk(t,e){e&&Pr(t).Z_&&await(async function(o,s){if((function(u){return jU(u)&&u!==ae.ABORTED})(s.code)){const l=o.Pa.shift();Pr(o).N_(),await WA(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Gf(o)}})(t,e),ZA(t)&&jA(t)}async function sE(t,e){const n=ke(t);n.asyncQueue.verifyOperationInProgress(),ve(ps,"RemoteStore received new credentials");const o=Es(n);n.Ia.add(3),await au(n),o&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await zf(n)}async function _k(t,e){const n=ke(t);e?(n.Ia.delete(2),await zf(n)):e||(n.Ia.add(2),await au(n),n.Aa.set("Unknown"))}function Da(t){return t.Va||(t.Va=(function(n,o,s){const l=ke(n);return l.ia(),new nk(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(t.datastore,t.asyncQueue,{Zo:lk.bind(null,t),e_:uk.bind(null,t),n_:ck.bind(null,t),J_:fk.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),xm(t)?bm(t):t.Aa.set("Unknown")):(await t.Va.stop(),XA(t))}))),t.Va}function Pr(t){return t.ma||(t.ma=(function(n,o,s){const l=ke(n);return l.ia(),new ik(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:pk.bind(null,t),n_:yk.bind(null,t),ea:mk.bind(null,t),ta:gk.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Gf(t)):(await t.ma.stop(),t.Pa.length>0&&(ve(ps,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n,o,s,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=s,this.removalCallback=l,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,s,l){const u=Date.now()+o,d=new Nm(e,n,u,s,l);return d.start(o),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mm(t,e){if(xo("AsyncQueue",`${e}: ${t}`),Na(t))return new _e(ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{static emptySet(e){return new ga(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||Re.comparator(n.key,o.key):(n,o)=>Re.comparator(n.key,o.key),this.keyedMap=Ll(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,l=o.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new ga;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.fa=new At(Re.comparator)}track(e){const n=e.doc.key,o=this.fa.get(n);o?e.type!==0&&o.type===3?this.fa=this.fa.insert(n,e):e.type===3&&o.type!==1?this.fa=this.fa.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.fa=this.fa.remove(n):e.type===1&&o.type===2?this.fa=this.fa.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ne(63341,{At:e,ga:o}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,o)=>{e.push(o)})),e}}class Ca{constructor(e,n,o,s,l,u,d,g,m){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=s,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(e,n,o,s,l){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new Ca(e,n,ga.emptySet(n),u,o,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==o[s].type||!n[s].doc.isEqual(o[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class Tk{constructor(){this.queries=lE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,o){const s=ke(n),l=s.queries;s.queries=lE(),l.forEach(((u,d)=>{for(const g of d.wa)g.onError(o)}))})(this,new _e(ae.ABORTED,"Firestore shutting down"))}}function lE(){return new vs((t=>vA(t)),kf)}async function Ek(t,e){const n=ke(t);let o=3;const s=e.query;let l=n.queries.get(s);l?!l.Sa()&&e.ba()&&(o=2):(l=new vk,o=e.ba()?0:1);try{switch(o){case 0:l.ya=await n.onListen(s,!0);break;case 1:l.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const d=Mm(u,`Initialization of query '${ua(e.query)}' failed`);return void e.onError(d)}n.queries.set(s,l),l.wa.push(e),e.va(n.onlineState),l.ya&&e.Ca(l.ya)&&Dm(n)}async function Sk(t,e){const n=ke(t),o=e.query;let s=3;const l=n.queries.get(o);if(l){const u=l.wa.indexOf(e);u>=0&&(l.wa.splice(u,1),l.wa.length===0?s=e.ba()?0:1:!l.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function Ak(t,e){const n=ke(t);let o=!1;for(const s of e){const l=s.query,u=n.queries.get(l);if(u){for(const d of u.wa)d.Ca(s)&&(o=!0);u.ya=s}}o&&Dm(n)}function Ck(t,e,n){const o=ke(t),s=o.queries.get(e);if(s)for(const l of s.wa)l.onError(n);o.queries.delete(e)}function Dm(t){t.Da.forEach((e=>{e.next()}))}var Yp,uE;(uE=Yp||(Yp={})).Fa="default",uE.Cache="cache";class Ik{constructor(e,n,o){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=o||{}}Ca(e){if(!this.options.includeMetadataChanges){const o=[];for(const s of e.docChanges)s.type!==3&&o.push(s);e=new Ca(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const o=n!=="Offline";return(!this.options.ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Yp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.key=e}}class tC{constructor(e){this.key=e}}class Rk{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Qe(),this.mutatedKeys=Qe(),this.Xa=TA(e),this.eu=new ga(this.Xa)}get tu(){return this.Ha}nu(e,n){const o=n?n.ru:new aE,s=n?n.eu:this.eu;let l=n?n.mutatedKeys:this.mutatedKeys,u=s,d=!1;const g=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,E)=>{const S=s.get(v),I=Lf(this.query,E)?E:null,M=!!S&&this.mutatedKeys.has(S.key),L=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let V=!1;S&&I?S.data.isEqual(I.data)?M!==L&&(o.track({type:3,doc:I}),V=!0):this.iu(S,I)||(o.track({type:2,doc:I}),V=!0,(g&&this.Xa(I,g)>0||m&&this.Xa(I,m)<0)&&(d=!0)):!S&&I?(o.track({type:0,doc:I}),V=!0):S&&!I&&(o.track({type:1,doc:S}),V=!0,(g||m)&&(d=!0)),V&&(I?(u=u.add(I),l=L?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),o.track({type:1,doc:v})}return{eu:u,ru:o,Ds:d,mutatedKeys:l}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,s){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,E)=>(function(I,M){const L=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{At:V})}};return L(I)-L(M)})(v.type,E.type)||this.Xa(v.doc,E.doc))),this.su(o),s=s!=null&&s;const d=n&&!s?this.ou():[],g=this.Za.size===0&&this.current&&!s?1:0,m=g!==this.Ya;return this.Ya=g,u.length!==0||m?{snapshot:new Ca(this.query,e.eu,l,u,e.mutatedKeys,g===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new aE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Qe(),this.eu.forEach((o=>{this.au(o.key)&&(this.Za=this.Za.add(o.key))}));const n=[];return e.forEach((o=>{this.Za.has(o)||n.push(new tC(o))})),this.Za.forEach((o=>{e.has(o)||n.push(new eC(o))})),n}uu(e){this.Ha=e.qs,this.Za=Qe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ca.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Pm="SyncEngine";class wk{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class bk{constructor(e){this.key=e,this.lu=!1}}class xk{constructor(e,n,o,s,l,u){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new vs((d=>vA(d)),kf),this.Tu=new Map,this.Iu=new Set,this.du=new At(Re.comparator),this.Eu=new Map,this.Au=new Sm,this.Ru={},this.Vu=new Map,this.mu=Aa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Nk(t,e,n=!0){const o=aC(t);let s;const l=o.Pu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.cu()):s=await nC(o,e,n,!0),s}async function Mk(t,e){const n=aC(t);await nC(n,e,!0,!1)}async function nC(t,e,n,o){const s=await K4(t.localStore,Ki(e)),l=s.targetId,u=t.sharedClientState.addLocalQueryTarget(l,n);let d;return o&&(d=await Dk(t,e,l,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&KA(t.remoteStore,s),d}async function Dk(t,e,n,o,s){t.gu=(E,S,I)=>(async function(L,V,$,X){let J=V.view.nu($);J.Ds&&(J=await tE(L.localStore,V.query,!1).then((({documents:D})=>V.view.nu(D,J))));const ne=X&&X.targetChanges.get(V.targetId),he=X&&X.targetMismatches.get(V.targetId)!=null,W=V.view.applyChanges(J,L.isPrimaryClient,ne,he);return fE(L,V.targetId,W._u),W.snapshot})(t,E,S,I);const l=await tE(t.localStore,e,!0),u=new Rk(e,l.qs),d=u.nu(l.documents),g=su.createSynthesizedTargetChangeForCurrentChange(n,o&&t.onlineState!=="Offline",s),m=u.applyChanges(d,t.isPrimaryClient,g);fE(t,n,m._u);const v=new wk(e,n,u);return t.Pu.set(e,v),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),m.snapshot}async function Pk(t,e,n){const o=ke(t),s=o.Pu.get(e),l=o.Tu.get(s.targetId);if(l.length>1)return o.Tu.set(s.targetId,l.filter((u=>!kf(u,e)))),void o.Pu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(s.targetId),o.sharedClientState.isActiveQueryTarget(s.targetId)||await Gp(o.localStore,s.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(s.targetId),n&&Rm(o.remoteStore,s.targetId),$p(o,s.targetId)})).catch(xa)):($p(o,s.targetId),await Gp(o.localStore,s.targetId,!0))}async function Vk(t,e){const n=ke(t),o=n.Pu.get(e),s=n.Tu.get(o.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),Rm(n.remoteStore,o.targetId))}async function Uk(t,e,n){const o=zk(t);try{const s=await(function(u,d){const g=ke(u),m=_t.now(),v=d.reduce(((I,M)=>I.add(M.key)),Qe());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let M=No(),L=Qe();return g.Os.getEntries(I,v).next((V=>{M=V,M.forEach((($,X)=>{X.isValidDocument()||(L=L.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,M))).next((V=>{E=V;const $=[];for(const X of d){const J=KU(X,E.get(X.key).overlayedDocument);J!=null&&$.push(new Ts(X.key,J,cA(J.value.mapValue),Ro.exists(!0)))}return g.mutationQueue.addMutationBatch(I,m,$,d)})).next((V=>{S=V;const $=V.applyToLocalDocumentSet(E,L);return g.documentOverlayCache.saveOverlays(I,V.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:SA(E)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(s.batchId),(function(u,d,g){let m=u.Ru[u.currentUser.toKey()];m||(m=new At(ze)),m=m.insert(d,g),u.Ru[u.currentUser.toKey()]=m})(o,s.batchId,n),await lu(o,s.changes),await Gf(o.remoteStore)}catch(s){const l=Mm(s,"Failed to persist write");n.reject(l)}}async function iC(t,e){const n=ke(t);try{const o=await Y4(n.localStore,e);e.targetChanges.forEach(((s,l)=>{const u=n.Eu.get(l);u&&(st(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?st(u.lu,14607):s.removedDocuments.size>0&&(st(u.lu,42227),u.lu=!1))})),await lu(n,o,e)}catch(o){await xa(o)}}function cE(t,e,n){const o=ke(t);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const s=[];o.Pu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const g=ke(u);g.onlineState=d;let m=!1;g.queries.forEach(((v,E)=>{for(const S of E.wa)S.va(d)&&(m=!0)})),m&&Dm(g)})(o.eventManager,e),s.length&&o.hu.J_(s),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function kk(t,e,n){const o=ke(t);o.sharedClientState.updateQueryState(e,"rejected",n);const s=o.Eu.get(e),l=s&&s.key;if(l){let u=new At(Re.comparator);u=u.insert(l,yn.newNoDocument(l,Ve.min()));const d=Qe().add(l),g=new Bf(Ve.min(),new Map,new At(ze),u,d);await iC(o,g),o.du=o.du.remove(l),o.Eu.delete(e),Vm(o)}else await Gp(o.localStore,e,!1).then((()=>$p(o,e,n))).catch(xa)}async function Lk(t,e){const n=ke(t),o=e.batch.batchId;try{const s=await H4(n.localStore,e);rC(n,o,null),oC(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await lu(n,s)}catch(s){await xa(s)}}async function Ok(t,e,n){const o=ke(t);try{const s=await(function(u,d){const g=ke(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return g.mutationQueue.lookupMutationBatch(m,d).next((E=>(st(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(m,E)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>g.localDocuments.getDocuments(m,v)))}))})(o.localStore,e);rC(o,e,n),oC(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await lu(o,s)}catch(s){await xa(s)}}function oC(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function rC(t,e,n){const o=ke(t);let s=o.Ru[o.currentUser.toKey()];if(s){const l=s.get(e);l&&(n?l.reject(n):l.resolve(),s=s.remove(e)),o.Ru[o.currentUser.toKey()]=s}}function $p(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const o of t.Tu.get(e))t.Pu.delete(o),n&&t.hu.pu(o,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((o=>{t.Au.containsKey(o)||sC(t,o)}))}function sC(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Rm(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Vm(t))}function fE(t,e,n){for(const o of n)o instanceof eC?(t.Au.addReference(o.key,e),Fk(t,o)):o instanceof tC?(ve(Pm,"Document no longer in limbo: "+o.key),t.Au.removeReference(o.key,e),t.Au.containsKey(o.key)||sC(t,o.key)):Ne(19791,{yu:o})}function Fk(t,e){const n=e.key,o=n.path.canonicalString();t.du.get(n)||t.Iu.has(o)||(ve(Pm,"New document in limbo: "+n),t.Iu.add(o),Vm(t))}function Vm(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Re(yt.fromString(e)),o=t.mu.next();t.Eu.set(o,new bk(n)),t.du=t.du.insert(n,o),KA(t.remoteStore,new Er(Ki(yA(n.path)),o,"TargetPurposeLimboResolution",Pf.ue))}}async function lu(t,e,n){const o=ke(t),s=[],l=[],u=[];o.Pu.isEmpty()||(o.Pu.forEach(((d,g)=>{u.push(o.gu(g,e,n).then((m=>{var v;if((m||n)&&o.isPrimaryClient){const E=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(g.targetId))===null||v===void 0?void 0:v.current;o.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(m){s.push(m);const E=Cm.Es(g.targetId,m);l.push(E)}})))})),await Promise.all(u),o.hu.J_(s),await(async function(g,m){const v=ke(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(m,(S=>ue.forEach(S.Is,(I=>v.persistence.referenceDelegate.addReference(E,S.targetId,I))).next((()=>ue.forEach(S.ds,(I=>v.persistence.referenceDelegate.removeReference(E,S.targetId,I)))))))))}catch(E){if(!Na(E))throw E;ve(Im,"Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const I=v.Fs.get(S),M=I.snapshotVersion,L=I.withLastLimboFreeSnapshotVersion(M);v.Fs=v.Fs.insert(S,L)}}})(o.localStore,l))}async function Bk(t,e){const n=ke(t);if(!n.currentUser.isEqual(e)){ve(Pm,"User change. New user:",e.toKey());const o=await HA(n.localStore,e);n.currentUser=e,(function(l,u){l.Vu.forEach((d=>{d.forEach((g=>{g.reject(new _e(ae.CANCELLED,u))}))})),l.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await lu(n,o.Bs)}}function qk(t,e){const n=ke(t),o=n.Eu.get(e);if(o&&o.lu)return Qe().add(o.key);{let s=Qe();const l=n.Tu.get(e);if(!l)return s;for(const u of l){const d=n.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function aC(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kk.bind(null,e),e.hu.J_=Ak.bind(null,e.eventManager),e.hu.pu=Ck.bind(null,e.eventManager),e}function zk(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ok.bind(null,e),e}class Cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return G4(this.persistence,new B4,e.initialUser,this.serializer)}Du(e){return new GA(Am.Vi,this.serializer)}bu(e){return new X4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cf.provider={build:()=>new Cf};class Gk extends Cf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){st(this.persistence.referenceDelegate instanceof Sf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new I4(o,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new GA((o=>Sf.Vi(o,n)),this.serializer)}}class Jp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>cE(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bk.bind(null,this.syncEngine),await _k(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Tk})()}createDatastore(e){const n=qf(e.databaseInfo.databaseId),o=(function(l){return new tk(l)})(e.databaseInfo);return(function(l,u,d,g){return new rk(l,u,d,g)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,s,l,u,d){return new ak(o,s,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>cE(this.syncEngine,n,0)),(function(){return oE.C()?new oE:new W4})())}createSyncEngine(e,n){return(function(s,l,u,d,g,m,v){const E=new xk(s,l,u,d,g,m);return v&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const l=ke(s);ve(ps,"RemoteStore shutting down."),l.Ia.add(5),await au(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jp.provider={build:()=>new Jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="FirestoreClient";class Yk{constructor(e,n,o,s,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=s,this.user=gn.UNAUTHENTICATED,this.clientId=dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async u=>{ve(Vr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(o,(u=>(ve(Vr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=Mm(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function sp(t,e){t.asyncQueue.verifyOperationInProgress(),ve(Vr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let o=n.initialUser;t.setCredentialChangeListener((async s=>{o.isEqual(s)||(await HA(e.localStore,s),o=s)})),e.persistence.setDatabaseDeletedListener((()=>{br("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{ve("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{br("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),t._offlineComponents=e}async function dE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $k(t);ve(Vr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((o=>sE(e.remoteStore,o))),t.setAppCheckTokenChangeListener(((o,s)=>sE(e.remoteStore,s))),t._onlineComponents=e}async function $k(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve(Vr,"Using user provided OfflineComponentProvider");try{await sp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;br("Error using user provided cache. Falling back to memory cache: "+n),await sp(t,new Cf)}}else ve(Vr,"Using default OfflineComponentProvider"),await sp(t,new Gk(void 0));return t._offlineComponents}async function lC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve(Vr,"Using user provided OnlineComponentProvider"),await dE(t,t._uninitializedComponentsProvider._online)):(ve(Vr,"Using default OnlineComponentProvider"),await dE(t,new Jp))),t._onlineComponents}function Jk(t){return lC(t).then((e=>e.syncEngine))}async function Kk(t){const e=await lC(t),n=e.eventManager;return n.onListen=Nk.bind(null,e.syncEngine),n.onUnlisten=Pk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Mk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Vk.bind(null,e.syncEngine),n}function Qk(t,e,n={}){const o=new Rr;return t.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,g,m){const v=new Hk({next:S=>{v.Ou(),u.enqueueAndForget((()=>Sk(l,E))),S.fromCache&&g.source==="server"?m.reject(new _e(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new Ik(d,v,{includeMetadataChanges:!0,ka:!0});return Ek(l,E)})(await Kk(t),t.asyncQueue,e,n,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firestore.googleapis.com",pE=!0;class mE{constructor(e){var n,o;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cC,this.ssl=pE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:pE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<A4)throw new _e(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uC((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,s){return o.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,n,o,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new jV;switch(o.type){case"firstParty":return new iU(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new _e(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=hE.get(n);o&&(ve("ComponentProvider","Removing Datastore"),hE.delete(n),o.terminate())})(this),Promise.resolve()}}function Xk(t,e,n,o={}){var s;t=pf(t,Hf);const l=iu(e),u=t._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),g=`${e}:${n}`;l&&(NS(`https://${g}`),DS("Firestore",!0)),u.host!==cC&&u.host!==g&&br("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:g,ssl:l,emulatorOptions:o});if(!hf(m,d)&&(t._setSettings(m),o.mockUserToken)){let v,E;if(typeof o.mockUserToken=="string")v=o.mockUserToken,E=gn.MOCK_USER;else{v=MS(o.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const S=o.mockUserToken.sub||o.mockUserToken.user_id;if(!S)throw new _e(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new gn(S)}t._authCredentials=new eU(new WS(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class Zt{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(ou(n,Zt._jsonSchema))return new Zt(e,o||null,new Re(yt.fromString(n.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:Ht("string",Zt._jsonSchemaVersion),referencePath:Ht("string")};class wr extends Ss{constructor(e,n,o){super(e,n,yA(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new Re(e))}withConverter(e){return new wr(this.firestore,e,this._path)}}function fC(t,e,...n){if(t=Zi(t),jS("collection","path",e),t instanceof Hf){const o=yt.fromString(e,...n);return bT(o),new wr(t,null,o)}{if(!(t instanceof Zt||t instanceof wr))throw new _e(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(yt.fromString(e,...n));return bT(o),new wr(t.firestore,null,o)}}function Wk(t,e,...n){if(t=Zi(t),arguments.length===1&&(e=dm.newId()),jS("doc","path",e),t instanceof Hf){const o=yt.fromString(e,...n);return wT(o),new Zt(t,null,new Re(o))}{if(!(t instanceof Zt||t instanceof wr))throw new _e(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=t._path.child(yt.fromString(e,...n));return wT(o),new Zt(t.firestore,t instanceof wr?t.converter:null,new Re(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="AsyncQueue";class yE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new $A(this,"async_queue_retry"),this.oc=()=>{const o=rp();o&&ve(gE,"Visibility state changed to "+o.visibilityState),this.F_.y_()},this._c=e;const n=rp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=rp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Rr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Na(e))throw e;ve(gE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((o=>{throw this.tc=o,this.nc=!1,xo("INTERNAL UNHANDLED ERROR: ",_E(o)),o})).then((o=>(this.nc=!1,o))))));return this._c=n,n}enqueueAfterDelay(e,n,o){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Nm.createAndSchedule(this,e,n,o,(l=>this.lc(l)));return this.ec.push(s),s}ac(){this.tc&&Ne(47125,{hc:_E(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function _E(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Um extends Hf{constructor(e,n,o,s){super(e,n,o,s),this.type="firestore",this._queue=new yE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yE(e),this._firestoreClient=void 0,await e}}}function Zk(t,e){const n=typeof t=="object"?t:qS(),o=typeof t=="string"?t:gf,s=LS(n,"firestore").getImmediate({identifier:o});if(!s._initialized){const l=bS("firestore");l&&Xk(s,...l)}return s}function dC(t){if(t._terminated)throw new _e(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jk(t),t._firestoreClient}function jk(t){var e,n,o;const s=t._freezeSettings(),l=(function(d,g,m,v){return new vU(d,g,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,uC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((o=s.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Yk(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mi(cn.fromBase64String(e))}catch(n){throw new _e(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mi(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ou(e,mi._jsonSchema))return mi.fromBase64String(e.bytes)}}mi._jsonSchemaVersion="firestore/bytes/1.0",mi._jsonSchema={type:Ht("string",mi._jsonSchemaVersion),bytes:Ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xi._jsonSchemaVersion}}static fromJSON(e){if(ou(e,Xi._jsonSchema))return new Xi(e.latitude,e.longitude)}}Xi._jsonSchemaVersion="firestore/geoPoint/1.0",Xi._jsonSchema={type:Ht("string",Xi._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,s){if(o.length!==s.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ou(e,Wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Wi(e.vectorValues);throw new _e(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:Ht("string",Wi._jsonSchemaVersion),vectorValues:Ht("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=/^__.*__$/;class tL{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new ru(e,this.data,n,this.fieldTransforms)}}function pC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ec:t})}}class Lm{constructor(e,n,o,s,l,u){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=s,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Lm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const o=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:o,mc:!1});return s.fc(e),s}gc(e){var n;const o=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:o,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return If(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(pC(this.Ec)&&eL.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class nL{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||qf(e)}Dc(e,n,o,s=!1){return new Lm({Ec:e,methodName:n,bc:o,path:un.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mC(t){const e=t._freezeSettings(),n=qf(t._databaseId);return new nL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iL(t,e,n,o,s,l={}){const u=t.Dc(l.merge||l.mergeFields?2:0,e,n,s);_C("Data must be an object, but it was:",u,o);const d=gC(o,u);let g,m;if(l.merge)g=new wi(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=rL(e,E,n);if(!u.contains(S))throw new _e(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);aL(v,S)||v.push(S)}g=new wi(v),m=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,m=u.fieldTransforms;return new tL(new pi(d),g,m)}function oL(t,e,n,o=!1){return Om(n,t.Dc(o?4:3,e))}function Om(t,e){if(yC(t=Zi(t)))return _C("Unsupported field value:",e,t),gC(t,e);if(t instanceof hC)return(function(o,s){if(!pC(s.Ec))throw s.wc(`${o._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(o,s){const l=[];let u=0;for(const d of o){let g=Om(d,s.yc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(t,e)}return(function(o,s){if((o=Zi(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return zU(s.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=_t.fromDate(o);return{timestampValue:Ef(s.serializer,l)}}if(o instanceof _t){const l=new _t(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Ef(s.serializer,l)}}if(o instanceof Xi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof mi)return{bytesValue:UA(s.serializer,o._byteString)};if(o instanceof Zt){const l=s.databaseId,u=o.firestore._databaseId;if(!u.isEqual(l))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Em(o.firestore._databaseId||s.databaseId,o._key.path)}}if(o instanceof Wi)return(function(u,d){return{mapValue:{fields:{[lA]:{stringValue:uA},[yf]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return _m(d.serializer,m)}))}}}}}})(o,s);throw s.wc(`Unsupported field value: ${Df(o)}`)})(t,e)}function gC(t,e){const n={};return nA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(t,((o,s)=>{const l=Om(s,e.Vc(o));l!=null&&(n[o]=l)})),{mapValue:{fields:n}}}function yC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Xi||t instanceof mi||t instanceof Zt||t instanceof hC||t instanceof Wi)}function _C(t,e,n){if(!yC(n)||!eA(n)){const o=Df(n);throw o==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+o)}}function rL(t,e,n){if((e=Zi(e))instanceof km)return e._internalPath;if(typeof e=="string")return vC(t,e);throw If("Field path arguments must be of type string or ",t,!1,void 0,n)}const sL=new RegExp("[~\\*/\\[\\]]");function vC(t,e,n){if(e.search(sL)>=0)throw If(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new km(...e.split("."))._internalPath}catch{throw If(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function If(t,e,n,o,s){const l=o&&!o.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${o}`),u&&(g+=` in document ${s}`),g+=")"),new _e(ae.INVALID_ARGUMENT,d+t+g)}function aL(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n,o,s,l){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lL extends TC{data(){return super.data()}}function Fm(t,e){return typeof e=="string"?vC(t,e):e instanceof km?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bm{}class EC extends Bm{}function cL(t,e,...n){let o=[];e instanceof Bm&&o.push(e),o=o.concat(n),(function(l){const u=l.filter((g=>g instanceof zm)).length,d=l.filter((g=>g instanceof qm)).length;if(u>1||u>0&&d>0)throw new _e(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const s of o)t=s._apply(t);return t}class qm extends EC{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new qm(e,n,o)}_apply(e){const n=this._parse(e);return SC(e._query,n),new Ss(e.firestore,e.converter,Lp(e._query,n))}_parse(e){const n=mC(e.firestore);return(function(l,u,d,g,m,v,E){let S;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new _e(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){TE(E,v);const M=[];for(const L of E)M.push(vE(g,l,L));S={arrayValue:{values:M}}}else S=vE(g,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||TE(E,v),S=oL(d,u,E,v==="in"||v==="not-in");return Gt.create(m,v,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class zm extends Bm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zm(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:Ni.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,l){let u=s;const d=l.getFlattenedFilters();for(const g of d)SC(u,g),u=Lp(u,g)})(e._query,n),new Ss(e.firestore,e.converter,Lp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gm extends EC{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gm(e,n)}_apply(e){const n=(function(s,l,u){if(s.startAt!==null)throw new _e(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new _e(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eu(l,u)})(e._query,this._field,this._direction);return new Ss(e.firestore,e.converter,(function(s,l){const u=s.explicitOrderBy.concat([l]);return new Ma(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function fL(t,e="asc"){const n=e,o=Fm("orderBy",t);return Gm._create(o,n)}function vE(t,e,n){if(typeof(n=Zi(n))=="string"){if(n==="")throw new _e(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_A(e)&&n.indexOf("/")!==-1)throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(yt.fromString(n));if(!Re.isDocumentKey(o))throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return kT(t,new Re(o))}if(n instanceof Zt)return kT(t,n._key);throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(n)}.`)}function TE(t,e){if(!Array.isArray(t)||t.length===0)throw new _e(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SC(t,e){const n=(function(s,l){for(const u of s)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new _e(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class dL{convertValue(e,n="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return _s(e,((s,l)=>{o[s]=this.convertValue(l,n)})),o}convertVectorValue(e){var n,o,s;const l=(s=(o=(n=e.fields)===null||n===void 0?void 0:n[yf].arrayValue)===null||o===void 0?void 0:o.values)===null||s===void 0?void 0:s.map((u=>Ut(u.doubleValue)));return new Wi(l)}convertGeoPoint(e){return new Xi(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Uf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=yt.fromString(e);st(qA(o),9688,{name:e});const s=new Zl(o.get(1),o.get(3)),l=new Re(o.popFirst(5));return s.isEqual(n)||xo(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e,n){let o;return o=t?t.toFirestore(e):e,o}class Yc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends TC{constructor(e,n,o,s,l,u){super(e,n,o,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Fm("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ya._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:Ht("string",ya._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class nf extends ya{data(e={}){return super.data(e)}}class _a{constructor(e,n,o,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Yc(s.hasPendingWrites,s.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new nf(this._firestore,this._userDataWriter,o.key,o,new Yc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const g=new nf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Yc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new nf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Yc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:pL(d.type),doc:g,oldIndex:m,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_a._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:t})}}_a._jsonSchemaVersion="firestore/querySnapshot/1.0",_a._jsonSchema={type:Ht("string",_a._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class mL extends dL{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function gL(t){t=pf(t,Ss);const e=pf(t.firestore,Um),n=dC(e),o=new mL(e);return uL(t._query),Qk(n,t._query).then((s=>new _a(e,o,t,s)))}function yL(t,e){const n=pf(t.firestore,Um),o=Wk(t),s=hL(t.converter,e);return _L(n,[iL(mC(t.firestore),"addDoc",o._key,s,t.converter!==null,{}).toMutation(o._key,Ro.exists(!1))]).then((()=>o))}function _L(t,e){return(function(o,s){const l=new Rr;return o.asyncQueue.enqueueAndForget((async()=>Uk(await Jk(o),s,l))),l.promise})(dC(t),e)}(function(e,n=!0){(function(s){ba=s})(FS),Kl(new va("firestore",((o,{instanceIdentifier:s,options:l})=>{const u=o.getProvider("app").getImmediate(),d=new Um(new tU(o.getProvider("auth-internal")),new oU(u,o.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new _e(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(m.options.projectId,v)})(u,s),u);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Cr(ST,AT,e),Cr(ST,AT,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="firebasestorage.googleapis.com",CC="storageBucket",vL=120*1e3,TL=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt extends ys{constructor(e,n,o=0){super(ap(e),`Firebase Storage: ${n} (${ap(e)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ap(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xt||(xt={}));function ap(t){return"storage/"+t}function Hm(){const t="An unknown error occurred, please check the error payload for server response.";return new Nt(xt.UNKNOWN,t)}function EL(t){return new Nt(xt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function SL(t){return new Nt(xt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nt(xt.UNAUTHENTICATED,t)}function CL(){return new Nt(xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IL(t){return new Nt(xt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function RL(){return new Nt(xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wL(){return new Nt(xt.CANCELED,"User canceled the upload/download.")}function bL(t){return new Nt(xt.INVALID_URL,"Invalid URL '"+t+"'.")}function xL(t){return new Nt(xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function NL(){return new Nt(xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CC+"' property when initializing the app?")}function ML(){return new Nt(xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function DL(){return new Nt(xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PL(t){return new Nt(xt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Kp(t){return new Nt(xt.INVALID_ARGUMENT,t)}function IC(){return new Nt(xt.APP_DELETED,"The Firebase app was deleted.")}function VL(t){return new Nt(xt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hl(t,e){return new Nt(xt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vl(t){throw new Nt(xt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let o;try{o=ei.makeFromUrl(e,n)}catch{return new ei(e,"")}if(o.path==="")return o;throw xL(e)}static makeFromUrl(e,n){let o=null;const s="([A-Za-z0-9.\\-_]+)";function l(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),g={bucket:1,path:3};function m(ne){ne.path_=decodeURIComponent(ne.path)}const v="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",I=new RegExp(`^https?://${E}/${v}/b/${s}/o${S}`,"i"),M={bucket:1,path:3},L=n===AC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",$=new RegExp(`^https?://${L}/${s}/${V}`,"i"),J=[{regex:d,indices:g,postModify:l},{regex:I,indices:M,postModify:m},{regex:$,indices:{bucket:1,path:2},postModify:m}];for(let ne=0;ne<J.length;ne++){const he=J[ne],W=he.regex.exec(e);if(W){const D=W[he.indices.bucket];let N=W[he.indices.path];N||(N=""),o=new ei(D,N),he.postModify(o);break}}if(o==null)throw bL(e);return o}}class UL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t,e,n){let o=1,s=null,l=null,u=!1,d=0;function g(){return d===2}let m=!1;function v(...V){m||(m=!0,e.apply(null,V))}function E(V){s=setTimeout(()=>{s=null,t(I,g())},V)}function S(){l&&clearTimeout(l)}function I(V,...$){if(m){S();return}if(V){S(),v.call(null,V,...$);return}if(g()||u){S(),v.call(null,V,...$);return}o<64&&(o*=2);let J;d===1?(d=2,J=0):J=(o+Math.random())*1e3,E(J)}let M=!1;function L(V){M||(M=!0,S(),!m&&(s!==null?(V||(d=2),clearTimeout(s),E(0)):V||(d=1)))}return E(0),l=setTimeout(()=>{u=!0,L(!0)},n),L}function LL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t){return t!==void 0}function FL(t){return typeof t=="object"&&!Array.isArray(t)}function Ym(t){return typeof t=="string"||t instanceof String}function EE(t){return $m()&&t instanceof Blob}function $m(){return typeof Blob<"u"}function SE(t,e,n,o){if(o<e)throw Kp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(o>n)throw Kp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t,e,n){let o=e;return n==null&&(o=`https://${e}`),`${n}://${o}/v0${t}`}function RC(t){const e=encodeURIComponent;let n="?";for(const o in t)if(t.hasOwnProperty(o)){const s=e(o)+"="+e(t[o]);n=n+s+"&"}return n=n.slice(0,-1),n}var ds;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ds||(ds={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||s||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n,o,s,l,u,d,g,m,v,E,S=!0,I=!1){this.url_=e,this.method_=n,this.headers_=o,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=g,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=E,this.retry=S,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,L)=>{this.resolve_=M,this.reject_=L,this.start_()})}start_(){const e=(o,s)=>{if(s){o(!1,new $c(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=d=>{const g=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,m)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const d=l.getErrorCode()===ds.NO_ERROR,g=l.getStatus();if(!d||BL(g,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===ds.ABORT;o(!1,new $c(!1,null,v));return}const m=this.successCodes_.indexOf(g)!==-1;o(!0,new $c(m,l))})},n=(o,s)=>{const l=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());OL(g)?l(g):l()}catch(g){u(g)}else if(d!==null){const g=Hm();g.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,g)):u(g)}else if(s.canceled){const g=this.appDelete_?IC():wL();u(g)}else{const g=RL();u(g)}};this.canceled_?n(!1,new $c(!1,null,!0)):this.backoffId_=kL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&LL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $c{constructor(e,n,o){this.wasSuccessCode=e,this.connection=n,this.canceled=!!o}}function zL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function GL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function HL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function YL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $L(t,e,n,o,s,l,u=!0,d=!1){const g=RC(t.urlParams),m=t.url+g,v=Object.assign({},t.headers);return HL(v,e),zL(v,n),GL(v,l),YL(v,o),new qL(m,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function KL(...t){const e=JL();if(e!==void 0){const n=new e;for(let o=0;o<t.length;o++)n.append(t[o]);return n.getBlob()}else{if($m())return new Blob(t);throw new Nt(xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t){if(typeof atob>"u")throw PL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lp{constructor(e,n){this.data=e,this.contentType=n||null}}function WL(t,e){switch(t){case Ji.RAW:return new lp(wC(e));case Ji.BASE64:case Ji.BASE64URL:return new lp(bC(t,e));case Ji.DATA_URL:return new lp(jL(e),e6(e))}throw Hm()}function wC(t){const e=[];for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);if(o<=127)e.push(o);else if(o<=2047)e.push(192|o>>6,128|o&63);else if((o&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const l=o,u=t.charCodeAt(++n);o=65536|(l&1023)<<10|u&1023,e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|o&63)}else(o&64512)===56320?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|o&63)}return new Uint8Array(e)}function ZL(t){let e;try{e=decodeURIComponent(t)}catch{throw Hl(Ji.DATA_URL,"Malformed data URL.")}return wC(e)}function bC(t,e){switch(t){case Ji.BASE64:{const s=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(s||l)throw Hl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ji.BASE64URL:{const s=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(s||l)throw Hl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XL(e)}catch(s){throw s.message.includes("polyfill")?s:Hl(t,"Invalid character found")}const o=new Uint8Array(n.length);for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);return o}class xC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Hl(Ji.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=n[1]||null;o!=null&&(this.base64=t6(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=e.substring(e.indexOf(",")+1)}}function jL(t){const e=new xC(t);return e.base64?bC(Ji.BASE64,e.rest):ZL(e.rest)}function e6(t){return new xC(t).contentType}function t6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n){let o=0,s="";EE(e)?(this.data_=e,o=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),o=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),o=e.length),this.size_=o,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(EE(this.data_)){const o=this.data_,s=QL(o,e,n);return s===null?null:new Tr(s)}else{const o=new Uint8Array(this.data_.buffer,e,n-e);return new Tr(o,!0)}}static getBlob(...e){if($m()){const n=e.map(o=>o instanceof Tr?o.data_:o);return new Tr(KL.apply(null,n))}else{const n=e.map(u=>Ym(u)?WL(Ji.RAW,u).data:u.data_);let o=0;n.forEach(u=>{o+=u.byteLength});const s=new Uint8Array(o);let l=0;return n.forEach(u=>{for(let d=0;d<u.length;d++)s[l++]=u[d]}),new Tr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){let e;try{e=JSON.parse(t)}catch{return null}return FL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function i6(t,e){const n=e.split("/").filter(o=>o.length>0).join("/");return t.length===0?n:t+"/"+n}function MC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(t,e){return e}class Rn{constructor(e,n,o,s){this.server=e,this.local=n||e,this.writable=!!o,this.xform=s||o6}}let Jc=null;function r6(t){return!Ym(t)||t.length<2?t:MC(t)}function DC(){if(Jc)return Jc;const t=[];t.push(new Rn("bucket")),t.push(new Rn("generation")),t.push(new Rn("metageneration")),t.push(new Rn("name","fullPath",!0));function e(l,u){return r6(u)}const n=new Rn("name");n.xform=e,t.push(n);function o(l,u){return u!==void 0?Number(u):u}const s=new Rn("size");return s.xform=o,t.push(s),t.push(new Rn("timeCreated")),t.push(new Rn("updated")),t.push(new Rn("md5Hash",null,!0)),t.push(new Rn("cacheControl",null,!0)),t.push(new Rn("contentDisposition",null,!0)),t.push(new Rn("contentEncoding",null,!0)),t.push(new Rn("contentLanguage",null,!0)),t.push(new Rn("contentType",null,!0)),t.push(new Rn("metadata","customMetadata",!0)),Jc=t,Jc}function s6(t,e){function n(){const o=t.bucket,s=t.fullPath,l=new ei(o,s);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:n})}function a6(t,e,n){const o={};o.type="file";const s=n.length;for(let l=0;l<s;l++){const u=n[l];o[u.local]=u.xform(o,e[u.server])}return s6(o,t),o}function PC(t,e,n){const o=NC(e);return o===null?null:a6(t,o,n)}function l6(t,e,n,o){const s=NC(e);if(s===null||!Ym(s.downloadTokens))return null;const l=s.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(m=>{const v=t.bucket,E=t.fullPath,S="/b/"+u(v)+"/o/"+u(E),I=Jm(S,n,o),M=RC({alt:"media",token:m});return I+M})[0]}function u6(t,e){const n={},o=e.length;for(let s=0;s<o;s++){const l=e[s];l.writable&&(n[l.server]=t[l.local])}return JSON.stringify(n)}class VC{constructor(e,n,o,s){this.url=e,this.method=n,this.handler=o,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){if(!t)throw Hm()}function c6(t,e){function n(o,s){const l=PC(t,s,e);return UC(l!==null),l}return n}function f6(t,e){function n(o,s){const l=PC(t,s,e);return UC(l!==null),l6(l,s,t.host,t._protocol)}return n}function kC(t){function e(n,o){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=CL():s=AL():n.getStatus()===402?s=SL(t.bucket):n.getStatus()===403?s=IL(t.path):s=o,s.status=n.getStatus(),s.serverResponse=o.serverResponse,s}return e}function d6(t){const e=kC(t);function n(o,s){let l=e(o,s);return o.getStatus()===404&&(l=EL(t.path)),l.serverResponse=s.serverResponse,l}return n}function h6(t,e,n){const o=e.fullServerUrl(),s=Jm(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,d=new VC(s,l,f6(t,n),u);return d.errorHandler=d6(e),d}function p6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function m6(t,e,n){const o=Object.assign({},n);return o.fullPath=t.path,o.size=e.size(),o.contentType||(o.contentType=p6(null,e)),o}function g6(t,e,n,o,s){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let J="";for(let ne=0;ne<2;ne++)J=J+Math.random().toString().slice(2);return J}const g=d();u["Content-Type"]="multipart/related; boundary="+g;const m=m6(e,o,s),v=u6(m,n),E="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+g+`\r
Content-Type: `+m.contentType+`\r
\r
`,S=`\r
--`+g+"--",I=Tr.getBlob(E,o,S);if(I===null)throw ML();const M={name:m.fullPath},L=Jm(l,t.host,t._protocol),V="POST",$=t.maxUploadRetryTime,X=new VC(L,V,c6(t,n),$);return X.urlParams=M,X.headers=u,X.body=I.uploadData(),X.errorHandler=kC(e),X}class y6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ds.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ds.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ds.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,o,s,l){if(this.sent_)throw Vl("cannot .send() more than once");if(iu(e)&&o&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),l!==void 0)for(const u in l)l.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,l[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _6 extends y6{initXhr(){this.xhr_.responseType="text"}}function LC(){return new _6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this._service=e,n instanceof ei?this._location=n:this._location=ei.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ms(e,n)}get root(){const e=new ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MC(this._location.path)}get storage(){return this._service}get parent(){const e=n6(this._location.path);if(e===null)return null;const n=new ei(this._location.bucket,e);return new ms(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw VL(e)}}function v6(t,e,n){t._throwIfRoot("uploadBytes");const o=g6(t.storage,t._location,DC(),new Tr(e,!0),n);return t.storage.makeRequestWithTokens(o,LC).then(s=>({metadata:s,ref:t}))}function T6(t){t._throwIfRoot("getDownloadURL");const e=h6(t.storage,t._location,DC());return t.storage.makeRequestWithTokens(e,LC).then(n=>{if(n===null)throw DL();return n})}function E6(t,e){const n=i6(t._location.path,e),o=new ei(t._location.bucket,n);return new ms(t.storage,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t){return/^[A-Za-z]+:\/\//.test(t)}function A6(t,e){return new ms(t,e)}function OC(t,e){if(t instanceof Km){const n=t;if(n._bucket==null)throw NL();const o=new ms(n,n._bucket);return e!=null?OC(o,e):o}else return e!==void 0?E6(t,e):t}function C6(t,e){if(e&&S6(e)){if(t instanceof Km)return A6(t,e);throw Kp("To use ref(service, url), the first argument must be a Storage instance.")}else return OC(t,e)}function AE(t,e){const n=e==null?void 0:e[CC];return n==null?null:ei.makeFromBucketSpec(n,t)}function I6(t,e,n,o={}){t.host=`${e}:${n}`;const s=iu(e);s&&(NS(`https://${t.host}/b`),DS("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:l}=o;l&&(t._overrideAuthToken=typeof l=="string"?l:MS(l,t.app.options.projectId))}class Km{constructor(e,n,o,s,l,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=o,this._url=s,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=AC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vL,this._maxUploadRetryTime=TL,this._requests=new Set,s!=null?this._bucket=ei.makeFromBucketSpec(s,this._host):this._bucket=AE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ei.makeFromBucketSpec(this._url,e):this._bucket=AE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){SE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){SE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(OS(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ms(this,e)}_makeRequest(e,n,o,s,l=!0){if(this._deleted)return new UL(IC());{const u=$L(e,this._appId,o,s,n,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[o,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,o,s).getPromise()}}const CE="@firebase/storage",IE="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="storage";function R6(t,e,n){return t=Zi(t),v6(t,e,n)}function BC(t){return t=Zi(t),T6(t)}function qC(t,e){return t=Zi(t),C6(t,e)}function w6(t=qS(),e){t=Zi(t);const o=LS(t,FC).getImmediate({identifier:e}),s=bS("storage");return s&&b6(o,...s),o}function b6(t,e,n,o={}){I6(t,e,n,o)}function x6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Km(n,o,s,e,FS)}function N6(){Kl(new va(FC,x6,"PUBLIC").setMultipleInstances(!0)),Cr(CE,IE,""),Cr(CE,IE,"esm2017")}N6();const M6={apiKey:"AIzaSyCuaVUrIgq0_pzwpcX-FZVcKxBSokC8l8M",authDomain:"ucapan-fajmuls.firebaseapp.com",projectId:"ucapan-fajmuls",storageBucket:"ucapan-fajmuls.firebasestorage.app",messagingSenderId:"485138495948",appId:"1:485138495948:web:6d7c7e5e7289a5681cc569"};let Kc,Qm,Xm,uu=!1;try{yT().length?Kc=yT()[0]:Kc=BS(M6),Qm=Zk(Kc),Xm=w6(Kc),uu=!0,console.log("Firebase initialized successfully")}catch(t){console.error("Firebase Initialization Failed. Make sure 'firebase' is installed in node_modules.",t)}const up=()=>uu,RE=async(t,e)=>{if(!t)return"";if(t.startsWith("http")&&!t.startsWith("blob:"))return t;try{const o=await(await fetch(t)).blob(),s=qC(Xm,e);return await R6(s,o),await BC(s)}catch(n){return console.error("Failed to upload blob:",t,n),t}},D6=async(t,e,n,o,s,l)=>{if(!uu)throw new Error("Firebase not initialized");try{const u=`draft_${Date.now()}`,d="",g=await Promise.all(n.map(async v=>{let E=v.imageUrl,S=v.activeImageUrl;return v.imageUrl&&(E=await RE(v.imageUrl,`drafts/${u}/speakers/${v.id}_idle`)),v.activeImageUrl&&(S=await RE(v.activeImageUrl,`drafts/${u}/speakers/${v.id}_active`)),{...v,imageUrl:E,activeImageUrl:S}})),m={name:t||"Untitled Draft",createdAt:_t.now(),detectionMode:s,manualSpeakerCount:l,speakers:g,analysisResult:o?JSON.parse(JSON.stringify(o)):null,audioStoragePath:d,audioName:e.name,audioMimeType:e.type,speakerCount:n.length};return await yL(fC(Qm,"drafts"),m),!0}catch(u){throw console.error("Error saving to cloud:",u),u}},P6=async()=>{if(!uu)return[];const t=fC(Qm,"drafts"),e=cL(t,fL("createdAt","desc"));return(await gL(e)).docs.map(o=>({id:o.id,...o.data()}))},V6=async(t,e,n)=>{if(!uu)throw new Error("Firebase not initialized");if(!t)return null;try{const o=qC(Xm,t),s=await BC(o),u=await(await fetch(s)).blob();return new File([u],e,{type:n})}catch(o){return console.warn("Could not fetch remote audio, likely not uploaded.",o),null}},U6=({isOpen:t,onClose:e,onSelectDraft:n})=>{const[o,s]=Se.useState([]),[l,u]=Se.useState(!0);Se.useEffect(()=>{t&&d()},[t]);const d=async()=>{u(!0);try{const g=await P6();s(g)}catch(g){console.error("Failed to load drafts",g)}finally{u(!1)}};return t?b.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:b.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl max-h-[80vh] flex flex-col shadow-2xl animate-in fade-in zoom-in-95 duration-200",children:[b.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-950/50",children:[b.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-3",children:[b.jsx(ff,{className:"text-neon-blue"}),"Cloud Drafts"]}),b.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:b.jsx(IS,{size:24})})]}),b.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:l?b.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[b.jsx($l,{size:32,className:"animate-spin mb-3 text-primary-500"}),b.jsx("p",{children:"Loading your saved sessions..."})]}):o.length===0?b.jsx("div",{className:"text-center py-12 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:b.jsx("p",{children:"No drafts found in the cloud."})}):o.map(g=>b.jsxs("button",{onClick:()=>n(g),className:"w-full text-left bg-gray-800/50 hover:bg-gray-800 border border-gray-700 hover:border-primary-500/50 rounded-xl p-4 transition-all group flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h4",{className:"text-lg font-bold text-white group-hover:text-primary-400 mb-1",children:g.name}),b.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx(f2,{size:12}),new Date(g.createdAt.seconds*1e3).toLocaleDateString()]}),b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx(I2,{size:12}),g.audioName]}),b.jsx("span",{className:"uppercase border border-gray-700 px-1.5 rounded bg-black/20",children:g.detectionMode})]})]}),b.jsxs("div",{className:"flex flex-col items-end gap-2",children:[b.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-gray-300 bg-black/30 px-3 py-1 rounded-full",children:[b.jsx(Ip,{size:14,className:"text-neon-green"}),b.jsxs("span",{children:[g.speakerCount," Speakers"]})]}),b.jsx("span",{className:"text-xs text-primary-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to Load"})]})]},g.id))})]})}):null},k6=({toast:t,onClose:e})=>(Se.useEffect(()=>{const n=setTimeout(e,4e3);return()=>clearTimeout(n)},[e]),b.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 rounded-xl shadow-2xl border backdrop-blur-md animate-in slide-in-from-top-2 fade-in duration-300 pointer-events-auto ${t.type==="success"?"bg-green-900/90 border-green-500/50 text-green-100":t.type==="error"?"bg-red-900/90 border-red-500/50 text-red-100":"bg-gray-800/90 border-gray-600 text-gray-100"}`,children:[t.type==="success"&&b.jsx(m2,{size:18,className:"text-green-400"}),t.type==="error"&&b.jsx(y2,{size:18,className:"text-red-400"}),t.type==="info"&&b.jsx(ff,{size:18,className:"text-blue-400"}),b.jsx("span",{className:"text-sm font-medium",children:t.message})]})),wE=t=>{const e=t*137.508%360,n=75,o=50,s=e,l=n/100,u=o/100,d=l*Math.min(u,1-u),g=m=>{const v=(m+s/30)%12,E=u-d*Math.max(Math.min(v-3,9-v,1),-1);return Math.round(255*E).toString(16).padStart(2,"0")};return`#${g(0)}${g(8)}${g(4)}`},L6=()=>{const[t,e]=Se.useState("upload"),[n,o]=Se.useState("auto"),[s,l]=Se.useState(null),[u,d]=Se.useState(null),[g,m]=Se.useState([]),[v,E]=Se.useState(2),[S,I]=Se.useState(""),[M,L]=Se.useState(new Set),[V,$]=Se.useState([]),[X,J]=Se.useState(null),[ne,he]=Se.useState(!1),[W,D]=Se.useState(!1),[N,x]=Se.useState(null),[U,O]=Se.useState("idle"),[q,P]=Se.useState(null),[Ce,$e]=Se.useState(!1),[ee,de]=Se.useState(!1),[ye,Oe]=Se.useState(!1),[Be,F]=Se.useState(null),[te,se]=Se.useState([]),fe=(K,le="info")=>{const ce=Date.now();se(me=>[...me,{id:ce,message:K,type:le}])},we=K=>{se(le=>le.filter(ce=>ce.id!==K))};Se.useEffect(()=>{setTimeout(()=>{up()||fe("Firebase not connected. Save to Cloud unavailable.","error")},1e3)},[]);const Me=K=>{if(K.target.files&&K.target.files[0]){const le=K.target.files[0];if(!le.type.startsWith("audio/")){J("Please upload a valid audio file.");return}l(le),J(null),g.length>0&&u?(e("visualizer"),F(null),fe("Session restored successfully!","success")):e("setup")}},De=async()=>{if(s)if(n==="manual"){const K=Array.from({length:v}).map((le,ce)=>{const Te=["1","2","3","4","5","6","7","8","9"][ce]||"?";return{id:`manual_${ce}`,name:`Speaker ${ce+1}`,imageUrl:null,activeImageUrl:null,color:wE(ce),triggerKey:Te,rotation:0}});m(K),e("visualizer")}else{e("analyzing");try{const K=S===""?void 0:Number(S),le=await jD(s,K);d(le);const ce=le.uniqueSpeakers.map((me,Te)=>({id:me,name:me,imageUrl:null,activeImageUrl:null,color:wE(Te),rotation:0}));m(ce),e("visualizer")}catch(K){console.error(K),J("AI Analysis failed. Try Manual Mode or a shorter file."),e("setup")}}};Se.useEffect(()=>{if(t!=="visualizer"||n!=="manual")return;const K=ce=>{const me=ce.key.toLowerCase();L(Te=>{const be=new Set(Te);return be.add(me),be})},le=ce=>{const me=ce.key.toLowerCase();L(Te=>{const be=new Set(Te);return be.delete(me),be})};return window.addEventListener("keydown",K),window.addEventListener("keyup",le),()=>{window.removeEventListener("keydown",K),window.removeEventListener("keyup",le)}},[t,n]),Se.useEffect(()=>{if(n==="manual"){const K=g.filter(le=>le.triggerKey&&M.has(le.triggerKey.toLowerCase())).map(le=>le.id);$(K)}},[M,g,n]);const gt=(K,le,ce)=>{x(K),O(ce),P(le)},dt=(K,le)=>{const ce=g.find(me=>me.id===K);if(ce){const me=le==="active"?ce.activeImageUrl:ce.imageUrl;me&&(x(K),O(le),P(me))}},xn=K=>{setTimeout(()=>{window.confirm("Delete both idle and active images for this speaker?")&&(m(le=>le.map(ce=>ce.id===K?{...ce,imageUrl:null,activeImageUrl:null}:ce)),fe("Images deleted.","info"))},50)},Fn=K=>{m(le=>le.map(ce=>{if(ce.id===K){const Te=((ce.rotation||0)+90)%360;return{...ce,rotation:Te}}return ce}))},Bn=async()=>{if(!s)return;if(!up()){fe("Firebase not initialized. Check internet or API keys.","error");return}const K=prompt("Enter a name for this cloud draft:");if(K){de(!0),fe("Saving session metadata...","info");try{await D6(K,s,g,u,n,v),fe("Successfully saved to Cloud!","success")}catch(le){console.error(le);const ce=(le==null?void 0:le.message)||"Unknown error";fe(`Save failed: ${ce}`,"error")}finally{de(!1)}}},_i=async K=>{$e(!1),Oe(!0),J(null),fe("Downloading draft...","info");try{const le=await V6(K.audioStoragePath,K.audioName,K.audioMimeType);le&&l(le),m(K.speakers),d(K.analysisResult),o(K.detectionMode),E(K.manualSpeakerCount),le?(e("visualizer"),fe("Draft loaded successfully!","success")):(e("upload"),F(K.audioName),fe("Draft loaded. Please select your audio file to continue.","info"))}catch(le){console.error("Failed to load draft",le),J("Failed to download draft data."),fe("Failed to load draft.","error"),e("upload")}finally{Oe(!1)}},fn=K=>{if(N){const le=URL.createObjectURL(K);m(ce=>ce.map(me=>me.id===N?U==="active"?{...me,activeImageUrl:le}:{...me,imageUrl:le}:me)),fe("Image saved!","success")}x(null),P(null)},ti=async(K,le)=>await e2(K,le),ni=async K=>await t2(K),Po=(K,le)=>{m(ce=>ce.map(me=>me.id===K?{...me,name:le}:me))},Vo=(K,le)=>{m(ce=>ce.map(me=>me.id===K?{...me,color:le}:me))},Di=()=>{const K={metadata:{exportedAt:new Date().toISOString(),version:"1.0",mode:n},speakers:g.map(Te=>({id:Te.id,name:Te.name,color:Te.color,triggerKey:Te.triggerKey,rotation:Te.rotation})),segments:(u==null?void 0:u.segments)||[]},le=new Blob([JSON.stringify(K,null,2)],{type:"application/json"}),ce=URL.createObjectURL(le),me=document.createElement("a");me.href=ce,me.download=`fajmuls-voice-${n}-${new Date().getTime()}.json`,document.body.appendChild(me),me.click(),document.body.removeChild(me),URL.revokeObjectURL(ce),fe("Exported JSON.","success")},vi=K=>{if(n==="manual"||!u)return;const le=u.segments.filter(me=>K>=me.start&&K<=me.end),ce=Array.from(new Set(le.map(me=>me.speaker)));$(me=>{if(me.length!==ce.length)return ce;const Te=[...me].sort(),be=[...ce].sort();return Te.every((Xe,Mt)=>Xe===be[Mt])?me:ce})},vn=()=>{l(null),d(null),m([]),$([]),L(new Set),e("upload"),I(""),J(null),he(!1),D(!1),F(null)};return b.jsxs("div",{className:"h-screen bg-[#0b0f19] flex flex-col overflow-hidden relative",children:[b.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-[200] flex flex-col gap-2 pointer-events-none",children:te.map(K=>b.jsx(k6,{toast:K,onClose:()=>we(K.id)},K.id))}),t==="upload"&&b.jsxs("div",{className:"min-h-screen bg-[#0b0f19] flex items-center justify-center p-4",children:[b.jsxs("div",{className:"max-w-xl w-full text-center space-y-8",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("h1",{className:"text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary-400 to-neon-purple animate-pulse",children:"Fajmuls Voice"}),b.jsx("p",{className:"text-gray-400",children:"Deep AI Audio Diarization & Visualization"})]}),ye?b.jsxs("div",{className:"py-20 flex flex-col items-center",children:[b.jsx($l,{size:48,className:"text-neon-blue animate-spin mb-4"}),b.jsx("p",{className:"text-white",children:"Downloading metadata from Cloud..."})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"relative group cursor-pointer",children:[b.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary-600 to-neon-blue rounded-2xl blur opacity-25 group-hover:opacity-75 transition duration-1000 group-hover:duration-200"}),b.jsxs("div",{className:`relative p-10 bg-gray-900 ring-1 ring-gray-800 rounded-2xl leading-none flex flex-col items-center justify-center space-y-6 ${Be?"ring-neon-blue ring-2":""}`,children:[b.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-800 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:b.jsx(v2,{size:40,className:Be?"text-neon-blue animate-bounce":"text-primary-400"})}),b.jsxs("div",{className:"space-y-1",children:[b.jsx("p",{className:"text-xl font-medium text-gray-200",children:Be?"Select Local Audio File":"Select Audio File"}),b.jsx("p",{className:"text-sm text-gray-500",children:Be?`Please select "${Be}" to restore your session`:"MP3, WAV, OGG supported"})]}),b.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"audio/*",onChange:Me})]})]}),!Be&&b.jsx("div",{className:"flex justify-center gap-4",children:b.jsxs("button",{onClick:()=>{if(!up()){fe("Firebase not connected.","error");return}$e(!0)},className:"flex items-center gap-2 px-6 py-3 rounded-full border border-gray-700 hover:border-neon-blue bg-gray-900 hover:bg-gray-800 text-gray-400 hover:text-white transition-all text-sm font-medium",children:[b.jsx(ff,{size:16}),"Load Cloud Draft"]})})]}),X&&b.jsx("div",{className:"text-red-400 text-sm mt-4",children:X})]}),b.jsx(U6,{isOpen:Ce,onClose:()=>$e(!1),onSelectDraft:_i})]}),t==="setup"&&b.jsx("div",{className:"min-h-screen bg-[#0b0f19] flex items-center justify-center p-4",children:b.jsxs("div",{className:"max-w-2xl w-full space-y-8 bg-gray-900/50 p-8 rounded-2xl border border-gray-800 backdrop-blur-xl",children:[b.jsxs("div",{className:"text-center space-y-2",children:[b.jsx("h2",{className:"text-3xl font-bold text-white",children:"Analysis Configuration"}),b.jsxs("p",{className:"text-gray-400",children:['How would you like to process "',s==null?void 0:s.name,'"?']})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[b.jsxs("div",{onClick:()=>o("auto"),className:`p-6 rounded-xl border-2 cursor-pointer transition-all relative overflow-hidden ${n==="auto"?"border-primary-500 bg-primary-500/10":"border-gray-700 hover:border-gray-600"}`,children:[b.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[b.jsx(lm,{className:"text-neon-blue",size:24}),b.jsx("h3",{className:"text-xl font-bold text-white",children:"AI Deep Detect"})]}),b.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Uses Gemini 2.0 Thinking model to deeply analyze simultaneous speech. Best for precision."}),n==="auto"&&b.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/50 animate-in fade-in slide-in-from-top-2",children:[b.jsxs("label",{className:"text-sm text-gray-300 block mb-2 flex items-center gap-2",children:[b.jsx(Ip,{size:14}),"How many speakers? ",b.jsx("span",{className:"text-gray-500 text-xs",children:"(Optional)"})]}),b.jsx("input",{type:"number",min:"1",max:"20",placeholder:"Auto-detect if empty",value:S,onChange:K=>I(K.target.value===""?"":parseInt(K.target.value)),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-primary-500",onClick:K=>K.stopPropagation()}),b.jsx("p",{className:"text-xs text-primary-400/80 mt-1",children:"*Specifying exact count greatly improves AI accuracy."})]})]}),b.jsxs("div",{onClick:()=>o("manual"),className:`p-6 rounded-xl border-2 cursor-pointer transition-all relative overflow-hidden ${n==="manual"?"border-neon-purple bg-neon-purple/10":"border-gray-700 hover:border-gray-600"}`,children:[b.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[b.jsx(AS,{className:"text-neon-purple",size:24}),b.jsx("h3",{className:"text-xl font-bold text-white",children:"Manual Control"})]}),b.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Manually control speaker lights using keyboard keys (1, 2, 3...) while listening. Best for live control."}),n==="manual"&&b.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/50 animate-in fade-in slide-in-from-top-2",children:[b.jsxs("label",{className:"text-sm text-gray-300 block mb-2 flex items-center gap-2",children:[b.jsx(Ip,{size:14}),"Number of Speakers:"]}),b.jsx("input",{type:"number",min:"1",max:"9",value:v,onChange:K=>E(parseInt(K.target.value)),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-neon-purple",onClick:K=>K.stopPropagation()})]})]})]}),b.jsxs("div",{className:"flex justify-between pt-4",children:[b.jsx("button",{onClick:vn,className:"text-gray-500 hover:text-white transition-colors",children:"Cancel"}),b.jsx("button",{onClick:De,className:"bg-white text-black px-8 py-3 rounded-full font-bold hover:bg-gray-200 transition-colors flex items-center gap-2",children:n==="auto"?"Start AI Analysis":"Start Manual Session"})]}),X&&b.jsx("div",{className:"text-red-400 text-center text-sm",children:X})]})}),t==="analyzing"&&b.jsxs("div",{className:"min-h-screen bg-[#0b0f19] flex flex-col items-center justify-center p-8 space-y-8",children:[b.jsxs("div",{className:"relative w-32 h-32",children:[b.jsx("div",{className:"absolute inset-0 border-4 border-primary-500/30 rounded-full animate-ping"}),b.jsx("div",{className:"absolute inset-0 border-4 border-t-neon-blue border-r-neon-purple border-b-primary-500 border-l-transparent rounded-full animate-spin"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:b.jsx(l2,{size:48,className:"text-white animate-pulse"})})]}),b.jsxs("div",{className:"text-center space-y-4 max-w-lg",children:[b.jsx("h2",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-neon-blue to-neon-purple",children:"Deep AI Researching..."}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("div",{className:"h-1 w-full bg-gray-800 rounded-full overflow-hidden",children:b.jsx("div",{className:"h-full bg-primary-500 w-1/2 animate-[pulse_1s_ease-in-out_infinite]"})}),b.jsx("p",{className:"text-gray-400 text-sm",children:"Analyzing acoustic patterns, separating overlapping voices, and verifying speaker identities."})]})]})]}),t==="visualizer"&&b.jsxs(b.Fragment,{children:[!ne&&b.jsxs("header",{className:"px-6 py-4 flex items-center justify-between bg-gray-900/50 backdrop-blur border-b border-gray-800 z-50",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"w-2 h-8 bg-primary-500 rounded-full"}),b.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white",children:["Fajmuls Voice ",b.jsxs("span",{className:"text-xs text-gray-500 font-normal ml-2 border border-gray-800 px-2 py-0.5 rounded uppercase",children:[n," MODE"]})]})]}),b.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[b.jsxs("button",{onClick:Bn,disabled:ee,className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-gray-800 transition-colors text-xs font-medium border border-gray-800 text-neon-green border-neon-green/20 hover:bg-neon-green/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[ee?b.jsx($l,{size:14,className:"animate-spin"}):b.jsx(ff,{size:14}),ee?"Saving...":"Save to Cloud"]}),b.jsxs("button",{onClick:()=>he(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-gray-800 transition-colors text-xs font-medium border border-gray-800 text-neon-blue border-neon-blue/20 hover:bg-neon-blue/10",children:[b.jsx(CS,{size:14}),"Play Mode"]}),b.jsxs("button",{onClick:Di,className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-gray-800 transition-colors text-xs font-medium border border-gray-800",children:[b.jsx(S2,{size:14}),"Export Data"]}),b.jsx("span",{className:"w-px h-4 bg-gray-700"}),b.jsxs("span",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),g.length," Speakers"]})]})]}),b.jsx("main",{className:`flex-1 relative overflow-hidden transition-all duration-500 ${W?"bg-black":""}`,children:b.jsx(vP,{speakers:g,activeSpeakerIds:V,onUpdateImage:gt,onDeleteImages:xn,onEditExistingImage:dt,onUpdateName:Po,onUpdateColor:Vo,onRotateSpeaker:Fn,isManualMode:n==="manual",isPlayMode:ne,isCinemaMode:W})}),s&&b.jsx(TP,{file:s,onTimeUpdate:vi,onReset:vn,isPlayMode:ne,onTogglePlayMode:()=>{he(!ne),ne&&D(!1)},isCinemaMode:W,onToggleCinemaMode:()=>D(!W)})]}),N&&q&&b.jsx(EP,{isOpen:!0,imageSource:q,onClose:()=>{x(null),P(null)},onSave:fn,onAiEdit:ti,onDetectFaces:ni})]})},zC=document.getElementById("root");if(!zC)throw new Error("Could not find root element to mount to");const O6=wR.createRoot(zC);O6.render(b.jsx(vR.StrictMode,{children:b.jsx(L6,{})}));
