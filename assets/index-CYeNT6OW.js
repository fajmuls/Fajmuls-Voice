(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function PE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hh={exports:{}},Nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function Sw(){if(vv)return Nl;vv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(o,s,l){var u=null;if(l!==void 0&&(u=""+l),s.key!==void 0&&(u=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:o,key:u,ref:s!==void 0?s:null,props:l}}return Nl.Fragment=e,Nl.jsx=t,Nl.jsxs=t,Nl}var _v;function Aw(){return _v||(_v=1,Hh.exports=Sw()),Hh.exports}var R=Aw(),$h={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function Cw(){if(Tv)return Le;Tv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=S&&F[S]||F["@@iterator"],typeof F=="function"?F:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,V={};function Y(F,X,le){this.props=F,this.context=X,this.refs=V,this.updater=le||M}Y.prototype.isReactComponent={},Y.prototype.setState=function(F,X){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,X,"setState")},Y.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Q(){}Q.prototype=Y.prototype;function J(F,X,le){this.props=F,this.context=X,this.refs=V,this.updater=le||M}var te=J.prototype=new Q;te.constructor=J,L(te,Y.prototype),te.isPureReactComponent=!0;var me=Array.isArray;function W(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function x(F,X,le){var de=le.ref;return{$$typeof:n,type:F,key:X,ref:de!==void 0?de:null,props:le}}function U(F,X){return x(F.type,X,F.props)}function O(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function q(F){var X={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(le){return X[le]})}var P=/\/+/g;function Ie(F,X){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):X.toString(36)}function Qe(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(W,W):(F.status="pending",F.then(function(X){F.status==="pending"&&(F.status="fulfilled",F.value=X)},function(X){F.status==="pending"&&(F.status="rejected",F.reason=X)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function ee(F,X,le,de,xe){var Pe=typeof F;(Pe==="undefined"||Pe==="boolean")&&(F=null);var Ve=!1;if(F===null)Ve=!0;else switch(Pe){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(F.$$typeof){case n:case e:Ve=!0;break;case _:return Ve=F._init,ee(Ve(F._payload),X,le,de,xe)}}if(Ve)return xe=xe(F),Ve=de===""?"."+Ie(F,0):de,me(xe)?(le="",Ve!=null&&(le=Ve.replace(P,"$&/")+"/"),ee(xe,X,le,"",function(Dn){return Dn})):xe!=null&&(O(xe)&&(xe=U(xe,le+(xe.key==null||F&&F.key===xe.key?"":(""+xe.key).replace(P,"$&/")+"/")+Ve)),X.push(xe)),1;Ve=0;var He=de===""?".":de+":";if(me(F))for(var gt=0;gt<F.length;gt++)de=F[gt],Pe=He+Ie(de,gt),Ve+=ee(de,X,le,Pe,xe);else if(gt=w(F),typeof gt=="function")for(F=gt.call(F),gt=0;!(de=F.next()).done;)de=de.value,Pe=He+Ie(de,gt++),Ve+=ee(de,X,le,Pe,xe);else if(Pe==="object"){if(typeof F.then=="function")return ee(Qe(F),X,le,de,xe);throw X=String(F),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function he(F,X,le){if(F==null)return F;var de=[],xe=0;return ee(F,de,"","",function(Pe){return X.call(le,Pe,xe++)}),de}function ve(F){if(F._status===-1){var X=F._result;X=X(),X.then(function(le){(F._status===0||F._status===-1)&&(F._status=1,F._result=le)},function(le){(F._status===0||F._status===-1)&&(F._status=2,F._result=le)}),F._status===-1&&(F._status=0,F._result=X)}if(F._status===1)return F._result.default;throw F._result}var qe=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},je={map:he,forEach:function(F,X,le){he(F,function(){X.apply(this,arguments)},le)},count:function(F){var X=0;return he(F,function(){X++}),X},toArray:function(F){return he(F,function(X){return X})||[]},only:function(F){if(!O(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Le.Activity=E,Le.Children=je,Le.Component=Y,Le.Fragment=t,Le.Profiler=s,Le.PureComponent=J,Le.StrictMode=o,Le.Suspense=h,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Le.__COMPILER_RUNTIME={__proto__:null,c:function(F){return D.H.useMemoCache(F)}},Le.cache=function(F){return function(){return F.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(F,X,le){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var de=L({},F.props),xe=F.key;if(X!=null)for(Pe in X.key!==void 0&&(xe=""+X.key),X)!N.call(X,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&X.ref===void 0||(de[Pe]=X[Pe]);var Pe=arguments.length-2;if(Pe===1)de.children=le;else if(1<Pe){for(var Ve=Array(Pe),He=0;He<Pe;He++)Ve[He]=arguments[He+2];de.children=Ve}return x(F.type,xe,de)},Le.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},Le.createElement=function(F,X,le){var de,xe={},Pe=null;if(X!=null)for(de in X.key!==void 0&&(Pe=""+X.key),X)N.call(X,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(xe[de]=X[de]);var Ve=arguments.length-2;if(Ve===1)xe.children=le;else if(1<Ve){for(var He=Array(Ve),gt=0;gt<Ve;gt++)He[gt]=arguments[gt+2];xe.children=He}if(F&&F.defaultProps)for(de in Ve=F.defaultProps,Ve)xe[de]===void 0&&(xe[de]=Ve[de]);return x(F,Pe,xe)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(F){return{$$typeof:d,render:F}},Le.isValidElement=O,Le.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:ve}},Le.memo=function(F,X){return{$$typeof:g,type:F,compare:X===void 0?null:X}},Le.startTransition=function(F){var X=D.T,le={};D.T=le;try{var de=F(),xe=D.S;xe!==null&&xe(le,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(W,qe)}catch(Pe){qe(Pe)}finally{X!==null&&le.types!==null&&(X.types=le.types),D.T=X}},Le.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Le.use=function(F){return D.H.use(F)},Le.useActionState=function(F,X,le){return D.H.useActionState(F,X,le)},Le.useCallback=function(F,X){return D.H.useCallback(F,X)},Le.useContext=function(F){return D.H.useContext(F)},Le.useDebugValue=function(){},Le.useDeferredValue=function(F,X){return D.H.useDeferredValue(F,X)},Le.useEffect=function(F,X){return D.H.useEffect(F,X)},Le.useEffectEvent=function(F){return D.H.useEffectEvent(F)},Le.useId=function(){return D.H.useId()},Le.useImperativeHandle=function(F,X,le){return D.H.useImperativeHandle(F,X,le)},Le.useInsertionEffect=function(F,X){return D.H.useInsertionEffect(F,X)},Le.useLayoutEffect=function(F,X){return D.H.useLayoutEffect(F,X)},Le.useMemo=function(F,X){return D.H.useMemo(F,X)},Le.useOptimistic=function(F,X){return D.H.useOptimistic(F,X)},Le.useReducer=function(F,X,le){return D.H.useReducer(F,X,le)},Le.useRef=function(F){return D.H.useRef(F)},Le.useState=function(F){return D.H.useState(F)},Le.useSyncExternalStore=function(F,X,le){return D.H.useSyncExternalStore(F,X,le)},Le.useTransition=function(){return D.H.useTransition()},Le.version="19.2.4",Le}var Ev;function Wp(){return Ev||(Ev=1,$h.exports=Cw()),$h.exports}var Ee=Wp();const ww=PE(Ee);var Yh={exports:{}},Ml={},Jh={exports:{}},Kh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function Iw(){return Sv||(Sv=1,(function(n){function e(ee,he){var ve=ee.length;ee.push(he);e:for(;0<ve;){var qe=ve-1>>>1,je=ee[qe];if(0<s(je,he))ee[qe]=he,ee[ve]=je,ve=qe;else break e}}function t(ee){return ee.length===0?null:ee[0]}function o(ee){if(ee.length===0)return null;var he=ee[0],ve=ee.pop();if(ve!==he){ee[0]=ve;e:for(var qe=0,je=ee.length,F=je>>>1;qe<F;){var X=2*(qe+1)-1,le=ee[X],de=X+1,xe=ee[de];if(0>s(le,ve))de<je&&0>s(xe,le)?(ee[qe]=xe,ee[de]=ve,qe=de):(ee[qe]=le,ee[X]=ve,qe=X);else if(de<je&&0>s(xe,ve))ee[qe]=xe,ee[de]=ve,qe=de;else break e}}return he}function s(ee,he){var ve=ee.sortIndex-he.sortIndex;return ve!==0?ve:ee.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var h=[],g=[],_=1,E=null,S=3,w=!1,M=!1,L=!1,V=!1,Y=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function te(ee){for(var he=t(g);he!==null;){if(he.callback===null)o(g);else if(he.startTime<=ee)o(g),he.sortIndex=he.expirationTime,e(h,he);else break;he=t(g)}}function me(ee){if(L=!1,te(ee),!M)if(t(h)!==null)M=!0,W||(W=!0,q());else{var he=t(g);he!==null&&Qe(me,he.startTime-ee)}}var W=!1,D=-1,N=5,x=-1;function U(){return V?!0:!(n.unstable_now()-x<N)}function O(){if(V=!1,W){var ee=n.unstable_now();x=ee;var he=!0;try{e:{M=!1,L&&(L=!1,Q(D),D=-1),w=!0;var ve=S;try{t:{for(te(ee),E=t(h);E!==null&&!(E.expirationTime>ee&&U());){var qe=E.callback;if(typeof qe=="function"){E.callback=null,S=E.priorityLevel;var je=qe(E.expirationTime<=ee);if(ee=n.unstable_now(),typeof je=="function"){E.callback=je,te(ee),he=!0;break t}E===t(h)&&o(h),te(ee)}else o(h);E=t(h)}if(E!==null)he=!0;else{var F=t(g);F!==null&&Qe(me,F.startTime-ee),he=!1}}break e}finally{E=null,S=ve,w=!1}he=void 0}}finally{he?q():W=!1}}}var q;if(typeof J=="function")q=function(){J(O)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ie=P.port2;P.port1.onmessage=O,q=function(){Ie.postMessage(null)}}else q=function(){Y(O,0)};function Qe(ee,he){D=Y(function(){ee(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(ee){switch(S){case 1:case 2:case 3:var he=3;break;default:he=S}var ve=S;S=he;try{return ee()}finally{S=ve}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(ee,he){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ve=S;S=ee;try{return he()}finally{S=ve}},n.unstable_scheduleCallback=function(ee,he,ve){var qe=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?qe+ve:qe):ve=qe,ee){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=ve+je,ee={id:_++,callback:he,priorityLevel:ee,startTime:ve,expirationTime:je,sortIndex:-1},ve>qe?(ee.sortIndex=ve,e(g,ee),t(h)===null&&ee===t(g)&&(L?(Q(D),D=-1):L=!0,Qe(me,ve-qe))):(ee.sortIndex=je,e(h,ee),M||w||(M=!0,W||(W=!0,q()))),ee},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(ee){var he=S;return function(){var ve=S;S=he;try{return ee.apply(this,arguments)}finally{S=ve}}}})(Kh)),Kh}var Av;function Rw(){return Av||(Av=1,Jh.exports=Iw()),Jh.exports}var Qh={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function bw(){if(Cv)return vn;Cv=1;var n=Wp();function e(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var o={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(h,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:h,containerInfo:g,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,vn.createPortal=function(h,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(h,g,null,_)},vn.flushSync=function(h){var g=u.T,_=o.p;try{if(u.T=null,o.p=2,h)return h()}finally{u.T=g,o.p=_,o.d.f()}},vn.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(h,g))},vn.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},vn.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?o.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:w}):_==="script"&&o.d.X(h,{crossOrigin:E,integrity:S,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},vn.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);o.d.M(h,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(h)},vn.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin);o.d.L(h,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},vn.preloadModule=function(h,g){if(typeof h=="string")if(g){var _=d(g.as,g.crossOrigin);o.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(h)},vn.requestFormReset=function(h){o.d.r(h)},vn.unstable_batchedUpdates=function(h,g){return h(g)},vn.useFormState=function(h,g,_){return u.H.useFormState(h,g,_)},vn.useFormStatus=function(){return u.H.useHostTransitionStatus()},vn.version="19.2.4",vn}var wv;function xw(){if(wv)return Qh.exports;wv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qh.exports=bw(),Qh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function Nw(){if(Iv)return Ml;Iv=1;var n=Rw(),e=Wp(),t=xw();function o(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(l(i)!==i)throw Error(o(188))}function g(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(o(188));return r!==i?null:i}for(var a=i,c=r;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return h(y),i;if(v===c)return h(y),r;v=v.sibling}throw Error(o(188))}if(a.return!==c.return)a=y,c=v;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,c=v;break}if(I===c){A=!0,c=y,a=v;break}I=I.sibling}if(!A){for(I=v.child;I;){if(I===a){A=!0,a=v,c=y;break}if(I===c){A=!0,c=v,a=y;break}I=I.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:r}function _(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=_(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),J=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var P=Symbol.for("react.client.reference");function Ie(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===P?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case L:return"Fragment";case Y:return"Profiler";case V:return"StrictMode";case me:return"Suspense";case W:return"SuspenseList";case x:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case M:return"Portal";case J:return i.displayName||"Context";case Q:return(i._context.displayName||"Context")+".Consumer";case te:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return r=i.displayName||null,r!==null?r:Ie(i.type)||"Memo";case N:r=i._payload,i=i._init;try{return Ie(i(r))}catch{}}return null}var Qe=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},qe=[],je=-1;function F(i){return{current:i}}function X(i){0>je||(i.current=qe[je],qe[je]=null,je--)}function le(i,r){je++,qe[je]=i.current,i.current=r}var de=F(null),xe=F(null),Pe=F(null),Ve=F(null);function He(i,r){switch(le(Pe,r),le(xe,i),le(de,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?q0(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=q0(r),i=z0(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}X(de),le(de,i)}function gt(){X(de),X(xe),X(Pe)}function Dn(i){i.memoizedState!==null&&le(Ve,i);var r=de.current,a=z0(r,i.type);r!==a&&(le(xe,i),le(de,a))}function Gn(i){xe.current===i&&(X(de),X(xe)),Ve.current===i&&(X(Ve),Il._currentValue=ve)}var Hn,Ti;function mn(i){if(Hn===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Hn=r&&r[1]||"",Ti=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hn+i+Ti}var ii=!1;function oi(i,r){if(!i||ii)return"";ii=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Z){var K=Z}Reflect.construct(i,[],se)}else{try{se.call()}catch(Z){K=Z}i.call(se.prototype)}}else{try{throw Error()}catch(Z){K=Z}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],I=v[1];if(A&&I){var k=A.split(`
`),$=I.split(`
`);for(y=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;if(c===k.length||y===$.length)for(c=k.length-1,y=$.length-1;1<=c&&0<=y&&k[c]!==$[y];)y--;for(;1<=c&&0<=y;c--,y--)if(k[c]!==$[y]){if(c!==1||y!==1)do if(c--,y--,0>y||k[c]!==$[y]){var ie=`
`+k[c].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=c&&0<=y);break}}}finally{ii=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?mn(a):""}function Po(i,r){switch(i.tag){case 26:case 27:case 5:return mn(i.type);case 16:return mn("Lazy");case 13:return i.child!==r&&r!==null?mn("Suspense Fallback"):mn("Suspense");case 19:return mn("SuspenseList");case 0:case 15:return oi(i.type,!1);case 11:return oi(i.type.render,!1);case 1:return oi(i.type,!0);case 31:return mn("Activity");default:return""}}function Vo(i){try{var r="",a=null;do r+=Po(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Pi=Object.prototype.hasOwnProperty,Ei=n.unstable_scheduleCallback,Pn=n.unstable_cancelCallback,pe=n.unstable_shouldYield,Ae=n.unstable_requestPaint,we=n.unstable_now,Ge=n.unstable_getCurrentPriorityLevel,ne=n.unstable_ImmediatePriority,ce=n.unstable_UserBlockingPriority,fe=n.unstable_NormalPriority,oe=n.unstable_LowPriority,Ne=n.unstable_IdlePriority,It=n.log,Ft=n.unstable_setDisableYieldValue,on=null,Rt=null;function ct(i){if(typeof It=="function"&&Ft(i),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(on,i)}catch{}}var rn=Math.clz32?Math.clz32:Lr,kr=Math.log,Uo=Math.LN2;function Lr(i){return i>>>=0,i===0?32:31-(kr(i)/Uo|0)|0}var Vi=256,$n=262144,Yn=4194304;function Vn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function An(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,v=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=c&134217727;return I!==0?(c=I&~v,c!==0?y=Vn(c):(A&=I,A!==0?y=Vn(A):a||(a=I&~i,a!==0&&(y=Vn(a))))):(I=c&~v,I!==0?y=Vn(I):A!==0?y=Vn(A):a||(a=c&~i,a!==0&&(y=Vn(a)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,a=r&-r,v>=a||v===32&&(a&4194048)!==0)?r:y}function Si(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function eo(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(){var i=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),i}function sn(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function gn(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function yt(i,r,a,c,y,v){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,k=i.expirationTimes,$=i.hiddenUpdates;for(a=A&~a;0<a;){var ie=31-rn(a),se=1<<ie;I[ie]=0,k[ie]=-1;var K=$[ie];if(K!==null)for($[ie]=null,ie=0;ie<K.length;ie++){var Z=K[ie];Z!==null&&(Z.lane&=-536870913)}a&=~se}c!==0&&Pa(i,c,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(A&~r))}function Pa(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-rn(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function ko(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-rn(a),y=1<<c;y&r|i[c]&r&&(i[c]|=r),a&=~y}}function Lo(i,r){var a=r&-r;return a=(a&42)!==0?1:Va(a),(a&(i.suspendedLanes|r))!==0?0:a}function Va(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ua(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function to(){var i=he.p;return i!==0?i:(i=window.event,i===void 0?32:fv(i.type))}function cu(i,r){var a=he.p;try{return he.p=i,r()}finally{he.p=a}}var Ui=Math.random().toString(36).slice(2),bt="__reactFiber$"+Ui,an="__reactProps$"+Ui,ki="__reactContainer$"+Ui,Oo="__reactEvents$"+Ui,Li="__reactListeners$"+Ui,fu="__reactHandles$"+Ui,ka="__reactResources$"+Ui,no="__reactMarker$"+Ui;function Or(i){delete i[bt],delete i[an],delete i[Oo],delete i[Li],delete i[fu]}function io(i){var r=i[bt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[ki]||a[bt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=Q0(i);i!==null;){if(a=i[bt])return a;i=Q0(i)}return r}i=a,a=i.parentNode}return null}function oo(i){if(i=i[bt]||i[ki]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Fr(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(o(33))}function Ai(i){var r=i[ka];return r||(r=i[ka]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ut(i){i[no]=!0}var As=new Set,Fo={};function Cn(i,r){Oi(i,r),Oi(i+"Capture",r)}function Oi(i,r){for(Fo[i]=r,i=0;i<r.length;i++)As.add(r[i])}var $f=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),La={},Oa={};function du(i){return Pi.call(Oa,i)?!0:Pi.call(La,i)?!1:$f.test(i)?Oa[i]=!0:(La[i]=!0,!1)}function Bo(i,r,a){if(du(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function qo(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function si(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function wn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function hu(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Yf(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Cs(i){if(!i._valueTracker){var r=hu(i)?"checked":"value";i._valueTracker=Yf(i,r,""+i[r])}}function Fa(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=hu(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function ws(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ro=/[\n"\\]/g;function xt(i){return i.replace(ro,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function zo(i,r,a,c,y,v,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),r!=null?A==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+wn(r)):i.value!==""+wn(r)&&(i.value=""+wn(r)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),r!=null?Is(i,A,wn(r)):a!=null?Is(i,A,wn(a)):c!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+wn(I):i.removeAttribute("name")}function Br(i,r,a,c,y,v,A,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){Cs(i);return}a=a!=null?""+wn(a):"",r=r!=null?""+wn(r):a,I||r===i.value||(i.value=r),i.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=I?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Cs(i)}function Is(i,r,a){r==="number"&&ws(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function it(i,r,a,c){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+wn(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function qr(i,r,a){if(r!=null&&(r=""+wn(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+wn(a):""}function Go(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(o(92));if(Qe(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=wn(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),Cs(i)}function ai(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ba(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||Jf.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function pu(i,r,a){if(r!=null&&typeof r!="object")throw Error(o(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&Ba(i,y,c)}else for(var v in r)r.hasOwnProperty(v)&&Ba(i,v,r[v])}function qa(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fi(i){return Qf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Xt(){}var Rs=null;function bs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var so=null,Jn=null;function mu(i){var r=oo(i);if(r&&(i=r.stateNode)){var a=i[an]||null;e:switch(i=r.stateNode,r.type){case"input":if(zo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+xt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var y=c[an]||null;if(!y)throw Error(o(90));zo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&Fa(c)}break e;case"textarea":qr(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&it(i,!!a.multiple,r,!1)}}}var za=!1;function gu(i,r,a){if(za)return i(r,a);za=!0;try{var c=i(r);return c}finally{if(za=!1,(so!==null||Jn!==null)&&(dc(),so&&(r=so,i=Jn,Jn=so=null,mu(r),i)))for(r=0;r<i.length;r++)mu(i[r])}}function Un(i,r){var a=i.stateNode;if(a===null)return null;var c=a[an]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,r,typeof a));return a}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(Ci)try{var Bi={};Object.defineProperty(Bi,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",Bi,Bi),window.removeEventListener("test",Bi,Bi)}catch{Ga=!1}var Kn=null,xs=null,qi=null;function Ho(){if(qi)return qi;var i,r=xs,a=r.length,c,y="value"in Kn?Kn.value:Kn.textContent,v=y.length;for(i=0;i<a&&r[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&r[a-c]===y[v-c];c++);return qi=y.slice(i,1<c?1-c:void 0)}function zr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function $o(){return!0}function Et(){return!1}function yn(i){function r(a,c,y,v,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?$o:Et,this.isPropagationStopped=Et,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$o)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$o)},persist:function(){},isPersistent:$o}),r}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gr=yn(ao),Yo=E({},ao,{view:0,detail:0}),yu=yn(Yo),Jo,Ns,In,Hr=E({},Yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==In&&(In&&i.type==="mousemove"?(Jo=i.screenX-In.screenX,Ns=i.screenY-In.screenY):Ns=Jo=0,In=i),Jo)},movementY:function(i){return"movementY"in i?i.movementY:Ns}}),vu=yn(Hr),$r=E({},Hr,{dataTransfer:0}),_u=yn($r),Ha=E({},Yo,{relatedTarget:0}),Ko=yn(Ha),Tu=E({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),Ms=yn(Tu),Xf=E({},ao,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Eu=yn(Xf),Yr=E({},ao,{data:0}),$a=yn(Yr),Su={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ya={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ja={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Au(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Ja[i])?!!r[i]:!1}function Qo(){return Au}var Cu=E({},Yo,{key:function(i){if(i.key){var r=Su[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=zr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ya[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qo,charCode:function(i){return i.type==="keypress"?zr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?zr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wu=yn(Cu),lo=E({},Hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ka=yn(lo),Iu=E({},Yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qo}),Ru=yn(Iu),bu=E({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ds=yn(bu),Rn=E({},Hr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),xu=yn(Rn),Nu=E({},ao,{newState:0,oldState:0}),Xo=yn(Nu),m=[9,13,27,32],T=Ci&&"CompositionEvent"in window,C=null;Ci&&"documentMode"in document&&(C=document.documentMode);var b=Ci&&"TextEvent"in window&&!C,G=Ci&&(!T||C&&8<C&&11>=C),j=" ",ge=!1;function lt(i,r){switch(i){case"keyup":return m.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var $e=!1;function Wt(i,r){switch(i){case"compositionend":return Bt(r);case"keypress":return r.which!==32?null:(ge=!0,j);case"textInput":return i=r.data,i===j&&ge?null:i;default:return null}}function Zt(i,r){if($e)return i==="compositionend"||!T&&lt(i,r)?(i=Ho(),qi=xs=Kn=null,$e=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return G&&r.locale!=="ko"?null:r.data;default:return null}}var Wo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kn(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Wo[i.type]:r==="textarea"}function Jr(i,r,a,c){so?Jn?Jn.push(c):Jn=[c]:so=c,r=_c(r,"onChange"),0<r.length&&(a=new Gr("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var uo=null,Qa=null;function QC(i){U0(i,0)}function Mu(i){var r=Fr(i);if(Fa(r))return i}function eg(i,r){if(i==="change")return r}var tg=!1;if(Ci){var Wf;if(Ci){var Zf="oninput"in document;if(!Zf){var ng=document.createElement("div");ng.setAttribute("oninput","return;"),Zf=typeof ng.oninput=="function"}Wf=Zf}else Wf=!1;tg=Wf&&(!document.documentMode||9<document.documentMode)}function ig(){uo&&(uo.detachEvent("onpropertychange",og),Qa=uo=null)}function og(i){if(i.propertyName==="value"&&Mu(Qa)){var r=[];Jr(r,Qa,i,bs(i)),gu(QC,r)}}function XC(i,r,a){i==="focusin"?(ig(),uo=r,Qa=a,uo.attachEvent("onpropertychange",og)):i==="focusout"&&ig()}function WC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Mu(Qa)}function ZC(i,r){if(i==="click")return Mu(r)}function jC(i,r){if(i==="input"||i==="change")return Mu(r)}function e1(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Qn=typeof Object.is=="function"?Object.is:e1;function Xa(i,r){if(Qn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!Pi.call(r,y)||!Qn(i[y],r[y]))return!1}return!0}function rg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sg(i,r){var a=rg(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=rg(a)}}function ag(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?ag(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function lg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=ws(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=ws(i.document)}return r}function jf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var t1=Ci&&"documentMode"in document&&11>=document.documentMode,Ps=null,ed=null,Wa=null,td=!1;function ug(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;td||Ps==null||Ps!==ws(c)||(c=Ps,"selectionStart"in c&&jf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Wa&&Xa(Wa,c)||(Wa=c,c=_c(ed,"onSelect"),0<c.length&&(r=new Gr("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=Ps)))}function Kr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Vs={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},nd={},cg={};Ci&&(cg=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function Qr(i){if(nd[i])return nd[i];if(!Vs[i])return i;var r=Vs[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in cg)return nd[i]=r[a];return i}var fg=Qr("animationend"),dg=Qr("animationiteration"),hg=Qr("animationstart"),n1=Qr("transitionrun"),i1=Qr("transitionstart"),o1=Qr("transitioncancel"),pg=Qr("transitionend"),mg=new Map,id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");id.push("scrollEnd");function wi(i,r){mg.set(i,r),Cn(r,[i])}var Du=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},li=[],Us=0,od=0;function Pu(){for(var i=Us,r=od=Us=0;r<i;){var a=li[r];li[r++]=null;var c=li[r];li[r++]=null;var y=li[r];li[r++]=null;var v=li[r];if(li[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&gg(a,y,v)}}function Vu(i,r,a,c){li[Us++]=i,li[Us++]=r,li[Us++]=a,li[Us++]=c,od|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function rd(i,r,a,c){return Vu(i,r,a,c),Uu(i)}function Xr(i,r){return Vu(i,null,null,r),Uu(i)}function gg(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&r!==null&&(y=31-rn(a),i=v.hiddenUpdates,c=i[y],c===null?i[y]=[r]:c.push(r),r.lane=a|536870912),v):null}function Uu(i){if(50<_l)throw _l=0,ph=null,Error(o(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var ks={};function r1(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(i,r,a,c){return new r1(i,r,a,c)}function sd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function co(i,r){var a=i.alternate;return a===null?(a=Xn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function yg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ku(i,r,a,c,y,v){var A=0;if(c=i,typeof i=="function")sd(i)&&(A=1);else if(typeof i=="string")A=cw(i,a,de.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case x:return i=Xn(31,a,r,y),i.elementType=x,i.lanes=v,i;case L:return Wr(a.children,y,v,r);case V:A=8,y|=24;break;case Y:return i=Xn(12,a,r,y|2),i.elementType=Y,i.lanes=v,i;case me:return i=Xn(13,a,r,y),i.elementType=me,i.lanes=v,i;case W:return i=Xn(19,a,r,y),i.elementType=W,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case J:A=10;break e;case Q:A=9;break e;case te:A=11;break e;case D:A=14;break e;case N:A=16,c=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),c=null}return r=Xn(A,a,r,y),r.elementType=i,r.type=c,r.lanes=v,r}function Wr(i,r,a,c){return i=Xn(7,i,c,r),i.lanes=a,i}function ad(i,r,a){return i=Xn(6,i,null,r),i.lanes=a,i}function vg(i){var r=Xn(18,null,null,0);return r.stateNode=i,r}function ld(i,r,a){return r=Xn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var _g=new WeakMap;function ui(i,r){if(typeof i=="object"&&i!==null){var a=_g.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Vo(r)},_g.set(i,r),r)}return{value:i,source:r,stack:Vo(r)}}var Ls=[],Os=0,Lu=null,Za=0,ci=[],fi=0,Zo=null,zi=1,Gi="";function fo(i,r){Ls[Os++]=Za,Ls[Os++]=Lu,Lu=i,Za=r}function Tg(i,r,a){ci[fi++]=zi,ci[fi++]=Gi,ci[fi++]=Zo,Zo=i;var c=zi;i=Gi;var y=32-rn(c)-1;c&=~(1<<y),a+=1;var v=32-rn(r)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,zi=1<<32-rn(r)+y|a<<y|c,Gi=v+i}else zi=1<<v|a<<y|c,Gi=i}function ud(i){i.return!==null&&(fo(i,1),Tg(i,1,0))}function cd(i){for(;i===Lu;)Lu=Ls[--Os],Ls[Os]=null,Za=Ls[--Os],Ls[Os]=null;for(;i===Zo;)Zo=ci[--fi],ci[fi]=null,Gi=ci[--fi],ci[fi]=null,zi=ci[--fi],ci[fi]=null}function Eg(i,r){ci[fi++]=zi,ci[fi++]=Gi,ci[fi++]=Zo,zi=r.id,Gi=r.overflow,Zo=i}var ln=null,St=null,et=!1,jo=null,di=!1,fd=Error(o(519));function er(i){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ja(ui(r,i)),fd}function Sg(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[bt]=i,r[an]=c,a){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(a=0;a<El.length;a++)Ke(El[a],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":Ke("invalid",r),Br(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ke("invalid",r);break;case"textarea":Ke("invalid",r),Go(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||F0(r.textContent,a)?(c.popover!=null&&(Ke("beforetoggle",r),Ke("toggle",r)),c.onScroll!=null&&Ke("scroll",r),c.onScrollEnd!=null&&Ke("scrollend",r),c.onClick!=null&&(r.onclick=Xt),r=!0):r=!1,r||er(i,!0)}function Ag(i){for(ln=i.return;ln;)switch(ln.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:ln=ln.return}}function Fs(i){if(i!==ln)return!1;if(!et)return Ag(i),et=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||xh(i.type,i.memoizedProps)),a=!a),a&&St&&er(i),Ag(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));St=K0(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));St=K0(i)}else r===27?(r=St,pr(i.type)?(i=Vh,Vh=null,St=i):St=r):St=ln?pi(i.stateNode.nextSibling):null;return!0}function Zr(){St=ln=null,et=!1}function dd(){var i=jo;return i!==null&&(Bn===null?Bn=i:Bn.push.apply(Bn,i),jo=null),i}function ja(i){jo===null?jo=[i]:jo.push(i)}var hd=F(null),jr=null,ho=null;function tr(i,r,a){le(hd,r._currentValue),r._currentValue=a}function po(i){i._currentValue=hd.current,X(hd)}function pd(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function md(i,r,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=y;for(var k=0;k<r.length;k++)if(I.context===r[k]){v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),pd(v.return,a,i),c||(A=null);break e}v=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(o(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),pd(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Bs(i,r,a,c){i=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var I=y.type;Qn(y.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(y===Ve.current){if(A=y.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Il):i=[Il])}y=y.return}i!==null&&md(r,i,a,c),r.flags|=262144}function Ou(i){for(i=i.firstContext;i!==null;){if(!Qn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function es(i){jr=i,ho=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function un(i){return Cg(jr,i)}function Fu(i,r){return jr===null&&es(i),Cg(i,r)}function Cg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ho===null){if(i===null)throw Error(o(308));ho=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ho=ho.next=r;return a}var s1=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},a1=n.unstable_scheduleCallback,l1=n.unstable_NormalPriority,qt={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gd(){return{controller:new s1,data:new Map,refCount:0}}function el(i){i.refCount--,i.refCount===0&&a1(l1,function(){i.controller.abort()})}var tl=null,yd=0,qs=0,zs=null;function u1(i,r){if(tl===null){var a=tl=[];yd=0,qs=Th(),zs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return yd++,r.then(wg,wg),r}function wg(){if(--yd===0&&tl!==null){zs!==null&&(zs.status="fulfilled");var i=tl;tl=null,qs=0,zs=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function c1(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Ig=ee.S;ee.S=function(i,r){u0=we(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&u1(i,r),Ig!==null&&Ig(i,r)};var ts=F(null);function vd(){var i=ts.current;return i!==null?i:vt.pooledCache}function Bu(i,r){r===null?le(ts,ts.current):le(ts,r.pool)}function Rg(){var i=vd();return i===null?null:{parent:qt._currentValue,pool:i}}var Gs=Error(o(460)),_d=Error(o(474)),qu=Error(o(542)),zu={then:function(){}};function bg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function xg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Xt,Xt),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Mg(i),i;default:if(typeof r.status=="string")r.then(Xt,Xt);else{if(i=vt,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Mg(i),i}throw is=r,Gs}}function ns(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(is=a,Gs):a}}var is=null;function Ng(){if(is===null)throw Error(o(459));var i=is;return is=null,i}function Mg(i){if(i===Gs||i===qu)throw Error(o(483))}var Hs=null,nl=0;function Gu(i){var r=nl;return nl+=1,Hs===null&&(Hs=[]),xg(Hs,i,r)}function il(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Hu(i,r){throw r.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(r),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Dg(i){function r(z,B){if(i){var H=z.deletions;H===null?(z.deletions=[B],z.flags|=16):H.push(B)}}function a(z,B){if(!i)return null;for(;B!==null;)r(z,B),B=B.sibling;return null}function c(z){for(var B=new Map;z!==null;)z.key!==null?B.set(z.key,z):B.set(z.index,z),z=z.sibling;return B}function y(z,B){return z=co(z,B),z.index=0,z.sibling=null,z}function v(z,B,H){return z.index=H,i?(H=z.alternate,H!==null?(H=H.index,H<B?(z.flags|=67108866,B):H):(z.flags|=67108866,B)):(z.flags|=1048576,B)}function A(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function I(z,B,H,re){return B===null||B.tag!==6?(B=ad(H,z.mode,re),B.return=z,B):(B=y(B,H),B.return=z,B)}function k(z,B,H,re){var Re=H.type;return Re===L?ie(z,B,H.props.children,re,H.key):B!==null&&(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===N&&ns(Re)===B.type)?(B=y(B,H.props),il(B,H),B.return=z,B):(B=ku(H.type,H.key,H.props,null,z.mode,re),il(B,H),B.return=z,B)}function $(z,B,H,re){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=ld(H,z.mode,re),B.return=z,B):(B=y(B,H.children||[]),B.return=z,B)}function ie(z,B,H,re,Re){return B===null||B.tag!==7?(B=Wr(H,z.mode,re,Re),B.return=z,B):(B=y(B,H),B.return=z,B)}function se(z,B,H){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=ad(""+B,z.mode,H),B.return=z,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return H=ku(B.type,B.key,B.props,null,z.mode,H),il(H,B),H.return=z,H;case M:return B=ld(B,z.mode,H),B.return=z,B;case N:return B=ns(B),se(z,B,H)}if(Qe(B)||q(B))return B=Wr(B,z.mode,H,null),B.return=z,B;if(typeof B.then=="function")return se(z,Gu(B),H);if(B.$$typeof===J)return se(z,Fu(z,B),H);Hu(z,B)}return null}function K(z,B,H,re){var Re=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Re!==null?null:I(z,B,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===Re?k(z,B,H,re):null;case M:return H.key===Re?$(z,B,H,re):null;case N:return H=ns(H),K(z,B,H,re)}if(Qe(H)||q(H))return Re!==null?null:ie(z,B,H,re,null);if(typeof H.then=="function")return K(z,B,Gu(H),re);if(H.$$typeof===J)return K(z,B,Fu(z,H),re);Hu(z,H)}return null}function Z(z,B,H,re,Re){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return z=z.get(H)||null,I(B,z,""+re,Re);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return z=z.get(re.key===null?H:re.key)||null,k(B,z,re,Re);case M:return z=z.get(re.key===null?H:re.key)||null,$(B,z,re,Re);case N:return re=ns(re),Z(z,B,H,re,Re)}if(Qe(re)||q(re))return z=z.get(H)||null,ie(B,z,re,Re,null);if(typeof re.then=="function")return Z(z,B,H,Gu(re),Re);if(re.$$typeof===J)return Z(z,B,H,Fu(B,re),Re);Hu(B,re)}return null}function Se(z,B,H,re){for(var Re=null,ot=null,Ce=B,ze=B=0,We=null;Ce!==null&&ze<H.length;ze++){Ce.index>ze?(We=Ce,Ce=null):We=Ce.sibling;var rt=K(z,Ce,H[ze],re);if(rt===null){Ce===null&&(Ce=We);break}i&&Ce&&rt.alternate===null&&r(z,Ce),B=v(rt,B,ze),ot===null?Re=rt:ot.sibling=rt,ot=rt,Ce=We}if(ze===H.length)return a(z,Ce),et&&fo(z,ze),Re;if(Ce===null){for(;ze<H.length;ze++)Ce=se(z,H[ze],re),Ce!==null&&(B=v(Ce,B,ze),ot===null?Re=Ce:ot.sibling=Ce,ot=Ce);return et&&fo(z,ze),Re}for(Ce=c(Ce);ze<H.length;ze++)We=Z(Ce,z,ze,H[ze],re),We!==null&&(i&&We.alternate!==null&&Ce.delete(We.key===null?ze:We.key),B=v(We,B,ze),ot===null?Re=We:ot.sibling=We,ot=We);return i&&Ce.forEach(function(_r){return r(z,_r)}),et&&fo(z,ze),Re}function Me(z,B,H,re){if(H==null)throw Error(o(151));for(var Re=null,ot=null,Ce=B,ze=B=0,We=null,rt=H.next();Ce!==null&&!rt.done;ze++,rt=H.next()){Ce.index>ze?(We=Ce,Ce=null):We=Ce.sibling;var _r=K(z,Ce,rt.value,re);if(_r===null){Ce===null&&(Ce=We);break}i&&Ce&&_r.alternate===null&&r(z,Ce),B=v(_r,B,ze),ot===null?Re=_r:ot.sibling=_r,ot=_r,Ce=We}if(rt.done)return a(z,Ce),et&&fo(z,ze),Re;if(Ce===null){for(;!rt.done;ze++,rt=H.next())rt=se(z,rt.value,re),rt!==null&&(B=v(rt,B,ze),ot===null?Re=rt:ot.sibling=rt,ot=rt);return et&&fo(z,ze),Re}for(Ce=c(Ce);!rt.done;ze++,rt=H.next())rt=Z(Ce,z,ze,rt.value,re),rt!==null&&(i&&rt.alternate!==null&&Ce.delete(rt.key===null?ze:rt.key),B=v(rt,B,ze),ot===null?Re=rt:ot.sibling=rt,ot=rt);return i&&Ce.forEach(function(Ew){return r(z,Ew)}),et&&fo(z,ze),Re}function mt(z,B,H,re){if(typeof H=="object"&&H!==null&&H.type===L&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var Re=H.key;B!==null;){if(B.key===Re){if(Re=H.type,Re===L){if(B.tag===7){a(z,B.sibling),re=y(B,H.props.children),re.return=z,z=re;break e}}else if(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===N&&ns(Re)===B.type){a(z,B.sibling),re=y(B,H.props),il(re,H),re.return=z,z=re;break e}a(z,B);break}else r(z,B);B=B.sibling}H.type===L?(re=Wr(H.props.children,z.mode,re,H.key),re.return=z,z=re):(re=ku(H.type,H.key,H.props,null,z.mode,re),il(re,H),re.return=z,z=re)}return A(z);case M:e:{for(Re=H.key;B!==null;){if(B.key===Re)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){a(z,B.sibling),re=y(B,H.children||[]),re.return=z,z=re;break e}else{a(z,B);break}else r(z,B);B=B.sibling}re=ld(H,z.mode,re),re.return=z,z=re}return A(z);case N:return H=ns(H),mt(z,B,H,re)}if(Qe(H))return Se(z,B,H,re);if(q(H)){if(Re=q(H),typeof Re!="function")throw Error(o(150));return H=Re.call(H),Me(z,B,H,re)}if(typeof H.then=="function")return mt(z,B,Gu(H),re);if(H.$$typeof===J)return mt(z,B,Fu(z,H),re);Hu(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,B!==null&&B.tag===6?(a(z,B.sibling),re=y(B,H),re.return=z,z=re):(a(z,B),re=ad(H,z.mode,re),re.return=z,z=re),A(z)):a(z,B)}return function(z,B,H,re){try{nl=0;var Re=mt(z,B,H,re);return Hs=null,Re}catch(Ce){if(Ce===Gs||Ce===qu)throw Ce;var ot=Xn(29,Ce,null,z.mode);return ot.lanes=re,ot.return=z,ot}finally{}}}var os=Dg(!0),Pg=Dg(!1),nr=!1;function Td(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ed(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ir(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function or(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(at&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Uu(i),gg(i,null,a),r}return Vu(i,c,r,a),Uu(i)}function ol(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,ko(i,a)}}function Sd(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=r:v=v.next=r}else y=v=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Ad=!1;function rl(){if(Ad){var i=zs;if(i!==null)throw i}}function sl(i,r,a,c){Ad=!1;var y=i.updateQueue;nr=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var k=I,$=k.next;k.next=null,A===null?v=$:A.next=$,A=k;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,I=ie.lastBaseUpdate,I!==A&&(I===null?ie.firstBaseUpdate=$:I.next=$,ie.lastBaseUpdate=k))}if(v!==null){var se=y.baseState;A=0,ie=$=k=null,I=v;do{var K=I.lane&-536870913,Z=K!==I.lane;if(Z?(Xe&K)===K:(c&K)===K){K!==0&&K===qs&&(Ad=!0),ie!==null&&(ie=ie.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Se=i,Me=I;K=r;var mt=a;switch(Me.tag){case 1:if(Se=Me.payload,typeof Se=="function"){se=Se.call(mt,se,K);break e}se=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Me.payload,K=typeof Se=="function"?Se.call(mt,se,K):Se,K==null)break e;se=E({},se,K);break e;case 2:nr=!0}}K=I.callback,K!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ie===null?($=ie=Z,k=se):ie=ie.next=Z,A|=K;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Z=I,I=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);ie===null&&(k=se),y.baseState=k,y.firstBaseUpdate=$,y.lastBaseUpdate=ie,v===null&&(y.shared.lanes=0),ur|=A,i.lanes=A,i.memoizedState=se}}function Vg(i,r){if(typeof i!="function")throw Error(o(191,i));i.call(r)}function Ug(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Vg(a[i],r)}var $s=F(null),$u=F(0);function kg(i,r){i=Ao,le($u,i),le($s,r),Ao=i|r.baseLanes}function Cd(){le($u,Ao),le($s,$s.current)}function wd(){Ao=$u.current,X($s),X($u)}var Wn=F(null),hi=null;function rr(i){var r=i.alternate;le(kt,kt.current&1),le(Wn,i),hi===null&&(r===null||$s.current!==null||r.memoizedState!==null)&&(hi=i)}function Id(i){le(kt,kt.current),le(Wn,i),hi===null&&(hi=i)}function Lg(i){i.tag===22?(le(kt,kt.current),le(Wn,i),hi===null&&(hi=i)):sr()}function sr(){le(kt,kt.current),le(Wn,Wn.current)}function Zn(i){X(Wn),hi===i&&(hi=null),X(kt)}var kt=F(0);function Yu(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Dh(a)||Ph(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var mo=0,Be=null,ht=null,zt=null,Ju=!1,Ys=!1,rs=!1,Ku=0,al=0,Js=null,f1=0;function Nt(){throw Error(o(321))}function Rd(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Qn(i[a],r[a]))return!1;return!0}function bd(i,r,a,c,y,v){return mo=v,Be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=i===null||i.memoizedState===null?Ty:Gd,rs=!1,v=a(c,y),rs=!1,Ys&&(v=Fg(r,a,c,y)),Og(i),v}function Og(i){ee.H=cl;var r=ht!==null&&ht.next!==null;if(mo=0,zt=ht=Be=null,Ju=!1,al=0,Js=null,r)throw Error(o(300));i===null||Gt||(i=i.dependencies,i!==null&&Ou(i)&&(Gt=!0))}function Fg(i,r,a,c){Be=i;var y=0;do{if(Ys&&(Js=null),al=0,Ys=!1,25<=y)throw Error(o(301));if(y+=1,zt=ht=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}ee.H=Ey,v=r(a,c)}while(Ys);return v}function d1(){var i=ee.H,r=i.useState()[0];return r=typeof r.then=="function"?ll(r):r,i=i.useState()[0],(ht!==null?ht.memoizedState:null)!==i&&(Be.flags|=1024),r}function xd(){var i=Ku!==0;return Ku=0,i}function Nd(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function Md(i){if(Ju){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ju=!1}mo=0,zt=ht=Be=null,Ys=!1,al=Ku=0,Js=null}function bn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Be.memoizedState=zt=i:zt=zt.next=i,zt}function Lt(){if(ht===null){var i=Be.alternate;i=i!==null?i.memoizedState:null}else i=ht.next;var r=zt===null?Be.memoizedState:zt.next;if(r!==null)zt=r,ht=i;else{if(i===null)throw Be.alternate===null?Error(o(467)):Error(o(310));ht=i,i={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},zt===null?Be.memoizedState=zt=i:zt=zt.next=i}return zt}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(i){var r=al;return al+=1,Js===null&&(Js=[]),i=xg(Js,i,r),r=Be,(zt===null?r.memoizedState:zt.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?Ty:Gd),i}function Xu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ll(i);if(i.$$typeof===J)return un(i)}throw Error(o(438,String(i)))}function Dd(i){var r=null,a=Be.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Qu(),Be.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=U;return r.index++,a}function go(i,r){return typeof r=="function"?r(i):r}function Wu(i){var r=Lt();return Pd(r,ht,i)}function Pd(i,r,a){var c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var y=i.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}r.baseQueue=y=v,c.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{r=y.next;var I=A=null,k=null,$=r,ie=!1;do{var se=$.lane&-536870913;if(se!==$.lane?(Xe&se)===se:(mo&se)===se){var K=$.revertLane;if(K===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),se===qs&&(ie=!0);else if((mo&K)===K){$=$.next,K===qs&&(ie=!0);continue}else se={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(I=k=se,A=v):k=k.next=se,Be.lanes|=K,ur|=K;se=$.action,rs&&a(v,se),v=$.hasEagerState?$.eagerState:a(v,se)}else K={lane:se,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(I=k=K,A=v):k=k.next=K,Be.lanes|=se,ur|=se;$=$.next}while($!==null&&$!==r);if(k===null?A=v:k.next=I,!Qn(v,i.memoizedState)&&(Gt=!0,ie&&(a=zs,a!==null)))throw a;i.memoizedState=v,i.baseState=A,i.baseQueue=k,c.lastRenderedState=v}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Vd(i){var r=Lt(),a=r.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,v=r.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=i(v,A.action),A=A.next;while(A!==y);Qn(v,r.memoizedState)||(Gt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),a.lastRenderedState=v}return[v,c]}function Bg(i,r,a){var c=Be,y=Lt(),v=et;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=r();var A=!Qn((ht||y).memoizedState,a);if(A&&(y.memoizedState=a,Gt=!0),y=y.queue,Ld(Gg.bind(null,c,y,i),[i]),y.getSnapshot!==r||A||zt!==null&&zt.memoizedState.tag&1){if(c.flags|=2048,Ks(9,{destroy:void 0},zg.bind(null,c,y,a,r),null),vt===null)throw Error(o(349));v||(mo&127)!==0||qg(c,r,a)}return a}function qg(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Be.updateQueue,r===null?(r=Qu(),Be.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function zg(i,r,a,c){r.value=a,r.getSnapshot=c,Hg(r)&&$g(i)}function Gg(i,r,a){return a(function(){Hg(r)&&$g(i)})}function Hg(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Qn(i,a)}catch{return!0}}function $g(i){var r=Xr(i,2);r!==null&&qn(r,i,2)}function Ud(i){var r=bn();if(typeof i=="function"){var a=i;if(i=a(),rs){ct(!0);try{a()}finally{ct(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:i},r}function Yg(i,r,a,c){return i.baseState=a,Pd(i,ht,typeof c=="function"?c:go)}function h1(i,r,a,c,y){if(ec(i))throw Error(o(485));if(i=r.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};ee.T!==null?a(!0):v.isTransition=!1,c(v),a=r.pending,a===null?(v.next=r.pending=v,Jg(r,v)):(v.next=a.next,r.pending=a.next=v)}}function Jg(i,r){var a=r.action,c=r.payload,y=i.state;if(r.isTransition){var v=ee.T,A={};ee.T=A;try{var I=a(y,c),k=ee.S;k!==null&&k(A,I),Kg(i,r,I)}catch($){kd(i,r,$)}finally{v!==null&&A.types!==null&&(v.types=A.types),ee.T=v}}else try{v=a(y,c),Kg(i,r,v)}catch($){kd(i,r,$)}}function Kg(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Qg(i,r,c)},function(c){return kd(i,r,c)}):Qg(i,r,a)}function Qg(i,r,a){r.status="fulfilled",r.value=a,Xg(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Jg(i,a)))}function kd(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,Xg(r),r=r.next;while(r!==c)}i.action=null}function Xg(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Wg(i,r){return r}function Zg(i,r){if(et){var a=vt.formState;if(a!==null){e:{var c=Be;if(et){if(St){t:{for(var y=St,v=di;y.nodeType!==8;){if(!v){y=null;break t}if(y=pi(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){St=pi(y.nextSibling),c=y.data==="F!";break e}}er(c)}c=!1}c&&(r=a[0])}}return a=bn(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wg,lastRenderedState:r},a.queue=c,a=yy.bind(null,Be,c),c.dispatch=a,c=Ud(!1),v=zd.bind(null,Be,!1,c.queue),c=bn(),y={state:r,dispatch:null,action:i,pending:null},c.queue=y,a=h1.bind(null,Be,y,v,a),y.dispatch=a,c.memoizedState=i,[r,a,!1]}function jg(i){var r=Lt();return ey(r,ht,i)}function ey(i,r,a){if(r=Pd(i,r,Wg)[0],i=Wu(go)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=ll(r)}catch(A){throw A===Gs?qu:A}else c=r;r=Lt();var y=r.queue,v=y.dispatch;return a!==r.memoizedState&&(Be.flags|=2048,Ks(9,{destroy:void 0},p1.bind(null,y,a),null)),[c,v,i]}function p1(i,r){i.action=r}function ty(i){var r=Lt(),a=ht;if(a!==null)return ey(r,a,i);Lt(),r=r.memoizedState,a=Lt();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function Ks(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=Be.updateQueue,r===null&&(r=Qu(),Be.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function ny(){return Lt().memoizedState}function Zu(i,r,a,c){var y=bn();Be.flags|=i,y.memoizedState=Ks(1|r,{destroy:void 0},a,c===void 0?null:c)}function ju(i,r,a,c){var y=Lt();c=c===void 0?null:c;var v=y.memoizedState.inst;ht!==null&&c!==null&&Rd(c,ht.memoizedState.deps)?y.memoizedState=Ks(r,v,a,c):(Be.flags|=i,y.memoizedState=Ks(1|r,v,a,c))}function iy(i,r){Zu(8390656,8,i,r)}function Ld(i,r){ju(2048,8,i,r)}function m1(i){Be.flags|=4;var r=Be.updateQueue;if(r===null)r=Qu(),Be.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function oy(i){var r=Lt().memoizedState;return m1({ref:r,nextImpl:i}),function(){if((at&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function ry(i,r){return ju(4,2,i,r)}function sy(i,r){return ju(4,4,i,r)}function ay(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function ly(i,r,a){a=a!=null?a.concat([i]):null,ju(4,4,ay.bind(null,r,i),a)}function Od(){}function uy(i,r){var a=Lt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&Rd(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function cy(i,r){var a=Lt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&Rd(r,c[1]))return c[0];if(c=i(),rs){ct(!0);try{i()}finally{ct(!1)}}return a.memoizedState=[c,r],c}function Fd(i,r,a){return a===void 0||(mo&1073741824)!==0&&(Xe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=f0(),Be.lanes|=i,ur|=i,a)}function fy(i,r,a,c){return Qn(a,r)?a:$s.current!==null?(i=Fd(i,a,c),Qn(i,r)||(Gt=!0),i):(mo&42)===0||(mo&1073741824)!==0&&(Xe&261930)===0?(Gt=!0,i.memoizedState=a):(i=f0(),Be.lanes|=i,ur|=i,r)}function dy(i,r,a,c,y){var v=he.p;he.p=v!==0&&8>v?v:8;var A=ee.T,I={};ee.T=I,zd(i,!1,r,a);try{var k=y(),$=ee.S;if($!==null&&$(I,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ie=c1(k,c);ul(i,r,ie,ti(i))}else ul(i,r,c,ti(i))}catch(se){ul(i,r,{then:function(){},status:"rejected",reason:se},ti())}finally{he.p=v,A!==null&&I.types!==null&&(A.types=I.types),ee.T=A}}function g1(){}function Bd(i,r,a,c){if(i.tag!==5)throw Error(o(476));var y=hy(i).queue;dy(i,y,r,ve,a===null?g1:function(){return py(i),a(c)})}function hy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:ve},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function py(i){var r=hy(i);r.next===null&&(r=i.alternate.memoizedState),ul(i,r.next.queue,{},ti())}function qd(){return un(Il)}function my(){return Lt().memoizedState}function gy(){return Lt().memoizedState}function y1(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=ti();i=ir(a);var c=or(r,i,a);c!==null&&(qn(c,r,a),ol(c,r,a)),r={cache:gd()},i.payload=r;return}r=r.return}}function v1(i,r,a){var c=ti();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ec(i)?vy(r,a):(a=rd(i,r,a,c),a!==null&&(qn(a,i,c),_y(a,r,c)))}function yy(i,r,a){var c=ti();ul(i,r,a,c)}function ul(i,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ec(i))vy(r,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var A=r.lastRenderedState,I=v(A,a);if(y.hasEagerState=!0,y.eagerState=I,Qn(I,A))return Vu(i,r,y,0),vt===null&&Pu(),!1}catch{}finally{}if(a=rd(i,r,y,c),a!==null)return qn(a,i,c),_y(a,r,c),!0}return!1}function zd(i,r,a,c){if(c={lane:2,revertLane:Th(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ec(i)){if(r)throw Error(o(479))}else r=rd(i,a,c,2),r!==null&&qn(r,i,2)}function ec(i){var r=i.alternate;return i===Be||r!==null&&r===Be}function vy(i,r){Ys=Ju=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function _y(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,ko(i,a)}}var cl={readContext:un,use:Xu,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};cl.useEffectEvent=Nt;var Ty={readContext:un,use:Xu,useCallback:function(i,r){return bn().memoizedState=[i,r===void 0?null:r],i},useContext:un,useEffect:iy,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,Zu(4194308,4,ay.bind(null,r,i),a)},useLayoutEffect:function(i,r){return Zu(4194308,4,i,r)},useInsertionEffect:function(i,r){Zu(4,2,i,r)},useMemo:function(i,r){var a=bn();r=r===void 0?null:r;var c=i();if(rs){ct(!0);try{i()}finally{ct(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=bn();if(a!==void 0){var y=a(r);if(rs){ct(!0);try{a(r)}finally{ct(!1)}}}else y=r;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=v1.bind(null,Be,i),[c.memoizedState,i]},useRef:function(i){var r=bn();return i={current:i},r.memoizedState=i},useState:function(i){i=Ud(i);var r=i.queue,a=yy.bind(null,Be,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:Od,useDeferredValue:function(i,r){var a=bn();return Fd(a,i,r)},useTransition:function(){var i=Ud(!1);return i=dy.bind(null,Be,i.queue,!0,!1),bn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=Be,y=bn();if(et){if(a===void 0)throw Error(o(407));a=a()}else{if(a=r(),vt===null)throw Error(o(349));(Xe&127)!==0||qg(c,r,a)}y.memoizedState=a;var v={value:a,getSnapshot:r};return y.queue=v,iy(Gg.bind(null,c,v,i),[i]),c.flags|=2048,Ks(9,{destroy:void 0},zg.bind(null,c,v,a,r),null),a},useId:function(){var i=bn(),r=vt.identifierPrefix;if(et){var a=Gi,c=zi;a=(c&~(1<<32-rn(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Ku++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=f1++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:qd,useFormState:Zg,useActionState:Zg,useOptimistic:function(i){var r=bn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=zd.bind(null,Be,!0,a),a.dispatch=r,[i,r]},useMemoCache:Dd,useCacheRefresh:function(){return bn().memoizedState=y1.bind(null,Be)},useEffectEvent:function(i){var r=bn(),a={impl:i};return r.memoizedState=a,function(){if((at&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Gd={readContext:un,use:Xu,useCallback:uy,useContext:un,useEffect:Ld,useImperativeHandle:ly,useInsertionEffect:ry,useLayoutEffect:sy,useMemo:cy,useReducer:Wu,useRef:ny,useState:function(){return Wu(go)},useDebugValue:Od,useDeferredValue:function(i,r){var a=Lt();return fy(a,ht.memoizedState,i,r)},useTransition:function(){var i=Wu(go)[0],r=Lt().memoizedState;return[typeof i=="boolean"?i:ll(i),r]},useSyncExternalStore:Bg,useId:my,useHostTransitionStatus:qd,useFormState:jg,useActionState:jg,useOptimistic:function(i,r){var a=Lt();return Yg(a,ht,i,r)},useMemoCache:Dd,useCacheRefresh:gy};Gd.useEffectEvent=oy;var Ey={readContext:un,use:Xu,useCallback:uy,useContext:un,useEffect:Ld,useImperativeHandle:ly,useInsertionEffect:ry,useLayoutEffect:sy,useMemo:cy,useReducer:Vd,useRef:ny,useState:function(){return Vd(go)},useDebugValue:Od,useDeferredValue:function(i,r){var a=Lt();return ht===null?Fd(a,i,r):fy(a,ht.memoizedState,i,r)},useTransition:function(){var i=Vd(go)[0],r=Lt().memoizedState;return[typeof i=="boolean"?i:ll(i),r]},useSyncExternalStore:Bg,useId:my,useHostTransitionStatus:qd,useFormState:ty,useActionState:ty,useOptimistic:function(i,r){var a=Lt();return ht!==null?Yg(a,ht,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Dd,useCacheRefresh:gy};Ey.useEffectEvent=oy;function Hd(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var $d={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=ti(),y=ir(c);y.payload=r,a!=null&&(y.callback=a),r=or(i,y,c),r!==null&&(qn(r,i,c),ol(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=ti(),y=ir(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=or(i,y,c),r!==null&&(qn(r,i,c),ol(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=ti(),c=ir(a);c.tag=2,r!=null&&(c.callback=r),r=or(i,c,a),r!==null&&(qn(r,i,a),ol(r,i,a))}};function Sy(i,r,a,c,y,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,A):r.prototype&&r.prototype.isPureReactComponent?!Xa(a,c)||!Xa(y,v):!0}function Ay(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&$d.enqueueReplaceState(r,r.state,null)}function ss(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Cy(i){Du(i)}function wy(i){console.error(i)}function Iy(i){Du(i)}function tc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Ry(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Yd(i,r,a){return a=ir(a),a.tag=3,a.payload={element:null},a.callback=function(){tc(i,r)},a}function by(i){return i=ir(i),i.tag=3,i}function xy(i,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;i.payload=function(){return y(v)},i.callback=function(){Ry(r,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Ry(r,a,c),typeof y!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function _1(i,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Bs(r,a,y,!0),a=Wn.current,a!==null){switch(a.tag){case 31:case 13:return hi===null?hc():a.alternate===null&&Mt===0&&(Mt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===zu?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),yh(i,c,y)),!1;case 22:return a.flags|=65536,c===zu?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),yh(i,c,y)),!1}throw Error(o(435,a.tag))}return yh(i,c,y),hc(),!1}if(et)return r=Wn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==fd&&(i=Error(o(422),{cause:c}),ja(ui(i,a)))):(c!==fd&&(r=Error(o(423),{cause:c}),ja(ui(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=ui(c,a),y=Yd(i.stateNode,c,y),Sd(i,y),Mt!==4&&(Mt=2)),!1;var v=Error(o(520),{cause:c});if(v=ui(v,a),vl===null?vl=[v]:vl.push(v),Mt!==4&&(Mt=2),r===null)return!0;c=ui(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Yd(a.stateNode,c,i),Sd(a,i),!1;case 1:if(r=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(cr===null||!cr.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=by(y),xy(y,i,a,c),Sd(a,y),!1}a=a.return}while(a!==null);return!1}var Jd=Error(o(461)),Gt=!1;function cn(i,r,a,c){r.child=i===null?Pg(r,null,a,c):os(r,i.child,a,c)}function Ny(i,r,a,c,y){a=a.render;var v=r.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return es(r),c=bd(i,r,a,A,v,y),I=xd(),i!==null&&!Gt?(Nd(i,r,y),yo(i,r,y)):(et&&I&&ud(r),r.flags|=1,cn(i,r,c,y),r.child)}function My(i,r,a,c,y){if(i===null){var v=a.type;return typeof v=="function"&&!sd(v)&&v.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=v,Dy(i,r,v,c,y)):(i=ku(a.type,null,c,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!th(i,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:Xa,a(A,c)&&i.ref===r.ref)return yo(i,r,y)}return r.flags|=1,i=co(v,c),i.ref=r.ref,i.return=r,r.child=i}function Dy(i,r,a,c,y){if(i!==null){var v=i.memoizedProps;if(Xa(v,c)&&i.ref===r.ref)if(Gt=!1,r.pendingProps=c=v,th(i,y))(i.flags&131072)!==0&&(Gt=!0);else return r.lanes=i.lanes,yo(i,r,y)}return Kd(i,r,a,c,y)}function Py(i,r,a,c){var y=c.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=r.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,r.child=null;return Vy(i,r,v,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bu(r,v!==null?v.cachePool:null),v!==null?kg(r,v):Cd(),Lg(r);else return c=r.lanes=536870912,Vy(i,r,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(Bu(r,v.cachePool),kg(r,v),sr(),r.memoizedState=null):(i!==null&&Bu(r,null),Cd(),sr());return cn(i,r,y,a),r.child}function fl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Vy(i,r,a,c,y){var v=vd();return v=v===null?null:{parent:qt._currentValue,pool:v},r.memoizedState={baseLanes:a,cachePool:v},i!==null&&Bu(r,null),Cd(),Lg(r),i!==null&&Bs(i,r,c,!0),r.childLanes=y,null}function nc(i,r){return r=oc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Uy(i,r,a){return os(r,i.child,null,a),i=nc(r,r.pendingProps),i.flags|=2,Zn(r),r.memoizedState=null,i}function T1(i,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(et){if(c.mode==="hidden")return i=nc(r,c),r.lanes=536870912,fl(null,i);if(Id(r),(i=St)?(i=J0(i,di),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Zo!==null?{id:zi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=vg(i),a.return=r,r.child=a,ln=r,St=null)):i=null,i===null)throw er(r);return r.lanes=536870912,null}return nc(r,c)}var v=i.memoizedState;if(v!==null){var A=v.dehydrated;if(Id(r),y)if(r.flags&256)r.flags&=-257,r=Uy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(o(558));else if(Gt||Bs(i,r,a,!1),y=(a&i.childLanes)!==0,Gt||y){if(c=vt,c!==null&&(A=Lo(c,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,Xr(i,A),qn(c,i,A),Jd;hc(),r=Uy(i,r,a)}else i=v.treeContext,St=pi(A.nextSibling),ln=r,et=!0,jo=null,di=!1,i!==null&&Eg(r,i),r=nc(r,c),r.flags|=4096;return r}return i=co(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function ic(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function Kd(i,r,a,c,y){return es(r),a=bd(i,r,a,c,void 0,y),c=xd(),i!==null&&!Gt?(Nd(i,r,y),yo(i,r,y)):(et&&c&&ud(r),r.flags|=1,cn(i,r,a,y),r.child)}function ky(i,r,a,c,y,v){return es(r),r.updateQueue=null,a=Fg(r,c,a,y),Og(i),c=xd(),i!==null&&!Gt?(Nd(i,r,v),yo(i,r,v)):(et&&c&&ud(r),r.flags|=1,cn(i,r,a,v),r.child)}function Ly(i,r,a,c,y){if(es(r),r.stateNode===null){var v=ks,A=a.contextType;typeof A=="object"&&A!==null&&(v=un(A)),v=new a(c,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=$d,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=c,v.state=r.memoizedState,v.refs={},Td(r),A=a.contextType,v.context=typeof A=="object"&&A!==null?un(A):ks,v.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Hd(r,a,A,c),v.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&$d.enqueueReplaceState(v,v.state,null),sl(r,c,v,y),rl(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){v=r.stateNode;var I=r.memoizedProps,k=ss(a,I);v.props=k;var $=v.context,ie=a.contextType;A=ks,typeof ie=="object"&&ie!==null&&(A=un(ie));var se=a.getDerivedStateFromProps;ie=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,ie||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||$!==A)&&Ay(r,v,c,A),nr=!1;var K=r.memoizedState;v.state=K,sl(r,c,v,y),rl(),$=r.memoizedState,I||K!==$||nr?(typeof se=="function"&&(Hd(r,a,se,c),$=r.memoizedState),(k=nr||Sy(r,a,k,c,K,$,A))?(ie||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=$),v.props=c,v.state=$,v.context=A,c=k):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,Ed(i,r),A=r.memoizedProps,ie=ss(a,A),v.props=ie,se=r.pendingProps,K=v.context,$=a.contextType,k=ks,typeof $=="object"&&$!==null&&(k=un($)),I=a.getDerivedStateFromProps,($=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==se||K!==k)&&Ay(r,v,c,k),nr=!1,K=r.memoizedState,v.state=K,sl(r,c,v,y),rl();var Z=r.memoizedState;A!==se||K!==Z||nr||i!==null&&i.dependencies!==null&&Ou(i.dependencies)?(typeof I=="function"&&(Hd(r,a,I,c),Z=r.memoizedState),(ie=nr||Sy(r,a,ie,c,K,Z,k)||i!==null&&i.dependencies!==null&&Ou(i.dependencies))?($||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Z,k),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Z,k)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Z),v.props=c,v.state=Z,v.context=k,c=ie):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),c=!1)}return v=c,ic(i,r),c=(r.flags&128)!==0,v||c?(v=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&c?(r.child=os(r,i.child,null,y),r.child=os(r,null,a,y)):cn(i,r,a,y),r.memoizedState=v.state,i=r.child):i=yo(i,r,y),i}function Oy(i,r,a,c){return Zr(),r.flags|=256,cn(i,r,a,c),r.child}var Qd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xd(i){return{baseLanes:i,cachePool:Rg()}}function Wd(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=ei),i}function Fy(i,r,a){var c=r.pendingProps,y=!1,v=(r.flags&128)!==0,A;if((A=v)||(A=i!==null&&i.memoizedState===null?!1:(kt.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,i===null){if(et){if(y?rr(r):sr(),(i=St)?(i=J0(i,di),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Zo!==null?{id:zi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=vg(i),a.return=r,r.child=a,ln=r,St=null)):i=null,i===null)throw er(r);return Ph(i)?r.lanes=32:r.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(sr(),y=r.mode,I=oc({mode:"hidden",children:I},y),c=Wr(c,y,a,null),I.return=r,c.return=r,I.sibling=c,r.child=I,c=r.child,c.memoizedState=Xd(a),c.childLanes=Wd(i,A,a),r.memoizedState=Qd,fl(null,c)):(rr(r),Zd(r,I))}var k=i.memoizedState;if(k!==null&&(I=k.dehydrated,I!==null)){if(v)r.flags&256?(rr(r),r.flags&=-257,r=jd(i,r,a)):r.memoizedState!==null?(sr(),r.child=i.child,r.flags|=128,r=null):(sr(),I=c.fallback,y=r.mode,c=oc({mode:"visible",children:c.children},y),I=Wr(I,y,a,null),I.flags|=2,c.return=r,I.return=r,c.sibling=I,r.child=c,os(r,i.child,null,a),c=r.child,c.memoizedState=Xd(a),c.childLanes=Wd(i,A,a),r.memoizedState=Qd,r=fl(null,c));else if(rr(r),Ph(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var $=A.dgst;A=$,c=Error(o(419)),c.stack="",c.digest=A,ja({value:c,source:null,stack:null}),r=jd(i,r,a)}else if(Gt||Bs(i,r,a,!1),A=(a&i.childLanes)!==0,Gt||A){if(A=vt,A!==null&&(c=Lo(A,a),c!==0&&c!==k.retryLane))throw k.retryLane=c,Xr(i,c),qn(A,i,c),Jd;Dh(I)||hc(),r=jd(i,r,a)}else Dh(I)?(r.flags|=192,r.child=i.child,r=null):(i=k.treeContext,St=pi(I.nextSibling),ln=r,et=!0,jo=null,di=!1,i!==null&&Eg(r,i),r=Zd(r,c.children),r.flags|=4096);return r}return y?(sr(),I=c.fallback,y=r.mode,k=i.child,$=k.sibling,c=co(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,$!==null?I=co($,I):(I=Wr(I,y,a,null),I.flags|=2),I.return=r,c.return=r,c.sibling=I,r.child=c,fl(null,c),c=r.child,I=i.child.memoizedState,I===null?I=Xd(a):(y=I.cachePool,y!==null?(k=qt._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=Rg(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=Wd(i,A,a),r.memoizedState=Qd,fl(i.child,c)):(rr(r),a=i.child,i=a.sibling,a=co(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(A=r.deletions,A===null?(r.deletions=[i],r.flags|=16):A.push(i)),r.child=a,r.memoizedState=null,a)}function Zd(i,r){return r=oc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function oc(i,r){return i=Xn(22,i,null,r),i.lanes=0,i}function jd(i,r,a){return os(r,i.child,null,a),i=Zd(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function By(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),pd(i.return,r,a)}function eh(i,r,a,c,y,v){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function qy(i,r,a){var c=r.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=kt.current,I=(A&2)!==0;if(I?(A=A&1|2,r.flags|=128):A&=1,le(kt,A),cn(i,r,c,a),c=et?Za:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&By(i,a,r);else if(i.tag===19)By(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&Yu(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),eh(r,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&Yu(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}eh(r,!0,a,null,v,c);break;case"together":eh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function yo(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),ur|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Bs(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(o(153));if(r.child!==null){for(i=r.child,a=co(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=co(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function th(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Ou(i)))}function E1(i,r,a){switch(r.tag){case 3:He(r,r.stateNode.containerInfo),tr(r,qt,i.memoizedState.cache),Zr();break;case 27:case 5:Dn(r);break;case 4:He(r,r.stateNode.containerInfo);break;case 10:tr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Id(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(rr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Fy(i,r,a):(rr(r),i=yo(i,r,a),i!==null?i.sibling:null);rr(r);break;case 19:var y=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Bs(i,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return qy(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(kt,kt.current),c)break;return null;case 22:return r.lanes=0,Py(i,r,a,r.pendingProps);case 24:tr(r,qt,i.memoizedState.cache)}return yo(i,r,a)}function zy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Gt=!0;else{if(!th(i,a)&&(r.flags&128)===0)return Gt=!1,E1(i,r,a);Gt=(i.flags&131072)!==0}else Gt=!1,et&&(r.flags&1048576)!==0&&Tg(r,Za,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=ns(r.elementType),r.type=i,typeof i=="function")sd(i)?(c=ss(i,c),r.tag=1,r=Ly(null,r,i,c,a)):(r.tag=0,r=Kd(null,r,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===te){r.tag=11,r=Ny(null,r,i,c,a);break e}else if(y===D){r.tag=14,r=My(null,r,i,c,a);break e}}throw r=Ie(i)||i,Error(o(306,r,""))}}return r;case 0:return Kd(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=ss(c,r.pendingProps),Ly(i,r,c,y,a);case 3:e:{if(He(r,r.stateNode.containerInfo),i===null)throw Error(o(387));c=r.pendingProps;var v=r.memoizedState;y=v.element,Ed(i,r),sl(r,c,null,a);var A=r.memoizedState;if(c=A.cache,tr(r,qt,c),c!==v.cache&&md(r,[qt],a,!0),rl(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=Oy(i,r,c,a);break e}else if(c!==y){y=ui(Error(o(424)),r),ja(y),r=Oy(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(St=pi(i.firstChild),ln=r,et=!0,jo=null,di=!0,a=Pg(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Zr(),c===y){r=yo(i,r,a);break e}cn(i,r,c,a)}r=r.child}return r;case 26:return ic(i,r),i===null?(a=j0(r.type,null,r.pendingProps,null))?r.memoizedState=a:et||(a=r.type,i=r.pendingProps,c=Tc(Pe.current).createElement(a),c[bt]=r,c[an]=i,fn(c,a,i),Ut(c),r.stateNode=c):r.memoizedState=j0(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Dn(r),i===null&&et&&(c=r.stateNode=X0(r.type,r.pendingProps,Pe.current),ln=r,di=!0,y=St,pr(r.type)?(Vh=y,St=pi(c.firstChild)):St=y),cn(i,r,r.pendingProps.children,a),ic(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&et&&((y=c=St)&&(c=W1(c,r.type,r.pendingProps,di),c!==null?(r.stateNode=c,ln=r,St=pi(c.firstChild),di=!1,y=!0):y=!1),y||er(r)),Dn(r),y=r.type,v=r.pendingProps,A=i!==null?i.memoizedProps:null,c=v.children,xh(y,v)?c=null:A!==null&&xh(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=bd(i,r,d1,null,null,a),Il._currentValue=y),ic(i,r),cn(i,r,c,a),r.child;case 6:return i===null&&et&&((i=a=St)&&(a=Z1(a,r.pendingProps,di),a!==null?(r.stateNode=a,ln=r,St=null,i=!0):i=!1),i||er(r)),null;case 13:return Fy(i,r,a);case 4:return He(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=os(r,null,c,a):cn(i,r,c,a),r.child;case 11:return Ny(i,r,r.type,r.pendingProps,a);case 7:return cn(i,r,r.pendingProps,a),r.child;case 8:return cn(i,r,r.pendingProps.children,a),r.child;case 12:return cn(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,tr(r,r.type,c.value),cn(i,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,es(r),y=un(y),c=c(y),r.flags|=1,cn(i,r,c,a),r.child;case 14:return My(i,r,r.type,r.pendingProps,a);case 15:return Dy(i,r,r.type,r.pendingProps,a);case 19:return qy(i,r,a);case 31:return T1(i,r,a);case 22:return Py(i,r,a,r.pendingProps);case 24:return es(r),c=un(qt),i===null?(y=vd(),y===null&&(y=vt,v=gd(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),r.memoizedState={parent:c,cache:y},Td(r),tr(r,qt,y)):((i.lanes&a)!==0&&(Ed(i,r),sl(r,null,null,a),rl()),y=i.memoizedState,v=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),tr(r,qt,c)):(c=v.cache,tr(r,qt,c),c!==y.cache&&md(r,[qt],a,!0))),cn(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function vo(i){i.flags|=4}function nh(i,r,a,c,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(m0())i.flags|=8192;else throw is=zu,_d}else i.flags&=-16777217}function Gy(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ov(r))if(m0())i.flags|=8192;else throw is=zu,_d}function rc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?ri():536870912,i.lanes|=r,Zs|=r)}function dl(i,r){if(!et)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function At(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function S1(i,r,a){var c=r.pendingProps;switch(cd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(r),null;case 1:return At(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),po(qt),gt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Fs(r)?vo(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,dd())),At(r),null;case 26:var y=r.type,v=r.memoizedState;return i===null?(vo(r),v!==null?(At(r),Gy(r,v)):(At(r),nh(r,y,null,c,a))):v?v!==i.memoizedState?(vo(r),At(r),Gy(r,v)):(At(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&vo(r),At(r),nh(r,y,i,c,a)),null;case 27:if(Gn(r),a=Pe.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&vo(r);else{if(!c){if(r.stateNode===null)throw Error(o(166));return At(r),null}i=de.current,Fs(r)?Sg(r):(i=X0(y,c,a),r.stateNode=i,vo(r))}return At(r),null;case 5:if(Gn(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&vo(r);else{if(!c){if(r.stateNode===null)throw Error(o(166));return At(r),null}if(v=de.current,Fs(r))Sg(r);else{var A=Tc(Pe.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[bt]=r,v[an]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=v;e:switch(fn(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&vo(r)}}return At(r),nh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&vo(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(o(166));if(i=Pe.current,Fs(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,y=ln,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[bt]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||F0(i.nodeValue,a)),i||er(r,!0)}else i=Tc(i).createTextNode(c),i[bt]=r,r.stateNode=i}return At(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=Fs(r),a!==null){if(i===null){if(!c)throw Error(o(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[bt]=r}else Zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;At(r),i=!1}else a=dd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Zn(r),r):(Zn(r),null);if((r.flags&128)!==0)throw Error(o(558))}return At(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Fs(r),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(o(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[bt]=r}else Zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;At(r),y=!1}else y=dd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Zn(r),r):(Zn(r),null)}return Zn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),rc(r,r.updateQueue),At(r),null);case 4:return gt(),i===null&&Ch(r.stateNode.containerInfo),At(r),null;case 10:return po(r.type),At(r),null;case 19:if(X(kt),c=r.memoizedState,c===null)return At(r),null;if(y=(r.flags&128)!==0,v=c.rendering,v===null)if(y)dl(c,!1);else{if(Mt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=Yu(i),v!==null){for(r.flags|=128,dl(c,!1),i=v.updateQueue,r.updateQueue=i,rc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)yg(a,i),a=a.sibling;return le(kt,kt.current&1|2),et&&fo(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&we()>cc&&(r.flags|=128,y=!0,dl(c,!1),r.lanes=4194304)}else{if(!y)if(i=Yu(v),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,rc(r,i),dl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!et)return At(r),null}else 2*we()-c.renderingStartTime>cc&&a!==536870912&&(r.flags|=128,y=!0,dl(c,!1),r.lanes=4194304);c.isBackwards?(v.sibling=r.child,r.child=v):(i=c.last,i!==null?i.sibling=v:r.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=we(),i.sibling=null,a=kt.current,le(kt,y?a&1|2:a&1),et&&fo(r,c.treeForkCount),i):(At(r),null);case 22:case 23:return Zn(r),wd(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(At(r),r.subtreeFlags&6&&(r.flags|=8192)):At(r),a=r.updateQueue,a!==null&&rc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&X(ts),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),po(qt),At(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function A1(i,r){switch(cd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return po(qt),gt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Gn(r),null;case 31:if(r.memoizedState!==null){if(Zn(r),r.alternate===null)throw Error(o(340));Zr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Zn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(o(340));Zr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return X(kt),null;case 4:return gt(),null;case 10:return po(r.type),null;case 22:case 23:return Zn(r),wd(),i!==null&&X(ts),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return po(qt),null;case 25:return null;default:return null}}function Hy(i,r){switch(cd(r),r.tag){case 3:po(qt),gt();break;case 26:case 27:case 5:Gn(r);break;case 4:gt();break;case 31:r.memoizedState!==null&&Zn(r);break;case 13:Zn(r);break;case 19:X(kt);break;case 10:po(r.type);break;case 22:case 23:Zn(r),wd(),i!==null&&X(ts);break;case 24:po(qt)}}function hl(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var v=a.create,A=a.inst;c=v(),A.destroy=c}a=a.next}while(a!==y)}}catch(I){dt(r,r.return,I)}}function ar(i,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&i)===i){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=r;var k=a,$=I;try{$()}catch(ie){dt(y,k,ie)}}}c=c.next}while(c!==v)}}catch(ie){dt(r,r.return,ie)}}function $y(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Ug(r,a)}catch(c){dt(i,i.return,c)}}}function Yy(i,r,a){a.props=ss(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){dt(i,r,c)}}function pl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){dt(i,r,y)}}function Hi(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){dt(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){dt(i,r,y)}else a.current=null}function Jy(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){dt(i,i.return,y)}}function ih(i,r,a){try{var c=i.stateNode;$1(c,i.type,a,r),c[an]=r}catch(y){dt(i,i.return,y)}}function Ky(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&pr(i.type)||i.tag===4}function oh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ky(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&pr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rh(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Xt));else if(c!==4&&(c===27&&pr(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(rh(i,r,a),i=i.sibling;i!==null;)rh(i,r,a),i=i.sibling}function sc(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&pr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(sc(i,r,a),i=i.sibling;i!==null;)sc(i,r,a),i=i.sibling}function Qy(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);fn(r,c,a),r[bt]=i,r[an]=a}catch(v){dt(i,i.return,v)}}var _o=!1,Ht=!1,sh=!1,Xy=typeof WeakSet=="function"?WeakSet:Set,jt=null;function C1(i,r){if(i=i.containerInfo,Rh=Rc,i=lg(i),jf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,I=-1,k=-1,$=0,ie=0,se=i,K=null;t:for(;;){for(var Z;se!==a||y!==0&&se.nodeType!==3||(I=A+y),se!==v||c!==0&&se.nodeType!==3||(k=A+c),se.nodeType===3&&(A+=se.nodeValue.length),(Z=se.firstChild)!==null;)K=se,se=Z;for(;;){if(se===i)break t;if(K===a&&++$===y&&(I=A),K===v&&++ie===c&&(k=A),(Z=se.nextSibling)!==null)break;se=K,K=se.parentNode}se=Z}a=I===-1||k===-1?null:{start:I,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(bh={focusedElem:i,selectionRange:a},Rc=!1,jt=r;jt!==null;)if(r=jt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,jt=i;else for(;jt!==null;){switch(r=jt,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=r,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var Se=ss(a.type,y);i=c.getSnapshotBeforeUpdate(Se,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(Me){dt(a,a.return,Me)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)Mh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Mh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=r.sibling,i!==null){i.return=r.return,jt=i;break}jt=r.return}}function Wy(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Eo(i,a),c&4&&hl(5,a);break;case 1:if(Eo(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(A){dt(a,a.return,A)}else{var y=ss(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(A){dt(a,a.return,A)}}c&64&&$y(a),c&512&&pl(a,a.return);break;case 3:if(Eo(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Ug(i,r)}catch(A){dt(a,a.return,A)}}break;case 27:r===null&&c&4&&Qy(a);case 26:case 5:Eo(i,a),r===null&&c&4&&Jy(a),c&512&&pl(a,a.return);break;case 12:Eo(i,a);break;case 31:Eo(i,a),c&4&&e0(i,a);break;case 13:Eo(i,a),c&4&&t0(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=P1.bind(null,a),j1(i,a))));break;case 22:if(c=a.memoizedState!==null||_o,!c){r=r!==null&&r.memoizedState!==null||Ht,y=_o;var v=Ht;_o=c,(Ht=r)&&!v?So(i,a,(a.subtreeFlags&8772)!==0):Eo(i,a),_o=y,Ht=v}break;case 30:break;default:Eo(i,a)}}function Zy(i){var r=i.alternate;r!==null&&(i.alternate=null,Zy(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Or(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ct=null,Ln=!1;function To(i,r,a){for(a=a.child;a!==null;)jy(i,r,a),a=a.sibling}function jy(i,r,a){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(on,a)}catch{}switch(a.tag){case 26:Ht||Hi(a,r),To(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ht||Hi(a,r);var c=Ct,y=Ln;pr(a.type)&&(Ct=a.stateNode,Ln=!1),To(i,r,a),Al(a.stateNode),Ct=c,Ln=y;break;case 5:Ht||Hi(a,r);case 6:if(c=Ct,y=Ln,Ct=null,To(i,r,a),Ct=c,Ln=y,Ct!==null)if(Ln)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(a.stateNode)}catch(v){dt(a,r,v)}else try{Ct.removeChild(a.stateNode)}catch(v){dt(a,r,v)}break;case 18:Ct!==null&&(Ln?(i=Ct,$0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),sa(i)):$0(Ct,a.stateNode));break;case 4:c=Ct,y=Ln,Ct=a.stateNode.containerInfo,Ln=!0,To(i,r,a),Ct=c,Ln=y;break;case 0:case 11:case 14:case 15:ar(2,a,r),Ht||ar(4,a,r),To(i,r,a);break;case 1:Ht||(Hi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Yy(a,r,c)),To(i,r,a);break;case 21:To(i,r,a);break;case 22:Ht=(c=Ht)||a.memoizedState!==null,To(i,r,a),Ht=c;break;default:To(i,r,a)}}function e0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{sa(i)}catch(a){dt(r,r.return,a)}}}function t0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{sa(i)}catch(a){dt(r,r.return,a)}}function w1(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Xy),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Xy),r;default:throw Error(o(435,i.tag))}}function ac(i,r){var a=w1(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=V1.bind(null,i,c);c.then(y,y)}})}function On(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=i,A=r,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(pr(I.type)){Ct=I.stateNode,Ln=!1;break e}break;case 5:Ct=I.stateNode,Ln=!1;break e;case 3:case 4:Ct=I.stateNode.containerInfo,Ln=!0;break e}I=I.return}if(Ct===null)throw Error(o(160));jy(v,A,y),Ct=null,Ln=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)n0(r,i),r=r.sibling}var Ii=null;function n0(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:On(r,i),Fn(i),c&4&&(ar(3,i,i.return),hl(3,i),ar(5,i,i.return));break;case 1:On(r,i),Fn(i),c&512&&(Ht||a===null||Hi(a,a.return)),c&64&&_o&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=Ii;if(On(r,i),Fn(i),c&512&&(Ht||a===null||Hi(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[no]||v[bt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),fn(v,c,a),v[bt]=i,Ut(v),c=v;break e;case"link":var A=nv("link","href",y).get(c+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(v=A[I],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}v=y.createElement(c),fn(v,c,a),y.head.appendChild(v);break;case"meta":if(A=nv("meta","content",y).get(c+(a.content||""))){for(I=0;I<A.length;I++)if(v=A[I],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}v=y.createElement(c),fn(v,c,a),y.head.appendChild(v);break;default:throw Error(o(468,c))}v[bt]=i,Ut(v),c=v}i.stateNode=c}else iv(y,i.type,i.stateNode);else i.stateNode=tv(y,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?iv(y,i.type,i.stateNode):tv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&ih(i,i.memoizedProps,a.memoizedProps)}break;case 27:On(r,i),Fn(i),c&512&&(Ht||a===null||Hi(a,a.return)),a!==null&&c&4&&ih(i,i.memoizedProps,a.memoizedProps);break;case 5:if(On(r,i),Fn(i),c&512&&(Ht||a===null||Hi(a,a.return)),i.flags&32){y=i.stateNode;try{ai(y,"")}catch(Se){dt(i,i.return,Se)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,ih(i,y,a!==null?a.memoizedProps:y)),c&1024&&(sh=!0);break;case 6:if(On(r,i),Fn(i),c&4){if(i.stateNode===null)throw Error(o(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(Se){dt(i,i.return,Se)}}break;case 3:if(Ac=null,y=Ii,Ii=Ec(r.containerInfo),On(r,i),Ii=y,Fn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{sa(r.containerInfo)}catch(Se){dt(i,i.return,Se)}sh&&(sh=!1,i0(i));break;case 4:c=Ii,Ii=Ec(i.stateNode.containerInfo),On(r,i),Fn(i),Ii=c;break;case 12:On(r,i),Fn(i);break;case 31:On(r,i),Fn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 13:On(r,i),Fn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uc=we()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 22:y=i.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,$=_o,ie=Ht;if(_o=$||y,Ht=ie||k,On(r,i),Ht=ie,_o=$,Fn(i),c&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||k||_o||Ht||as(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){k=a=r;try{if(v=k.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=k.stateNode;var se=k.memoizedProps.style,K=se!=null&&se.hasOwnProperty("display")?se.display:null;I.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Se){dt(k,k.return,Se)}}}else if(r.tag===6){if(a===null){k=r;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(Se){dt(k,k.return,Se)}}}else if(r.tag===18){if(a===null){k=r;try{var Z=k.stateNode;y?Y0(Z,!0):Y0(k.stateNode,!1)}catch(Se){dt(k,k.return,Se)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,ac(i,a))));break;case 19:On(r,i),Fn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 30:break;case 21:break;default:On(r,i),Fn(i)}}function Fn(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(Ky(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var y=a.stateNode,v=oh(i);sc(i,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(ai(A,""),a.flags&=-33);var I=oh(i);sc(i,I,A);break;case 3:case 4:var k=a.stateNode.containerInfo,$=oh(i);rh(i,$,k);break;default:throw Error(o(161))}}catch(ie){dt(i,i.return,ie)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function i0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;i0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Eo(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Wy(i,r.alternate,r),r=r.sibling}function as(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ar(4,r,r.return),as(r);break;case 1:Hi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Yy(r,r.return,a),as(r);break;case 27:Al(r.stateNode);case 26:case 5:Hi(r,r.return),as(r);break;case 22:r.memoizedState===null&&as(r);break;case 30:as(r);break;default:as(r)}i=i.sibling}}function So(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=i,v=r,A=v.flags;switch(v.tag){case 0:case 11:case 15:So(y,v,a),hl(4,v);break;case 1:if(So(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch($){dt(c,c.return,$)}if(c=v,y=c.updateQueue,y!==null){var I=c.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)Vg(k[y],I)}catch($){dt(c,c.return,$)}}a&&A&64&&$y(v),pl(v,v.return);break;case 27:Qy(v);case 26:case 5:So(y,v,a),a&&c===null&&A&4&&Jy(v),pl(v,v.return);break;case 12:So(y,v,a);break;case 31:So(y,v,a),a&&A&4&&e0(y,v);break;case 13:So(y,v,a),a&&A&4&&t0(y,v);break;case 22:v.memoizedState===null&&So(y,v,a),pl(v,v.return);break;case 30:break;default:So(y,v,a)}r=r.sibling}}function ah(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&el(a))}function lh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&el(i))}function Ri(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)o0(i,r,a,c),r=r.sibling}function o0(i,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Ri(i,r,a,c),y&2048&&hl(9,r);break;case 1:Ri(i,r,a,c);break;case 3:Ri(i,r,a,c),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&el(i)));break;case 12:if(y&2048){Ri(i,r,a,c),i=r.stateNode;try{var v=r.memoizedProps,A=v.id,I=v.onPostCommit;typeof I=="function"&&I(A,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){dt(r,r.return,k)}}else Ri(i,r,a,c);break;case 31:Ri(i,r,a,c);break;case 13:Ri(i,r,a,c);break;case 23:break;case 22:v=r.stateNode,A=r.alternate,r.memoizedState!==null?v._visibility&2?Ri(i,r,a,c):ml(i,r):v._visibility&2?Ri(i,r,a,c):(v._visibility|=2,Qs(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&ah(A,r);break;case 24:Ri(i,r,a,c),y&2048&&lh(r.alternate,r);break;default:Ri(i,r,a,c)}}function Qs(i,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,A=r,I=a,k=c,$=A.flags;switch(A.tag){case 0:case 11:case 15:Qs(v,A,I,k,y),hl(8,A);break;case 23:break;case 22:var ie=A.stateNode;A.memoizedState!==null?ie._visibility&2?Qs(v,A,I,k,y):ml(v,A):(ie._visibility|=2,Qs(v,A,I,k,y)),y&&$&2048&&ah(A.alternate,A);break;case 24:Qs(v,A,I,k,y),y&&$&2048&&lh(A.alternate,A);break;default:Qs(v,A,I,k,y)}r=r.sibling}}function ml(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,y=c.flags;switch(c.tag){case 22:ml(a,c),y&2048&&ah(c.alternate,c);break;case 24:ml(a,c),y&2048&&lh(c.alternate,c);break;default:ml(a,c)}r=r.sibling}}var gl=8192;function Xs(i,r,a){if(i.subtreeFlags&gl)for(i=i.child;i!==null;)r0(i,r,a),i=i.sibling}function r0(i,r,a){switch(i.tag){case 26:Xs(i,r,a),i.flags&gl&&i.memoizedState!==null&&fw(a,Ii,i.memoizedState,i.memoizedProps);break;case 5:Xs(i,r,a);break;case 3:case 4:var c=Ii;Ii=Ec(i.stateNode.containerInfo),Xs(i,r,a),Ii=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=gl,gl=16777216,Xs(i,r,a),gl=c):Xs(i,r,a));break;default:Xs(i,r,a)}}function s0(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function yl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];jt=c,l0(c,i)}s0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)a0(i),i=i.sibling}function a0(i){switch(i.tag){case 0:case 11:case 15:yl(i),i.flags&2048&&ar(9,i,i.return);break;case 3:yl(i);break;case 12:yl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,lc(i)):yl(i);break;default:yl(i)}}function lc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];jt=c,l0(c,i)}s0(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ar(8,r,r.return),lc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,lc(r));break;default:lc(r)}i=i.sibling}}function l0(i,r){for(;jt!==null;){var a=jt;switch(a.tag){case 0:case 11:case 15:ar(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:el(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,jt=c;else e:for(a=i;jt!==null;){c=jt;var y=c.sibling,v=c.return;if(Zy(c),c===a){jt=null;break e}if(y!==null){y.return=v,jt=y;break e}jt=v}}}var I1={getCacheForType:function(i){var r=un(qt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return un(qt).controller.signal}},R1=typeof WeakMap=="function"?WeakMap:Map,at=0,vt=null,Je=null,Xe=0,ft=0,jn=null,lr=!1,Ws=!1,uh=!1,Ao=0,Mt=0,ur=0,ls=0,ch=0,ei=0,Zs=0,vl=null,Bn=null,fh=!1,uc=0,u0=0,cc=1/0,fc=null,cr=null,Kt=0,fr=null,js=null,Co=0,dh=0,hh=null,c0=null,_l=0,ph=null;function ti(){return(at&2)!==0&&Xe!==0?Xe&-Xe:ee.T!==null?Th():to()}function f0(){if(ei===0)if((Xe&536870912)===0||et){var i=$n;$n<<=1,($n&3932160)===0&&($n=262144),ei=i}else ei=536870912;return i=Wn.current,i!==null&&(i.flags|=32),ei}function qn(i,r,a){(i===vt&&(ft===2||ft===9)||i.cancelPendingCommit!==null)&&(ea(i,0),dr(i,Xe,ei,!1)),gn(i,a),((at&2)===0||i!==vt)&&(i===vt&&((at&2)===0&&(ls|=a),Mt===4&&dr(i,Xe,ei,!1)),$i(i))}function d0(i,r,a){if((at&6)!==0)throw Error(o(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||Si(i,r),y=c?N1(i,r):gh(i,r,!0),v=c;do{if(y===0){Ws&&!c&&dr(i,r,0,!1);break}else{if(a=i.current.alternate,v&&!b1(a)){y=gh(i,r,!1),v=!1;continue}if(y===2){if(v=r,i.errorRecoveryDisabledLanes&v)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var I=i;y=vl;var k=I.current.memoizedState.isDehydrated;if(k&&(ea(I,A).flags|=256),A=gh(I,A,!1),A!==2){if(uh&&!k){I.errorRecoveryDisabledLanes|=v,ls|=v,y=4;break e}v=Bn,Bn=y,v!==null&&(Bn===null?Bn=v:Bn.push.apply(Bn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){ea(i,0),dr(i,r,0,!0);break}e:{switch(c=i,v=y,v){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:dr(c,r,ei,!lr);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(y=uc+300-we(),10<y)){if(dr(c,r,ei,!lr),An(c,0,!0)!==0)break e;Co=r,c.timeoutHandle=G0(h0.bind(null,c,a,Bn,fc,fh,r,ei,ls,Zs,lr,v,"Throttled",-0,0),y);break e}h0(c,a,Bn,fc,fh,r,ei,ls,Zs,lr,v,null,-0,0)}}break}while(!0);$i(i)}function h0(i,r,a,c,y,v,A,I,k,$,ie,se,K,Z){if(i.timeoutHandle=-1,se=r.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xt},r0(r,v,se);var Se=(v&62914560)===v?uc-we():(v&4194048)===v?u0-we():0;if(Se=dw(se,Se),Se!==null){Co=v,i.cancelPendingCommit=Se(E0.bind(null,i,r,v,a,c,y,A,I,k,ie,se,null,K,Z)),dr(i,v,A,!$);return}}E0(i,r,v,a,c,y,A,I,k)}function b1(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!Qn(v(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function dr(i,r,a,c){r&=~ch,r&=~ls,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var y=r;0<y;){var v=31-rn(y),A=1<<v;c[v]=-1,y&=~A}a!==0&&Pa(i,a,r)}function dc(){return(at&6)===0?(Tl(0),!1):!0}function mh(){if(Je!==null){if(ft===0)var i=Je.return;else i=Je,ho=jr=null,Md(i),Hs=null,nl=0,i=Je;for(;i!==null;)Hy(i.alternate,i),i=i.return;Je=null}}function ea(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,K1(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Co=0,mh(),vt=i,Je=a=co(i.current,null),Xe=r,ft=0,jn=null,lr=!1,Ws=Si(i,r),uh=!1,Zs=ei=ch=ls=ur=Mt=0,Bn=vl=null,fh=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var y=31-rn(c),v=1<<y;r|=i[y],c&=~v}return Ao=r,Pu(),a}function p0(i,r){Be=null,ee.H=cl,r===Gs||r===qu?(r=Ng(),ft=3):r===_d?(r=Ng(),ft=4):ft=r===Jd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,jn=r,Je===null&&(Mt=1,tc(i,ui(r,i.current)))}function m0(){var i=Wn.current;return i===null?!0:(Xe&4194048)===Xe?hi===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?i===hi:!1}function g0(){var i=ee.H;return ee.H=cl,i===null?cl:i}function y0(){var i=ee.A;return ee.A=I1,i}function hc(){Mt=4,lr||(Xe&4194048)!==Xe&&Wn.current!==null||(Ws=!0),(ur&134217727)===0&&(ls&134217727)===0||vt===null||dr(vt,Xe,ei,!1)}function gh(i,r,a){var c=at;at|=2;var y=g0(),v=y0();(vt!==i||Xe!==r)&&(fc=null,ea(i,r)),r=!1;var A=Mt;e:do try{if(ft!==0&&Je!==null){var I=Je,k=jn;switch(ft){case 8:mh(),A=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(r=!0);var $=ft;if(ft=0,jn=null,ta(i,I,k,$),a&&Ws){A=0;break e}break;default:$=ft,ft=0,jn=null,ta(i,I,k,$)}}x1(),A=Mt;break}catch(ie){p0(i,ie)}while(!0);return r&&i.shellSuspendCounter++,ho=jr=null,at=c,ee.H=y,ee.A=v,Je===null&&(vt=null,Xe=0,Pu()),A}function x1(){for(;Je!==null;)v0(Je)}function N1(i,r){var a=at;at|=2;var c=g0(),y=y0();vt!==i||Xe!==r?(fc=null,cc=we()+500,ea(i,r)):Ws=Si(i,r);e:do try{if(ft!==0&&Je!==null){r=Je;var v=jn;t:switch(ft){case 1:ft=0,jn=null,ta(i,r,v,1);break;case 2:case 9:if(bg(v)){ft=0,jn=null,_0(r);break}r=function(){ft!==2&&ft!==9||vt!==i||(ft=7),$i(i)},v.then(r,r);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:bg(v)?(ft=0,jn=null,_0(r)):(ft=0,jn=null,ta(i,r,v,7));break;case 5:var A=null;switch(Je.tag){case 26:A=Je.memoizedState;case 5:case 27:var I=Je;if(A?ov(A):I.stateNode.complete){ft=0,jn=null;var k=I.sibling;if(k!==null)Je=k;else{var $=I.return;$!==null?(Je=$,pc($)):Je=null}break t}}ft=0,jn=null,ta(i,r,v,5);break;case 6:ft=0,jn=null,ta(i,r,v,6);break;case 8:mh(),Mt=6;break e;default:throw Error(o(462))}}M1();break}catch(ie){p0(i,ie)}while(!0);return ho=jr=null,ee.H=c,ee.A=y,at=a,Je!==null?0:(vt=null,Xe=0,Pu(),Mt)}function M1(){for(;Je!==null&&!pe();)v0(Je)}function v0(i){var r=zy(i.alternate,i,Ao);i.memoizedProps=i.pendingProps,r===null?pc(i):Je=r}function _0(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=ky(a,r,r.pendingProps,r.type,void 0,Xe);break;case 11:r=ky(a,r,r.pendingProps,r.type.render,r.ref,Xe);break;case 5:Md(r);default:Hy(a,r),r=Je=yg(r,Ao),r=zy(a,r,Ao)}i.memoizedProps=i.pendingProps,r===null?pc(i):Je=r}function ta(i,r,a,c){ho=jr=null,Md(r),Hs=null,nl=0;var y=r.return;try{if(_1(i,y,r,a,Xe)){Mt=1,tc(i,ui(a,i.current)),Je=null;return}}catch(v){if(y!==null)throw Je=y,v;Mt=1,tc(i,ui(a,i.current)),Je=null;return}r.flags&32768?(et||c===1?i=!0:Ws||(Xe&536870912)!==0?i=!1:(lr=i=!0,(c===2||c===9||c===3||c===6)&&(c=Wn.current,c!==null&&c.tag===13&&(c.flags|=16384))),T0(r,i)):pc(r)}function pc(i){var r=i;do{if((r.flags&32768)!==0){T0(r,lr);return}i=r.return;var a=S1(r.alternate,r,Ao);if(a!==null){Je=a;return}if(r=r.sibling,r!==null){Je=r;return}Je=r=i}while(r!==null);Mt===0&&(Mt=5)}function T0(i,r){do{var a=A1(i.alternate,i);if(a!==null){a.flags&=32767,Je=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Je=i;return}Je=i=a}while(i!==null);Mt=6,Je=null}function E0(i,r,a,c,y,v,A,I,k){i.cancelPendingCommit=null;do mc();while(Kt!==0);if((at&6)!==0)throw Error(o(327));if(r!==null){if(r===i.current)throw Error(o(177));if(v=r.lanes|r.childLanes,v|=od,yt(i,a,v,A,I,k),i===vt&&(Je=vt=null,Xe=0),js=r,fr=i,Co=a,dh=v,hh=y,c0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,U1(fe,function(){return I0(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null,y=he.p,he.p=2,A=at,at|=4;try{C1(i,r,a)}finally{at=A,he.p=y,ee.T=c}}Kt=1,S0(),A0(),C0()}}function S0(){if(Kt===1){Kt=0;var i=fr,r=js,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ee.T,ee.T=null;var c=he.p;he.p=2;var y=at;at|=4;try{n0(r,i);var v=bh,A=lg(i.containerInfo),I=v.focusedElem,k=v.selectionRange;if(A!==I&&I&&I.ownerDocument&&ag(I.ownerDocument.documentElement,I)){if(k!==null&&jf(I)){var $=k.start,ie=k.end;if(ie===void 0&&(ie=$),"selectionStart"in I)I.selectionStart=$,I.selectionEnd=Math.min(ie,I.value.length);else{var se=I.ownerDocument||document,K=se&&se.defaultView||window;if(K.getSelection){var Z=K.getSelection(),Se=I.textContent.length,Me=Math.min(k.start,Se),mt=k.end===void 0?Me:Math.min(k.end,Se);!Z.extend&&Me>mt&&(A=mt,mt=Me,Me=A);var z=sg(I,Me),B=sg(I,mt);if(z&&B&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==B.node||Z.focusOffset!==B.offset)){var H=se.createRange();H.setStart(z.node,z.offset),Z.removeAllRanges(),Me>mt?(Z.addRange(H),Z.extend(B.node,B.offset)):(H.setEnd(B.node,B.offset),Z.addRange(H))}}}}for(se=[],Z=I;Z=Z.parentNode;)Z.nodeType===1&&se.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<se.length;I++){var re=se[I];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Rc=!!Rh,bh=Rh=null}finally{at=y,he.p=c,ee.T=a}}i.current=r,Kt=2}}function A0(){if(Kt===2){Kt=0;var i=fr,r=js,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ee.T,ee.T=null;var c=he.p;he.p=2;var y=at;at|=4;try{Wy(i,r.alternate,r)}finally{at=y,he.p=c,ee.T=a}}Kt=3}}function C0(){if(Kt===4||Kt===3){Kt=0,Ae();var i=fr,r=js,a=Co,c=c0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Kt=5:(Kt=0,js=fr=null,w0(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(cr=null),Ua(a),r=r.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(on,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=ee.T,y=he.p,he.p=2,ee.T=null;try{for(var v=i.onRecoverableError,A=0;A<c.length;A++){var I=c[A];v(I.value,{componentStack:I.stack})}}finally{ee.T=r,he.p=y}}(Co&3)!==0&&mc(),$i(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===ph?_l++:(_l=0,ph=i):_l=0,Tl(0)}}function w0(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,el(r)))}function mc(){return S0(),A0(),C0(),I0()}function I0(){if(Kt!==5)return!1;var i=fr,r=dh;dh=0;var a=Ua(Co),c=ee.T,y=he.p;try{he.p=32>a?32:a,ee.T=null,a=hh,hh=null;var v=fr,A=Co;if(Kt=0,js=fr=null,Co=0,(at&6)!==0)throw Error(o(331));var I=at;if(at|=4,a0(v.current),o0(v,v.current,A,a),at=I,Tl(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(on,v)}catch{}return!0}finally{he.p=y,ee.T=c,w0(i,r)}}function R0(i,r,a){r=ui(a,r),r=Yd(i.stateNode,r,2),i=or(i,r,2),i!==null&&(gn(i,2),$i(i))}function dt(i,r,a){if(i.tag===3)R0(i,i,a);else for(;r!==null;){if(r.tag===3){R0(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(cr===null||!cr.has(c))){i=ui(a,i),a=by(2),c=or(r,a,2),c!==null&&(xy(a,c,r,i),gn(c,2),$i(c));break}}r=r.return}}function yh(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new R1;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(uh=!0,y.add(a),i=D1.bind(null,i,r,a),r.then(i,i))}function D1(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,vt===i&&(Xe&a)===a&&(Mt===4||Mt===3&&(Xe&62914560)===Xe&&300>we()-uc?(at&2)===0&&ea(i,0):ch|=a,Zs===Xe&&(Zs=0)),$i(i)}function b0(i,r){r===0&&(r=ri()),i=Xr(i,r),i!==null&&(gn(i,r),$i(i))}function P1(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),b0(i,a)}function V1(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(r),b0(i,a)}function U1(i,r){return Ei(i,r)}var gc=null,na=null,vh=!1,yc=!1,_h=!1,hr=0;function $i(i){i!==na&&i.next===null&&(na===null?gc=na=i:na=na.next=i),yc=!0,vh||(vh=!0,L1())}function Tl(i,r){if(!_h&&yc){_h=!0;do for(var a=!1,c=gc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,I=c.pingedLanes;v=(1<<31-rn(42|i)+1)-1,v&=y&~(A&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,D0(c,v))}else v=Xe,v=An(c,c===vt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Si(c,v)||(a=!0,D0(c,v));c=c.next}while(a);_h=!1}}function k1(){x0()}function x0(){yc=vh=!1;var i=0;hr!==0&&J1()&&(i=hr);for(var r=we(),a=null,c=gc;c!==null;){var y=c.next,v=N0(c,r);v===0?(c.next=null,a===null?gc=y:a.next=y,y===null&&(na=a)):(a=c,(i!==0||(v&3)!==0)&&(yc=!0)),c=y}Kt!==0&&Kt!==5||Tl(i),hr!==0&&(hr=0)}function N0(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var A=31-rn(v),I=1<<A,k=y[A];k===-1?((I&a)===0||(I&c)!==0)&&(y[A]=eo(I,r)):k<=r&&(i.expiredLanes|=I),v&=~I}if(r=vt,a=Xe,a=An(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(ft===2||ft===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Pn(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Si(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&Pn(c),Ua(a)){case 2:case 8:a=ce;break;case 32:a=fe;break;case 268435456:a=Ne;break;default:a=fe}return c=M0.bind(null,i),a=Ei(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&Pn(c),i.callbackPriority=2,i.callbackNode=null,2}function M0(i,r){if(Kt!==0&&Kt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(mc()&&i.callbackNode!==a)return null;var c=Xe;return c=An(i,i===vt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(d0(i,c,r),N0(i,we()),i.callbackNode!=null&&i.callbackNode===a?M0.bind(null,i):null)}function D0(i,r){if(mc())return null;d0(i,r,!0)}function L1(){Q1(function(){(at&6)!==0?Ei(ne,k1):x0()})}function Th(){if(hr===0){var i=qs;i===0&&(i=Vi,Vi<<=1,(Vi&261888)===0&&(Vi=256)),hr=i}return hr}function P0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Fi(""+i)}function V0(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function O1(i,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var v=P0((y[an]||null).action),A=c.submitter;A&&(r=(r=A[an]||null)?P0(r.formAction):A.getAttribute("formAction"),r!==null&&(v=r,A=null));var I=new Gr("action","action",null,c,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hr!==0){var k=A?V0(y,A):new FormData(y);Bd(a,{pending:!0,data:k,method:y.method,action:v},null,k)}}else typeof v=="function"&&(I.preventDefault(),k=A?V0(y,A):new FormData(y),Bd(a,{pending:!0,data:k,method:y.method,action:v},v,k))},currentTarget:y}]})}}for(var Eh=0;Eh<id.length;Eh++){var Sh=id[Eh],F1=Sh.toLowerCase(),B1=Sh[0].toUpperCase()+Sh.slice(1);wi(F1,"on"+B1)}wi(fg,"onAnimationEnd"),wi(dg,"onAnimationIteration"),wi(hg,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(n1,"onTransitionRun"),wi(i1,"onTransitionStart"),wi(o1,"onTransitionCancel"),wi(pg,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function U0(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var A=c.length-1;0<=A;A--){var I=c[A],k=I.instance,$=I.currentTarget;if(I=I.listener,k!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=$;try{v(y)}catch(ie){Du(ie)}y.currentTarget=null,v=k}else for(A=0;A<c.length;A++){if(I=c[A],k=I.instance,$=I.currentTarget,I=I.listener,k!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=$;try{v(y)}catch(ie){Du(ie)}y.currentTarget=null,v=k}}}}function Ke(i,r){var a=r[Oo];a===void 0&&(a=r[Oo]=new Set);var c=i+"__bubble";a.has(c)||(k0(r,i,2,!1),a.add(c))}function Ah(i,r,a){var c=0;r&&(c|=4),k0(a,i,c,r)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Ch(i){if(!i[vc]){i[vc]=!0,As.forEach(function(a){a!=="selectionchange"&&(q1.has(a)||Ah(a,!1,i),Ah(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[vc]||(r[vc]=!0,Ah("selectionchange",!1,r))}}function k0(i,r,a,c){switch(fv(r)){case 2:var y=mw;break;case 8:y=gw;break;default:y=Fh}a=y.bind(null,r,a,i),y=void 0,!Ga||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function wh(i,r,a,c,y){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var k=A.tag;if((k===3||k===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=io(I),A===null)return;if(k=A.tag,k===5||k===6||k===26||k===27){c=v=A;continue e}I=I.parentNode}}c=c.return}gu(function(){var $=v,ie=bs(a),se=[];e:{var K=mg.get(i);if(K!==void 0){var Z=Gr,Se=i;switch(i){case"keypress":if(zr(a)===0)break e;case"keydown":case"keyup":Z=wu;break;case"focusin":Se="focus",Z=Ko;break;case"focusout":Se="blur",Z=Ko;break;case"beforeblur":case"afterblur":Z=Ko;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Ru;break;case fg:case dg:case hg:Z=Ms;break;case pg:Z=Ds;break;case"scroll":case"scrollend":Z=yu;break;case"wheel":Z=xu;break;case"copy":case"cut":case"paste":Z=Eu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Ka;break;case"toggle":case"beforetoggle":Z=Xo}var Me=(r&4)!==0,mt=!Me&&(i==="scroll"||i==="scrollend"),z=Me?K!==null?K+"Capture":null:K;Me=[];for(var B=$,H;B!==null;){var re=B;if(H=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||H===null||z===null||(re=Un(B,z),re!=null&&Me.push(Sl(B,re,H))),mt)break;B=B.return}0<Me.length&&(K=new Z(K,Se,null,a,ie),se.push({event:K,listeners:Me}))}}if((r&7)===0){e:{if(K=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",K&&a!==Rs&&(Se=a.relatedTarget||a.fromElement)&&(io(Se)||Se[ki]))break e;if((Z||K)&&(K=ie.window===ie?ie:(K=ie.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(Se=a.relatedTarget||a.toElement,Z=$,Se=Se?io(Se):null,Se!==null&&(mt=l(Se),Me=Se.tag,Se!==mt||Me!==5&&Me!==27&&Me!==6)&&(Se=null)):(Z=null,Se=$),Z!==Se)){if(Me=vu,re="onMouseLeave",z="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(Me=Ka,re="onPointerLeave",z="onPointerEnter",B="pointer"),mt=Z==null?K:Fr(Z),H=Se==null?K:Fr(Se),K=new Me(re,B+"leave",Z,a,ie),K.target=mt,K.relatedTarget=H,re=null,io(ie)===$&&(Me=new Me(z,B+"enter",Se,a,ie),Me.target=H,Me.relatedTarget=mt,re=Me),mt=re,Z&&Se)t:{for(Me=z1,z=Z,B=Se,H=0,re=z;re;re=Me(re))H++;re=0;for(var Re=B;Re;Re=Me(Re))re++;for(;0<H-re;)z=Me(z),H--;for(;0<re-H;)B=Me(B),re--;for(;H--;){if(z===B||B!==null&&z===B.alternate){Me=z;break t}z=Me(z),B=Me(B)}Me=null}else Me=null;Z!==null&&L0(se,K,Z,Me,!1),Se!==null&&mt!==null&&L0(se,mt,Se,Me,!0)}}e:{if(K=$?Fr($):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var ot=eg;else if(kn(K))if(tg)ot=jC;else{ot=WC;var Ce=XC}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&qa($.elementType)&&(ot=eg):ot=ZC;if(ot&&(ot=ot(i,$))){Jr(se,ot,a,ie);break e}Ce&&Ce(i,K,$),i==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&Is(K,"number",K.value)}switch(Ce=$?Fr($):window,i){case"focusin":(kn(Ce)||Ce.contentEditable==="true")&&(Ps=Ce,ed=$,Wa=null);break;case"focusout":Wa=ed=Ps=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,ug(se,a,ie);break;case"selectionchange":if(t1)break;case"keydown":case"keyup":ug(se,a,ie)}var ze;if(T)e:{switch(i){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else $e?lt(i,a)&&(We="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(We="onCompositionStart");We&&(G&&a.locale!=="ko"&&($e||We!=="onCompositionStart"?We==="onCompositionEnd"&&$e&&(ze=Ho()):(Kn=ie,xs="value"in Kn?Kn.value:Kn.textContent,$e=!0)),Ce=_c($,We),0<Ce.length&&(We=new $a(We,i,null,a,ie),se.push({event:We,listeners:Ce}),ze?We.data=ze:(ze=Bt(a),ze!==null&&(We.data=ze)))),(ze=b?Wt(i,a):Zt(i,a))&&(We=_c($,"onBeforeInput"),0<We.length&&(Ce=new $a("onBeforeInput","beforeinput",null,a,ie),se.push({event:Ce,listeners:We}),Ce.data=ze)),O1(se,i,$,a,ie)}U0(se,r)})}function Sl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function _c(i,r){for(var a=r+"Capture",c=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Un(i,a),y!=null&&c.unshift(Sl(i,y,v)),y=Un(i,r),y!=null&&c.push(Sl(i,y,v))),i.tag===3)return c;i=i.return}return[]}function z1(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function L0(i,r,a,c,y){for(var v=r._reactName,A=[];a!==null&&a!==c;){var I=a,k=I.alternate,$=I.stateNode;if(I=I.tag,k!==null&&k===c)break;I!==5&&I!==26&&I!==27||$===null||(k=$,y?($=Un(a,v),$!=null&&A.unshift(Sl(a,$,k))):y||($=Un(a,v),$!=null&&A.push(Sl(a,$,k)))),a=a.return}A.length!==0&&i.push({event:r,listeners:A})}var G1=/\r\n?/g,H1=/\u0000|\uFFFD/g;function O0(i){return(typeof i=="string"?i:""+i).replace(G1,`
`).replace(H1,"")}function F0(i,r){return r=O0(r),O0(i)===r}function pt(i,r,a,c,y,v){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||ai(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&ai(i,""+c);break;case"className":qo(i,"class",c);break;case"tabIndex":qo(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":qo(i,a,c);break;case"style":pu(i,c,v);break;case"data":if(r!=="object"){qo(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Fi(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(r!=="input"&&pt(i,r,"name",y.name,y,null),pt(i,r,"formEncType",y.formEncType,y,null),pt(i,r,"formMethod",y.formMethod,y,null),pt(i,r,"formTarget",y.formTarget,y,null)):(pt(i,r,"encType",y.encType,y,null),pt(i,r,"method",y.method,y,null),pt(i,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Fi(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Xt);break;case"onScroll":c!=null&&Ke("scroll",i);break;case"onScrollEnd":c!=null&&Ke("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Fi(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Ke("beforetoggle",i),Ke("toggle",i),Bo(i,"popover",c);break;case"xlinkActuate":si(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":si(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":si(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":si(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":si(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":si(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":si(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":si(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":si(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Bo(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Kf.get(a)||a,Bo(i,a,c))}}function Ih(i,r,a,c,y,v){switch(a){case"style":pu(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof c=="string"?ai(i,c):(typeof c=="number"||typeof c=="bigint")&&ai(i,""+c);break;case"onScroll":c!=null&&Ke("scroll",i);break;case"onScrollEnd":c!=null&&Ke("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Xt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),v=i[an]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(r,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Bo(i,a,c)}}}function fn(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",i),Ke("load",i);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:pt(i,r,v,A,a,null)}}y&&pt(i,r,"srcSet",a.srcSet,a,null),c&&pt(i,r,"src",a.src,a,null);return;case"input":Ke("invalid",i);var I=v=A=y=null,k=null,$=null;for(c in a)if(a.hasOwnProperty(c)){var ie=a[c];if(ie!=null)switch(c){case"name":y=ie;break;case"type":A=ie;break;case"checked":k=ie;break;case"defaultChecked":$=ie;break;case"value":v=ie;break;case"defaultValue":I=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(o(137,r));break;default:pt(i,r,c,ie,a,null)}}Br(i,v,I,k,$,A,y,!1);return;case"select":Ke("invalid",i),c=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":v=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:pt(i,r,y,I,a,null)}r=v,a=A,i.multiple=!!c,r!=null?it(i,!!c,r,!1):a!=null&&it(i,!!c,a,!0);return;case"textarea":Ke("invalid",i),v=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(91));break;default:pt(i,r,A,I,a,null)}Go(i,c,y,v);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(c=a[k],c!=null))switch(k){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:pt(i,r,k,c,a,null)}return;case"dialog":Ke("beforetoggle",i),Ke("toggle",i),Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":Ke("load",i);break;case"video":case"audio":for(c=0;c<El.length;c++)Ke(El[c],i);break;case"image":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"embed":case"source":case"link":Ke("error",i),Ke("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(c=a[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:pt(i,r,$,c,a,null)}return;default:if(qa(r)){for(ie in a)a.hasOwnProperty(ie)&&(c=a[ie],c!==void 0&&Ih(i,r,ie,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&pt(i,r,I,c,a,null))}function $1(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,I=null,k=null,$=null,ie=null;for(Z in a){var se=a[Z];if(a.hasOwnProperty(Z)&&se!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":k=se;default:c.hasOwnProperty(Z)||pt(i,r,Z,null,c,se)}}for(var K in c){var Z=c[K];if(se=a[K],c.hasOwnProperty(K)&&(Z!=null||se!=null))switch(K){case"type":v=Z;break;case"name":y=Z;break;case"checked":$=Z;break;case"defaultChecked":ie=Z;break;case"value":A=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,r));break;default:Z!==se&&pt(i,r,K,Z,c,se)}}zo(i,A,I,k,$,ie,v,y);return;case"select":Z=A=I=K=null;for(v in a)if(k=a[v],a.hasOwnProperty(v)&&k!=null)switch(v){case"value":break;case"multiple":Z=k;default:c.hasOwnProperty(v)||pt(i,r,v,null,c,k)}for(y in c)if(v=c[y],k=a[y],c.hasOwnProperty(y)&&(v!=null||k!=null))switch(y){case"value":K=v;break;case"defaultValue":I=v;break;case"multiple":A=v;default:v!==k&&pt(i,r,y,v,c,k)}r=I,a=A,c=Z,K!=null?it(i,!!a,K,!1):!!c!=!!a&&(r!=null?it(i,!!a,r,!0):it(i,!!a,a?[]:"",!1));return;case"textarea":Z=K=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:pt(i,r,I,null,c,y)}for(A in c)if(y=c[A],v=a[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":K=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==v&&pt(i,r,A,y,c,v)}qr(i,K,Z);return;case"option":for(var Se in a)if(K=a[Se],a.hasOwnProperty(Se)&&K!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":i.selected=!1;break;default:pt(i,r,Se,null,c,K)}for(k in c)if(K=c[k],Z=a[k],c.hasOwnProperty(k)&&K!==Z&&(K!=null||Z!=null))switch(k){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:pt(i,r,k,K,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in a)K=a[Me],a.hasOwnProperty(Me)&&K!=null&&!c.hasOwnProperty(Me)&&pt(i,r,Me,null,c,K);for($ in c)if(K=c[$],Z=a[$],c.hasOwnProperty($)&&K!==Z&&(K!=null||Z!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,r));break;default:pt(i,r,$,K,c,Z)}return;default:if(qa(r)){for(var mt in a)K=a[mt],a.hasOwnProperty(mt)&&K!==void 0&&!c.hasOwnProperty(mt)&&Ih(i,r,mt,void 0,c,K);for(ie in c)K=c[ie],Z=a[ie],!c.hasOwnProperty(ie)||K===Z||K===void 0&&Z===void 0||Ih(i,r,ie,K,c,Z);return}}for(var z in a)K=a[z],a.hasOwnProperty(z)&&K!=null&&!c.hasOwnProperty(z)&&pt(i,r,z,null,c,K);for(se in c)K=c[se],Z=a[se],!c.hasOwnProperty(se)||K===Z||K==null&&Z==null||pt(i,r,se,K,c,Z)}function B0(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Y1(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,A=y.initiatorType,I=y.duration;if(v&&I&&B0(A)){for(A=0,I=y.responseEnd,c+=1;c<a.length;c++){var k=a[c],$=k.startTime;if($>I)break;var ie=k.transferSize,se=k.initiatorType;ie&&B0(se)&&(k=k.responseEnd,A+=ie*(k<I?1:(I-$)/(k-$)))}if(--c,r+=8*(v+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Rh=null,bh=null;function Tc(i){return i.nodeType===9?i:i.ownerDocument}function q0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z0(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function xh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Nh=null;function J1(){var i=window.event;return i&&i.type==="popstate"?i===Nh?!1:(Nh=i,!0):(Nh=null,!1)}var G0=typeof setTimeout=="function"?setTimeout:void 0,K1=typeof clearTimeout=="function"?clearTimeout:void 0,H0=typeof Promise=="function"?Promise:void 0,Q1=typeof queueMicrotask=="function"?queueMicrotask:typeof H0<"u"?function(i){return H0.resolve(null).then(i).catch(X1)}:G0;function X1(i){setTimeout(function(){throw i})}function pr(i){return i==="head"}function $0(i,r){var a=r,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),sa(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Al(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Al(a);for(var v=a.firstChild;v;){var A=v.nextSibling,I=v.nodeName;v[no]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&Al(i.ownerDocument.body);a=y}while(a);sa(r)}function Y0(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function Mh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Mh(a),Or(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function W1(i,r,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[no])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=pi(i.nextSibling),i===null)break}return null}function Z1(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=pi(i.nextSibling),i===null))return null;return i}function J0(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=pi(i.nextSibling),i===null))return null;return i}function Dh(i){return i.data==="$?"||i.data==="$~"}function Ph(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function j1(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function pi(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Vh=null;function K0(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return pi(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function Q0(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function X0(i,r,a){switch(r=Tc(a),i){case"html":if(i=r.documentElement,!i)throw Error(o(452));return i;case"head":if(i=r.head,!i)throw Error(o(453));return i;case"body":if(i=r.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function Al(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Or(i)}var mi=new Map,W0=new Set;function Ec(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var wo=he.d;he.d={f:ew,r:tw,D:nw,C:iw,L:ow,m:rw,X:aw,S:sw,M:lw};function ew(){var i=wo.f(),r=dc();return i||r}function tw(i){var r=oo(i);r!==null&&r.tag===5&&r.type==="form"?py(r):wo.r(i)}var ia=typeof document>"u"?null:document;function Z0(i,r,a){var c=ia;if(c&&typeof r=="string"&&r){var y=xt(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),W0.has(y)||(W0.add(y),i={rel:i,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),fn(r,"link",i),Ut(r),c.head.appendChild(r)))}}function nw(i){wo.D(i),Z0("dns-prefetch",i,null)}function iw(i,r){wo.C(i,r),Z0("preconnect",i,r)}function ow(i,r,a){wo.L(i,r,a);var c=ia;if(c&&i&&r){var y='link[rel="preload"][as="'+xt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+xt(a.imageSizes)+'"]')):y+='[href="'+xt(i)+'"]';var v=y;switch(r){case"style":v=oa(i);break;case"script":v=ra(i)}mi.has(v)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),mi.set(v,i),c.querySelector(y)!==null||r==="style"&&c.querySelector(Cl(v))||r==="script"&&c.querySelector(wl(v))||(r=c.createElement("link"),fn(r,"link",i),Ut(r),c.head.appendChild(r)))}}function rw(i,r){wo.m(i,r);var a=ia;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+xt(c)+'"][href="'+xt(i)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ra(i)}if(!mi.has(v)&&(i=E({rel:"modulepreload",href:i},r),mi.set(v,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(wl(v)))return}c=a.createElement("link"),fn(c,"link",i),Ut(c),a.head.appendChild(c)}}}function sw(i,r,a){wo.S(i,r,a);var c=ia;if(c&&i){var y=Ai(c).hoistableStyles,v=oa(i);r=r||"default";var A=y.get(v);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(Cl(v)))I.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=mi.get(v))&&Uh(i,a);var k=A=c.createElement("link");Ut(k),fn(k,"link",i),k._p=new Promise(function($,ie){k.onload=$,k.onerror=ie}),k.addEventListener("load",function(){I.loading|=1}),k.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Sc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(v,A)}}}function aw(i,r){wo.X(i,r);var a=ia;if(a&&i){var c=Ai(a).hoistableScripts,y=ra(i),v=c.get(y);v||(v=a.querySelector(wl(y)),v||(i=E({src:i,async:!0},r),(r=mi.get(y))&&kh(i,r),v=a.createElement("script"),Ut(v),fn(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function lw(i,r){wo.M(i,r);var a=ia;if(a&&i){var c=Ai(a).hoistableScripts,y=ra(i),v=c.get(y);v||(v=a.querySelector(wl(y)),v||(i=E({src:i,async:!0,type:"module"},r),(r=mi.get(y))&&kh(i,r),v=a.createElement("script"),Ut(v),fn(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function j0(i,r,a,c){var y=(y=Pe.current)?Ec(y):null;if(!y)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=oa(a.href),a=Ai(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=oa(a.href);var v=Ai(y).hoistableStyles,A=v.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,A),(v=y.querySelector(Cl(i)))&&!v._p&&(A.instance=v,A.state.loading=5),mi.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},mi.set(i,a),v||uw(y,i,a,A.state))),r&&c===null)throw Error(o(528,""));return A}if(r&&c!==null)throw Error(o(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ra(a),a=Ai(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function oa(i){return'href="'+xt(i)+'"'}function Cl(i){return'link[rel="stylesheet"]['+i+"]"}function ev(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function uw(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),fn(r,"link",a),Ut(r),i.head.appendChild(r))}function ra(i){return'[src="'+xt(i)+'"]'}function wl(i){return"script[async]"+i}function tv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+xt(a.href)+'"]');if(c)return r.instance=c,Ut(c),c;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Ut(c),fn(c,"style",y),Sc(c,a.precedence,i),r.instance=c;case"stylesheet":y=oa(a.href);var v=i.querySelector(Cl(y));if(v)return r.state.loading|=4,r.instance=v,Ut(v),v;c=ev(a),(y=mi.get(y))&&Uh(c,y),v=(i.ownerDocument||i).createElement("link"),Ut(v);var A=v;return A._p=new Promise(function(I,k){A.onload=I,A.onerror=k}),fn(v,"link",c),r.state.loading|=4,Sc(v,a.precedence,i),r.instance=v;case"script":return v=ra(a.src),(y=i.querySelector(wl(v)))?(r.instance=y,Ut(y),y):(c=a,(y=mi.get(v))&&(c=E({},a),kh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Ut(y),fn(y,"link",c),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Sc(c,a.precedence,i));return r.instance}function Sc(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===r)v=I;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Uh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function kh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Ac=null;function nv(i,r,a){if(Ac===null){var c=new Map,y=Ac=new Map;y.set(a,c)}else y=Ac,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[no]||v[bt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(r)||"";A=i+A;var I=c.get(A);I?I.push(v):c.set(A,[v])}}return c}function iv(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function cw(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function ov(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function fw(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=oa(c.href),v=r.querySelector(Cl(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Cc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=v,Ut(v);return}v=r.ownerDocument||r,c=ev(c),(y=mi.get(y))&&Uh(c,y),v=v.createElement("link"),Ut(v);var A=v;A._p=new Promise(function(I,k){A.onload=I,A.onerror=k}),fn(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Cc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var Lh=0;function dw(i,r){return i.stylesheets&&i.count===0&&Ic(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Ic(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&Lh===0&&(Lh=62500*Y1());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ic(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>Lh?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ic(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wc=null;function Ic(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wc=new Map,r.forEach(hw,i),wc=null,Cc.call(i))}function hw(i,r){if(!(r.state.loading&4)){var a=wc.get(i);if(a)var c=a.get(null);else{a=new Map,wc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||c,v===c&&a.set(null,y),a.set(A,y),this.count++,c=Cc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Il={$$typeof:J,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function pw(i,r,a,c,y,v,A,I,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sn(0),this.hiddenUpdates=sn(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function rv(i,r,a,c,y,v,A,I,k,$,ie,se){return i=new pw(i,r,a,A,k,$,ie,se,I),r=1,v===!0&&(r|=24),v=Xn(3,null,null,r),i.current=v,v.stateNode=i,r=gd(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:r},Td(v),i}function sv(i){return i?(i=ks,i):ks}function av(i,r,a,c,y,v){y=sv(y),c.context===null?c.context=y:c.pendingContext=y,c=ir(r),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=or(i,c,r),a!==null&&(qn(a,i,r),ol(a,i,r))}function lv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function Oh(i,r){lv(i,r),(i=i.alternate)&&lv(i,r)}function uv(i){if(i.tag===13||i.tag===31){var r=Xr(i,67108864);r!==null&&qn(r,i,67108864),Oh(i,67108864)}}function cv(i){if(i.tag===13||i.tag===31){var r=ti();r=Va(r);var a=Xr(i,r);a!==null&&qn(a,i,r),Oh(i,r)}}var Rc=!0;function mw(i,r,a,c){var y=ee.T;ee.T=null;var v=he.p;try{he.p=2,Fh(i,r,a,c)}finally{he.p=v,ee.T=y}}function gw(i,r,a,c){var y=ee.T;ee.T=null;var v=he.p;try{he.p=8,Fh(i,r,a,c)}finally{he.p=v,ee.T=y}}function Fh(i,r,a,c){if(Rc){var y=Bh(c);if(y===null)wh(i,r,c,bc,a),dv(i,c);else if(vw(y,i,r,a,c))c.stopPropagation();else if(dv(i,c),r&4&&-1<yw.indexOf(i)){for(;y!==null;){var v=oo(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Vn(v.pendingLanes);if(A!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var k=1<<31-rn(A);I.entanglements[1]|=k,A&=~k}$i(v),(at&6)===0&&(cc=we()+500,Tl(0))}}break;case 31:case 13:I=Xr(v,2),I!==null&&qn(I,v,2),dc(),Oh(v,2)}if(v=Bh(c),v===null&&wh(i,r,c,bc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else wh(i,r,c,null,a)}}function Bh(i){return i=bs(i),qh(i)}var bc=null;function qh(i){if(bc=null,i=io(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return bc=i,null}function fv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case ne:return 2;case ce:return 8;case fe:case oe:return 32;case Ne:return 268435456;default:return 32}default:return 32}}var zh=!1,mr=null,gr=null,yr=null,Rl=new Map,bl=new Map,vr=[],yw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dv(i,r){switch(i){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Rl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(r.pointerId)}}function xl(i,r,a,c,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},r!==null&&(r=oo(r),r!==null&&uv(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function vw(i,r,a,c,y){switch(r){case"focusin":return mr=xl(mr,i,r,a,c,y),!0;case"dragenter":return gr=xl(gr,i,r,a,c,y),!0;case"mouseover":return yr=xl(yr,i,r,a,c,y),!0;case"pointerover":var v=y.pointerId;return Rl.set(v,xl(Rl.get(v)||null,i,r,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,bl.set(v,xl(bl.get(v)||null,i,r,a,c,y)),!0}return!1}function hv(i){var r=io(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,cu(i.priority,function(){cv(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,cu(i.priority,function(){cv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=Bh(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Rs=c,a.target.dispatchEvent(c),Rs=null}else return r=oo(a),r!==null&&uv(r),i.blockedOn=a,!1;r.shift()}return!0}function pv(i,r,a){xc(i)&&a.delete(r)}function _w(){zh=!1,mr!==null&&xc(mr)&&(mr=null),gr!==null&&xc(gr)&&(gr=null),yr!==null&&xc(yr)&&(yr=null),Rl.forEach(pv),bl.forEach(pv)}function Nc(i,r){i.blockedOn===r&&(i.blockedOn=null,zh||(zh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_w)))}var Mc=null;function mv(i){Mc!==i&&(Mc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Mc===i&&(Mc=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],y=i[r+2];if(typeof c!="function"){if(qh(c||a)===null)continue;break}var v=oo(a);v!==null&&(i.splice(r,3),r-=3,Bd(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function sa(i){function r(k){return Nc(k,i)}mr!==null&&Nc(mr,i),gr!==null&&Nc(gr,i),yr!==null&&Nc(yr,i),Rl.forEach(r),bl.forEach(r);for(var a=0;a<vr.length;a++){var c=vr[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<vr.length&&(a=vr[0],a.blockedOn===null);)hv(a),a.blockedOn===null&&vr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],A=y[an]||null;if(typeof v=="function")A||mv(a);else if(A){var I=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[an]||null)I=A.formAction;else if(qh(y)!==null)continue}else I=A.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),mv(a)}}}function gv(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Gh(i){this._internalRoot=i}Dc.prototype.render=Gh.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(o(409));var a=r.current,c=ti();av(a,c,i,r,null,null)},Dc.prototype.unmount=Gh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;av(i.current,2,null,i,null,null),dc(),r[ki]=null}};function Dc(i){this._internalRoot=i}Dc.prototype.unstable_scheduleHydration=function(i){if(i){var r=to();i={blockedOn:null,target:i,priority:r};for(var a=0;a<vr.length&&r!==0&&r<vr[a].priority;a++);vr.splice(a,0,i),a===0&&hv(i)}};var yv=e.version;if(yv!=="19.2.4")throw Error(o(527,yv,"19.2.4"));he.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=g(r),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var Tw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{on=Pc.inject(Tw),Rt=Pc}catch{}}return Ml.createRoot=function(i,r){if(!s(i))throw Error(o(299));var a=!1,c="",y=Cy,v=wy,A=Iy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=rv(i,1,!1,null,null,a,c,null,y,v,A,gv),i[ki]=r.current,Ch(i),new Gh(r)},Ml.hydrateRoot=function(i,r,a){if(!s(i))throw Error(o(299));var c=!1,y="",v=Cy,A=wy,I=Iy,k=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),r=rv(i,1,!0,r,a??null,c,y,k,v,A,I,gv),r.context=sv(null),a=r.current,c=ti(),c=Va(c),y=ir(c),y.callback=null,or(a,y,c),a=c,r.current.lanes=a,gn(r,a),$i(r),i[ki]=r.current,Ch(i),new Dc(r)},Ml.version="19.2.4",Ml}var Rv;function Mw(){if(Rv)return Yh.exports;Rv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yh.exports=Nw(),Yh.exports}var Dw=Mw();const Pw=PE(Dw),Vw=Object.prototype.toString,Uw=n=>Vw.call(n)==="[object Error]",kw=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function Lw(n){if(!(n&&Uw(n)&&n.name==="TypeError"&&typeof n.message=="string"))return!1;const{message:t,stack:o}=n;return t==="Load failed"?o===void 0||"__sentry_captured__"in n:t.startsWith("error sending request for url")?!0:kw.has(t)}function Ow(n){if(typeof n=="number"){if(n<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(n))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(n!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Vc(n,e,{min:t=0,allowInfinity:o=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${n}\` to be a number${o?" or Infinity":""}.`);if(!o&&!Number.isFinite(e))throw new TypeError(`Expected \`${n}\` to be a finite number.`);if(e<t)throw new TypeError(`Expected \`${n}\` to be  ${t}.`)}}class VE extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function Fw(n,e){const t=Math.max(1,n+1),o=e.randomize?Math.random()+1:1;let s=Math.round(o*e.minTimeout*e.factor**(t-1));return s=Math.min(s,e.maxTimeout),s}function bv(n,e){return Number.isFinite(e)?e-(performance.now()-n):e}async function Bw({error:n,attemptNumber:e,retriesConsumed:t,startTime:o,options:s}){var w,M,L,V;const l=n instanceof Error?n:new TypeError(`Non-error was thrown: "${n}". You should only throw errors.`);if(l instanceof VE)throw l.originalError;const u=Number.isFinite(s.retries)?Math.max(0,s.retries-t):s.retries,d=s.maxRetryTime??Number.POSITIVE_INFINITY,h=Object.freeze({error:l,attemptNumber:e,retriesLeft:u,retriesConsumed:t});if(await s.onFailedAttempt(h),bv(o,d)<=0)throw l;const g=await s.shouldConsumeRetry(h),_=bv(o,d);if(_<=0||u<=0)throw l;if(l instanceof TypeError&&!Lw(l)){if(g)throw l;return(w=s.signal)==null||w.throwIfAborted(),!1}if(!await s.shouldRetry(h))throw l;if(!g)return(M=s.signal)==null||M.throwIfAborted(),!1;const E=Fw(t,s),S=Math.min(E,_);return(L=s.signal)==null||L.throwIfAborted(),S>0&&await new Promise((Y,Q)=>{var me,W;const J=()=>{var D;clearTimeout(te),(D=s.signal)==null||D.removeEventListener("abort",J),Q(s.signal.reason)},te=setTimeout(()=>{var D;(D=s.signal)==null||D.removeEventListener("abort",J),Y()},S);s.unref&&((me=te.unref)==null||me.call(te)),(W=s.signal)==null||W.addEventListener("abort",J,{once:!0})}),(V=s.signal)==null||V.throwIfAborted(),!0}async function qw(n,e={}){var l,u,d;if(e={...e},Ow(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),Vc("factor",e.factor,{min:0,allowInfinity:!1}),Vc("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Vc("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Vc("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(l=e.signal)==null||l.throwIfAborted();let t=0,o=0;const s=performance.now();for(;!Number.isFinite(e.retries)||o<=e.retries;){t++;try{(u=e.signal)==null||u.throwIfAborted();const h=await n(t);return(d=e.signal)==null||d.throwIfAborted(),h}catch(h){await Bw({error:h,attemptNumber:t,retriesConsumed:o,startTime:s,options:e})&&o++}}throw new Error("Retry attempts exhausted without throwing an error.")}var zw={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Gw,Hw;function $w(){return{geminiUrl:Gw,vertexUrl:Hw}}function Yw(n,e,t,o){var s,l;if(!(n!=null&&n.baseUrl)){const u=$w();return e?(s=u.vertexUrl)!==null&&s!==void 0?s:t:(l=u.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mo{}function ye(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const h=n[d];if(Array.isArray(t))for(let g=0;g<h.length;g++){const _=h[g];p(_,e.slice(l+1),t[g])}else for(const g of h)p(g,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const h=n[d];p(h[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const o=e[e.length-1],s=n[o];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return t;const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(o+1),t)):t}else return t}else n=n[s]}return n}catch(o){if(o instanceof TypeError)return t;throw o}}function Jw(n,e){for(const[t,o]of Object.entries(e)){const s=t.split("."),l=o.split("."),u=new Set;let d=-1;for(let h=0;h<s.length;h++)if(s[h]==="*"){d=h;break}if(d!==-1&&l.length>d)for(let h=d;h<l.length;h++){const g=l[h];g!=="*"&&!g.endsWith("[]")&&!g.endsWith("[0]")&&u.add(g)}cp(n,s,l,0,u)}}function cp(n,e,t,o,s){if(o>=e.length||typeof n!="object"||n===null)return;const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const h of d[u])cp(h,e,t,o+1,s)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(g=>!g.startsWith("_")&&!s.has(g)),h={};for(const g of d)h[g]=u[g];for(const[g,_]of Object.entries(h)){const E=[];for(const S of t.slice(o))S==="*"?E.push(g):E.push(S);p(u,E,_)}for(const g of d)delete u[g]}}else{const u=n;l in u&&cp(u[l],e,t,o+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kw(n){const e={},t=f(n,["operationName"]);t!=null&&p(e,["operationName"],t);const o=f(n,["resourceName"]);return o!=null&&p(e,["_url","resourceName"],o),e}function Qw(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],Ww(u)),e}function Xw(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["response"]);return u!=null&&p(e,["response"],Zw(u)),e}function Ww(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>jw(u))),p(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(e,["raiMediaFilteredCount"],o);const s=f(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function Zw(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>eI(u))),p(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(e,["raiMediaFilteredCount"],o);const s=f(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function jw(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],sI(t)),e}function eI(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],aI(t)),e}function tI(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function nI(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function iI(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["response"]);return u!=null&&p(e,["response"],oI(u)),e}function oI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&p(e,["parent"],o);const s=f(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function UE(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["response"]);return u!=null&&p(e,["response"],rI(u)),e}function rI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&p(e,["parent"],o);const s=f(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function sI(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const o=f(n,["encodedVideo"]);o!=null&&p(e,["videoBytes"],Zp(o));const s=f(n,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function aI(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(e,["videoBytes"],Zp(o));const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xv||(xv={}));var Nv;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Nv||(Nv={}));var Mv;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Mv||(Mv={}));var Dt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Dt||(Dt={}));var Dv;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Dv||(Dv={}));var Pv;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Pv||(Pv={}));var Vv;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Vv||(Vv={}));var Uv;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Uv||(Uv={}));var kv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(kv||(kv={}));var Lv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Lv||(Lv={}));var Ov;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Ov||(Ov={}));var Fv;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Fv||(Fv={}));var Bv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Bv||(Bv={}));var qv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(qv||(qv={}));var zv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(zv||(zv={}));var Gv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Gv||(Gv={}));var Hv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Hv||(Hv={}));var $v;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($v||($v={}));var Yv;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Yv||(Yv={}));var Jv;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Jv||(Jv={}));var Kv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Kv||(Kv={}));var of;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(of||(of={}));var Qv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Qv||(Qv={}));var Xv;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Xv||(Xv={}));var Wv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Wv||(Wv={}));var fp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(fp||(fp={}));var Zv;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Zv||(Zv={}));var jv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(jv||(jv={}));var dp;(function(n){n.COLLECTION="COLLECTION"})(dp||(dp={}));var e_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(e_||(e_={}));var t_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(t_||(t_={}));var n_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(n_||(n_={}));var i_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(i_||(i_={}));var o_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(o_||(o_={}));var r_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(r_||(r_={}));var s_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(s_||(s_={}));var a_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(a_||(a_={}));var l_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(l_||(l_={}));var u_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(u_||(u_={}));var c_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(c_||(c_={}));var f_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(f_||(f_={}));var d_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(d_||(d_={}));var h_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(h_||(h_={}));var p_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(p_||(p_={}));var m_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(m_||(m_={}));var g_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(g_||(g_={}));var y_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(y_||(y_={}));var v_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(v_||(v_={}));var __;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(__||(__={}));var T_;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(T_||(T_={}));var E_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(E_||(E_={}));var S_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(S_||(S_={}));var A_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(A_||(A_={}));var C_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(C_||(C_={}));var w_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(w_||(w_={}));var I_;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(I_||(I_={}));var da;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(da||(da={}));class hp{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Dl{get text(){var e,t,o,s,l,u,d,h;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",_=!1;const E=[];for(const S of(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[w,M]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(M!==null||M!==void 0)&&E.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,g+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?g:void 0}get data(){var e,t,o,s,l,u,d,h;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const _=[];for(const E of(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[S,w]of Object.entries(E))S!=="inlineData"&&(w!==null||w!==void 0)&&_.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(g+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var e,t,o,s,l,u,d,h;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var e,t,o,s,l,u,d,h,g;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(g=_==null?void 0:_[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,t,o,s,l,u,d,h,g;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(g=_==null?void 0:_[0])===null||g===void 0?void 0:g.output}}class R_{}class b_{}class lI{}class uI{}class cI{}class fI{}class x_{}class N_{}class M_{}class dI{}class rf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new rf;let s;const l=e;return t?s=Xw(l):s=Qw(l),Object.assign(o,s),o}}class D_{}class P_{}class V_{}class U_{}class hI{}class pI{}class mI{}class jp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new jp,l=iI(e);return Object.assign(o,l),o}}class gI{}class yI{}class vI{}class _I{}class k_{}class TI{get text(){var e,t,o;let s="",l=!1;const u=[];for(const d of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[h,g]of Object.entries(d))h!=="text"&&h!=="thought"&&g!==null&&u.push(h);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,s+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,t,o;let s="";const l=[];for(const u of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[d,h]of Object.entries(u))d!=="inlineData"&&h!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(s+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class EI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class em{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new em,l=UE(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function st(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function kE(n,e){const t=st(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function LE(n){return Array.isArray(n)?n.map(e=>sf(e)):[sf(n)]}function sf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function OE(n){const e=sf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function FE(n){const e=sf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function L_(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function BE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>L_(e)):[L_(n)]}function pp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function O_(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function F_(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Sn(n){if(n==null)throw new Error("ContentUnion is required");return pp(n)?n:{role:"user",parts:BE(n)}}function tm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=Sn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=Sn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Sn(t)):[Sn(e)]}function vi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(O_(n)||F_(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Sn(n)]}const e=[],t=[],o=pp(n[0]);for(const s of n){const l=pp(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(O_(s)||F_(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return o||e.push({role:"user",parts:BE(t)}),e}function SI(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(Dt).includes(t[0].toUpperCase())?t[0].toUpperCase():Dt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(Dt).includes(o.toUpperCase())?o.toUpperCase():Dt.TYPE_UNSPECIFIED})}}function pa(n){const e={},t=["items"],o=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&SI(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Dt).includes(d.toUpperCase())?d.toUpperCase():Dt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=pa(d);else if(o.includes(u)){const h=[];for(const g of d){if(g.type=="null"){e.nullable=!0;continue}h.push(pa(g))}e[u]=h}else if(s.includes(u)){const h={};for(const[g,_]of Object.entries(d))h[g]=pa(_);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=d}return e}function nm(n){return pa(n)}function im(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function om(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function wa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=pa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=pa(e.response));return n}function Ia(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function AI(n,e,t,o=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function Do(n,e){if(typeof e!="string")throw new Error("name must be a string");return AI(n,e,"cachedContents")}function qE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ur(n){return Zp(n)}function CI(n){return n!=null&&typeof n=="object"&&"name"in n}function wI(n){return n!=null&&typeof n=="object"&&"video"in n}function II(n){return n!=null&&typeof n=="object"&&"uri"in n}function zE(n){var e;let t;if(CI(n)&&(t=n.name),!(II(n)&&(t=n.uri,t===void 0))&&!(wI(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function GE(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function HE(n){for(const e of["models","tunedModels","publisherModels"])if(RI(n,e))return n[e];return[]}function RI(n,e){return n!==null&&typeof n=="object"&&e in n}function bI(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function xI(n,e={}){const t=[],o=new Set;for(const s of n){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const u=bI(s,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function $E(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function NI(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function YE(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let l=!1;for(const u of s){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ra(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function JE(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MI(n){const e={},t=f(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const o=f(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>fR(u))),p(e,["inlinedResponses"],l)}const s=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["inlinedEmbedContentResponses"],l)}return e}function DI(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const o=f(n,["gcsDestination","outputUriPrefix"]);o!=null&&p(e,["gcsUri"],o);const s=f(n,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function PI(n){const e={},t=f(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const o=f(n,["gcsUri"]);o!=null&&p(e,["gcsDestination","outputUriPrefix"],o);const s=f(n,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Qc(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata","displayName"]);o!=null&&p(e,["displayName"],o);const s=f(n,["metadata","state"]);s!=null&&p(e,["state"],JE(s));const l=f(n,["metadata","createTime"]);l!=null&&p(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const h=f(n,["metadata","model"]);h!=null&&p(e,["model"],h);const g=f(n,["metadata","output"]);return g!=null&&p(e,["dest"],MI(YE(g))),e}function mp(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["displayName"]);o!=null&&p(e,["displayName"],o);const s=f(n,["state"]);s!=null&&p(e,["state"],JE(s));const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["createTime"]);u!=null&&p(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(e,["startTime"],d);const h=f(n,["endTime"]);h!=null&&p(e,["endTime"],h);const g=f(n,["updateTime"]);g!=null&&p(e,["updateTime"],g);const _=f(n,["model"]);_!=null&&p(e,["model"],_);const E=f(n,["inputConfig"]);E!=null&&p(e,["src"],VI(E));const S=f(n,["outputConfig"]);S!=null&&p(e,["dest"],DI(YE(S)));const w=f(n,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function VI(n){const e={},t=f(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const o=f(n,["gcsSource","uris"]);o!=null&&p(e,["gcsUri"],o);const s=f(n,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function UI(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&p(t,["fileName"],o);const s=f(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>cR(n,u))),p(t,["requests","requests"],l)}return t}function kI(n){const e={},t=f(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const o=f(n,["gcsUri"]);o!=null&&p(e,["gcsSource","uris"],o);const s=f(n,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function LI(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function OI(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function FI(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function BI(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const o=f(n,["citationMetadata"]);o!=null&&p(e,["citationMetadata"],qI(o));const s=f(n,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const l=f(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const h=f(n,["index"]);h!=null&&p(e,["index"],h);const g=f(n,["logprobsResult"]);g!=null&&p(e,["logprobsResult"],g);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>w)),p(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&p(e,["urlContextMetadata"],E),e}function qI(n){const e={},t=f(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["citations"],o)}return e}function KE(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>vR(l))),p(e,["parts"],s)}const o=f(n,["role"]);return o!=null&&p(e,["role"],o),e}function zI(n,e){const t={},o=f(n,["displayName"]);if(e!==void 0&&o!=null&&p(e,["batch","displayName"],o),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function GI(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const s=f(n,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],PI(NI(s))),t}function B_(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["_url","model"],st(n,o));const s=f(e,["src"]);s!=null&&p(t,["batch","inputConfig"],UI(n,$E(n,s)));const l=f(e,["config"]);return l!=null&&zI(l,t),t}function HI(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["model"],st(n,o));const s=f(e,["src"]);s!=null&&p(t,["inputConfig"],kI($E(n,s)));const l=f(e,["config"]);return l!=null&&GI(l,t),t}function $I(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&p(e,["batch","displayName"],o),t}function YI(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["_url","model"],st(n,o));const s=f(e,["src"]);s!=null&&p(t,["batch","inputConfig"],jI(n,s));const l=f(e,["config"]);return l!=null&&$I(l,t),t}function JI(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function KI(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function QI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&p(e,["name"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);return l!=null&&p(e,["error"],l),e}function XI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&p(e,["name"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);return l!=null&&p(e,["error"],l),e}function WI(n,e){const t={},o=f(e,["contents"]);if(o!=null){let l=tm(n,o);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["requests[]","request","content"],l)}const s=f(e,["config"]);return s!=null&&(p(t,["_self"],ZI(s,t)),Jw(t,{"requests[].*":"requests[].request.*"})),t}function ZI(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&p(e,["requests[]","taskType"],o);const s=f(n,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function jI(n,e){const t={},o=f(e,["fileName"]);o!=null&&p(t,["file_name"],o);const s=f(e,["inlinedRequests"]);return s!=null&&p(t,["requests"],WI(n,s)),t}function eR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function tR(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const o=f(n,["args"]);o!=null&&p(e,["args"],o);const s=f(n,["name"]);if(s!=null&&p(e,["name"],s),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nR(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&p(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iR(n,e,t){const o={},s=f(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],KE(Sn(s)));const l=f(e,["temperature"]);l!=null&&p(o,["temperature"],l);const u=f(e,["topP"]);u!=null&&p(o,["topP"],u);const d=f(e,["topK"]);d!=null&&p(o,["topK"],d);const h=f(e,["candidateCount"]);h!=null&&p(o,["candidateCount"],h);const g=f(e,["maxOutputTokens"]);g!=null&&p(o,["maxOutputTokens"],g);const _=f(e,["stopSequences"]);_!=null&&p(o,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&p(o,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&p(o,["logprobs"],S);const w=f(e,["presencePenalty"]);w!=null&&p(o,["presencePenalty"],w);const M=f(e,["frequencyPenalty"]);M!=null&&p(o,["frequencyPenalty"],M);const L=f(e,["seed"]);L!=null&&p(o,["seed"],L);const V=f(e,["responseMimeType"]);V!=null&&p(o,["responseMimeType"],V);const Y=f(e,["responseSchema"]);Y!=null&&p(o,["responseSchema"],nm(Y));const Q=f(e,["responseJsonSchema"]);if(Q!=null&&p(o,["responseJsonSchema"],Q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=f(e,["safetySettings"]);if(t!==void 0&&J!=null){let P=J;Array.isArray(P)&&(P=P.map(Ie=>_R(Ie))),p(t,["safetySettings"],P)}const te=f(e,["tools"]);if(t!==void 0&&te!=null){let P=Ia(te);Array.isArray(P)&&(P=P.map(Ie=>ER(wa(Ie)))),p(t,["tools"],P)}const me=f(e,["toolConfig"]);if(t!==void 0&&me!=null&&p(t,["toolConfig"],TR(me)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=f(e,["cachedContent"]);t!==void 0&&W!=null&&p(t,["cachedContent"],Do(n,W));const D=f(e,["responseModalities"]);D!=null&&p(o,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&p(o,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&p(o,["speechConfig"],im(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&p(o,["thinkingConfig"],U);const O=f(e,["imageConfig"]);O!=null&&p(o,["imageConfig"],uR(O));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&p(o,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function oR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(g=>BI(g))),p(e,["candidates"],h)}const s=f(n,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const l=f(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function rR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function sR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function aR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function lR(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function uR(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const o=f(n,["imageSize"]);if(o!=null&&p(e,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function cR(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["request","model"],st(n,o));const s=f(e,["contents"]);if(s!=null){let d=vi(s);Array.isArray(d)&&(d=d.map(h=>KE(h))),p(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&p(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&p(t,["request","generationConfig"],iR(n,u,f(t,["request"],{}))),t}function fR(n){const e={},t=f(n,["response"]);t!=null&&p(e,["response"],oR(t));const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["error"]);return s!=null&&p(e,["error"],s),e}function dR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function hR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const l=f(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),t}function pR(n){const e={},t=f(n,["config"]);return t!=null&&dR(t,e),e}function mR(n){const e={},t=f(n,["config"]);return t!=null&&hR(t,e),e}function gR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Qc(u))),p(e,["batchJobs"],l)}return e}function yR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>mp(u))),p(e,["batchJobs"],l)}return e}function vR(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const s=f(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],eR(l));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],tR(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(n,["inlineData"]);h!=null&&p(e,["inlineData"],LI(h));const g=f(n,["text"]);g!=null&&p(e,["text"],g);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function _R(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&p(e,["threshold"],o),e}function TR(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&p(e,["functionCallingConfig"],nR(o)),e}function ER(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const s=f(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],aR(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],lR(d));const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const g=f(n,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ro;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ro||(Ro={}));class gs{constructor(e,t,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,s)}init(e,t,o){var s,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(s=u.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SR extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gs(Ro.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=B_(this.apiClient,e),o=t._url,s=ye("{model}:batchGenerateContent",o),d=t.batch.inputConfig.requests,h=d.requests,g=[];for(const _ of h){const E=Object.assign({},_);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=S,E.request=w}g.push(E)}return d.requests=g,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${s}`;else if(u)o.dest=`${u}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=HI(this.apiClient,e);return d=ye("batchPredictionJobs",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>mp(_))}else{const g=B_(this.apiClient,e);return d=ye("{model}:batchGenerateContent",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Qc(_))}}async createEmbeddingsInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=YI(this.apiClient,e);return l=ye("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Qc(h))}}async get(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=sR(this.apiClient,e);return d=ye("batchPredictionJobs/{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>mp(_))}else{const g=rR(this.apiClient,e);return d=ye("batches/{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Qc(_))}}async cancel(e){var t,o,s,l;let u="",d={};if(this.apiClient.isVertexAI()){const h=FI(this.apiClient,e);u=ye("batchPredictionJobs/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const h=OI(this.apiClient,e);u=ye("batches/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=mR(e);return d=ye("batchPredictionJobs",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=yR(_),S=new k_;return Object.assign(S,E),S})}else{const g=pR(e);return d=ye("batches",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=gR(_),S=new k_;return Object.assign(S,E),S})}}async delete(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=KI(this.apiClient,e);return d=ye("batchPredictionJobs/{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>XI(_))}else{const g=JI(this.apiClient,e);return d=ye("batches/{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>QI(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AR(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function q_(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>YR(l))),p(e,["parts"],s)}const o=f(n,["role"]);return o!=null&&p(e,["role"],o),e}function CR(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const s=f(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const l=f(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=vi(u);Array.isArray(_)&&(_=_.map(E=>q_(E))),p(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],q_(Sn(d)));const h=f(n,["tools"]);if(e!==void 0&&h!=null){let _=h;Array.isArray(_)&&(_=_.map(E=>KR(E))),p(e,["tools"],_)}const g=f(n,["toolConfig"]);if(e!==void 0&&g!=null&&p(e,["toolConfig"],JR(g)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function wR(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const s=f(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const l=f(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=vi(u);Array.isArray(E)&&(E=E.map(S=>S)),p(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],Sn(d));const h=f(n,["tools"]);if(e!==void 0&&h!=null){let E=h;Array.isArray(E)&&(E=E.map(S=>QR(S))),p(e,["tools"],E)}const g=f(n,["toolConfig"]);e!==void 0&&g!=null&&p(e,["toolConfig"],g);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function IR(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["model"],kE(n,o));const s=f(e,["config"]);return s!=null&&CR(s,t),t}function RR(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["model"],kE(n,o));const s=f(e,["config"]);return s!=null&&wR(s,t),t}function bR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Do(n,o)),t}function xR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Do(n,o)),t}function NR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function MR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function DR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function PR(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const o=f(n,["args"]);o!=null&&p(e,["args"],o);const s=f(n,["name"]);if(s!=null&&p(e,["name"],s),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VR(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&p(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function UR(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const o=f(n,["name"]);o!=null&&p(e,["name"],o);const s=f(n,["parameters"]);s!=null&&p(e,["parameters"],s);const l=f(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function kR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Do(n,o)),t}function LR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Do(n,o)),t}function OR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function FR(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function BR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function qR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function zR(n){const e={},t=f(n,["config"]);return t!=null&&BR(t,e),e}function GR(n){const e={},t=f(n,["config"]);return t!=null&&qR(t,e),e}function HR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function $R(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function YR(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const s=f(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],DR(l));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],PR(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(n,["inlineData"]);h!=null&&p(e,["inlineData"],AR(h));const g=f(n,["text"]);g!=null&&p(e,["text"],g);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function JR(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&p(e,["functionCallingConfig"],VR(o)),e}function KR(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const s=f(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],OR(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],FR(d));const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const g=f(n,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}function QR(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&p(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(n,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const l=f(n,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>UR(S))),p(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const _=f(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function XR(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const s=f(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function WR(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const s=f(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function ZR(n,e){const t={},o=f(e,["name"]);o!=null&&p(t,["_url","name"],Do(n,o));const s=f(e,["config"]);return s!=null&&XR(s,t),t}function jR(n,e){const t={},o=f(e,["name"]);o!=null&&p(t,["_url","name"],Do(n,o));const s=f(e,["config"]);return s!=null&&WR(s,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eb extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gs(Ro.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=RR(this.apiClient,e);return d=ye("cachedContents",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const g=IR(this.apiClient,e);return d=ye("cachedContents",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=LR(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const g=kR(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=xR(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=MR(_),S=new V_;return Object.assign(S,E),S})}else{const g=bR(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=NR(_),S=new V_;return Object.assign(S,E),S})}}async update(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=jR(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const g=ZR(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=GR(e);return d=ye("cachedContents",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=$R(_),S=new U_;return Object.assign(S,E),S})}else{const g=zR(e);return d=ye("cachedContents",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=HR(_),S=new U_;return Object.assign(S,E),S})}}}function af(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(n);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(n,o[s])&&(t[o[s]]=n[o[s]]);return t}function z_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ue(n){return this instanceof Ue?(this.v=n,this):new Ue(n)}function xi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(w){return function(M){return Promise.resolve(M).then(w,E)}}function d(w,M){o[w]&&(s[w]=function(L){return new Promise(function(V,Y){l.push([w,L,V,Y])>1||h(w,L)})},M&&(s[w]=M(s[w])))}function h(w,M){try{g(o[w](M))}catch(L){S(l[0][3],L)}}function g(w){w.value instanceof Ue?Promise.resolve(w.value.v).then(_,E):S(l[0][2],w)}function _(w){h("next",w)}function E(w){h("throw",w)}function S(w,M){w(M),l.shift(),l.length&&h(l[0][0],l[0][1])}}function Ni(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof z_=="function"?z_(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(u){return new Promise(function(d,h){u=n[l](u),s(d,h,u.done,u.value)})}}function s(l,u,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tb(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:QE(t)}function QE(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function nb(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function G_(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const s=[];let l=!0;for(;o<t&&n[o].role==="model";)s.push(n[o]),l&&!QE(n[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class ib{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new ob(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ob{constructor(e,t,o,s={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),nb(l)}async sendMessage(e){var t;await this.sendPromise;const o=Sn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const h=await s,g=(u=(l=h.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=h.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];_!=null&&(S=(d=_.slice(E))!==null&&d!==void 0?d:[]);const w=g?[g]:[];this.recordHistory(o,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const o=Sn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?G_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return xi(this,arguments,function*(){var s,l,u,d,h,g;const _=[];try{for(var E=!0,S=Ni(e),w;w=yield Ue(S.next()),s=w.done,!s;E=!0){d=w.value,E=!1;const M=d;if(tb(M)){const L=(g=(h=M.candidates)===null||h===void 0?void 0:h[0])===null||g===void 0?void 0:g.content;L!==void 0&&_.push(L)}yield yield Ue(M)}}catch(M){l={error:M}}finally{try{!E&&!s&&(u=S.return)&&(yield Ue(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,_)})}recordHistory(e,t,o){let s=[];t.length>0&&t.every(l=>l.role!==void 0)?s=t:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...G_(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $l extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,$l.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rb(n){const e={},t=f(n,["file"]);return t!=null&&p(e,["file"],t),e}function sb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function ab(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],zE(t)),e}function lb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function ub(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],zE(t)),e}function cb(n){const e={},t=f(n,["uris"]);return t!=null&&p(e,["uris"],t),e}function fb(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function db(n){const e={},t=f(n,["config"]);return t!=null&&fb(t,e),e}function hb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["files"],l)}return e}function pb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),p(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mb extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gs(Ro.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=db(e);return l=ye("files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const g=hb(h),_=new gI;return Object.assign(_,g),_})}}async createInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rb(e);return l=ye("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=sb(h),_=new yI;return Object.assign(_,g),_})}}async get(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ub(e);return l=ye("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ab(e);return l=ye("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const g=lb(h),_=new vI;return Object.assign(_,g),_})}}async registerFilesInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cb(e);return l=ye("files:register",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=pb(h),_=new _I;return Object.assign(_,g),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xc(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function gb(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>Db(l))),p(e,["parts"],s)}const o=f(n,["role"]);return o!=null&&p(e,["role"],o),e}function yb(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function vb(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const o=f(n,["args"]);o!=null&&p(e,["args"],o);const s=f(n,["name"]);if(s!=null&&p(e,["name"],s),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _b(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const o=f(n,["name"]);o!=null&&p(e,["name"],o);const s=f(n,["parameters"]);s!=null&&p(e,["parameters"],s);const l=f(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Tb(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const o=f(n,["responseJsonSchema"]);o!=null&&p(e,["responseJsonSchema"],o);const s=f(n,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const l=f(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const h=f(n,["logprobs"]);h!=null&&p(e,["logprobs"],h);const g=f(n,["maxOutputTokens"]);g!=null&&p(e,["maxOutputTokens"],g);const _=f(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const E=f(n,["presencePenalty"]);E!=null&&p(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const w=f(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const M=f(n,["responseModalities"]);M!=null&&p(e,["responseModalities"],M);const L=f(n,["responseSchema"]);L!=null&&p(e,["responseSchema"],L);const V=f(n,["routingConfig"]);V!=null&&p(e,["routingConfig"],V);const Y=f(n,["seed"]);Y!=null&&p(e,["seed"],Y);const Q=f(n,["speechConfig"]);Q!=null&&p(e,["speechConfig"],Q);const J=f(n,["stopSequences"]);J!=null&&p(e,["stopSequences"],J);const te=f(n,["temperature"]);te!=null&&p(e,["temperature"],te);const me=f(n,["thinkingConfig"]);me!=null&&p(e,["thinkingConfig"],me);const W=f(n,["topK"]);W!=null&&p(e,["topK"],W);const D=f(n,["topP"]);if(D!=null&&p(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Eb(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Sb(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function Ab(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig"],o);const s=f(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const l=f(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=f(n,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","mediaResolution"],g);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],om(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&p(e,["setup","systemInstruction"],gb(Sn(M)));const L=f(n,["tools"]);if(e!==void 0&&L!=null){let W=Ia(L);Array.isArray(W)&&(W=W.map(D=>Vb(wa(D)))),p(e,["setup","tools"],W)}const V=f(n,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],Pb(V));const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&p(e,["setup","inputAudioTranscription"],Y);const Q=f(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","outputAudioTranscription"],Q);const J=f(n,["realtimeInputConfig"]);e!==void 0&&J!=null&&p(e,["setup","realtimeInputConfig"],J);const te=f(n,["contextWindowCompression"]);e!==void 0&&te!=null&&p(e,["setup","contextWindowCompression"],te);const me=f(n,["proactivity"]);if(e!==void 0&&me!=null&&p(e,["setup","proactivity"],me),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function Cb(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig"],Tb(o));const s=f(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const l=f(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=f(n,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","mediaResolution"],g);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],om(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&p(e,["setup","systemInstruction"],Sn(M));const L=f(n,["tools"]);if(e!==void 0&&L!=null){let D=Ia(L);Array.isArray(D)&&(D=D.map(N=>Ub(wa(N)))),p(e,["setup","tools"],D)}const V=f(n,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],V);const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&p(e,["setup","inputAudioTranscription"],Y);const Q=f(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","outputAudioTranscription"],Q);const J=f(n,["realtimeInputConfig"]);e!==void 0&&J!=null&&p(e,["setup","realtimeInputConfig"],J);const te=f(n,["contextWindowCompression"]);e!==void 0&&te!=null&&p(e,["setup","contextWindowCompression"],te);const me=f(n,["proactivity"]);e!==void 0&&me!=null&&p(e,["setup","proactivity"],me);const W=f(n,["explicitVadSignal"]);return e!==void 0&&W!=null&&p(e,["setup","explicitVadSignal"],W),t}function wb(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["setup","model"],st(n,o));const s=f(e,["config"]);return s!=null&&p(t,["config"],Ab(s,t)),t}function Ib(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["setup","model"],st(n,o));const s=f(e,["config"]);return s!=null&&p(t,["config"],Cb(s,t)),t}function Rb(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function bb(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["weightedPrompts"],o)}return e}function xb(n){const e={},t=f(n,["media"]);if(t!=null){let g=LE(t);Array.isArray(g)&&(g=g.map(_=>Xc(_))),p(e,["mediaChunks"],g)}const o=f(n,["audio"]);o!=null&&p(e,["audio"],Xc(FE(o)));const s=f(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const l=f(n,["video"]);l!=null&&p(e,["video"],Xc(OE(l)));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const h=f(n,["activityEnd"]);return h!=null&&p(e,["activityEnd"],h),e}function Nb(n){const e={},t=f(n,["media"]);if(t!=null){let g=LE(t);Array.isArray(g)&&(g=g.map(_=>_)),p(e,["mediaChunks"],g)}const o=f(n,["audio"]);o!=null&&p(e,["audio"],FE(o));const s=f(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const l=f(n,["video"]);l!=null&&p(e,["video"],OE(l));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const h=f(n,["activityEnd"]);return h!=null&&p(e,["activityEnd"],h),e}function Mb(n){const e={},t=f(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const o=f(n,["serverContent"]);o!=null&&p(e,["serverContent"],o);const s=f(n,["toolCall"]);s!=null&&p(e,["toolCall"],s);const l=f(n,["toolCallCancellation"]);l!=null&&p(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],kb(u));const d=f(n,["goAway"]);d!=null&&p(e,["goAway"],d);const h=f(n,["sessionResumptionUpdate"]);h!=null&&p(e,["sessionResumptionUpdate"],h);const g=f(n,["voiceActivityDetectionSignal"]);g!=null&&p(e,["voiceActivityDetectionSignal"],g);const _=f(n,["voiceActivity"]);return _!=null&&p(e,["voiceActivity"],Lb(_)),e}function Db(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const s=f(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],yb(l));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],vb(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(n,["inlineData"]);h!=null&&p(e,["inlineData"],Xc(h));const g=f(n,["text"]);g!=null&&p(e,["text"],g);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function Pb(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Vb(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const s=f(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],Eb(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],Sb(d));const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const g=f(n,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}function Ub(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&p(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(n,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const l=f(n,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>_b(S))),p(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const _=f(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function kb(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const o=f(n,["cachedContentTokenCount"]);o!=null&&p(e,["cachedContentTokenCount"],o);const s=f(n,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&p(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const h=f(n,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(M=>M)),p(e,["promptTokensDetails"],w)}const g=f(n,["cacheTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(M=>M)),p(e,["cacheTokensDetails"],w)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(M=>M)),p(e,["responseTokensDetails"],w)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(M=>M)),p(e,["toolUsePromptTokensDetails"],w)}const S=f(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}function Lb(n){const e={},t=f(n,["type"]);return t!=null&&p(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ob(n,e){const t={},o=f(n,["data"]);if(o!=null&&p(t,["data"],o),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function Fb(n,e){const t={},o=f(n,["content"]);o!=null&&p(t,["content"],o);const s=f(n,["citationMetadata"]);s!=null&&p(t,["citationMetadata"],Bb(s));const l=f(n,["tokenCount"]);l!=null&&p(t,["tokenCount"],l);const u=f(n,["finishReason"]);u!=null&&p(t,["finishReason"],u);const d=f(n,["avgLogprobs"]);d!=null&&p(t,["avgLogprobs"],d);const h=f(n,["groundingMetadata"]);h!=null&&p(t,["groundingMetadata"],h);const g=f(n,["index"]);g!=null&&p(t,["index"],g);const _=f(n,["logprobsResult"]);_!=null&&p(t,["logprobsResult"],_);const E=f(n,["safetyRatings"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(M=>M)),p(t,["safetyRatings"],w)}const S=f(n,["urlContextMetadata"]);return S!=null&&p(t,["urlContextMetadata"],S),t}function Bb(n,e){const t={},o=f(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),p(t,["citations"],s)}return t}function qb(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["contents"]);if(l!=null){let u=vi(l);Array.isArray(u)&&(u=u.map(d=>d)),p(o,["contents"],u)}return o}function zb(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["tokensInfo"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(t,["tokensInfo"],l)}return t}function Gb(n,e){const t={},o=f(n,["values"]);o!=null&&p(t,["values"],o);const s=f(n,["statistics"]);return s!=null&&p(t,["statistics"],Hb(s)),t}function Hb(n,e){const t={},o=f(n,["truncated"]);o!=null&&p(t,["truncated"],o);const s=f(n,["token_count"]);return s!=null&&p(t,["tokenCount"],s),t}function If(n,e){const t={},o=f(n,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>jx(u))),p(t,["parts"],l)}const s=f(n,["role"]);return s!=null&&p(t,["role"],s),t}function $b(n,e){const t={},o=f(n,["controlType"]);o!=null&&p(t,["controlType"],o);const s=f(n,["enableControlImageComputation"]);return s!=null&&p(t,["computeControl"],s),t}function Yb(n,e){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Jb(n,e,t){const o={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&p(e,["systemInstruction"],Sn(s));const l=f(n,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>jE(h))),p(e,["tools"],d)}const u=f(n,["generationConfig"]);return e!==void 0&&u!=null&&p(e,["generationConfig"],Ox(u)),o}function Kb(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["contents"]);if(l!=null){let d=vi(l);Array.isArray(d)&&(d=d.map(h=>If(h))),p(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&Yb(u),o}function Qb(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["contents"]);if(l!=null){let d=vi(l);Array.isArray(d)&&(d=d.map(h=>h)),p(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&Jb(u,o),o}function Xb(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["totalTokens"]);s!=null&&p(t,["totalTokens"],s);const l=f(n,["cachedContentTokenCount"]);return l!=null&&p(t,["cachedContentTokenCount"],l),t}function Wb(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["totalTokens"]);return s!=null&&p(t,["totalTokens"],s),t}function Zb(n,e,t){const o={},s=f(e,["model"]);return s!=null&&p(o,["_url","name"],st(n,s)),o}function jb(n,e,t){const o={},s=f(e,["model"]);return s!=null&&p(o,["_url","name"],st(n,s)),o}function ex(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(t,["sdkHttpResponse"],o),t}function tx(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(t,["sdkHttpResponse"],o),t}function nx(n,e,t){const o={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const g=f(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&p(e,["parameters","safetySetting"],_);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const M=f(n,["language"]);e!==void 0&&M!=null&&p(e,["parameters","language"],M);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&p(e,["parameters","outputOptions","mimeType"],L);const V=f(n,["outputCompressionQuality"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","compressionQuality"],V);const Y=f(n,["addWatermark"]);e!==void 0&&Y!=null&&p(e,["parameters","addWatermark"],Y);const Q=f(n,["labels"]);e!==void 0&&Q!=null&&p(e,["labels"],Q);const J=f(n,["editMode"]);e!==void 0&&J!=null&&p(e,["parameters","editMode"],J);const te=f(n,["baseSteps"]);return e!==void 0&&te!=null&&p(e,["parameters","editConfig","baseSteps"],te),o}function ix(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["prompt"]);l!=null&&p(o,["instances[0]","prompt"],l);const u=f(e,["referenceImages"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(g=>rN(g))),p(o,["instances[0]","referenceImages"],h)}const d=f(e,["config"]);return d!=null&&nx(d,o),o}function ox(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Rf(u))),p(t,["generatedImages"],l)}return t}function rx(n,e,t){const o={},s=f(n,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const l=f(n,["title"]);e!==void 0&&l!=null&&p(e,["requests[]","title"],l);const u=f(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function sx(n,e,t){const o={},s=f(n,["taskType"]);e!==void 0&&s!=null&&p(e,["instances[]","task_type"],s);const l=f(n,["title"]);e!==void 0&&l!=null&&p(e,["instances[]","title"],l);const u=f(n,["outputDimensionality"]);e!==void 0&&u!=null&&p(e,["parameters","outputDimensionality"],u);const d=f(n,["mimeType"]);e!==void 0&&d!=null&&p(e,["instances[]","mimeType"],d);const h=f(n,["autoTruncate"]);return e!==void 0&&h!=null&&p(e,["parameters","autoTruncate"],h),o}function ax(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["contents"]);if(l!=null){let h=tm(n,l);Array.isArray(h)&&(h=h.map(g=>g)),p(o,["requests[]","content"],h)}const u=f(e,["config"]);u!=null&&rx(u,o);const d=f(e,["model"]);return d!==void 0&&p(o,["requests[]","model"],st(n,d)),o}function lx(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["contents"]);if(l!=null){let d=tm(n,l);Array.isArray(d)&&(d=d.map(h=>h)),p(o,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&sx(u,o),o}function ux(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),p(t,["embeddings"],u)}const l=f(n,["metadata"]);return l!=null&&p(t,["metadata"],l),t}function cx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Gb(d))),p(t,["embeddings"],u)}const l=f(n,["metadata"]);return l!=null&&p(t,["metadata"],l),t}function fx(n,e){const t={},o=f(n,["endpoint"]);o!=null&&p(t,["name"],o);const s=f(n,["deployedModelId"]);return s!=null&&p(t,["deployedModelId"],s),t}function dx(n,e){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["fileUri"]);o!=null&&p(t,["fileUri"],o);const s=f(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function hx(n,e){const t={},o=f(n,["id"]);o!=null&&p(t,["id"],o);const s=f(n,["args"]);s!=null&&p(t,["args"],s);const l=f(n,["name"]);if(l!=null&&p(t,["name"],l),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function px(n,e){const t={},o=f(n,["allowedFunctionNames"]);o!=null&&p(t,["allowedFunctionNames"],o);const s=f(n,["mode"]);if(s!=null&&p(t,["mode"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function mx(n,e){const t={},o=f(n,["description"]);o!=null&&p(t,["description"],o);const s=f(n,["name"]);s!=null&&p(t,["name"],s);const l=f(n,["parameters"]);l!=null&&p(t,["parameters"],l);const u=f(n,["parametersJsonSchema"]);u!=null&&p(t,["parametersJsonSchema"],u);const d=f(n,["response"]);d!=null&&p(t,["response"],d);const h=f(n,["responseJsonSchema"]);if(h!=null&&p(t,["responseJsonSchema"],h),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function gx(n,e,t,o){const s={},l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&p(t,["systemInstruction"],If(Sn(l)));const u=f(e,["temperature"]);u!=null&&p(s,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(s,["topP"],d);const h=f(e,["topK"]);h!=null&&p(s,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const _=f(e,["maxOutputTokens"]);_!=null&&p(s,["maxOutputTokens"],_);const E=f(e,["stopSequences"]);E!=null&&p(s,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&p(s,["responseLogprobs"],S);const w=f(e,["logprobs"]);w!=null&&p(s,["logprobs"],w);const M=f(e,["presencePenalty"]);M!=null&&p(s,["presencePenalty"],M);const L=f(e,["frequencyPenalty"]);L!=null&&p(s,["frequencyPenalty"],L);const V=f(e,["seed"]);V!=null&&p(s,["seed"],V);const Y=f(e,["responseMimeType"]);Y!=null&&p(s,["responseMimeType"],Y);const Q=f(e,["responseSchema"]);Q!=null&&p(s,["responseSchema"],nm(Q));const J=f(e,["responseJsonSchema"]);if(J!=null&&p(s,["responseJsonSchema"],J),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const te=f(e,["safetySettings"]);if(t!==void 0&&te!=null){let Ie=te;Array.isArray(Ie)&&(Ie=Ie.map(Qe=>sN(Qe))),p(t,["safetySettings"],Ie)}const me=f(e,["tools"]);if(t!==void 0&&me!=null){let Ie=Ia(me);Array.isArray(Ie)&&(Ie=Ie.map(Qe=>hN(wa(Qe)))),p(t,["tools"],Ie)}const W=f(e,["toolConfig"]);if(t!==void 0&&W!=null&&p(t,["toolConfig"],dN(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=f(e,["cachedContent"]);t!==void 0&&D!=null&&p(t,["cachedContent"],Do(n,D));const N=f(e,["responseModalities"]);N!=null&&p(s,["responseModalities"],N);const x=f(e,["mediaResolution"]);x!=null&&p(s,["mediaResolution"],x);const U=f(e,["speechConfig"]);if(U!=null&&p(s,["speechConfig"],im(U)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=f(e,["thinkingConfig"]);O!=null&&p(s,["thinkingConfig"],O);const q=f(e,["imageConfig"]);q!=null&&p(s,["imageConfig"],Gx(q));const P=f(e,["enableEnhancedCivicAnswers"]);if(P!=null&&p(s,["enableEnhancedCivicAnswers"],P),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function yx(n,e,t,o){const s={},l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&p(t,["systemInstruction"],Sn(l));const u=f(e,["temperature"]);u!=null&&p(s,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(s,["topP"],d);const h=f(e,["topK"]);h!=null&&p(s,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const _=f(e,["maxOutputTokens"]);_!=null&&p(s,["maxOutputTokens"],_);const E=f(e,["stopSequences"]);E!=null&&p(s,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&p(s,["responseLogprobs"],S);const w=f(e,["logprobs"]);w!=null&&p(s,["logprobs"],w);const M=f(e,["presencePenalty"]);M!=null&&p(s,["presencePenalty"],M);const L=f(e,["frequencyPenalty"]);L!=null&&p(s,["frequencyPenalty"],L);const V=f(e,["seed"]);V!=null&&p(s,["seed"],V);const Y=f(e,["responseMimeType"]);Y!=null&&p(s,["responseMimeType"],Y);const Q=f(e,["responseSchema"]);Q!=null&&p(s,["responseSchema"],nm(Q));const J=f(e,["responseJsonSchema"]);J!=null&&p(s,["responseJsonSchema"],J);const te=f(e,["routingConfig"]);te!=null&&p(s,["routingConfig"],te);const me=f(e,["modelSelectionConfig"]);me!=null&&p(s,["modelConfig"],me);const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let ve=W;Array.isArray(ve)&&(ve=ve.map(qe=>qe)),p(t,["safetySettings"],ve)}const D=f(e,["tools"]);if(t!==void 0&&D!=null){let ve=Ia(D);Array.isArray(ve)&&(ve=ve.map(qe=>jE(wa(qe)))),p(t,["tools"],ve)}const N=f(e,["toolConfig"]);t!==void 0&&N!=null&&p(t,["toolConfig"],N);const x=f(e,["labels"]);t!==void 0&&x!=null&&p(t,["labels"],x);const U=f(e,["cachedContent"]);t!==void 0&&U!=null&&p(t,["cachedContent"],Do(n,U));const O=f(e,["responseModalities"]);O!=null&&p(s,["responseModalities"],O);const q=f(e,["mediaResolution"]);q!=null&&p(s,["mediaResolution"],q);const P=f(e,["speechConfig"]);P!=null&&p(s,["speechConfig"],im(P));const Ie=f(e,["audioTimestamp"]);Ie!=null&&p(s,["audioTimestamp"],Ie);const Qe=f(e,["thinkingConfig"]);Qe!=null&&p(s,["thinkingConfig"],Qe);const ee=f(e,["imageConfig"]);if(ee!=null&&p(s,["imageConfig"],Hx(ee)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const he=f(e,["modelArmorConfig"]);return t!==void 0&&he!=null&&p(t,["modelArmorConfig"],he),s}function H_(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["contents"]);if(l!=null){let d=vi(l);Array.isArray(d)&&(d=d.map(h=>If(h))),p(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(o,["generationConfig"],gx(n,u,o)),o}function $_(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["contents"]);if(l!=null){let d=vi(l);Array.isArray(d)&&(d=d.map(h=>h)),p(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(o,["generationConfig"],yx(n,u,o)),o}function Y_(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(_=>Fb(_))),p(t,["candidates"],g)}const l=f(n,["modelVersion"]);l!=null&&p(t,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&p(t,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&p(t,["responseId"],d);const h=f(n,["usageMetadata"]);return h!=null&&p(t,["usageMetadata"],h),t}function J_(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["candidates"]);if(s!=null){let _=s;Array.isArray(_)&&(_=_.map(E=>E)),p(t,["candidates"],_)}const l=f(n,["createTime"]);l!=null&&p(t,["createTime"],l);const u=f(n,["modelVersion"]);u!=null&&p(t,["modelVersion"],u);const d=f(n,["promptFeedback"]);d!=null&&p(t,["promptFeedback"],d);const h=f(n,["responseId"]);h!=null&&p(t,["responseId"],h);const g=f(n,["usageMetadata"]);return g!=null&&p(t,["usageMetadata"],g),t}function vx(n,e,t){const o={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=f(n,["guidanceScale"]);if(e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const g=f(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const _=f(n,["includeRaiReason"]);e!==void 0&&_!=null&&p(e,["parameters","includeRaiReason"],_);const E=f(n,["language"]);e!==void 0&&E!=null&&p(e,["parameters","language"],E);const S=f(n,["outputMimeType"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","mimeType"],S);const w=f(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&p(e,["parameters","outputOptions","compressionQuality"],w),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=f(n,["imageSize"]);if(e!==void 0&&M!=null&&p(e,["parameters","sampleImageSize"],M),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function _x(n,e,t){const o={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const g=f(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&p(e,["parameters","safetySetting"],_);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const w=f(n,["includeRaiReason"]);e!==void 0&&w!=null&&p(e,["parameters","includeRaiReason"],w);const M=f(n,["language"]);e!==void 0&&M!=null&&p(e,["parameters","language"],M);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&p(e,["parameters","outputOptions","mimeType"],L);const V=f(n,["outputCompressionQuality"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","compressionQuality"],V);const Y=f(n,["addWatermark"]);e!==void 0&&Y!=null&&p(e,["parameters","addWatermark"],Y);const Q=f(n,["labels"]);e!==void 0&&Q!=null&&p(e,["labels"],Q);const J=f(n,["imageSize"]);e!==void 0&&J!=null&&p(e,["parameters","sampleImageSize"],J);const te=f(n,["enhancePrompt"]);return e!==void 0&&te!=null&&p(e,["parameters","enhancePrompt"],te),o}function Tx(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["prompt"]);l!=null&&p(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&vx(u,o),o}function Ex(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["prompt"]);l!=null&&p(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&_x(u,o),o}function Sx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Vx(d))),p(t,["generatedImages"],u)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&p(t,["positivePromptSafetyAttributes"],WE(l)),t}function Ax(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Rf(d))),p(t,["generatedImages"],u)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&p(t,["positivePromptSafetyAttributes"],ZE(l)),t}function Cx(n,e,t){const o={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(n,["durationSeconds"]);if(e!==void 0&&l!=null&&p(e,["parameters","durationSeconds"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(n,["resolution"]);e!==void 0&&d!=null&&p(e,["parameters","resolution"],d);const h=f(n,["personGeneration"]);if(e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(n,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const _=f(n,["enhancePrompt"]);if(e!==void 0&&_!=null&&p(e,["parameters","enhancePrompt"],_),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=f(n,["lastFrame"]);e!==void 0&&E!=null&&p(e,["instances[0]","lastFrame"],bf(E));const S=f(n,["referenceImages"]);if(e!==void 0&&S!=null){let w=S;Array.isArray(w)&&(w=w.map(M=>IN(M))),p(e,["instances[0]","referenceImages"],w)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function wx(n,e,t){const o={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const u=f(n,["fps"]);e!==void 0&&u!=null&&p(e,["parameters","fps"],u);const d=f(n,["durationSeconds"]);e!==void 0&&d!=null&&p(e,["parameters","durationSeconds"],d);const h=f(n,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const g=f(n,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const _=f(n,["resolution"]);e!==void 0&&_!=null&&p(e,["parameters","resolution"],_);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const S=f(n,["pubsubTopic"]);e!==void 0&&S!=null&&p(e,["parameters","pubsubTopic"],S);const w=f(n,["negativePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","negativePrompt"],w);const M=f(n,["enhancePrompt"]);e!==void 0&&M!=null&&p(e,["parameters","enhancePrompt"],M);const L=f(n,["generateAudio"]);e!==void 0&&L!=null&&p(e,["parameters","generateAudio"],L);const V=f(n,["lastFrame"]);e!==void 0&&V!=null&&p(e,["instances[0]","lastFrame"],Di(V));const Y=f(n,["referenceImages"]);if(e!==void 0&&Y!=null){let te=Y;Array.isArray(te)&&(te=te.map(me=>RN(me))),p(e,["instances[0]","referenceImages"],te)}const Q=f(n,["mask"]);e!==void 0&&Q!=null&&p(e,["instances[0]","mask"],wN(Q));const J=f(n,["compressionQuality"]);return e!==void 0&&J!=null&&p(e,["parameters","compressionQuality"],J),o}function Ix(n,e){const t={},o=f(n,["name"]);o!=null&&p(t,["name"],o);const s=f(n,["metadata"]);s!=null&&p(t,["metadata"],s);const l=f(n,["done"]);l!=null&&p(t,["done"],l);const u=f(n,["error"]);u!=null&&p(t,["error"],u);const d=f(n,["response","generateVideoResponse"]);return d!=null&&p(t,["response"],Nx(d)),t}function Rx(n,e){const t={},o=f(n,["name"]);o!=null&&p(t,["name"],o);const s=f(n,["metadata"]);s!=null&&p(t,["metadata"],s);const l=f(n,["done"]);l!=null&&p(t,["done"],l);const u=f(n,["error"]);u!=null&&p(t,["error"],u);const d=f(n,["response"]);return d!=null&&p(t,["response"],Mx(d)),t}function bx(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["prompt"]);l!=null&&p(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&p(o,["instances[0]","image"],bf(u));const d=f(e,["video"]);d!=null&&p(o,["instances[0]","video"],eS(d));const h=f(e,["source"]);h!=null&&Dx(h,o);const g=f(e,["config"]);return g!=null&&Cx(g,o),o}function xx(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["prompt"]);l!=null&&p(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&p(o,["instances[0]","image"],Di(u));const d=f(e,["video"]);d!=null&&p(o,["instances[0]","video"],tS(d));const h=f(e,["source"]);h!=null&&Px(h,o);const g=f(e,["config"]);return g!=null&&wx(g,o),o}function Nx(n,e){const t={},o=f(n,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>kx(d))),p(t,["generatedVideos"],u)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&p(t,["raiMediaFilteredCount"],s);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&p(t,["raiMediaFilteredReasons"],l),t}function Mx(n,e){const t={},o=f(n,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Lx(d))),p(t,["generatedVideos"],u)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&p(t,["raiMediaFilteredCount"],s);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&p(t,["raiMediaFilteredReasons"],l),t}function Dx(n,e,t){const o={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const l=f(n,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],bf(l));const u=f(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],eS(u)),o}function Px(n,e,t){const o={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const l=f(n,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],Di(l));const u=f(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],tS(u)),o}function Vx(n,e){const t={},o=f(n,["_self"]);o!=null&&p(t,["image"],$x(o));const s=f(n,["raiFilteredReason"]);s!=null&&p(t,["raiFilteredReason"],s);const l=f(n,["_self"]);return l!=null&&p(t,["safetyAttributes"],WE(l)),t}function Rf(n,e){const t={},o=f(n,["_self"]);o!=null&&p(t,["image"],XE(o));const s=f(n,["raiFilteredReason"]);s!=null&&p(t,["raiFilteredReason"],s);const l=f(n,["_self"]);l!=null&&p(t,["safetyAttributes"],ZE(l));const u=f(n,["prompt"]);return u!=null&&p(t,["enhancedPrompt"],u),t}function Ux(n,e){const t={},o=f(n,["_self"]);o!=null&&p(t,["mask"],XE(o));const s=f(n,["labels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(t,["labels"],l)}return t}function kx(n,e){const t={},o=f(n,["video"]);return o!=null&&p(t,["video"],AN(o)),t}function Lx(n,e){const t={},o=f(n,["_self"]);return o!=null&&p(t,["video"],CN(o)),t}function Ox(n,e){const t={},o=f(n,["modelSelectionConfig"]);o!=null&&p(t,["modelConfig"],o);const s=f(n,["responseJsonSchema"]);s!=null&&p(t,["responseJsonSchema"],s);const l=f(n,["audioTimestamp"]);l!=null&&p(t,["audioTimestamp"],l);const u=f(n,["candidateCount"]);u!=null&&p(t,["candidateCount"],u);const d=f(n,["enableAffectiveDialog"]);d!=null&&p(t,["enableAffectiveDialog"],d);const h=f(n,["frequencyPenalty"]);h!=null&&p(t,["frequencyPenalty"],h);const g=f(n,["logprobs"]);g!=null&&p(t,["logprobs"],g);const _=f(n,["maxOutputTokens"]);_!=null&&p(t,["maxOutputTokens"],_);const E=f(n,["mediaResolution"]);E!=null&&p(t,["mediaResolution"],E);const S=f(n,["presencePenalty"]);S!=null&&p(t,["presencePenalty"],S);const w=f(n,["responseLogprobs"]);w!=null&&p(t,["responseLogprobs"],w);const M=f(n,["responseMimeType"]);M!=null&&p(t,["responseMimeType"],M);const L=f(n,["responseModalities"]);L!=null&&p(t,["responseModalities"],L);const V=f(n,["responseSchema"]);V!=null&&p(t,["responseSchema"],V);const Y=f(n,["routingConfig"]);Y!=null&&p(t,["routingConfig"],Y);const Q=f(n,["seed"]);Q!=null&&p(t,["seed"],Q);const J=f(n,["speechConfig"]);J!=null&&p(t,["speechConfig"],J);const te=f(n,["stopSequences"]);te!=null&&p(t,["stopSequences"],te);const me=f(n,["temperature"]);me!=null&&p(t,["temperature"],me);const W=f(n,["thinkingConfig"]);W!=null&&p(t,["thinkingConfig"],W);const D=f(n,["topK"]);D!=null&&p(t,["topK"],D);const N=f(n,["topP"]);if(N!=null&&p(t,["topP"],N),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Fx(n,e,t){const o={},s=f(e,["model"]);return s!=null&&p(o,["_url","name"],st(n,s)),o}function Bx(n,e,t){const o={},s=f(e,["model"]);return s!=null&&p(o,["_url","name"],st(n,s)),o}function qx(n,e){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(n,["enableWidget"]);return o!=null&&p(t,["enableWidget"],o),t}function zx(n,e){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(n,["timeRangeFilter"]);return o!=null&&p(t,["timeRangeFilter"],o),t}function Gx(n,e){const t={},o=f(n,["aspectRatio"]);o!=null&&p(t,["aspectRatio"],o);const s=f(n,["imageSize"]);if(s!=null&&p(t,["imageSize"],s),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Hx(n,e){const t={},o=f(n,["aspectRatio"]);o!=null&&p(t,["aspectRatio"],o);const s=f(n,["imageSize"]);s!=null&&p(t,["imageSize"],s);const l=f(n,["personGeneration"]);l!=null&&p(t,["personGeneration"],l);const u=f(n,["outputMimeType"]);u!=null&&p(t,["imageOutputOptions","mimeType"],u);const d=f(n,["outputCompressionQuality"]);return d!=null&&p(t,["imageOutputOptions","compressionQuality"],d),t}function $x(n,e){const t={},o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["imageBytes"],Ur(o));const s=f(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function XE(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&p(t,["gcsUri"],o);const s=f(n,["bytesBase64Encoded"]);s!=null&&p(t,["imageBytes"],Ur(s));const l=f(n,["mimeType"]);return l!=null&&p(t,["mimeType"],l),t}function bf(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=f(n,["imageBytes"]);o!=null&&p(t,["bytesBase64Encoded"],Ur(o));const s=f(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function Di(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&p(t,["gcsUri"],o);const s=f(n,["imageBytes"]);s!=null&&p(t,["bytesBase64Encoded"],Ur(s));const l=f(n,["mimeType"]);return l!=null&&p(t,["mimeType"],l),t}function Yx(n,e,t,o){const s={},l=f(e,["pageSize"]);t!==void 0&&l!=null&&p(t,["_query","pageSize"],l);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&p(t,["_query","filter"],d);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&p(t,["_url","models_url"],GE(n,h)),s}function Jx(n,e,t,o){const s={},l=f(e,["pageSize"]);t!==void 0&&l!=null&&p(t,["_query","pageSize"],l);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&p(t,["_query","filter"],d);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&p(t,["_url","models_url"],GE(n,h)),s}function Kx(n,e,t){const o={},s=f(e,["config"]);return s!=null&&Yx(n,s,o),o}function Qx(n,e,t){const o={},s=f(e,["config"]);return s!=null&&Jx(n,s,o),o}function Xx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const l=f(n,["_self"]);if(l!=null){let u=HE(l);Array.isArray(u)&&(u=u.map(d=>gp(d))),p(t,["models"],u)}return t}function Wx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const l=f(n,["_self"]);if(l!=null){let u=HE(l);Array.isArray(u)&&(u=u.map(d=>yp(d))),p(t,["models"],u)}return t}function Zx(n,e){const t={},o=f(n,["maskMode"]);o!=null&&p(t,["maskMode"],o);const s=f(n,["segmentationClasses"]);s!=null&&p(t,["maskClasses"],s);const l=f(n,["maskDilation"]);return l!=null&&p(t,["dilation"],l),t}function gp(n,e){const t={},o=f(n,["name"]);o!=null&&p(t,["name"],o);const s=f(n,["displayName"]);s!=null&&p(t,["displayName"],s);const l=f(n,["description"]);l!=null&&p(t,["description"],l);const u=f(n,["version"]);u!=null&&p(t,["version"],u);const d=f(n,["_self"]);d!=null&&p(t,["tunedModelInfo"],pN(d));const h=f(n,["inputTokenLimit"]);h!=null&&p(t,["inputTokenLimit"],h);const g=f(n,["outputTokenLimit"]);g!=null&&p(t,["outputTokenLimit"],g);const _=f(n,["supportedGenerationMethods"]);_!=null&&p(t,["supportedActions"],_);const E=f(n,["temperature"]);E!=null&&p(t,["temperature"],E);const S=f(n,["maxTemperature"]);S!=null&&p(t,["maxTemperature"],S);const w=f(n,["topP"]);w!=null&&p(t,["topP"],w);const M=f(n,["topK"]);M!=null&&p(t,["topK"],M);const L=f(n,["thinking"]);return L!=null&&p(t,["thinking"],L),t}function yp(n,e){const t={},o=f(n,["name"]);o!=null&&p(t,["name"],o);const s=f(n,["displayName"]);s!=null&&p(t,["displayName"],s);const l=f(n,["description"]);l!=null&&p(t,["description"],l);const u=f(n,["versionId"]);u!=null&&p(t,["version"],u);const d=f(n,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(w=>fx(w))),p(t,["endpoints"],S)}const h=f(n,["labels"]);h!=null&&p(t,["labels"],h);const g=f(n,["_self"]);g!=null&&p(t,["tunedModelInfo"],mN(g));const _=f(n,["defaultCheckpointId"]);_!=null&&p(t,["defaultCheckpointId"],_);const E=f(n,["checkpoints"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(w=>w)),p(t,["checkpoints"],S)}return t}function jx(n,e){const t={},o=f(n,["mediaResolution"]);o!=null&&p(t,["mediaResolution"],o);const s=f(n,["codeExecutionResult"]);s!=null&&p(t,["codeExecutionResult"],s);const l=f(n,["executableCode"]);l!=null&&p(t,["executableCode"],l);const u=f(n,["fileData"]);u!=null&&p(t,["fileData"],dx(u));const d=f(n,["functionCall"]);d!=null&&p(t,["functionCall"],hx(d));const h=f(n,["functionResponse"]);h!=null&&p(t,["functionResponse"],h);const g=f(n,["inlineData"]);g!=null&&p(t,["inlineData"],Ob(g));const _=f(n,["text"]);_!=null&&p(t,["text"],_);const E=f(n,["thought"]);E!=null&&p(t,["thought"],E);const S=f(n,["thoughtSignature"]);S!=null&&p(t,["thoughtSignature"],S);const w=f(n,["videoMetadata"]);return w!=null&&p(t,["videoMetadata"],w),t}function eN(n,e){const t={},o=f(n,["productImage"]);return o!=null&&p(t,["image"],Di(o)),t}function tN(n,e,t){const o={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const l=f(n,["baseSteps"]);e!==void 0&&l!=null&&p(e,["parameters","baseSteps"],l);const u=f(n,["outputGcsUri"]);e!==void 0&&u!=null&&p(e,["parameters","storageUri"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const _=f(n,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S);const w=f(n,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const M=f(n,["labels"]);return e!==void 0&&M!=null&&p(e,["labels"],M),o}function nN(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["source"]);l!=null&&oN(l,o);const u=f(e,["config"]);return u!=null&&tN(u,o),o}function iN(n,e){const t={},o=f(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Rf(l))),p(t,["generatedImages"],s)}return t}function oN(n,e,t){const o={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const l=f(n,["personImage"]);e!==void 0&&l!=null&&p(e,["instances[0]","personImage","image"],Di(l));const u=f(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>eN(h))),p(e,["instances[0]","productImages"],d)}return o}function rN(n,e){const t={},o=f(n,["referenceImage"]);o!=null&&p(t,["referenceImage"],Di(o));const s=f(n,["referenceId"]);s!=null&&p(t,["referenceId"],s);const l=f(n,["referenceType"]);l!=null&&p(t,["referenceType"],l);const u=f(n,["maskImageConfig"]);u!=null&&p(t,["maskImageConfig"],Zx(u));const d=f(n,["controlImageConfig"]);d!=null&&p(t,["controlImageConfig"],$b(d));const h=f(n,["styleImageConfig"]);h!=null&&p(t,["styleImageConfig"],h);const g=f(n,["subjectImageConfig"]);return g!=null&&p(t,["subjectImageConfig"],g),t}function WE(n,e){const t={},o=f(n,["safetyAttributes","categories"]);o!=null&&p(t,["categories"],o);const s=f(n,["safetyAttributes","scores"]);s!=null&&p(t,["scores"],s);const l=f(n,["contentType"]);return l!=null&&p(t,["contentType"],l),t}function ZE(n,e){const t={},o=f(n,["safetyAttributes","categories"]);o!=null&&p(t,["categories"],o);const s=f(n,["safetyAttributes","scores"]);s!=null&&p(t,["scores"],s);const l=f(n,["contentType"]);return l!=null&&p(t,["contentType"],l),t}function sN(n,e){const t={},o=f(n,["category"]);if(o!=null&&p(t,["category"],o),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&p(t,["threshold"],s),t}function aN(n,e){const t={},o=f(n,["image"]);return o!=null&&p(t,["image"],Di(o)),t}function lN(n,e,t){const o={},s=f(n,["mode"]);e!==void 0&&s!=null&&p(e,["parameters","mode"],s);const l=f(n,["maxPredictions"]);e!==void 0&&l!=null&&p(e,["parameters","maxPredictions"],l);const u=f(n,["confidenceThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","confidenceThreshold"],u);const d=f(n,["maskDilation"]);e!==void 0&&d!=null&&p(e,["parameters","maskDilation"],d);const h=f(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&p(e,["parameters","binaryColorThreshold"],h);const g=f(n,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),o}function uN(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["source"]);l!=null&&fN(l,o);const u=f(e,["config"]);return u!=null&&lN(u,o),o}function cN(n,e){const t={},o=f(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Ux(l))),p(t,["generatedMasks"],s)}return t}function fN(n,e,t){const o={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const l=f(n,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],Di(l));const u=f(n,["scribbleImage"]);return e!==void 0&&u!=null&&p(e,["instances[0]","scribble"],aN(u)),o}function dN(n,e){const t={},o=f(n,["retrievalConfig"]);o!=null&&p(t,["retrievalConfig"],o);const s=f(n,["functionCallingConfig"]);return s!=null&&p(t,["functionCallingConfig"],px(s)),t}function hN(n,e){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(n,["computerUse"]);o!=null&&p(t,["computerUse"],o);const s=f(n,["fileSearch"]);s!=null&&p(t,["fileSearch"],s);const l=f(n,["codeExecution"]);if(l!=null&&p(t,["codeExecution"],l),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>S)),p(t,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(t,["googleMaps"],qx(d));const h=f(n,["googleSearch"]);h!=null&&p(t,["googleSearch"],zx(h));const g=f(n,["googleSearchRetrieval"]);g!=null&&p(t,["googleSearchRetrieval"],g);const _=f(n,["urlContext"]);return _!=null&&p(t,["urlContext"],_),t}function jE(n,e){const t={},o=f(n,["retrieval"]);o!=null&&p(t,["retrieval"],o);const s=f(n,["computerUse"]);if(s!=null&&p(t,["computerUse"],s),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(n,["codeExecution"]);l!=null&&p(t,["codeExecution"],l);const u=f(n,["enterpriseWebSearch"]);u!=null&&p(t,["enterpriseWebSearch"],u);const d=f(n,["functionDeclarations"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(w=>mx(w))),p(t,["functionDeclarations"],S)}const h=f(n,["googleMaps"]);h!=null&&p(t,["googleMaps"],h);const g=f(n,["googleSearch"]);g!=null&&p(t,["googleSearch"],g);const _=f(n,["googleSearchRetrieval"]);_!=null&&p(t,["googleSearchRetrieval"],_);const E=f(n,["urlContext"]);return E!=null&&p(t,["urlContext"],E),t}function pN(n,e){const t={},o=f(n,["baseModel"]);o!=null&&p(t,["baseModel"],o);const s=f(n,["createTime"]);s!=null&&p(t,["createTime"],s);const l=f(n,["updateTime"]);return l!=null&&p(t,["updateTime"],l),t}function mN(n,e){const t={},o=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&p(t,["baseModel"],o);const s=f(n,["createTime"]);s!=null&&p(t,["createTime"],s);const l=f(n,["updateTime"]);return l!=null&&p(t,["updateTime"],l),t}function gN(n,e,t){const o={},s=f(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const l=f(n,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),o}function yN(n,e,t){const o={},s=f(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const l=f(n,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),o}function vN(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","name"],st(n,s));const l=f(e,["config"]);return l!=null&&gN(l,o),o}function _N(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["config"]);return l!=null&&yN(l,o),o}function TN(n,e,t){const o={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const l=f(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&p(e,["parameters","safetySetting"],l);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const d=f(n,["includeRaiReason"]);e!==void 0&&d!=null&&p(e,["parameters","includeRaiReason"],d);const h=f(n,["outputMimeType"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","mimeType"],h);const g=f(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const _=f(n,["enhanceInputImage"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],_);const E=f(n,["imagePreservationFactor"]);e!==void 0&&E!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const S=f(n,["labels"]);e!==void 0&&S!=null&&p(e,["labels"],S);const w=f(n,["numberOfImages"]);e!==void 0&&w!=null&&p(e,["parameters","sampleCount"],w);const M=f(n,["mode"]);return e!==void 0&&M!=null&&p(e,["parameters","mode"],M),o}function EN(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],st(n,s));const l=f(e,["image"]);l!=null&&p(o,["instances[0]","image"],Di(l));const u=f(e,["upscaleFactor"]);u!=null&&p(o,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&TN(d,o),o}function SN(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Rf(u))),p(t,["generatedImages"],l)}return t}function AN(n,e){const t={},o=f(n,["uri"]);o!=null&&p(t,["uri"],o);const s=f(n,["encodedVideo"]);s!=null&&p(t,["videoBytes"],Ur(s));const l=f(n,["encoding"]);return l!=null&&p(t,["mimeType"],l),t}function CN(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&p(t,["uri"],o);const s=f(n,["bytesBase64Encoded"]);s!=null&&p(t,["videoBytes"],Ur(s));const l=f(n,["mimeType"]);return l!=null&&p(t,["mimeType"],l),t}function wN(n,e){const t={},o=f(n,["image"]);o!=null&&p(t,["_self"],Di(o));const s=f(n,["maskMode"]);return s!=null&&p(t,["maskMode"],s),t}function IN(n,e){const t={},o=f(n,["image"]);o!=null&&p(t,["image"],bf(o));const s=f(n,["referenceType"]);return s!=null&&p(t,["referenceType"],s),t}function RN(n,e){const t={},o=f(n,["image"]);o!=null&&p(t,["image"],Di(o));const s=f(n,["referenceType"]);return s!=null&&p(t,["referenceType"],s),t}function eS(n,e){const t={},o=f(n,["uri"]);o!=null&&p(t,["uri"],o);const s=f(n,["videoBytes"]);s!=null&&p(t,["encodedVideo"],Ur(s));const l=f(n,["mimeType"]);return l!=null&&p(t,["encoding"],l),t}function tS(n,e){const t={},o=f(n,["uri"]);o!=null&&p(t,["gcsUri"],o);const s=f(n,["videoBytes"]);s!=null&&p(t,["bytesBase64Encoded"],Ur(s));const l=f(n,["mimeType"]);return l!=null&&p(t,["mimeType"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bN(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&p(e,["displayName"],o),t}function xN(n){const e={},t=f(n,["config"]);return t!=null&&bN(t,e),e}function NN(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&p(e,["_query","force"],o),t}function MN(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&NN(o,e),e}function DN(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function PN(n,e){const t={},o=f(n,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["customMetadata"],l)}const s=f(n,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),t}function VN(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["response"]);return u!=null&&p(e,["response"],kN(u)),e}function UN(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const o=f(n,["fileName"]);o!=null&&p(e,["fileName"],o);const s=f(n,["config"]);return s!=null&&PN(s,e),e}function kN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&p(e,["parent"],o);const s=f(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function LN(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function ON(n){const e={},t=f(n,["config"]);return t!=null&&LN(t,e),e}function FN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["fileSearchStores"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["fileSearchStores"],l)}return e}function nS(n,e){const t={},o=f(n,["mimeType"]);e!==void 0&&o!=null&&p(e,["mimeType"],o);const s=f(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>h)),p(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function BN(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const o=f(n,["config"]);return o!=null&&nS(o,e),e}function qN(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zN="Content-Type",GN="X-Server-Timeout",HN="User-Agent",vp="x-goog-api-client",$N="1.41.0",YN=`google-genai-sdk/${$N}`,JN="v1beta1",KN="v1beta",QN=5,XN=[408,429,500,502,503,504];class WN{constructor(e){var t,o,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:JN}else{if(!this.clientOptions.apiKey)throw new $l({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:KN,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const s=[this.getRequestUrlInternal(t)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===dp.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))s.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,s.toString(),e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(t))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,s.toString(),e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o,s){if(t&&t.timeout||s){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&ZN(e,t.extraBody),e.headers=await this.getHeadersInternal(t,o),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async s=>(await K_(s),new hp(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async s=>(await K_(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return xi(this,arguments,function*(){var o;const s=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let u="";const d="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:g,value:_}=yield Ue(s.read());if(g){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=l.decode(_,{stream:!0});try{const M=JSON.parse(E);if("error"in M){const L=JSON.parse(JSON.stringify(M.error)),V=L.status,Y=L.code,Q=`got status: ${V}. ${JSON.stringify(M)}`;if(Y>=400&&Y<600)throw new $l({message:Q,status:Y})}}catch(M){if(M.name==="ApiError")throw M}u+=E;let S=-1,w=0;for(;;){S=-1,w=0;for(const V of h){const Y=u.indexOf(V);Y!==-1&&(S===-1||Y<S)&&(S=Y,w=V.length)}if(S===-1)break;const M=u.substring(0,S);u=u.substring(S+w);const L=M.trim();if(L.startsWith(d)){const V=L.substring(d.length).trim();try{const Y=new Response(V,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ue(new hp(Y))}catch(Y){throw new Error(`exception parsing stream chunk ${V}. ${Y}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,t){var o;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,t);const s=this.clientOptions.httpOptions.retryOptions;return qw(async()=>{const u=await fetch(e,t);if(u.ok)return u;throw XN.includes(u.status)?new Error(`Retryable HTTP Error: ${u.statusText}`):new VE(`Non-retryable exception ${u.statusText} sending request`)},{retries:((o=s.attempts)!==null&&o!==void 0?o:QN)-1})}getDefaultHeaders(){const e={},t=YN+" "+this.clientOptions.userAgentExtra;return e[HN]=t,e[vp]=t,e[zN]="application/json",e}async getHeadersInternal(e,t){const o=new Headers;if(e&&e.headers){for(const[s,l]of Object.entries(e.headers))o.append(s,l);e.timeout&&e.timeout>0&&o.append(GN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,t),o}getFileName(e){var t;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(t=o.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),o}async uploadFile(e,t){var o;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);s.sizeBytes=String(u.size);const d=(o=t==null?void 0:t.mimeType)!==null&&o!==void 0?o:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const h={file:s},g=this.getFileName(e),_=ye("upload/v1beta/files",h._url),E=await this.fetchUploadUrl(_,s.sizeBytes,s.mimeType,g,h,t==null?void 0:t.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,o){var s;const l=this.clientOptions.uploader,u=await l.stat(t),d=String(u.size),h=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const g=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),E={};o!=null&&nS(o,E);const S=await this.fetchUploadUrl(g,d,h,_,E,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,o,s,l,u){var d;let h={};u?h=u:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const g=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:h});if(!g||!(g!=null&&g.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=g==null?void 0:g.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function K_(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(o);throw t>=400&&t<600?new $l({message:s,status:t}):new Error(s)}}function ZN(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,u){const d=Object.assign({},l);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const g=u[h],_=d[h];g&&typeof g=="object"&&!Array.isArray(g)&&_&&typeof _=="object"&&!Array.isArray(_)?d[h]=o(_,g):(_&&g&&typeof _!=typeof g&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof _}, New type: ${typeof g}. Overwriting.`),d[h]=g)}return d}const s=o(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jN="mcp_used/unknown";let e2=!1;function iS(n){for(const e of n)if(t2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return e2}function oS(n){var e;const t=(e=n[vp])!==null&&e!==void 0?e:"";n[vp]=(t+` ${jN}`).trimStart()}function t2(n){return n!==null&&typeof n=="object"&&n instanceof rm}function n2(n){return xi(this,arguments,function*(t,o=100){let s,l=0;for(;l<o;){const u=yield Ue(t.listTools({cursor:s}));for(const d of u.tools)yield yield Ue(d),l++;if(!u.nextCursor)break;s=u.nextCursor}})}class rm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new rm(e,t)}async initialize(){var e,t,o,s;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,h=(t=void 0,Ni(n2(_))),g;g=await h.next(),e=g.done,!e;d=!0){s=g.value,d=!1;const E=s;u.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(E){t={error:E}}finally{try{!d&&!e&&(o=h.return)&&await o.call(h)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),xI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await s.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function i2(n,e,t){const o=new EI;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(o,s),e(o)}class o2{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=a2(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),h=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let g=()=>{};const _=new Promise(J=>{g=J}),E=e.callbacks,S=function(){g({})},w=this.apiClient,M={onopen:S,onmessage:J=>{i2(w,E.onmessage,J)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(J){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(J){}},L=this.webSocketFactory.create(h,s2(u),M);L.connect(),await _;const Q={setup:{model:st(this.apiClient,e.model)}};return L.send(JSON.stringify(Q)),new r2(L,this.apiClient)}}class r2{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=bb(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Rb(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(da.PLAY)}pause(){this.sendPlaybackControl(da.PAUSE)}stop(){this.sendPlaybackControl(da.STOP)}resetContext(){this.sendPlaybackControl(da.RESET_CONTEXT)}close(){this.conn.close()}}function s2(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function a2(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const l2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function u2(n,e,t){const o=new TI;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const l=JSON.parse(s);if(n.isVertexAI()){const u=Mb(l);Object.assign(o,u)}else Object.assign(o,l);e(o)}class c2{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new o2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,s,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&iS(e.config.tools)&&oS(E);const S=p2(E);if(this.apiClient.isVertexAI()){const x=this.apiClient.getProject(),U=this.apiClient.getLocation(),O=this.apiClient.getApiKey(),q=!!x&&!!U||!!O;this.apiClient.getCustomBaseUrl()&&!q?_=h:(_=`${h}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_))}else{const x=this.apiClient.getApiKey();let U="BidiGenerateContent",O="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),g!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",O="access_token"),_=`${h}/ws/google.ai.generativelanguage.${g}.GenerativeService.${U}?${O}=${x}`}let w=()=>{};const M=new Promise(x=>{w=x}),L=e.callbacks,V=function(){var x;(x=L==null?void 0:L.onopen)===null||x===void 0||x.call(L),w({})},Y=this.apiClient,Q={onopen:V,onmessage:x=>{u2(Y,L.onmessage,x)},onerror:(t=L==null?void 0:L.onerror)!==null&&t!==void 0?t:function(x){},onclose:(o=L==null?void 0:L.onclose)!==null&&o!==void 0?o:function(x){}},J=this.webSocketFactory.create(_,h2(S),Q);J.connect(),await M;let te=st(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&te.startsWith("publishers/")){const x=this.apiClient.getProject(),U=this.apiClient.getLocation();x&&U&&(te=`projects/${x}/locations/${U}/`+te)}let me={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[of.AUDIO]}:e.config.responseModalities=[of.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],D=[];for(const x of W)if(this.isCallableTool(x)){const U=x;D.push(await U.tool())}else D.push(x);D.length>0&&(e.config.tools=D);const N={model:te,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?me=Ib(this.apiClient,N):me=wb(this.apiClient,N),delete me.config,J.send(JSON.stringify(me)),new d2(J,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const f2={turnComplete:!0};class d2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=vi(t.turns),e.isVertexAI()||(o=o.map(s=>If(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(l2)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},f2),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Nb(e)}:t={realtimeInput:xb(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function h2(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function p2(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q_=10;function X_(n){var e,t,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ma(u)){s=!0;break}if(!s)return!0;const l=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ma(n){return"callTool"in n&&typeof n.callTool=="function"}function m2(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>ma(s)))!==null&&o!==void 0?o:!1}function W_(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,s)=>{if(ma(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(s)}),t}function Z_(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g2 extends Mo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,s,l,u,d;const h=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!m2(t)||X_(t.config))return await this.generateContentInternal(h);const g=W_(t);if(g.length>0){const L=g.map(V=>`tools[${V}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${L}.`)}let _,E;const S=vi(h.contents),w=(l=(s=(o=h.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:Q_;let M=0;for(;M<w&&(_=await this.generateContentInternal(h),!(!_.functionCalls||_.functionCalls.length===0));){const L=_.candidates[0].content,V=[];for(const Y of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(ma(Y)){const J=await Y.callTool(_.functionCalls);V.push(...J)}M++,E={role:"user",parts:V},h.contents=vi(h.contents),h.contents.push(L),h.contents.push(E),Z_(h.config)&&(S.push(L),S.push(E))}return Z_(h.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async t=>{var o,s,l,u,d;if(this.maybeMoveToResponseJsonSchem(t),X_(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const h=W_(t);if(h.length>0){const E=h.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const g=(l=(s=(o=t==null?void 0:t.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(g&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var s;let l;const u=[];if(o!=null&&o.generatedImages)for(const h of o.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((s=h==null?void 0:h.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=h==null?void 0:h.safetyAttributes:u.push(h);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async t=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new gs(Ro.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var o,s,l,u,d,h;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=t.video)===null||o===void 0)&&o.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((h=(d=t.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,s;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async h=>ma(h)?await h.tool():h)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&iS(e.config.tools)){const h=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let g=Object.assign({},h);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),oS(g),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:g})}return d}async initAfcToolsMap(e){var t,o,s;const l=new Map;for(const u of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(ma(u)){const d=u,h=await d.tool();for(const g of(s=h.functionDeclarations)!==null&&s!==void 0?s:[]){if(!g.name)throw new Error("Function declaration name is required.");if(l.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);l.set(g.name,d)}}return l}async processAfcStream(e){var t,o,s;const l=(s=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Q_;let u=!1,d=0;const h=await this.initAfcToolsMap(e);return(function(g,_,E){return xi(this,arguments,function*(){for(var S,w,M,L,V,Y;d<l;){u&&(d++,u=!1);const me=yield Ue(g.processParamsMaybeAddMcpUsage(E)),W=yield Ue(g.generateContentStreamInternal(me)),D=[],N=[];try{for(var Q=!0,J=(w=void 0,Ni(W)),te;te=yield Ue(J.next()),S=te.done,!S;Q=!0){L=te.value,Q=!1;const x=L;if(yield yield Ue(x),x.candidates&&(!((V=x.candidates[0])===null||V===void 0)&&V.content)){N.push(x.candidates[0].content);for(const U of(Y=x.candidates[0].content.parts)!==null&&Y!==void 0?Y:[])if(d<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(U.functionCall.name)){const O=yield Ue(_.get(U.functionCall.name).callTool([U.functionCall]));D.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(x){w={error:x}}finally{try{!Q&&!S&&(M=J.return)&&(yield Ue(M.call(J)))}finally{if(w)throw w.error}}if(D.length>0){u=!0;const x=new Dl;x.candidates=[{content:{role:"user",parts:D}}],yield yield Ue(x);const U=[];U.push(...N),U.push({role:"user",parts:D});const O=vi(E.contents).concat(U);E.contents=O}else break}})})(this,h,e)}async generateContentInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=$_(this.apiClient,e);return d=ye("{model}:generateContent",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=J_(_),S=new Dl;return Object.assign(S,E),S})}else{const g=H_(this.apiClient,e);return d=ye("{model}:generateContent",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Y_(_),S=new Dl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=$_(this.apiClient,e);return d=ye("{model}:streamGenerateContent?alt=sse",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(E){return xi(this,arguments,function*(){var S,w,M,L;try{for(var V=!0,Y=Ni(E),Q;Q=yield Ue(Y.next()),S=Q.done,!S;V=!0){L=Q.value,V=!1;const J=L,te=J_(yield Ue(J.json()),e);te.sdkHttpResponse={headers:J.headers};const me=new Dl;Object.assign(me,te),yield yield Ue(me)}}catch(J){w={error:J}}finally{try{!V&&!S&&(M=Y.return)&&(yield Ue(M.call(Y)))}finally{if(w)throw w.error}}})})}else{const g=H_(this.apiClient,e);return d=ye("{model}:streamGenerateContent?alt=sse",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(E){return xi(this,arguments,function*(){var S,w,M,L;try{for(var V=!0,Y=Ni(E),Q;Q=yield Ue(Y.next()),S=Q.done,!S;V=!0){L=Q.value,V=!1;const J=L,te=Y_(yield Ue(J.json()),e);te.sdkHttpResponse={headers:J.headers};const me=new Dl;Object.assign(me,te),yield yield Ue(me)}}catch(J){w={error:J}}finally{try{!V&&!S&&(M=Y.return)&&(yield Ue(M.call(Y)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=lx(this.apiClient,e);return d=ye("{model}:predict",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=cx(_),S=new R_;return Object.assign(S,E),S})}else{const g=ax(this.apiClient,e);return d=ye("{model}:batchEmbedContents",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=ux(_),S=new R_;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=Ex(this.apiClient,e);return d=ye("{model}:predict",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Ax(_),S=new b_;return Object.assign(S,E),S})}else{const g=Tx(this.apiClient,e);return d=ye("{model}:predict",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Sx(_),S=new b_;return Object.assign(S,E),S})}}async editImageInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=ix(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const g=ox(h),_=new lI;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=EN(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const g=SN(h),_=new uI;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=nN(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=iN(h),_=new cI;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=uN(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=cN(h),_=new fI;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=Bx(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>yp(_))}else{const g=Fx(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>gp(_))}}async listInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=Qx(this.apiClient,e);return d=ye("{models_url}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Wx(_),S=new x_;return Object.assign(S,E),S})}else{const g=Kx(this.apiClient,e);return d=ye("{models_url}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Xx(_),S=new x_;return Object.assign(S,E),S})}}async update(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=_N(this.apiClient,e);return d=ye("{model}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>yp(_))}else{const g=vN(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>gp(_))}}async delete(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=jb(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=tx(_),S=new N_;return Object.assign(S,E),S})}else{const g=Zb(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=ex(_),S=new N_;return Object.assign(S,E),S})}}async countTokens(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=Qb(this.apiClient,e);return d=ye("{model}:countTokens",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Wb(_),S=new M_;return Object.assign(S,E),S})}else{const g=Kb(this.apiClient,e);return d=ye("{model}:countTokens",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Xb(_),S=new M_;return Object.assign(S,E),S})}}async computeTokens(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=qb(this.apiClient,e);return l=ye("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const g=zb(h),_=new dI;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=xx(this.apiClient,e);return d=ye("{model}:predictLongRunning",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>{const E=Rx(_),S=new rf;return Object.assign(S,E),S})}else{const g=bx(this.apiClient,e);return d=ye("{model}:predictLongRunning",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const E=Ix(_),S=new rf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y2 extends Mo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=nI(e);return d=ye("{operationName}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u}else{const g=tI(e);return d=ye("{operationName}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Kw(e);return l=ye("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v2(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function _2(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>b2(l))),p(e,["parts"],s)}const o=f(n,["role"]);return o!=null&&p(e,["role"],o),e}function T2(n,e,t){const o={},s=f(e,["expireTime"]);t!==void 0&&s!=null&&p(t,["expireTime"],s);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&p(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&p(t,["bidiGenerateContentSetup"],R2(n,d));const h=f(e,["lockAdditionalFields"]);return t!==void 0&&h!=null&&p(t,["fieldMask"],h),o}function E2(n,e){const t={},o=f(e,["config"]);return o!=null&&p(t,["config"],T2(n,o,t)),t}function S2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function A2(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const o=f(n,["args"]);o!=null&&p(e,["args"],o);const s=f(n,["name"]);if(s!=null&&p(e,["name"],s),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function w2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function I2(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig"],o);const s=f(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const l=f(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=f(n,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","mediaResolution"],g);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],om(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&p(e,["setup","systemInstruction"],_2(Sn(M)));const L=f(n,["tools"]);if(e!==void 0&&L!=null){let W=Ia(L);Array.isArray(W)&&(W=W.map(D=>N2(wa(D)))),p(e,["setup","tools"],W)}const V=f(n,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],x2(V));const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&p(e,["setup","inputAudioTranscription"],Y);const Q=f(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","outputAudioTranscription"],Q);const J=f(n,["realtimeInputConfig"]);e!==void 0&&J!=null&&p(e,["setup","realtimeInputConfig"],J);const te=f(n,["contextWindowCompression"]);e!==void 0&&te!=null&&p(e,["setup","contextWindowCompression"],te);const me=f(n,["proactivity"]);if(e!==void 0&&me!=null&&p(e,["setup","proactivity"],me),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function R2(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["setup","model"],st(n,o));const s=f(e,["config"]);return s!=null&&p(t,["config"],I2(s,t)),t}function b2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const s=f(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],S2(l));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],A2(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(n,["inlineData"]);h!=null&&p(e,["inlineData"],v2(h));const g=f(n,["text"]);g!=null&&p(e,["text"],g);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function x2(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function N2(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const s=f(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],C2(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],w2(d));const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const g=f(n,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M2(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${t}.${l}`);e.push(...s)}else e.push(t)}return e.join(",")}function D2(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const l=M2(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(g=>u.includes(g)?`generationConfig.${g}`:g));const h=[];l&&h.push(l),d.length>0&&h.push(...d),h.length>0?n.fieldMask=h.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class P2 extends Mo{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=E2(this.apiClient,e);l=ye("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const h=D2(d,e.config);return s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V2(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&p(e,["_query","force"],o),t}function U2(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&V2(o,e),e}function k2(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function L2(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function O2(n){const e={},t=f(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const o=f(n,["config"]);return o!=null&&L2(o,e),e}function F2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["documents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B2 extends Mo{constructor(e){super(),this.apiClient=e,this.list=async t=>new gs(Ro.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:t.parent,config:o.config}),await this.listInternal(t),t)}async get(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=k2(e);return l=ye("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=U2(e);s=ye("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=O2(e);return l=ye("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=F2(h),_=new hI;return Object.assign(_,g),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q2 extends Mo{constructor(e,t=new B2(e)){super(),this.apiClient=e,this.documents=t,this.list=async(o={})=>new gs(Ro.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xN(e);return l=ye("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DN(e);return l=ye("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=MN(e);s=ye("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ON(e);return l=ye("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=FN(h),_=new pI;return Object.assign(_,g),_})}}async uploadToFileSearchStoreInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BN(e);return l=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=qN(h),_=new mI;return Object.assign(_,g),_})}}async importFile(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UN(e);return l=ye("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=VN(h),_=new jp;return Object.assign(_,g),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let rS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return rS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^t()&15>>+o/4).toString(16))};const z2=()=>rS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _p(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Tp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _i extends Error{}class Mn extends _i{constructor(e,t,o,s){super(`${Mn.makeMessage(e,t,o)}`),this.status=e,this.headers=s,this.error=t}static makeMessage(e,t,o){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,o,s){if(!e||!s)return new xf({message:o,cause:Tp(t)});const l=t;return e===400?new aS(e,l,o,s):e===401?new lS(e,l,o,s):e===403?new uS(e,l,o,s):e===404?new cS(e,l,o,s):e===409?new fS(e,l,o,s):e===422?new dS(e,l,o,s):e===429?new hS(e,l,o,s):e>=500?new pS(e,l,o,s):new Mn(e,l,o,s)}}class Ep extends Mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class xf extends Mn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class sS extends xf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class aS extends Mn{}class lS extends Mn{}class uS extends Mn{}class cS extends Mn{}class fS extends Mn{}class dS extends Mn{}class hS extends Mn{}class pS extends Mn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G2=/^[a-z][a-z0-9+.-]*:/i,H2=n=>G2.test(n);let Sp=n=>(Sp=Array.isArray,Sp(n));const $2=Sp;let Y2=$2;const j_=Y2;function J2(n){if(!n)return!0;for(const e in n)return!1;return!0}function K2(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const Q2=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _i(`${n} must be an integer`);if(e<0)throw new _i(`${n} must be a positive integer`);return e},X2=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W2=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const j2=()=>{var n,e,t,o,s;const l=Z2();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":tT(Deno.build.os),"X-Stainless-Arch":eT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":tT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":eT((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const u=eM();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function eM(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const o=t.exec(navigator.userAgent);if(o){const s=o[1]||0,l=o[2]||0,u=o[3]||0;return{browser:e,version:`${s}.${l}.${u}`}}}return null}const eT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",tT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Uc;const tM=()=>Uc??(Uc=j2());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function mS(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function iM(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return mS({start(){},async pull(t){const{done:o,value:s}=await e.next();o?t.close():t.enqueue(s)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function gS(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function oM(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const o=n.getReader(),s=o.cancel();o.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rM=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yS=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xh(n,e,t){return yS(),new File(n,e??"unknown_file",t)}function sM(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const aM=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vS=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",lM=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&vS(n),uM=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function cM(n,e,t){if(yS(),n=await n,lM(n))return n instanceof File?n:Xh([await n.arrayBuffer()],n.name);if(uM(n)){const s=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Xh(await Ap(s),e,t)}const o=await Ap(n);if(e||(e=sM(n)),!(t!=null&&t.type)){const s=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof s=="string"&&(t=Object.assign(Object.assign({},t),{type:s}))}return Xh(o,e,t)}async function Ap(n){var e,t,o,s,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(vS(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(aM(n))try{for(var d=!0,h=Ni(n),g;g=await h.next(),e=g.done,!e;d=!0){s=g.value,d=!1;const _=s;u.push(...await Ap(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(o=h.return)&&await o.call(h)}finally{if(t)throw t.error}}else{const _=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${fM(n)}`)}return u}function fM(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _S{constructor(e){this._client=e}}_S._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TS(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const nT=Object.freeze(Object.create(null)),dM=(n=TS)=>(function(t,...o){if(t.length===1)return t[0];let s=!1;const l=[],u=t.reduce((_,E,S)=>{var w,M,L;/[?#]/.test(E)&&(s=!0);const V=o[S];let Y=(s?encodeURIComponent:n)(""+V);return S!==o.length&&(V==null||typeof V=="object"&&V.toString===((L=Object.getPrototypeOf((M=Object.getPrototypeOf((w=V.hasOwnProperty)!==null&&w!==void 0?w:nT))!==null&&M!==void 0?M:nT))===null||L===void 0?void 0:L.toString))&&(Y=V+"",l.push({start:_.length+E.length,length:Y.length,error:`Value of type ${Object.prototype.toString.call(V).slice(8,-1)} is not a valid path parameter`})),_+E+(S===o.length?"":Y)},""),d=u.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let g;for(;(g=h.exec(d))!==null;)l.push({start:g.index,length:g[0].length,error:`Value "${g[0]}" can't be safely passed as a path parameter`});if(l.sort((_,E)=>_.start-E.start),l.length>0){let _=0;const E=l.reduce((S,w)=>{const M=" ".repeat(w.start-_),L="^".repeat(w.length);return _=w.start+w.length,S+M+L},"");throw new _i(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${u}
${E}`)}return u}),kc=dM(TS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ES extends _S{create(e,t){var o;const{api_version:s=this._client.apiVersion}=e,l=af(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new _i("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new _i("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(kc`/${s}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,t={},o){const{api_version:s=this._client.apiVersion}=t??{};return this._client.delete(kc`/${s}/interactions/${e}`,o)}cancel(e,t={},o){const{api_version:s=this._client.apiVersion}=t??{};return this._client.post(kc`/${s}/interactions/${e}/cancel`,o)}get(e,t={},o){var s;const l=t??{},{api_version:u=this._client.apiVersion}=l,d=af(l,["api_version"]);return this._client.get(kc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},o),{stream:(s=t==null?void 0:t.stream)!==null&&s!==void 0?s:!1}))}}ES._key=Object.freeze(["interactions"]);class SS extends ES{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hM(n){let e=0;for(const s of n)e+=s.length;const t=new Uint8Array(e);let o=0;for(const s of n)t.set(s,o),o+=s.length;return t}let Lc;function sm(n){let e;return(Lc??(e=new globalThis.TextEncoder,Lc=e.encode.bind(e)))(n)}let Oc;function iT(n){let e;return(Oc??(e=new globalThis.TextDecoder,Oc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?sm(e):e;this.buffer=hM([this.buffer,t]);const o=[];let s;for(;(s=pM(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(iT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,u=iT(this.buffer.subarray(0,l));o.push(u),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Nf.NEWLINE_CHARS=new Set([`
`,"\r"]);Nf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function pM(n,e){for(let s=e??0;s<n.length;s++){if(n[s]===10)return{preceding:s,index:s+1,carriage:!1};if(n[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function mM(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lf={off:0,error:200,warn:300,info:400,debug:500},oT=(n,e,t)=>{if(n){if(K2(lf,n))return n;Nn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(lf))}`)}};function Ul(){}function Fc(n,e,t){return!e||lf[n]>lf[t]?Ul:e[n].bind(e)}const gM={error:Ul,warn:Ul,info:Ul,debug:Ul};let rT=new WeakMap;function Nn(n){var e;const t=n.logger,o=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return gM;const s=rT.get(t);if(s&&s[0]===o)return s[1];const l={error:Fc("error",t,o),warn:Fc("warn",t,o),info:Fc("info",t,o),debug:Fc("debug",t,o)};return rT.set(t,[o,l]),l}const us=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ha{constructor(e,t,o){this.iterator=e,this.controller=t,this.client=o}static fromSSEResponse(e,t,o){let s=!1;const l=o?Nn(o):console;function u(){return xi(this,arguments,function*(){var h,g,_,E;if(s)throw new _i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var w=!0,M=Ni(yM(e,t)),L;L=yield Ue(M.next()),h=L.done,!h;w=!0){E=L.value,w=!1;const V=E;if(!S)if(V.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ue(JSON.parse(V.data))}catch(Y){throw l.error("Could not parse message into JSON:",V.data),l.error("From chunk:",V.raw),Y}}}catch(V){g={error:V}}finally{try{!w&&!h&&(_=M.return)&&(yield Ue(_.call(M)))}finally{if(g)throw g.error}}S=!0}catch(V){if(_p(V))return yield Ue(void 0);throw V}finally{S||t.abort()}})}return new ha(u,t,o)}static fromReadableStream(e,t,o){let s=!1;function l(){return xi(this,arguments,function*(){var h,g,_,E;const S=new Nf,w=gS(e);try{for(var M=!0,L=Ni(w),V;V=yield Ue(L.next()),h=V.done,!h;M=!0){E=V.value,M=!1;const Y=E;for(const Q of S.decode(Y))yield yield Ue(Q)}}catch(Y){g={error:Y}}finally{try{!M&&!h&&(_=L.return)&&(yield Ue(_.call(L)))}finally{if(g)throw g.error}}for(const Y of S.flush())yield yield Ue(Y)})}function u(){return xi(this,arguments,function*(){var h,g,_,E;if(s)throw new _i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var w=!0,M=Ni(l()),L;L=yield Ue(M.next()),h=L.done,!h;w=!0){E=L.value,w=!1;const V=E;S||V&&(yield yield Ue(JSON.parse(V)))}}catch(V){g={error:V}}finally{try{!w&&!h&&(_=M.return)&&(yield Ue(_.call(M)))}finally{if(g)throw g.error}}S=!0}catch(V){if(_p(V))return yield Ue(void 0);throw V}finally{S||t.abort()}})}return new ha(u,t,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],o=this.iterator(),s=l=>({next:()=>{if(l.length===0){const u=o.next();e.push(u),t.push(u)}return l.shift()}});return[new ha(()=>s(e),this.controller,this.client),new ha(()=>s(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return mS({async start(){t=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:l}=await t.next();if(l)return o.close();const u=sm(JSON.stringify(s)+`
`);o.enqueue(u)}catch(s){o.error(s)}},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}}function yM(n,e){return xi(this,arguments,function*(){var o,s,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _i("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _i("Attempted to iterate over a response with no body");const d=new _M,h=new Nf,g=gS(n.body);try{for(var _=!0,E=Ni(vM(g)),S;S=yield Ue(E.next()),o=S.done,!o;_=!0){u=S.value,_=!1;const w=u;for(const M of h.decode(w)){const L=d.decode(M);L&&(yield yield Ue(L))}}}catch(w){s={error:w}}finally{try{!_&&!o&&(l=E.return)&&(yield Ue(l.call(E)))}finally{if(s)throw s.error}}for(const w of h.flush()){const M=d.decode(w);M&&(yield yield Ue(M))}})}function vM(n){return xi(this,arguments,function*(){var t,o,s,l;let u=new Uint8Array;try{for(var d=!0,h=Ni(n),g;g=yield Ue(h.next()),t=g.done,!t;d=!0){l=g.value,d=!1;const _=l;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?sm(_):_;let S=new Uint8Array(u.length+E.length);S.set(u),S.set(E,u.length),u=S;let w;for(;(w=mM(u))!==-1;)yield yield Ue(u.slice(0,w)),u=u.slice(w)}}catch(_){o={error:_}}finally{try{!d&&!t&&(s=h.return)&&(yield Ue(s.call(h)))}finally{if(o)throw o.error}}u.length>0&&(yield yield Ue(u))})}class _M{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,o,s]=TM(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function TM(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function EM(n,e){const{response:t,requestLogID:o,retryOfRequestLogID:s,startTime:l}=e,u=await(async()=>{var d;if(e.options.stream)return Nn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):ha.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const h=t.headers.get("content-type"),g=(d=h==null?void 0:h.split(";")[0])===null||d===void 0?void 0:d.trim();return(g==null?void 0:g.includes("application/json"))||(g==null?void 0:g.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return Nn(n).debug(`[${o}] response parsed`,us({retryOfRequestLogID:s,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class am extends Promise{constructor(e,t,o=EM){super(s=>{s(null)}),this.responsePromise=t,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new am(this.client,this.responsePromise,async(t,o)=>e(await this.parseResponse(t,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AS=Symbol("brand.privateNullableHeaders");function*SM(n){if(!n)return;if(AS in n){const{values:o,nulls:s}=n;yield*o.entries();for(const l of s)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():j_(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let o of t){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const l=j_(o[1])?o[1]:[o[1]];let u=!1;for(const d of l)d!==void 0&&(e&&!u&&(u=!0,yield[s,null]),yield[s,d])}}const Pl=n=>{const e=new Headers,t=new Set;for(const o of n){const s=new Set;for(const[l,u]of SM(o)){const d=l.toLowerCase();s.has(d)||(e.delete(l),s.add(d)),u===null?(e.delete(l),t.add(d)):(e.append(l,u),t.delete(d))}}return{[AS]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wh=n=>{var e,t,o,s,l,u;if(typeof globalThis.process<"u")return(o=(t=(e=zw)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||l===void 0?void 0:l.call(s,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var CS;class Mf{constructor(e){var t,o,s,l,u,d,h,{baseURL:g=Wh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Wh("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,S=af(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:_,apiVersion:E},S),{baseURL:g||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(o=w.timeout)!==null&&o!==void 0?o:Mf.DEFAULT_TIMEOUT,this.logger=(s=w.logger)!==null&&s!==void 0?s:console;const M="warn";this.logLevel=M,this.logLevel=(u=(l=oT(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:oT(Wh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:M,this.fetchOptions=w.fetchOptions,this.maxRetries=(d=w.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(h=w.fetch)!==null&&h!==void 0?h:nM(),this.encoder=rM,this._options=w,this.apiKey=_,this.apiVersion=E,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Pl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Pl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Pl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,o])=>typeof o<"u").map(([t,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(t)}=`;throw new _i(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${aa}`}defaultIdempotencyKey(){return`stainless-node-retry-${z2()}`}makeStatusError(e,t,o,s){return Mn.generate(e,t,o,s)}buildURL(e,t,o){const s=!this.baseURLOverridden()&&o||this.baseURL,l=H2(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return J2(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:o}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:t},s)))}request(e,t=null){return new am(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,o){var s,l,u;const d=await e,h=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;t==null&&(t=h),await this.prepareOptions(d);const{req:g,url:_,timeout:E}=await this.buildRequest(d,{retryCount:h-t});await this.prepareRequest(g,{url:_,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=o===void 0?"":`, retryOf: ${o}`,M=Date.now();if(Nn(this).debug(`[${S}] sending request`,us({retryOfRequestLogID:o,method:d.method,url:_,options:d,headers:g.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Ep;const L=new AbortController,V=await this.fetchWithTimeout(_,g,E,L).catch(Tp),Y=Date.now();if(V instanceof globalThis.Error){const J=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Ep;const te=_p(V)||/timed? ?out/i.test(String(V)+("cause"in V?String(V.cause):""));if(t)return Nn(this).info(`[${S}] connection ${te?"timed out":"failed"} - ${J}`),Nn(this).debug(`[${S}] connection ${te?"timed out":"failed"} (${J})`,us({retryOfRequestLogID:o,url:_,durationMs:Y-M,message:V.message})),this.retryRequest(d,t,o??S);throw Nn(this).info(`[${S}] connection ${te?"timed out":"failed"} - error; no more retries left`),Nn(this).debug(`[${S}] connection ${te?"timed out":"failed"} (error; no more retries left)`,us({retryOfRequestLogID:o,url:_,durationMs:Y-M,message:V.message})),te?new sS:new xf({cause:V})}const Q=`[${S}${w}] ${g.method} ${_} ${V.ok?"succeeded":"failed"} with status ${V.status} in ${Y-M}ms`;if(!V.ok){const J=await this.shouldRetry(V);if(t&&J){const x=`retrying, ${t} attempts remaining`;return await oM(V.body),Nn(this).info(`${Q} - ${x}`),Nn(this).debug(`[${S}] response error (${x})`,us({retryOfRequestLogID:o,url:V.url,status:V.status,headers:V.headers,durationMs:Y-M})),this.retryRequest(d,t,o??S,V.headers)}const te=J?"error; no more retries left":"error; not retryable";Nn(this).info(`${Q} - ${te}`);const me=await V.text().catch(x=>Tp(x).message),W=X2(me),D=W?void 0:me;throw Nn(this).debug(`[${S}] response error (${te})`,us({retryOfRequestLogID:o,url:V.url,status:V.status,headers:V.headers,message:D,durationMs:Date.now()-M})),this.makeStatusError(V.status,W,D,V.headers)}return Nn(this).info(Q),Nn(this).debug(`[${S}] response start`,us({retryOfRequestLogID:o,url:V.url,status:V.status,headers:V.headers,durationMs:Y-M})),{response:V,options:d,controller:L,requestLogID:S,retryOfRequestLogID:o,startTime:M}}async fetchWithTimeout(e,t,o,s){const l=t||{},{signal:u,method:d}=l,h=af(l,["signal","method"]),g=this._makeAbort(s);u&&u.addEventListener("abort",g,{once:!0});const _=setTimeout(g,o),E=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,S=Object.assign(Object.assign(Object.assign({signal:s.signal},E?{duplex:"half"}:{}),{method:"GET"}),h);d&&(S.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(_)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,o,s){var l;let u;const d=s==null?void 0:s.get("retry-after-ms");if(d){const g=parseFloat(d);Number.isNaN(g)||(u=g)}const h=s==null?void 0:s.get("retry-after");if(h&&!u){const g=parseFloat(h);Number.isNaN(g)?u=Date.parse(h)-Date.now():u=g*1e3}if(!(u&&0<=u&&u<60*1e3)){const g=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,g)}return await W2(u),this.makeRequest(e,t-1,o)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var o,s,l;const u=Object.assign({},e),{method:d,path:h,query:g,defaultBaseURL:_}=u,E=this.buildURL(h,g,_);"timeout"in u&&Q2("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:u}),M=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:M},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:o,retryCount:s}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Pl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),tM()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(d),d.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Pl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:iM(e)}:this.encoder({body:e,headers:o})}}Mf.DEFAULT_TIMEOUT=6e4;class nn extends Mf{constructor(){super(...arguments),this.interactions=new SS(this)}}CS=nn;nn.GeminiNextGenAPIClient=CS;nn.GeminiNextGenAPIClientError=_i;nn.APIError=Mn;nn.APIConnectionError=xf;nn.APIConnectionTimeoutError=sS;nn.APIUserAbortError=Ep;nn.NotFoundError=cS;nn.ConflictError=fS;nn.RateLimitError=hS;nn.BadRequestError=aS;nn.AuthenticationError=lS;nn.InternalServerError=pS;nn.PermissionDeniedError=uS;nn.UnprocessableEntityError=dS;nn.toFile=cM;nn.Interactions=SS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AM(n,e){const t={},o=f(n,["name"]);return o!=null&&p(t,["_url","name"],o),t}function CM(n,e){const t={},o=f(n,["name"]);return o!=null&&p(t,["_url","name"],o),t}function wM(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(t,["sdkHttpResponse"],o),t}function IM(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(t,["sdkHttpResponse"],o),t}function RM(n,e,t){const o={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&p(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const h=f(n,["learningRate"]);if(e!==void 0&&h!=null&&p(e,["tuningTask","hyperparameters","learningRate"],h),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(f(n,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return o}function bM(n,e,t){const o={};let s=f(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&p(e,["supervisedTuningSpec"],Zh(W))}else if(s==="PREFERENCE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&p(e,["preferenceOptimizationSpec"],Zh(W))}else if(s==="DISTILLATION"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&p(e,["distillationSpec"],Zh(W))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],W)}else if(d==="PREFERENCE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],W)}else if(d==="DISTILLATION"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&p(e,["distillationSpec","hyperParameters","epochCount"],W)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],W)}else if(h==="PREFERENCE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],W)}else if(h==="DISTILLATION"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&p(e,["distillationSpec","hyperParameters","learningRateMultiplier"],W)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],W)}else if(g==="PREFERENCE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],W)}else if(g==="DISTILLATION"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&p(e,["distillationSpec","exportLastCheckpointOnly"],W)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],W)}else if(_==="PREFERENCE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],W)}else if(_==="DISTILLATION"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&p(e,["distillationSpec","hyperParameters","adapterSize"],W)}let E=f(t,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const W=f(n,["tuningMode"]);e!==void 0&&W!=null&&p(e,["supervisedTuningSpec","tuningMode"],W)}const S=f(n,["customBaseModel"]);e!==void 0&&S!=null&&p(e,["customBaseModel"],S);let w=f(t,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const W=f(n,["batchSize"]);e!==void 0&&W!=null&&p(e,["supervisedTuningSpec","hyperParameters","batchSize"],W)}let M=f(t,["config","method"]);if(M===void 0&&(M="SUPERVISED_FINE_TUNING"),M==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRate"]);e!==void 0&&W!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRate"],W)}const L=f(n,["labels"]);e!==void 0&&L!=null&&p(e,["labels"],L);const V=f(n,["beta"]);e!==void 0&&V!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],V);const Y=f(n,["baseTeacherModel"]);e!==void 0&&Y!=null&&p(e,["distillationSpec","baseTeacherModel"],Y);const Q=f(n,["tunedTeacherModelSource"]);e!==void 0&&Q!=null&&p(e,["distillationSpec","tunedTeacherModelSource"],Q);const J=f(n,["sftLossWeightMultiplier"]);e!==void 0&&J!=null&&p(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],J);const te=f(n,["outputUri"]);e!==void 0&&te!=null&&p(e,["outputUri"],te);const me=f(n,["encryptionSpec"]);return e!==void 0&&me!=null&&p(e,["encryptionSpec"],me),o}function xM(n,e){const t={},o=f(n,["baseModel"]);o!=null&&p(t,["baseModel"],o);const s=f(n,["preTunedModel"]);s!=null&&p(t,["preTunedModel"],s);const l=f(n,["trainingDataset"]);l!=null&&BM(l);const u=f(n,["config"]);return u!=null&&RM(u,t),t}function NM(n,e){const t={},o=f(n,["baseModel"]);o!=null&&p(t,["baseModel"],o);const s=f(n,["preTunedModel"]);s!=null&&p(t,["preTunedModel"],s);const l=f(n,["trainingDataset"]);l!=null&&qM(l,t,e);const u=f(n,["config"]);return u!=null&&bM(u,t,e),t}function MM(n,e){const t={},o=f(n,["name"]);return o!=null&&p(t,["_url","name"],o),t}function DM(n,e){const t={},o=f(n,["name"]);return o!=null&&p(t,["_url","name"],o),t}function PM(n,e,t){const o={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),o}function VM(n,e,t){const o={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),o}function UM(n,e){const t={},o=f(n,["config"]);return o!=null&&PM(o,t),t}function kM(n,e){const t={},o=f(n,["config"]);return o!=null&&VM(o,t),t}function LM(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>wS(d))),p(t,["tuningJobs"],u)}return t}function OM(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Cp(d))),p(t,["tuningJobs"],u)}return t}function FM(n,e){const t={},o=f(n,["name"]);o!=null&&p(t,["model"],o);const s=f(n,["name"]);return s!=null&&p(t,["endpoint"],s),t}function BM(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(n,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),p(t,["examples","examples"],s)}return t}function qM(n,e,t){const o={};let s=f(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(s==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(s==="DISTILLATION"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function wS(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["name"]);s!=null&&p(t,["name"],s);const l=f(n,["state"]);l!=null&&p(t,["state"],qE(l));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&p(t,["startTime"],d);const h=f(n,["tuningTask","completeTime"]);h!=null&&p(t,["endTime"],h);const g=f(n,["updateTime"]);g!=null&&p(t,["updateTime"],g);const _=f(n,["description"]);_!=null&&p(t,["description"],_);const E=f(n,["baseModel"]);E!=null&&p(t,["baseModel"],E);const S=f(n,["_self"]);return S!=null&&p(t,["tunedModel"],FM(S)),t}function Cp(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["name"]);s!=null&&p(t,["name"],s);const l=f(n,["state"]);l!=null&&p(t,["state"],qE(l));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(t,["startTime"],d);const h=f(n,["endTime"]);h!=null&&p(t,["endTime"],h);const g=f(n,["updateTime"]);g!=null&&p(t,["updateTime"],g);const _=f(n,["error"]);_!=null&&p(t,["error"],_);const E=f(n,["description"]);E!=null&&p(t,["description"],E);const S=f(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const w=f(n,["tunedModel"]);w!=null&&p(t,["tunedModel"],w);const M=f(n,["preTunedModel"]);M!=null&&p(t,["preTunedModel"],M);const L=f(n,["supervisedTuningSpec"]);L!=null&&p(t,["supervisedTuningSpec"],L);const V=f(n,["preferenceOptimizationSpec"]);V!=null&&p(t,["preferenceOptimizationSpec"],V);const Y=f(n,["distillationSpec"]);Y!=null&&p(t,["distillationSpec"],Y);const Q=f(n,["tuningDataStats"]);Q!=null&&p(t,["tuningDataStats"],Q);const J=f(n,["encryptionSpec"]);J!=null&&p(t,["encryptionSpec"],J);const te=f(n,["partnerModelTuningSpec"]);te!=null&&p(t,["partnerModelTuningSpec"],te);const me=f(n,["customBaseModel"]);me!=null&&p(t,["customBaseModel"],me);const W=f(n,["experiment"]);W!=null&&p(t,["experiment"],W);const D=f(n,["labels"]);D!=null&&p(t,["labels"],D);const N=f(n,["outputUri"]);N!=null&&p(t,["outputUri"],N);const x=f(n,["pipelineJob"]);x!=null&&p(t,["pipelineJob"],x);const U=f(n,["serviceAccount"]);U!=null&&p(t,["serviceAccount"],U);const O=f(n,["tunedModelDisplayName"]);O!=null&&p(t,["tunedModelDisplayName"],O);const q=f(n,["veoTuningSpec"]);return q!=null&&p(t,["veoTuningSpec"],q),t}function zM(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["name"]);s!=null&&p(t,["name"],s);const l=f(n,["metadata"]);l!=null&&p(t,["metadata"],l);const u=f(n,["done"]);u!=null&&p(t,["done"],u);const d=f(n,["error"]);return d!=null&&p(t,["error"],d),t}function Zh(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&p(t,["validationDatasetUri"],o);const s=f(n,["vertexDatasetResource"]);return s!=null&&p(t,["validationDatasetUri"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GM extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gs(Ro.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:s});return l.baseModel=void 0,await this.tuneInternal(l)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),l=await this.tuneMldevInternal(s);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:fp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=DM(e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>Cp(_))}else{const g=MM(e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>wS(_))}}async listInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=kM(e);return d=ye("tuningJobs",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=OM(_),S=new D_;return Object.assign(S,E),S})}else{const g=UM(e);return d=ye("tunedModels",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=LM(_),S=new D_;return Object.assign(S,E),S})}}async cancel(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=CM(e);return d=ye("{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=IM(_),S=new P_;return Object.assign(S,E),S})}else{const g=AM(e);return d=ye("{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=wM(_),S=new P_;return Object.assign(S,E),S})}}async tuneInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=NM(e,e);return l=ye("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>Cp(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xM(e);return l=ye("tunedModels",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>zM(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HM{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const $M=1024*1024*8,YM=3,JM=1e3,KM=2,uf="x-goog-upload-status";async function QM(n,e,t){var o;const s=await IS(n,e,t),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[uf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function XM(n,e,t){var o;const s=await IS(n,e,t),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[uf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=UE(l),d=new em;return Object.assign(d,u),d}async function IS(n,e,t){var o,s;let l=0,u=0,d=new hp(new Response),h="upload";for(l=n.size;u<l;){const g=Math.min($M,l-u),_=n.slice(u,u+g);u+g>=l&&(h+=", finalize");let E=0,S=JM;for(;E<YM&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(u),"Content-Length":String(g)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[uf]));)E++,await ZM(S),S=S*KM;if(u+=g,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[uf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function WM(n){return{size:n.size,type:n.type}}function ZM(n){return new Promise(e=>setTimeout(e,n))}class jM{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QM(e,t,o)}async uploadToFileSearchStore(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XM(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eD{create(e,t,o){return new tD(e,t,o)}}class tD{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sT="x-goog-api-key";class nD{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(sT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(sT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iD="gl-node/";class oD{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new nn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout,maxRetries:(e=t==null?void 0:t.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=o.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=Yw(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new nD(this.apiKey);this.apiClient=new WN({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:iD+"web",uploader:new jM,downloader:new HM}),this.models=new g2(this.apiClient),this.live=new c2(this.apiClient,s,new eD),this.batches=new SR(this.apiClient),this.chats=new ib(this.models,this.apiClient),this.caches=new eb(this.apiClient),this.files=new mb(this.apiClient),this.operations=new y2(this.apiClient),this.authTokens=new P2(this.apiClient),this.tunings=new GM(this.apiClient),this.fileSearchStores=new q2(this.apiClient)}}const lm=new oD({apiKey:"YOUR_GEMINI_API_KEY_HERE"}),um=async n=>new Promise((e,t)=>{const o=new FileReader;o.onloadend=()=>{const l=o.result.split(",")[1];e(l)},o.onerror=t,o.readAsDataURL(n)}),rD=async(n,e)=>{const t=await um(n);let o=`
    Perform a deep acoustic analysis of this audio file for high-precision speaker diarization.

    **MISSION CRITICAL - SIMULTANEOUS SPEECH:**
    The most important requirement is detecting when people speak AT THE SAME TIME. 
    - If Speaker A and Speaker B overlap (even for 0.5 seconds), you MUST output separate segments for BOTH speakers covering that specific time range.
    - NEVER merge multiple people into a "Group" or "Both" label. Always separate them.
    - Example: If A and B laugh together from 00:10 to 00:15, output:
      { "speaker": "Speaker A", "start": 10, "end": 15 }
      { "speaker": "Speaker B", "start": 10, "end": 15 }
  `;e&&e>0&&(o+=`
    **STRICT CONSTRAINT - SPEAKER COUNT:**
    - There are EXACTLY ${e} distinct speakers in this recording.
    - Do NOT identify more than ${e} speakers.
    - Do NOT identify fewer than ${e} speakers (unless the file is empty).
    - Label them consistently (e.g., "Speaker 1", "Speaker 2"... up to "Speaker ${e}").
    `),o+=`
    **DEEP RESEARCH & REASONING:**
    1. Listen for subtle cues: breath intakes, timbre changes, and micro-affirmations ("mm-hm", "yeah").
    2. Identify distinct speakers even if they sound similar.
    3. Use the 'thinking' process to map out the exact flow of conversation before generating the JSON.

    **OUTPUT FORMAT:**
    Return ONLY a JSON object with:
    - uniqueSpeakers: A list of speaker identifiers.
    - segments: A chronological list of speech segments with 'speaker', 'start', and 'end'.
  `;try{const l=(await lm.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{inlineData:{mimeType:n.type,data:t}},{text:o}]},config:{thinkingConfig:{thinkingBudget:2048},responseMimeType:"application/json",responseSchema:{type:Dt.OBJECT,properties:{uniqueSpeakers:{type:Dt.ARRAY,items:{type:Dt.STRING},description:"List of unique speaker labels (e.g. Speaker A, Speaker B)"},segments:{type:Dt.ARRAY,items:{type:Dt.OBJECT,properties:{speaker:{type:Dt.STRING},start:{type:Dt.NUMBER,description:"Start time in seconds"},end:{type:Dt.NUMBER,description:"End time in seconds"}},required:["speaker","start","end"]}}},required:["uniqueSpeakers","segments"]}}})).text;if(!l)throw new Error("No response from AI");const u=l.replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(u)}catch(s){throw console.error("Error analyzing audio:",s),new Error("Failed to analyze audio segments.")}},sD=async(n,e)=>{var o,s,l;const t=await um(n);try{const u=await lm.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{data:t,mimeType:n.type}},{text:`Edit this image. ${e} Keep the main subject (person/face) exactly as is, only modify the background/surroundings. High quality, photorealistic.`}]}});for(const d of((l=(s=(o=u.candidates)==null?void 0:o[0])==null?void 0:s.content)==null?void 0:l.parts)||[])if(d.inlineData)return`data:image/png;base64,${d.inlineData.data}`;throw new Error("No image generated.")}catch(u){throw console.error("Error editing image:",u),new Error("Failed to edit image.")}},aD=async n=>{const e=await um(n);try{const o=(await lm.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:n.type,data:e}},{text:"Detect all human faces in this image. Return a list of bounding boxes with normalized coordinates (0 to 1)."}]},config:{responseMimeType:"application/json",responseSchema:{type:Dt.ARRAY,items:{type:Dt.OBJECT,properties:{ymin:{type:Dt.NUMBER},xmin:{type:Dt.NUMBER},ymax:{type:Dt.NUMBER},xmax:{type:Dt.NUMBER}},required:["ymin","xmin","ymax","xmax"]}}}})).text;return o?JSON.parse(o):[]}catch(t){return console.error("Error detecting faces:",t),[]}};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=(...n)=>n.filter((e,t,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,o)=>o?o.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=n=>{const e=uD(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=Ee.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:s="",children:l,iconNode:u,...d},h)=>Ee.createElement("svg",{ref:h,...cD,width:e,height:e,stroke:n,strokeWidth:o?Number(t)*24/Number(e):t,className:RS("lucide",s),...!l&&!fD(d)&&{"aria-hidden":"true"},...d},[...u.map(([g,_])=>Ee.createElement(g,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(n,e)=>{const t=Ee.forwardRef(({className:o,...s},l)=>Ee.createElement(dD,{ref:l,iconNode:e,className:RS(`lucide-${lD(aT(n))}`,`lucide-${n}`,o),...s}));return t.displayName=aT(n),t};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],pD=Fe("brain-circuit",hD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],cf=Fe("brush",mD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yD=Fe("calendar",gD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wp=Fe("check",vD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],TD=Fe("circle-check",_D);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],SD=Fe("circle-x",ED);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],CD=Fe("cloud-upload",AD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ff=Fe("cloud",wD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],RD=Fe("download",ID);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],lT=Fe("eraser",bD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]],ND=Fe("file-headphone",xD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],bS=Fe("grid-3x3",MD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],PD=Fe("image",DD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],xS=Fe("keyboard",VD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yl=Fe("loader-circle",UD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],NS=Fe("maximize-2",kD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],OD=Fe("minimize-2",LD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],BD=Fe("monitor-play",FD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ip=Fe("moon",qD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],uT=Fe("mouse-pointer-2",zD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M11 7 6 2",key:"1jwth8"}],["path",{d:"M18.992 12H2.041",key:"xw1gg"}],["path",{d:"M21.145 18.38A3.34 3.34 0 0 1 20 16.5a3.3 3.3 0 0 1-1.145 1.88c-.575.46-.855 1.02-.855 1.595A2 2 0 0 0 20 22a2 2 0 0 0 2-2.025c0-.58-.285-1.13-.855-1.595",key:"1nkol4"}],["path",{d:"m8.5 4.5 2.148-2.148a1.205 1.205 0 0 1 1.704 0l7.296 7.296a1.205 1.205 0 0 1 0 1.704l-7.592 7.592a3.615 3.615 0 0 1-5.112 0l-3.888-3.888a3.615 3.615 0 0 1 0-5.112L5.67 7.33",key:"1nk1rd"}]],cT=Fe("paint-bucket",GD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],MS=Fe("palette",HD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],YD=Fe("panels-top-left",$D);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],KD=Fe("pause",JD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],XD=Fe("pen",QD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ZD=Fe("play",WD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],e4=Fe("plus",jD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],n4=Fe("refresh-cw",t4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],o4=Fe("rotate-ccw",i4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],s4=Fe("rotate-cw",r4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],l4=Fe("scan",a4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],c4=Fe("settings",u4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],fT=Fe("shield",f4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],h4=Fe("sliders-vertical",d4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],cm=Fe("sparkles",p4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],dT=Fe("sun",m4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],y4=Fe("trash-2",g4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],_4=Fe("undo",v4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],E4=Fe("user",T4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Rp=Fe("users",S4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],C4=Fe("volume-2",A4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],I4=Fe("volume-x",w4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fm=Fe("x",R4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],x4=Fe("zoom-in",b4),N4=({speakers:n,activeSpeakerIds:e,onUpdateImage:t,onDeleteImages:o,onEditExistingImage:s,onUpdateName:l,onUpdateColor:u,onRotateSpeaker:d,isManualMode:h=!1,isPlayMode:g=!1,isCinemaMode:_=!1})=>{const E=w=>w===1?"grid-cols-1":w===2?"grid-cols-1 md:grid-cols-2":w===3?"grid-cols-1 md:grid-cols-3":w===4?"grid-cols-2 md:grid-cols-2":"grid-cols-2 md:grid-cols-3",S=(w,M,L)=>{w.stopPropagation(),w.target.files&&w.target.files[0]&&(t(M,w.target.files[0],L),w.target.value="")};return R.jsx("div",{className:`grid ${E(n.length)} gap-4 w-full h-full min-h-[400px] p-4`,children:n.map(w=>{const M=e.includes(w.id),L=M&&w.activeImageUrl?w.activeImageUrl:w.imageUrl,V=!!w.imageUrl||!!w.activeImageUrl,Y=w.rotation||0;return R.jsxs("div",{className:`
              relative rounded-2xl overflow-hidden border-2 
              flex flex-col items-center justify-center group
              transition-all duration-200 ease-out
              ${M?"shadow-[0_0_50px_rgba(0,0,0,0.6)] z-10 opacity-100 grayscale-0":"border-gray-800 opacity-40 scale-95 grayscale"}
            `,style:{borderColor:M?w.color:"#1f2937",boxShadow:M?`0 0 60px ${w.color}40`:"none"},children:[R.jsxs("div",{className:"absolute inset-0 w-full h-full transition-transform duration-500 ease-in-out",style:{transform:`rotate(${Y}deg)`},children:[R.jsx("div",{className:`absolute inset-0 w-full h-full bg-gray-900 transition-all duration-300 ${M?"animate-beat":""}`,children:L?R.jsx("img",{src:L,alt:w.name,className:"w-full h-full object-cover transition-opacity duration-300"}):R.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:R.jsx(E4,{size:64,className:"text-gray-600"})})}),!_&&R.jsx("div",{className:`absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent transition-opacity duration-200 ${M?"opacity-20":"opacity-90"}`}),!_&&R.jsx("div",{className:"absolute bottom-6 left-6 right-6 z-20",children:R.jsxs("div",{className:"flex justify-between items-end",children:[R.jsxs("div",{className:"flex-1 mr-4",children:[R.jsxs("div",{className:"relative group/input",children:[R.jsx("input",{type:"text",value:w.name,onChange:Q=>l(w.id,Q.target.value),disabled:g,className:`bg-transparent text-2xl font-bold tracking-wider text-white border-b hover:border-white/30 focus:border-white focus:outline-none w-full transition-colors pb-1 ${g?"border-transparent cursor-default":"border-transparent"}`,style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)",color:M?w.color:"white"}}),!g&&R.jsx(XD,{size:12,className:"absolute right-0 top-2 text-gray-500 opacity-0 group-hover/input:opacity-100 transition-opacity pointer-events-none"})]}),h&&w.triggerKey&&!g&&R.jsxs("div",{className:"mt-2 flex items-center gap-2 text-gray-400",children:[R.jsx(xS,{size:14}),R.jsx("span",{className:"text-xs font-mono border border-gray-600 rounded px-1.5 py-0.5 bg-gray-800/80",children:w.triggerKey.toUpperCase()})]})]}),R.jsx("div",{className:"flex flex-col items-center gap-3",children:R.jsxs("div",{className:"relative",children:[M&&R.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full opacity-75 animate-ping",style:{backgroundColor:w.color}}),R.jsxs("div",{className:`relative group/color ${g?"":"cursor-pointer"}`,children:[R.jsx("div",{className:"w-4 h-4 rounded-full shadow-lg transition-colors duration-200 border border-white/20",style:{backgroundColor:w.color}}),!g&&R.jsx("input",{type:"color",value:w.color,onChange:Q=>u(w.id,Q.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",title:"Change Speaker Color"})]})]})})]})})]}),!g&&R.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-40 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[R.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[w.imageUrl&&R.jsx("button",{onClick:Q=>{Q.stopPropagation(),s(w.id,"idle")},className:"p-2 rounded-full bg-black/40 hover:bg-black/80 text-white border border-white/10 hover:border-white/50 backdrop-blur-sm transition-all shadow-lg",title:"Edit Idle Image",type:"button",children:R.jsx(cf,{size:14})}),R.jsxs("label",{className:"cursor-pointer p-2 rounded-full bg-black/40 hover:bg-gray-800 text-gray-300 hover:text-white border border-white/10 hover:border-white/50 backdrop-blur-sm transition-all relative group/btn shadow-lg",children:[R.jsx(Ip,{size:16}),R.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Q=>S(Q,w.id,"idle")}),R.jsx("span",{className:"absolute right-full mr-2 bg-black/80 text-xs px-2 py-1 rounded text-white whitespace-nowrap opacity-0 group-hover/btn:opacity-100 pointer-events-none",children:"Upload Idle Photo"})]})]}),R.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[w.activeImageUrl&&R.jsx("button",{onClick:Q=>{Q.stopPropagation(),s(w.id,"active")},className:"p-2 rounded-full bg-black/40 hover:bg-black/80 text-white border border-white/10 hover:border-white/50 backdrop-blur-sm transition-all shadow-lg",title:"Edit Active Image",type:"button",children:R.jsx(cf,{size:14})}),R.jsxs("label",{className:`cursor-pointer p-2 rounded-full bg-black/40 hover:bg-primary-900/80 hover:text-primary-400 border border-white/10 hover:border-primary-500/50 backdrop-blur-sm transition-all relative group/btn shadow-lg ${w.activeImageUrl?"text-primary-400 border-primary-500/30":"text-gray-300"}`,children:[R.jsx(cm,{size:16}),R.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Q=>S(Q,w.id,"active")}),R.jsx("span",{className:"absolute right-full mr-2 bg-black/80 text-xs px-2 py-1 rounded text-white whitespace-nowrap opacity-0 group-hover/btn:opacity-100 pointer-events-none",children:"Upload Speaking Photo"})]})]}),R.jsx("div",{className:"flex justify-end",children:R.jsx("button",{onClick:Q=>{Q.stopPropagation(),d(w.id)},className:"p-2 rounded-full bg-black/40 hover:bg-blue-900/80 text-gray-400 hover:text-blue-400 border border-white/10 hover:border-blue-500/50 backdrop-blur-sm transition-all mt-1 shadow-lg",title:"Rotate Speaker",type:"button",children:R.jsx(s4,{size:16})})}),V&&R.jsx("div",{className:"flex justify-end",children:R.jsx("button",{onClick:Q=>{Q.preventDefault(),Q.stopPropagation(),o(w.id)},className:"p-2 rounded-full bg-black/40 hover:bg-red-900/80 text-gray-400 hover:text-red-400 border border-white/10 hover:border-red-500/50 backdrop-blur-sm transition-all mt-1 shadow-lg z-50 pointer-events-auto",title:"Remove All Images",type:"button",children:R.jsx(y4,{size:16})})})]})]},w.id)})})},M4=({file:n,onTimeUpdate:e,onReset:t,isPlayMode:o,onTogglePlayMode:s,isCinemaMode:l,onToggleCinemaMode:u})=>{const d=Ee.useRef(null),h=Ee.useRef(null),[g,_]=Ee.useState(!1),[E,S]=Ee.useState(0),[w,M]=Ee.useState(0),[L,V]=Ee.useState(null),[Y,Q]=Ee.useState(1),[J,te]=Ee.useState(!1);Ee.useEffect(()=>{if(n){const P=URL.createObjectURL(n);return V(P),()=>{URL.revokeObjectURL(P)}}},[n]),Ee.useEffect(()=>{d.current&&(d.current.volume=J?0:Y)},[Y,J]),Ee.useEffect(()=>{const P=Ie=>{Ie.code==="Space"&&(Ie.preventDefault(),W())};return window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P)}},[g]);const me=()=>{if(d.current){const P=d.current.currentTime;M(P),e(P),!d.current.paused&&!d.current.ended&&(h.current=requestAnimationFrame(me))}},W=()=>{d.current&&(d.current.paused?(d.current.play(),h.current=requestAnimationFrame(me),_(!0)):(d.current.pause(),h.current&&cancelAnimationFrame(h.current),_(!1)))},D=()=>{te(!J)},N=()=>{_(!1),h.current&&cancelAnimationFrame(h.current)},x=()=>{d.current&&S(d.current.duration)},U=P=>{const Ie=Number(P.target.value);d.current&&(d.current.currentTime=Ie,M(Ie),e(Ie))},O=P=>{const Ie=parseFloat(P.target.value);Q(Ie),Ie>0&&J&&te(!1)},q=P=>{const Ie=Math.floor(P/60),Qe=Math.floor(P%60);return`${Ie}:${Qe.toString().padStart(2,"0")}`};return R.jsxs("div",{className:`w-full bg-gray-900 border-t border-gray-800 p-4 shadow-2xl z-50 transition-all duration-300 ${l?"border-t-0 bg-transparent":""}`,children:[L&&R.jsx("audio",{ref:d,src:L,onLoadedMetadata:x,onEnded:N}),R.jsxs("div",{className:`max-w-6xl mx-auto flex items-center gap-6 transition-opacity duration-300 ${l?"opacity-30 hover:opacity-100":"opacity-100"}`,children:[!l&&R.jsx("button",{onClick:W,className:"w-12 h-12 flex-shrink-0 flex items-center justify-center rounded-full bg-primary-600 hover:bg-primary-500 text-white transition-all shadow-lg hover:shadow-primary-500/30",children:g?R.jsx(KD,{size:20,fill:"currentColor"}):R.jsx(ZD,{size:20,fill:"currentColor",className:"ml-1"})}),R.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[!l&&R.jsxs("div",{className:"flex justify-between text-xs text-gray-400 font-mono mb-1",children:[R.jsx("span",{children:q(w)}),R.jsx("span",{children:q(E)})]}),R.jsx("input",{type:"range",min:"0",max:E,value:w,onChange:U,step:"0.01",className:`w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary-500 hover:accent-primary-400 ${l?"h-2 opacity-50":""}`})]}),!l&&R.jsxs("div",{className:"flex items-center gap-2 w-32 group",children:[R.jsx("button",{onClick:D,className:"text-gray-400 hover:text-white transition-colors",children:J||Y===0?R.jsx(I4,{size:20}):R.jsx(C4,{size:20})}),R.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:J?0:Y,onChange:O,className:"w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-gray-400 hover:accent-white"})]}),R.jsx("div",{className:"h-8 w-px bg-gray-800 mx-2"}),R.jsx("button",{onClick:s,className:`p-2 transition-colors ${o?"text-neon-blue":"text-gray-500 hover:text-white"}`,title:o?"Exit Play Mode":"Enter Play Mode",children:o?R.jsx(OD,{size:20}):R.jsx(NS,{size:20})}),o&&R.jsx("button",{onClick:u,className:`p-2 transition-colors ${l?"text-neon-purple animate-pulse":"text-gray-500 hover:text-white"}`,title:l?"Exit Cinema Mode":"Enter Cinema Mode (Space to Play/Pause)",children:R.jsx(BD,{size:20})}),!l&&R.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-white transition-colors",title:"Reset & Upload New",children:R.jsx(n4,{size:20})})]})]})},D4=({isOpen:n,imageSource:e,onClose:t,onSave:o,onAiEdit:s,onDetectFaces:l})=>{const[u,d]=Ee.useState(null),[h,g]=Ee.useState(1),[_,E]=Ee.useState({x:0,y:0}),[S,w]=Ee.useState(!0),[M,L]=Ee.useState(1),[V,Y]=Ee.useState("move"),[Q,J]=Ee.useState(!1),[te,me]=Ee.useState({x:0,y:0}),[W,D]=Ee.useState(!1),[N,x]=Ee.useState(!1),[U,O]=Ee.useState(!1),[q,P]=Ee.useState([]),[Ie,Qe]=Ee.useState(-1),[ee,he]=Ee.useState("#ff0055"),[ve,qe]=Ee.useState(20),[je,F]=Ee.useState("neon cyber city background"),X=Ee.useRef(null),le=Ee.useRef(null),de=Ee.useRef(null),xe=Ee.useRef(null),Pe=500;Ee.useEffect(()=>{if(e){let pe="",Ae=!1;return e instanceof File?(pe=URL.createObjectURL(e),Ae=!0):pe=e,d(pe),g(1),E({x:0,y:0}),Y("move"),L(1),Ve(le.current),Ve(de.current),P([]),Qe(-1),()=>{Ae&&URL.revokeObjectURL(pe)}}},[e]);const Ve=pe=>{if(pe){const Ae=pe.getContext("2d");Ae&&Ae.clearRect(0,0,pe.width,pe.height)}},He=()=>{if(!le.current||!de.current)return;const pe=le.current.getContext("2d"),Ae=de.current.getContext("2d");if(!pe||!Ae)return;const we=le.current.width,Ge=le.current.height,ne=pe.getImageData(0,0,we,Ge),ce=Ae.getImageData(0,0,we,Ge),fe=q.slice(0,Ie+1);fe.push({drawing:ne,mask:ce}),fe.length>20&&fe.shift(),P(fe),Qe(fe.length-1)},gt=()=>{if(Ie>0){const pe=Ie-1,Ae=q[pe];if(le.current&&de.current){const we=le.current.getContext("2d"),Ge=de.current.getContext("2d");we&&we.putImageData(Ae.drawing,0,0),Ge&&Ge.putImageData(Ae.mask,0,0)}Qe(pe)}else Ie===0&&(Ve(le.current),Ve(de.current),Qe(-1))},Dn=()=>{if(X.current){const{naturalWidth:pe,naturalHeight:Ae}=X.current,we=Pe/Ae;L(we),le.current&&(le.current.width=pe,le.current.height=Ae),de.current&&(de.current.width=pe,de.current.height=Ae),He()}},Gn=async()=>{if(!X.current||!de.current)return;D(!0);let pe=!1,Ae=[];try{if(window.FaceDetector){const ne=await new window.FaceDetector().detect(X.current);ne.length>0&&(Ae=ne.map(ce=>({type:"system",box:ce.boundingBox})),pe=!0)}}catch(Ge){console.warn("System Face Detection failed, falling back to AI.",Ge)}if(!pe)try{let Ge;if(e instanceof File)Ge=e;else if(typeof e=="string"){const fe=await(await fetch(e)).blob();Ge=new File([fe],"image.png",{type:fe.type})}else throw new Error("Invalid image source");const ne=await l(Ge);if(ne.length>0){const{naturalWidth:ce,naturalHeight:fe}=X.current;Ae=ne.map(oe=>({type:"ai",box:{left:oe.xmin*ce,top:oe.ymin*fe,width:(oe.xmax-oe.xmin)*ce,height:(oe.ymax-oe.ymin)*fe}})),pe=!0}}catch(Ge){console.error("AI Face Detection failed",Ge)}const we=de.current.getContext("2d");we&&pe?(we.fillStyle="rgba(0, 255, 100, 0.5)",Ae.forEach(Ge=>{const{width:ne,height:ce,top:fe,left:oe}=Ge.box;we.beginPath();const Ne=ne*.1,It=ce*.2,Ft=oe+ne/2,on=fe+ce/2-ce*.05,Rt=ne/2+Ne,ct=ce/2+It;we.ellipse(Ft,on,Rt,ct,0,0,2*Math.PI),we.fill()}),He()):pe||alert("No faces detected by System or AI."),D(!1)};if(!n||!e)return null;const Hn=pe=>"touches"in pe?{x:pe.touches[0].clientX,y:pe.touches[0].clientY}:{x:pe.clientX,y:pe.clientY},Ti=(pe,Ae)=>{const we=Ae.getBoundingClientRect(),Ge=Hn(pe),ne=(Ge.x-we.left)*(Ae.width/we.width),ce=(Ge.y-we.top)*(Ae.height/we.height);return{x:ne,y:ce}},mn=pe=>{if(V==="move"){J(!0);const Ae=Hn(pe);me({x:Ae.x-_.x,y:Ae.y-_.y})}else V==="bucket"?(Vo(pe),He()):(x(!0),O(!0),Po(pe))},ii=pe=>{if(V==="move"&&Q){const Ae=Hn(pe);E({x:Ae.x-te.x,y:Ae.y-te.y})}else N&&V!=="move"&&V!=="bucket"&&Po(pe)},oi=()=>{var we,Ge;J(!1),N&&U&&He(),x(!1),O(!1);const pe=(we=le.current)==null?void 0:we.getContext("2d");pe&&pe.beginPath();const Ae=(Ge=de.current)==null?void 0:Ge.getContext("2d");Ae&&Ae.beginPath()},Po=pe=>{let Ae=le.current,we=ee,Ge="source-over";if(V==="mask"?(Ae=de.current,we="rgba(0, 255, 100, 0.5)"):V==="eraser"&&(Ge="destination-out"),!Ae)return;const ne=Ae.getContext("2d");if(!ne)return;const{x:ce,y:fe}=Ti(pe,Ae);ne.lineWidth=ve,ne.lineCap="round",ne.lineJoin="round",ne.strokeStyle=we,ne.globalCompositeOperation=Ge,ne.lineTo(ce,fe),ne.stroke(),ne.beginPath(),ne.moveTo(ce,fe),ne.globalCompositeOperation="source-over"},Vo=pe=>{if(!le.current||!de.current)return;const Ae=le.current,we=de.current,Ge=Ae.getContext("2d"),ne=we.getContext("2d");if(!Ge||!ne)return;const{x:ce,y:fe}=Ti(pe,Ae),oe=Math.floor(ce),Ne=Math.floor(fe),It=Ae.width,Ft=Ae.height,on=Ge.getImageData(0,0,It,Ft),Rt=ne.getImageData(0,0,It,Ft),ct=on.data,rn=Rt.data,kr=ee.replace("#",""),Uo=parseInt(kr.substring(0,2),16),Lr=parseInt(kr.substring(2,4),16),Vi=parseInt(kr.substring(4,6),16),$n=255,Yn=(Ne*It+oe)*4,Vn=ct[Yn],An=ct[Yn+1],Si=ct[Yn+2],eo=ct[Yn+3];if(Vn===Uo&&An===Lr&&Si===Vi&&eo===$n)return;const ri=[[oe,Ne]];for(;ri.length;){const[sn,gn]=ri.pop(),yt=(gn*It+sn)*4;sn<0||sn>=It||gn<0||gn>=Ft||rn[yt+3]>10||ct[yt]===Vn&&ct[yt+1]===An&&ct[yt+2]===Si&&ct[yt+3]===eo&&(ct[yt]=Uo,ct[yt+1]=Lr,ct[yt+2]=Vi,ct[yt+3]=$n,ri.push([sn+1,gn]),ri.push([sn-1,gn]),ri.push([sn,gn+1]),ri.push([sn,gn-1]))}Ge.putImageData(on,0,0)},Pi=()=>{if(!X.current)return;const pe=2048,Ae=document.createElement("canvas");Ae.width=pe,Ae.height=pe;const we=Ae.getContext("2d");if(!we)return;we.imageSmoothingEnabled=!0,we.imageSmoothingQuality="high",we.fillStyle="#000",we.fillRect(0,0,pe,pe);const Ge=pe/Pe;we.translate(pe/2,pe/2),we.translate(_.x*Ge,_.y*Ge),we.scale(h,h);const ne=X.current.naturalWidth/X.current.naturalHeight,ce=pe,fe=ce*ne;we.drawImage(X.current,-fe/2,-ce/2,fe,ce),le.current&&we.drawImage(le.current,-fe/2,-ce/2,fe,ce),Ae.toBlob(oe=>{oe&&o(oe)},"image/jpeg",.95)},Ei=async()=>{if(!e||typeof e=="string"){alert("AI Edit requires a fresh file upload for now. Please re-upload.");return}D(!0);try{const pe=await s(e,je);d(pe),g(1),E({x:0,y:0}),Ve(le.current),Ve(de.current),P([]),Qe(-1),Y("move"),He()}catch(pe){console.error("AI Edit failed",pe),alert("Failed to generate image.")}finally{D(!1)}},Pn=({tool:pe,icon:Ae,label:we})=>R.jsxs("button",{onClick:()=>Y(pe),className:`flex flex-col items-center justify-center p-3 rounded-xl transition-all w-full border ${V===pe?"bg-primary-600/20 border-primary-500 text-white shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-gray-800 border-transparent text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,children:[R.jsx(Ae,{size:20,className:"mb-1"}),R.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider",children:we})]});return R.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-md p-4",children:R.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-6xl max-h-[95vh] flex flex-col shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[R.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-950/50 flex-shrink-0",children:[R.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[R.jsx(PD,{size:18,className:"text-primary-400"}),"Image Studio"]}),R.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:R.jsx(fm,{size:20})})]}),R.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[R.jsxs("div",{className:"w-full md:w-24 bg-gray-900 border-r border-gray-800 p-2 flex md:flex-col gap-2 overflow-x-auto md:overflow-visible flex-shrink-0 z-10",children:[R.jsx(Pn,{tool:"move",icon:uT,label:"Move"}),R.jsx("div",{className:"w-full h-px bg-gray-800 my-1 hidden md:block"}),R.jsx(Pn,{tool:"mask",icon:fT,label:"Preserve"}),R.jsx(Pn,{tool:"bucket",icon:cT,label:"Fill"}),R.jsx(Pn,{tool:"brush",icon:cf,label:"Paint"}),R.jsx(Pn,{tool:"eraser",icon:lT,label:"Erase"})]}),R.jsxs("div",{className:"flex-1 bg-black/40 relative overflow-hidden flex items-center justify-center",children:[R.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#4f46e5 1px, transparent 1px)",backgroundSize:"20px 20px"}}),R.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:"linear-gradient(45deg, #333 25%, transparent 25%), linear-gradient(-45deg, #333 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #333 75%), linear-gradient(-45deg, transparent 75%, #333 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"}}),R.jsx("div",{className:"relative w-full h-full p-8 flex items-center justify-center overflow-hidden",children:u?R.jsx(R.Fragment,{children:R.jsxs("div",{ref:xe,className:`relative border-2 border-white/20 shadow-[0_0_0_9999px_rgba(0,0,0,0.8)] overflow-hidden bg-black ${V==="move"?"cursor-move":V==="bucket"?"cursor-crosshair":"cursor-none"}`,style:{width:`${Pe}px`,height:`${Pe}px`},onMouseDown:mn,onMouseMove:ii,onMouseUp:oi,onMouseLeave:oi,onTouchStart:mn,onTouchMove:ii,onTouchEnd:oi,children:[R.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",transform:`translate(${_.x}px, ${_.y}px) scale(${h})`,transformOrigin:"center center",transition:Q?"none":"transform 0.1s ease-out"},children:R.jsxs("div",{className:"relative",children:[R.jsx("img",{ref:X,src:u,onLoad:Dn,alt:"Edit",className:"max-w-none pointer-events-none select-none block",style:{height:`${Pe}px`,width:"auto"},draggable:!1}),R.jsx("canvas",{ref:le,className:"absolute inset-0 w-full h-full pointer-events-none"}),R.jsx("canvas",{ref:de,className:"absolute inset-0 w-full h-full pointer-events-none opacity-60 mix-blend-screen"})]})}),S&&R.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10 border border-white/10",children:[R.jsx("div",{className:"w-full h-full grid grid-cols-3 grid-rows-3",children:[...Array(9)].map((pe,Ae)=>R.jsx("div",{className:"border border-white/10"},Ae))}),R.jsx("div",{className:"absolute top-0 left-0 w-full h-full border border-white/50"})]}),(V==="brush"||V==="mask"||V==="eraser")&&!Q&&R.jsx("div",{className:"pointer-events-none fixed border-2 rounded-full z-50 -translate-x-1/2 -translate-y-1/2",style:{width:ve*M*h,height:ve*M*h,borderColor:V==="mask"?"#0aff60":V==="eraser"?"white":ee,left:"var(--cursor-x, -100px)",top:"var(--cursor-y, -100px)"},ref:pe=>{pe&&document.addEventListener("mousemove",Ae=>{pe.style.setProperty("--cursor-x",`${Ae.clientX}px`),pe.style.setProperty("--cursor-y",`${Ae.clientY}px`)})}})]})}):R.jsxs("div",{className:"text-gray-500 flex flex-col items-center",children:[R.jsx(Yl,{className:"animate-spin mb-2"}),"Loading Image..."]})}),W&&R.jsxs("div",{className:"absolute inset-0 bg-black/80 flex flex-col items-center justify-center z-50 backdrop-blur-sm",children:[R.jsx(Yl,{size:48,className:"text-neon-purple animate-spin mb-4"}),R.jsx("span",{className:"text-white text-lg font-medium animate-pulse",children:"Generating AI Background..."})]})]}),R.jsxs("div",{className:"w-full md:w-80 bg-gray-900 border-l border-gray-800 p-6 overflow-y-auto flex-shrink-0",children:[R.jsxs("div",{className:"mb-6 p-4 bg-gray-800 rounded-xl border border-gray-700",children:[R.jsxs("h4",{className:"text-white font-bold mb-1 flex items-center gap-2",children:[V==="move"&&R.jsx(uT,{size:16}),V==="mask"&&R.jsx(fT,{size:16}),V==="bucket"&&R.jsx(cT,{size:16}),V==="brush"&&R.jsx(cf,{size:16}),V==="eraser"&&R.jsx(lT,{size:16}),R.jsxs("span",{className:"capitalize",children:[V," Tool"]})]}),R.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[V==="move"&&"Drag image to position inside the square frame.",V==="mask"&&"Draw over subject to PROTECT it from fills.",V==="bucket"&&"Fill empty areas. Respects protective mask.",V==="brush"&&"Freehand paint.",V==="eraser"&&"Erase paint."]})]}),R.jsxs("div",{className:"space-y-4 mb-6",children:[R.jsxs("div",{className:"flex justify-between",children:[R.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Zoom"}),R.jsxs("span",{className:"text-xs text-primary-400 font-mono",children:[h.toFixed(1),"x"]})]}),R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx(x4,{size:16,className:"text-gray-500"}),R.jsx("input",{type:"range",min:"0.5",max:"15",step:"0.1",value:h,onChange:pe=>g(parseFloat(pe.target.value)),className:"flex-1 h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary-500"})]})]}),R.jsxs("div",{className:"flex items-center justify-between mb-8 pb-4 border-b border-gray-800",children:[R.jsxs("label",{className:"text-xs font-bold text-gray-400 uppercase flex items-center gap-2",children:[R.jsx(bS,{size:14})," Show Grid"]}),R.jsx("button",{onClick:()=>w(!S),className:`w-10 h-5 rounded-full relative transition-colors ${S?"bg-primary-600":"bg-gray-700"}`,children:R.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${S?"translate-x-5":"translate-x-0"}`})})]}),V!=="move"&&R.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[R.jsxs("div",{className:"space-y-3",children:[R.jsxs("div",{className:"flex justify-between text-xs text-gray-400 font-bold uppercase",children:[R.jsx("span",{children:"Brush Size"}),R.jsxs("span",{children:[ve,"px"]})]}),R.jsx("input",{type:"range",min:"1",max:"150",value:ve,onChange:pe=>qe(parseInt(pe.target.value)),className:"w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-white"})]}),(V==="brush"||V==="bucket")&&R.jsxs("div",{className:"space-y-3",children:[R.jsxs("label",{className:"text-xs font-bold text-gray-400 uppercase flex items-center gap-2",children:[R.jsx(MS,{size:14})," Color"]}),R.jsxs("div",{className:"flex gap-2 flex-wrap",children:[["#ff0055","#00f3ff","#bc13fe","#0aff60","#ffffff","#000000"].map(pe=>R.jsx("button",{onClick:()=>he(pe),className:`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 ${ee===pe?"border-white scale-110":"border-transparent"}`,style:{backgroundColor:pe}},pe)),R.jsx("input",{type:"color",value:ee,onChange:pe=>he(pe.target.value),className:"w-8 h-8 rounded-full cursor-pointer bg-transparent border-0 p-0 overflow-hidden"})]})]}),R.jsxs("div",{className:"flex gap-2",children:[R.jsxs("button",{onClick:gt,disabled:Ie<0,className:"flex-1 py-2 text-xs font-bold text-gray-300 hover:bg-gray-800 border border-gray-700 rounded transition-colors flex items-center justify-center gap-2 disabled:opacity-50",title:"Undo last stroke",children:[R.jsx(_4,{size:14})," Undo"]}),R.jsxs("button",{onClick:()=>{Ve(le.current),Ve(de.current),He()},className:"flex-1 py-2 text-xs font-bold text-red-400 hover:bg-red-900/20 border border-red-900/30 rounded transition-colors flex items-center justify-center gap-2",children:[R.jsx(o4,{size:14})," Reset"]})]})]}),V==="mask"&&R.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800",children:[R.jsxs("button",{onClick:Gn,className:"w-full py-2 bg-green-900/30 text-green-400 border border-green-800 rounded hover:bg-green-900/50 transition-colors flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-wider",children:[R.jsx(l4,{size:14})," Auto-Detect Face"]}),R.jsx("p",{className:"text-[10px] text-gray-500 mt-2 text-center",children:"Attempts to auto-mask faces using system detection."})]}),R.jsxs("div",{className:"mt-4 pt-6 border-t border-gray-800 space-y-4",children:[R.jsxs("label",{className:"text-xs font-bold text-neon-blue uppercase flex items-center gap-2",children:[R.jsx(cm,{size:14}),"Generative Fill"]}),R.jsx("textarea",{value:je,onChange:pe=>F(pe.target.value),placeholder:"Describe the background...",className:"w-full bg-black/30 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-neon-blue placeholder-gray-600 resize-none h-20"}),R.jsx("button",{onClick:Ei,disabled:W,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-500 text-white px-4 py-3 rounded-lg font-bold text-sm hover:brightness-110 disabled:opacity-50 transition-all shadow-lg shadow-blue-900/20",children:W?"Generating...":"Generate New Image"})]})]})]}),R.jsxs("div",{className:"p-4 border-t border-gray-800 flex justify-end gap-3 bg-gray-950/50 flex-shrink-0",children:[R.jsx("button",{onClick:t,className:"px-5 py-2.5 text-gray-400 hover:text-white text-sm font-medium transition-colors",children:"Discard"}),R.jsxs("button",{onClick:Pi,className:"px-8 py-2.5 bg-white text-black rounded-full text-sm font-bold hover:bg-gray-200 transition-colors flex items-center gap-2 shadow-[0_0_20px_rgba(255,255,255,0.2)]",children:[R.jsx(wp,{size:18}),"Save & Apply"]})]})]})})},P4=()=>{};var hT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=function(n){const e=[];let t=0;for(let o=0;o<n.length;o++){let s=n.charCodeAt(o);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++o)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},V4=function(n){const e=[];let t=0,o=0;for(;t<n.length;){const s=n[t++];if(s<128)e[o++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[o++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],u=n[t++],d=n[t++],h=((s&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(h>>10)),e[o++]=String.fromCharCode(56320+(h&1023))}else{const l=n[t++],u=n[t++];e[o++]=String.fromCharCode((s&15)<<12|(l&63)<<6|u&63)}}return e.join("")},PS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let s=0;s<n.length;s+=3){const l=n[s],u=s+1<n.length,d=u?n[s+1]:0,h=s+2<n.length,g=h?n[s+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,w=g&63;h||(w=64,u||(S=64)),o.push(t[_],t[E],t[S],t[w])}return o.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(DS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):V4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new U4;const S=l<<2|d>>4;if(o.push(S),g!==64){const w=d<<4&240|g>>2;if(o.push(w),E!==64){const M=g<<6&192|E;o.push(M)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class U4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k4=function(n){const e=DS(n);return PS.encodeByteArray(e,!0)},df=function(n){return k4(n).replace(/\./g,"")},L4=function(n){try{return PS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=()=>O4().__FIREBASE_DEFAULTS__,B4=()=>{if(typeof process>"u"||typeof hT>"u")return;const n=hT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},q4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&L4(n[1]);return e&&JSON.parse(e)},dm=()=>{try{return P4()||F4()||B4()||q4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},z4=n=>{var e,t;return(t=(e=dm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},VS=n=>{const e=z4(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},US=()=>{var n;return(n=dm())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[df(JSON.stringify(t)),df(JSON.stringify(u)),""].join(".")}const Fl={};function H4(){const n={prod:[],emulator:[]};for(const e of Object.keys(Fl))Fl[e]?n.emulator.push(e):n.prod.push(e);return n}function $4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let pT=!1;function OS(n,e){if(typeof window>"u"||typeof document>"u"||!iu(window.location.host)||Fl[n]===e||Fl[n]||pT)return;Fl[n]=e;function t(S){return`__firebase__banner__${S}`}const o="__firebase__banner",l=H4().prod.length>0;function u(){const S=document.getElementById(o);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function h(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{pT=!0,u()},S}function _(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=$4(o),w=t("text"),M=document.getElementById(w)||document.createElement("span"),L=t("learnmore"),V=document.getElementById(L)||document.createElement("a"),Y=t("preprendIcon"),Q=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const J=S.element;d(J),_(V,L);const te=g();h(Q,Y),J.append(Q,M,V,te),document.body.appendChild(J)}l?(M.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J4(){var n;const e=(n=dm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function K4(){return!J4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q4(){try{return typeof indexedDB=="object"}catch{return!1}}function X4(){return new Promise((n,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(o);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(o),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="FirebaseError";class ys extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=W4,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,FS.prototype.create)}}class FS{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],u=l?Z4(l,o):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new ys(s,d,o)}}function Z4(n,e){return n.replace(j4,(t,o)=>{const s=e[o];return s!=null?String(s):`<${o}?>`})}const j4=/\{\$([^}]+)}/g;function hf(n,e){if(n===e)return!0;const t=Object.keys(n),o=Object.keys(e);for(const s of t){if(!o.includes(s))return!1;const l=n[s],u=e[s];if(mT(l)&&mT(u)){if(!hf(l,u))return!1}else if(l!==u)return!1}for(const s of o)if(!t.includes(s))return!1;return!0}function mT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(n){return n&&n._delegate?n._delegate:n}class _a{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new G4;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&o.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nP(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});o.resolve(l)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&u.resolve(s)}return s}onInit(e,t){var o;const s=this.normalizeInstanceIdentifier(t),l=(o=this.onInitCallbacks.get(s))!==null&&o!==void 0?o:new Set;l.add(e),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&e(u,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const s of o)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:tP(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tP(n){return n===cs?void 0:n}function nP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new eP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const oP={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},rP=nt.INFO,sP={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},aP=(n,e,...t)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),s=sP[e];if(s)console[s](`[${o}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class BS{constructor(e){this.name=e,this._logLevel=rP,this._logHandler=aP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const lP=(n,e)=>e.some(t=>n instanceof t);let gT,yT;function uP(){return gT||(gT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cP(){return yT||(yT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qS=new WeakMap,bp=new WeakMap,zS=new WeakMap,jh=new WeakMap,hm=new WeakMap;function fP(n){const e=new Promise((t,o)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Sr(n.result)),s()},u=()=>{o(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&qS.set(t,n)}).catch(()=>{}),hm.set(e,n),e}function dP(n){if(bp.has(n))return;const e=new Promise((t,o)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),s()},u=()=>{o(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});bp.set(n,e)}let xp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Sr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hP(n){xp=n(xp)}function pP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=n.call(ep(this),e,...t);return zS.set(o,e.sort?e.sort():[e]),Sr(o)}:cP().includes(n)?function(...e){return n.apply(ep(this),e),Sr(qS.get(this))}:function(...e){return Sr(n.apply(ep(this),e))}}function mP(n){return typeof n=="function"?pP(n):(n instanceof IDBTransaction&&dP(n),lP(n,uP())?new Proxy(n,xp):n)}function Sr(n){if(n instanceof IDBRequest)return fP(n);if(jh.has(n))return jh.get(n);const e=mP(n);return e!==n&&(jh.set(n,e),hm.set(e,n)),e}const ep=n=>hm.get(n);function gP(n,e,{blocked:t,upgrade:o,blocking:s,terminated:l}={}){const u=indexedDB.open(n,e),d=Sr(u);return o&&u.addEventListener("upgradeneeded",h=>{o(Sr(u.result),h.oldVersion,h.newVersion,Sr(u.transaction),h)}),t&&u.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{l&&h.addEventListener("close",()=>l()),s&&h.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const yP=["get","getKey","getAll","getAllKeys","count"],vP=["put","add","delete","clear"],tp=new Map;function vT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tp.get(e))return tp.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,s=vP.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(s||yP.includes(t)))return;const l=async function(u,...d){const h=this.transaction(u,s?"readwrite":"readonly");let g=h.store;return o&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&h.done]))[0]};return tp.set(e,l),l}hP(n=>({...n,get:(e,t,o)=>vT(e,t)||n.get(e,t,o),has:(e,t)=>!!vT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TP(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function TP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Np="@firebase/app",_T="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new BS("@firebase/app"),EP="@firebase/app-compat",SP="@firebase/analytics-compat",AP="@firebase/analytics",CP="@firebase/app-check-compat",wP="@firebase/app-check",IP="@firebase/auth",RP="@firebase/auth-compat",bP="@firebase/database",xP="@firebase/data-connect",NP="@firebase/database-compat",MP="@firebase/functions",DP="@firebase/functions-compat",PP="@firebase/installations",VP="@firebase/installations-compat",UP="@firebase/messaging",kP="@firebase/messaging-compat",LP="@firebase/performance",OP="@firebase/performance-compat",FP="@firebase/remote-config",BP="@firebase/remote-config-compat",qP="@firebase/storage",zP="@firebase/storage-compat",GP="@firebase/firestore",HP="@firebase/ai",$P="@firebase/firestore-compat",YP="firebase",JP="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="[DEFAULT]",KP={[Np]:"fire-core",[EP]:"fire-core-compat",[AP]:"fire-analytics",[SP]:"fire-analytics-compat",[wP]:"fire-app-check",[CP]:"fire-app-check-compat",[IP]:"fire-auth",[RP]:"fire-auth-compat",[bP]:"fire-rtdb",[xP]:"fire-data-connect",[NP]:"fire-rtdb-compat",[MP]:"fire-fn",[DP]:"fire-fn-compat",[PP]:"fire-iid",[VP]:"fire-iid-compat",[UP]:"fire-fcm",[kP]:"fire-fcm-compat",[LP]:"fire-perf",[OP]:"fire-perf-compat",[FP]:"fire-rc",[BP]:"fire-rc-compat",[qP]:"fire-gcs",[zP]:"fire-gcs-compat",[GP]:"fire-fst",[$P]:"fire-fst-compat",[HP]:"fire-vertex","fire-js":"fire-js",[YP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Map,QP=new Map,Dp=new Map;function TT(n,e){try{n.container.addComponent(e)}catch(t){bo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kl(n){const e=n.name;if(Dp.has(e))return bo.debug(`There were multiple attempts to register component ${e}.`),!1;Dp.set(e,n);for(const t of Jl.values())TT(t,n);for(const t of QP.values())TT(t,n);return!0}function GS(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function HS(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new FS("app","Firebase",XP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,t,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=JP;function YS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const o=Object.assign({name:Mp,automaticDataCollectionEnabled:!0},e),s=o.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(t||(t=US()),!t)throw Ar.create("no-options");const l=Jl.get(s);if(l){if(hf(t,l.options)&&hf(o,l.config))return l;throw Ar.create("duplicate-app",{appName:s})}const u=new iP(s);for(const h of Dp.values())u.addComponent(h);const d=new WP(t,o,u);return Jl.set(s,d),d}function JS(n=Mp){const e=Jl.get(n);if(!e&&n===Mp&&US())return YS();if(!e)throw Ar.create("no-app",{appName:n});return e}function ET(){return Array.from(Jl.values())}function Cr(n,e,t){var o;let s=(o=KP[n])!==null&&o!==void 0?o:n;t&&(s+=`-${t}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bo.warn(d.join(" "));return}Kl(new _a(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="firebase-heartbeat-database",jP=1,Ql="firebase-heartbeat-store";let np=null;function KS(){return np||(np=gP(ZP,jP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ql)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ar.create("idb-open",{originalErrorMessage:n.message})})),np}async function eV(n){try{const t=(await KS()).transaction(Ql),o=await t.objectStore(Ql).get(QS(n));return await t.done,o}catch(e){if(e instanceof ys)bo.warn(e.message);else{const t=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bo.warn(t.message)}}}async function ST(n,e){try{const o=(await KS()).transaction(Ql,"readwrite");await o.objectStore(Ql).put(e,QS(n)),await o.done}catch(t){if(t instanceof ys)bo.warn(t.message);else{const o=Ar.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});bo.warn(o.message)}}}function QS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=1024,nV=30;class iV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rV(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=AT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>nV){const u=sV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){bo.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=AT(),{heartbeatsToSend:o,unsentEntries:s}=oV(this._heartbeatsCache.heartbeats),l=df(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return bo.warn(t),""}}}function AT(){return new Date().toISOString().substring(0,10)}function oV(n,e=tV){const t=[];let o=n.slice();for(const s of n){const l=t.find(u=>u.agent===s.agent);if(l){if(l.dates.push(s.date),CT(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),CT(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class rV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Q4()?X4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return ST(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return ST(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function CT(n){return df(JSON.stringify({version:2,heartbeats:n})).length}function sV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let o=1;o<n.length;o++)n[o].date<t&&(t=n[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(n){Kl(new _a("platform-logger",e=>new _P(e),"PRIVATE")),Kl(new _a("heartbeat",e=>new iV(e),"PRIVATE")),Cr(Np,_T,n),Cr(Np,_T,"esm2017"),Cr("fire-js","")}aV("");var lV="firebase",uV="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(lV,uV,"app");var wT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,XS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function x(){}x.prototype=N.prototype,D.D=N.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(U,O,q){for(var P=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)P[Ie-2]=arguments[Ie];return N.prototype[O].apply(U,P)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,t),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,N,x){x||(x=0);var U=Array(16);if(typeof N=="string")for(var O=0;16>O;++O)U[O]=N.charCodeAt(x++)|N.charCodeAt(x++)<<8|N.charCodeAt(x++)<<16|N.charCodeAt(x++)<<24;else for(O=0;16>O;++O)U[O]=N[x++]|N[x++]<<8|N[x++]<<16|N[x++]<<24;N=D.g[0],x=D.g[1],O=D.g[2];var q=D.g[3],P=N+(q^x&(O^q))+U[0]+3614090360&4294967295;N=x+(P<<7&4294967295|P>>>25),P=q+(O^N&(x^O))+U[1]+3905402710&4294967295,q=N+(P<<12&4294967295|P>>>20),P=O+(x^q&(N^x))+U[2]+606105819&4294967295,O=q+(P<<17&4294967295|P>>>15),P=x+(N^O&(q^N))+U[3]+3250441966&4294967295,x=O+(P<<22&4294967295|P>>>10),P=N+(q^x&(O^q))+U[4]+4118548399&4294967295,N=x+(P<<7&4294967295|P>>>25),P=q+(O^N&(x^O))+U[5]+1200080426&4294967295,q=N+(P<<12&4294967295|P>>>20),P=O+(x^q&(N^x))+U[6]+2821735955&4294967295,O=q+(P<<17&4294967295|P>>>15),P=x+(N^O&(q^N))+U[7]+4249261313&4294967295,x=O+(P<<22&4294967295|P>>>10),P=N+(q^x&(O^q))+U[8]+1770035416&4294967295,N=x+(P<<7&4294967295|P>>>25),P=q+(O^N&(x^O))+U[9]+2336552879&4294967295,q=N+(P<<12&4294967295|P>>>20),P=O+(x^q&(N^x))+U[10]+4294925233&4294967295,O=q+(P<<17&4294967295|P>>>15),P=x+(N^O&(q^N))+U[11]+2304563134&4294967295,x=O+(P<<22&4294967295|P>>>10),P=N+(q^x&(O^q))+U[12]+1804603682&4294967295,N=x+(P<<7&4294967295|P>>>25),P=q+(O^N&(x^O))+U[13]+4254626195&4294967295,q=N+(P<<12&4294967295|P>>>20),P=O+(x^q&(N^x))+U[14]+2792965006&4294967295,O=q+(P<<17&4294967295|P>>>15),P=x+(N^O&(q^N))+U[15]+1236535329&4294967295,x=O+(P<<22&4294967295|P>>>10),P=N+(O^q&(x^O))+U[1]+4129170786&4294967295,N=x+(P<<5&4294967295|P>>>27),P=q+(x^O&(N^x))+U[6]+3225465664&4294967295,q=N+(P<<9&4294967295|P>>>23),P=O+(N^x&(q^N))+U[11]+643717713&4294967295,O=q+(P<<14&4294967295|P>>>18),P=x+(q^N&(O^q))+U[0]+3921069994&4294967295,x=O+(P<<20&4294967295|P>>>12),P=N+(O^q&(x^O))+U[5]+3593408605&4294967295,N=x+(P<<5&4294967295|P>>>27),P=q+(x^O&(N^x))+U[10]+38016083&4294967295,q=N+(P<<9&4294967295|P>>>23),P=O+(N^x&(q^N))+U[15]+3634488961&4294967295,O=q+(P<<14&4294967295|P>>>18),P=x+(q^N&(O^q))+U[4]+3889429448&4294967295,x=O+(P<<20&4294967295|P>>>12),P=N+(O^q&(x^O))+U[9]+568446438&4294967295,N=x+(P<<5&4294967295|P>>>27),P=q+(x^O&(N^x))+U[14]+3275163606&4294967295,q=N+(P<<9&4294967295|P>>>23),P=O+(N^x&(q^N))+U[3]+4107603335&4294967295,O=q+(P<<14&4294967295|P>>>18),P=x+(q^N&(O^q))+U[8]+1163531501&4294967295,x=O+(P<<20&4294967295|P>>>12),P=N+(O^q&(x^O))+U[13]+2850285829&4294967295,N=x+(P<<5&4294967295|P>>>27),P=q+(x^O&(N^x))+U[2]+4243563512&4294967295,q=N+(P<<9&4294967295|P>>>23),P=O+(N^x&(q^N))+U[7]+1735328473&4294967295,O=q+(P<<14&4294967295|P>>>18),P=x+(q^N&(O^q))+U[12]+2368359562&4294967295,x=O+(P<<20&4294967295|P>>>12),P=N+(x^O^q)+U[5]+4294588738&4294967295,N=x+(P<<4&4294967295|P>>>28),P=q+(N^x^O)+U[8]+2272392833&4294967295,q=N+(P<<11&4294967295|P>>>21),P=O+(q^N^x)+U[11]+1839030562&4294967295,O=q+(P<<16&4294967295|P>>>16),P=x+(O^q^N)+U[14]+4259657740&4294967295,x=O+(P<<23&4294967295|P>>>9),P=N+(x^O^q)+U[1]+2763975236&4294967295,N=x+(P<<4&4294967295|P>>>28),P=q+(N^x^O)+U[4]+1272893353&4294967295,q=N+(P<<11&4294967295|P>>>21),P=O+(q^N^x)+U[7]+4139469664&4294967295,O=q+(P<<16&4294967295|P>>>16),P=x+(O^q^N)+U[10]+3200236656&4294967295,x=O+(P<<23&4294967295|P>>>9),P=N+(x^O^q)+U[13]+681279174&4294967295,N=x+(P<<4&4294967295|P>>>28),P=q+(N^x^O)+U[0]+3936430074&4294967295,q=N+(P<<11&4294967295|P>>>21),P=O+(q^N^x)+U[3]+3572445317&4294967295,O=q+(P<<16&4294967295|P>>>16),P=x+(O^q^N)+U[6]+76029189&4294967295,x=O+(P<<23&4294967295|P>>>9),P=N+(x^O^q)+U[9]+3654602809&4294967295,N=x+(P<<4&4294967295|P>>>28),P=q+(N^x^O)+U[12]+3873151461&4294967295,q=N+(P<<11&4294967295|P>>>21),P=O+(q^N^x)+U[15]+530742520&4294967295,O=q+(P<<16&4294967295|P>>>16),P=x+(O^q^N)+U[2]+3299628645&4294967295,x=O+(P<<23&4294967295|P>>>9),P=N+(O^(x|~q))+U[0]+4096336452&4294967295,N=x+(P<<6&4294967295|P>>>26),P=q+(x^(N|~O))+U[7]+1126891415&4294967295,q=N+(P<<10&4294967295|P>>>22),P=O+(N^(q|~x))+U[14]+2878612391&4294967295,O=q+(P<<15&4294967295|P>>>17),P=x+(q^(O|~N))+U[5]+4237533241&4294967295,x=O+(P<<21&4294967295|P>>>11),P=N+(O^(x|~q))+U[12]+1700485571&4294967295,N=x+(P<<6&4294967295|P>>>26),P=q+(x^(N|~O))+U[3]+2399980690&4294967295,q=N+(P<<10&4294967295|P>>>22),P=O+(N^(q|~x))+U[10]+4293915773&4294967295,O=q+(P<<15&4294967295|P>>>17),P=x+(q^(O|~N))+U[1]+2240044497&4294967295,x=O+(P<<21&4294967295|P>>>11),P=N+(O^(x|~q))+U[8]+1873313359&4294967295,N=x+(P<<6&4294967295|P>>>26),P=q+(x^(N|~O))+U[15]+4264355552&4294967295,q=N+(P<<10&4294967295|P>>>22),P=O+(N^(q|~x))+U[6]+2734768916&4294967295,O=q+(P<<15&4294967295|P>>>17),P=x+(q^(O|~N))+U[13]+1309151649&4294967295,x=O+(P<<21&4294967295|P>>>11),P=N+(O^(x|~q))+U[4]+4149444226&4294967295,N=x+(P<<6&4294967295|P>>>26),P=q+(x^(N|~O))+U[11]+3174756917&4294967295,q=N+(P<<10&4294967295|P>>>22),P=O+(N^(q|~x))+U[2]+718787259&4294967295,O=q+(P<<15&4294967295|P>>>17),P=x+(q^(O|~N))+U[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+q&4294967295}o.prototype.u=function(D,N){N===void 0&&(N=D.length);for(var x=N-this.blockSize,U=this.B,O=this.h,q=0;q<N;){if(O==0)for(;q<=x;)s(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<N;)if(U[O++]=D.charCodeAt(q++),O==this.blockSize){s(this,U),O=0;break}}else for(;q<N;)if(U[O++]=D[q++],O==this.blockSize){s(this,U),O=0;break}}this.h=O,this.o+=N},o.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;var x=8*this.o;for(N=D.length-8;N<D.length;++N)D[N]=x&255,x/=256;for(this.u(D),D=Array(16),N=x=0;4>N;++N)for(var U=0;32>U;U+=8)D[x++]=this.g[N]>>>U&255;return D};function l(D,N){var x=d;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=N(D)}function u(D,N){this.h=N;for(var x=[],U=!0,O=D.length-1;0<=O;O--){var q=D[O]|0;U&&q==N||(x[O]=q,U=!1)}this.g=x}var d={};function h(D){return-128<=D&&128>D?l(D,function(N){return new u([N|0],0>N?-1:0)}):new u([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return V(g(-D));for(var N=[],x=1,U=0;D>=x;U++)N[U]=D/x|0,x*=4294967296;return new u(N,0)}function _(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return V(_(D.substring(1),N));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(N,8)),U=E,O=0;O<D.length;O+=8){var q=Math.min(8,D.length-O),P=parseInt(D.substring(O,O+q),N);8>q?(q=g(Math.pow(N,q)),U=U.j(q).add(g(P))):(U=U.j(x),U=U.add(g(P)))}return U}var E=h(0),S=h(1),w=h(16777216);n=u.prototype,n.m=function(){if(L(this))return-V(this).m();for(var D=0,N=1,x=0;x<this.g.length;x++){var U=this.i(x);D+=(0<=U?U:4294967296+U)*N,N*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(L(this))return"-"+V(this).toString(D);for(var N=g(Math.pow(D,6)),x=this,U="";;){var O=te(x,N).g;x=Y(x,O.j(N));var q=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=O,M(x))return q+U;for(;6>q.length;)q="0"+q;U=q+U}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(var N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function L(D){return D.h==-1}n.l=function(D){return D=Y(this,D),L(D)?-1:M(D)?0:1};function V(D){for(var N=D.g.length,x=[],U=0;U<N;U++)x[U]=~D.g[U];return new u(x,~D.h).add(S)}n.abs=function(){return L(this)?V(this):this},n.add=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],U=0,O=0;O<=N;O++){var q=U+(this.i(O)&65535)+(D.i(O)&65535),P=(q>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);U=P>>>16,q&=65535,P&=65535,x[O]=P<<16|q}return new u(x,x[x.length-1]&-2147483648?-1:0)};function Y(D,N){return D.add(V(N))}n.j=function(D){if(M(this)||M(D))return E;if(L(this))return L(D)?V(this).j(V(D)):V(V(this).j(D));if(L(D))return V(this.j(V(D)));if(0>this.l(w)&&0>D.l(w))return g(this.m()*D.m());for(var N=this.g.length+D.g.length,x=[],U=0;U<2*N;U++)x[U]=0;for(U=0;U<this.g.length;U++)for(var O=0;O<D.g.length;O++){var q=this.i(U)>>>16,P=this.i(U)&65535,Ie=D.i(O)>>>16,Qe=D.i(O)&65535;x[2*U+2*O]+=P*Qe,Q(x,2*U+2*O),x[2*U+2*O+1]+=q*Qe,Q(x,2*U+2*O+1),x[2*U+2*O+1]+=P*Ie,Q(x,2*U+2*O+1),x[2*U+2*O+2]+=q*Ie,Q(x,2*U+2*O+2)}for(U=0;U<N;U++)x[U]=x[2*U+1]<<16|x[2*U];for(U=N;U<2*N;U++)x[U]=0;return new u(x,0)};function Q(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function J(D,N){this.g=D,this.h=N}function te(D,N){if(M(N))throw Error("division by zero");if(M(D))return new J(E,E);if(L(D))return N=te(V(D),N),new J(V(N.g),V(N.h));if(L(N))return N=te(D,V(N)),new J(V(N.g),N.h);if(30<D.g.length){if(L(D)||L(N))throw Error("slowDivide_ only works with positive integers.");for(var x=S,U=N;0>=U.l(D);)x=me(x),U=me(U);var O=W(x,1),q=W(U,1);for(U=W(U,2),x=W(x,2);!M(U);){var P=q.add(U);0>=P.l(D)&&(O=O.add(x),q=P),U=W(U,1),x=W(x,1)}return N=Y(D,O.j(N)),new J(O,N)}for(O=E;0<=D.l(N);){for(x=Math.max(1,Math.floor(D.m()/N.m())),U=Math.ceil(Math.log(x)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),q=g(x),P=q.j(N);L(P)||0<P.l(D);)x-=U,q=g(x),P=q.j(N);M(q)&&(q=S),O=O.add(q),D=Y(D,P)}return new J(O,D)}n.A=function(D){return te(this,D).h},n.and=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],U=0;U<N;U++)x[U]=this.i(U)&D.i(U);return new u(x,this.h&D.h)},n.or=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],U=0;U<N;U++)x[U]=this.i(U)|D.i(U);return new u(x,this.h|D.h)},n.xor=function(D){for(var N=Math.max(this.g.length,D.g.length),x=[],U=0;U<N;U++)x[U]=this.i(U)^D.i(U);return new u(x,this.h^D.h)};function me(D){for(var N=D.g.length+1,x=[],U=0;U<N;U++)x[U]=D.i(U)<<1|D.i(U-1)>>>31;return new u(x,D.h)}function W(D,N){var x=N>>5;N%=32;for(var U=D.g.length-x,O=[],q=0;q<U;q++)O[q]=0<N?D.i(q+x)>>>N|D.i(q+x+1)<<32-N:D.i(q+x);return new u(O,D.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,XS=o,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=_,wr=u}).apply(typeof wT<"u"?wT:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WS,kl,ZS,Wc,Pp,jS,eA,tA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,T,C){return m==Array.prototype||m==Object.prototype||(m[T]=C.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var T=0;T<m.length;++T){var C=m[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=t(this);function s(m,T){if(T)e:{var C=o;m=m.split(".");for(var b=0;b<m.length-1;b++){var G=m[b];if(!(G in C))break e;C=C[G]}m=m[m.length-1],b=C[m],T=T(b),T!=b&&T!=null&&e(C,m,{configurable:!0,writable:!0,value:T})}}function l(m,T){m instanceof String&&(m+="");var C=0,b=!1,G={next:function(){if(!b&&C<m.length){var j=C++;return{value:T(j,m[j]),done:!1}}return b=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(m){return m||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function h(m){var T=typeof m;return T=T!="object"?T:m?Array.isArray(m)?"array":T:"null",T=="array"||T=="object"&&typeof m.length=="number"}function g(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function _(m,T,C){return m.call.apply(m.bind,arguments)}function E(m,T,C){if(!m)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,b),m.apply(T,G)}}return function(){return m.apply(T,arguments)}}function S(m,T,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function w(m,T){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),m.apply(this,b)}}function M(m,T){function C(){}C.prototype=T.prototype,m.aa=T.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(b,G,j){for(var ge=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)ge[lt-2]=arguments[lt];return T.prototype[G].apply(b,ge)}}function L(m){const T=m.length;if(0<T){const C=Array(T);for(let b=0;b<T;b++)C[b]=m[b];return C}return[]}function V(m,T){for(let C=1;C<arguments.length;C++){const b=arguments[C];if(h(b)){const G=m.length||0,j=b.length||0;m.length=G+j;for(let ge=0;ge<j;ge++)m[G+ge]=b[ge]}else m.push(b)}}class Y{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function Q(m){return/^[\s\xa0]*$/.test(m)}function J(){var m=d.navigator;return m&&(m=m.userAgent)?m:""}function te(m){return te[" "](m),m}te[" "]=function(){};var me=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function W(m,T,C){for(const b in m)T.call(C,m[b],b,m)}function D(m,T){for(const C in m)T.call(void 0,m[C],C,m)}function N(m){const T={};for(const C in m)T[C]=m[C];return T}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(m,T){let C,b;for(let G=1;G<arguments.length;G++){b=arguments[G];for(C in b)m[C]=b[C];for(let j=0;j<x.length;j++)C=x[j],Object.prototype.hasOwnProperty.call(b,C)&&(m[C]=b[C])}}function O(m){var T=1;m=m.split(":");const C=[];for(;0<T&&m.length;)C.push(m.shift()),T--;return m.length&&C.push(m.join(":")),C}function q(m){d.setTimeout(()=>{throw m},0)}function P(){var m=qe;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class Ie{constructor(){this.h=this.g=null}add(T,C){const b=Qe.get();b.set(T,C),this.h?this.h.next=b:this.g=b,this.h=b}}var Qe=new Y(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ve=!1,qe=new Ie,je=()=>{const m=d.Promise.resolve(void 0);he=()=>{m.then(F)}};var F=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(C){q(C)}var T=Qe;T.j(m),100>T.h&&(T.h++,m.next=T.g,T.g=m)}ve=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};d.addEventListener("test",C,T),d.removeEventListener("test",C,T)}catch{}return m})();function xe(m,T){if(le.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,b=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget){if(me){e:{try{te(T.nodeName);var G=!0;break e}catch{}G=!1}G||(T=null)}}else C=="mouseover"?T=m.fromElement:C=="mouseout"&&(T=m.toElement);this.relatedTarget=T,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Pe[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&xe.aa.h.call(this)}}M(xe,le);var Pe={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),He=0;function gt(m,T,C,b,G){this.listener=m,this.proxy=null,this.src=T,this.type=C,this.capture=!!b,this.ha=G,this.key=++He,this.da=this.fa=!1}function Dn(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Gn(m){this.src=m,this.g={},this.h=0}Gn.prototype.add=function(m,T,C,b,G){var j=m.toString();m=this.g[j],m||(m=this.g[j]=[],this.h++);var ge=Ti(m,T,b,G);return-1<ge?(T=m[ge],C||(T.fa=!1)):(T=new gt(T,this.src,j,!!b,G),T.fa=C,m.push(T)),T};function Hn(m,T){var C=T.type;if(C in m.g){var b=m.g[C],G=Array.prototype.indexOf.call(b,T,void 0),j;(j=0<=G)&&Array.prototype.splice.call(b,G,1),j&&(Dn(T),m.g[C].length==0&&(delete m.g[C],m.h--))}}function Ti(m,T,C,b){for(var G=0;G<m.length;++G){var j=m[G];if(!j.da&&j.listener==T&&j.capture==!!C&&j.ha==b)return G}return-1}var mn="closure_lm_"+(1e6*Math.random()|0),ii={};function oi(m,T,C,b,G){if(Array.isArray(T)){for(var j=0;j<T.length;j++)oi(m,T[j],C,b,G);return null}return C=Ge(C),m&&m[Ve]?m.K(T,C,g(b)?!!b.capture:!1,G):Po(m,T,C,!1,b,G)}function Po(m,T,C,b,G,j){if(!T)throw Error("Invalid event type");var ge=g(G)?!!G.capture:!!G,lt=Ae(m);if(lt||(m[mn]=lt=new Gn(m)),C=lt.add(T,C,b,ge,j),C.proxy)return C;if(b=Vo(),C.proxy=b,b.src=m,b.listener=C,m.addEventListener)de||(G=ge),G===void 0&&(G=!1),m.addEventListener(T.toString(),b,G);else if(m.attachEvent)m.attachEvent(Pn(T.toString()),b);else if(m.addListener&&m.removeListener)m.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Vo(){function m(C){return T.call(m.src,m.listener,C)}const T=pe;return m}function Pi(m,T,C,b,G){if(Array.isArray(T))for(var j=0;j<T.length;j++)Pi(m,T[j],C,b,G);else b=g(b)?!!b.capture:!!b,C=Ge(C),m&&m[Ve]?(m=m.i,T=String(T).toString(),T in m.g&&(j=m.g[T],C=Ti(j,C,b,G),-1<C&&(Dn(j[C]),Array.prototype.splice.call(j,C,1),j.length==0&&(delete m.g[T],m.h--)))):m&&(m=Ae(m))&&(T=m.g[T.toString()],m=-1,T&&(m=Ti(T,C,b,G)),(C=-1<m?T[m]:null)&&Ei(C))}function Ei(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[Ve])Hn(T.i,m);else{var C=m.type,b=m.proxy;T.removeEventListener?T.removeEventListener(C,b,m.capture):T.detachEvent?T.detachEvent(Pn(C),b):T.addListener&&T.removeListener&&T.removeListener(b),(C=Ae(T))?(Hn(C,m),C.h==0&&(C.src=null,T[mn]=null)):Dn(m)}}}function Pn(m){return m in ii?ii[m]:ii[m]="on"+m}function pe(m,T){if(m.da)m=!0;else{T=new xe(T,this);var C=m.listener,b=m.ha||m.src;m.fa&&Ei(m),m=C.call(b,T)}return m}function Ae(m){return m=m[mn],m instanceof Gn?m:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(m){return typeof m=="function"?m:(m[we]||(m[we]=function(T){return m.handleEvent(T)}),m[we])}function ne(){X.call(this),this.i=new Gn(this),this.M=this,this.F=null}M(ne,X),ne.prototype[Ve]=!0,ne.prototype.removeEventListener=function(m,T,C,b){Pi(this,m,T,C,b)};function ce(m,T){var C,b=m.F;if(b)for(C=[];b;b=b.F)C.push(b);if(m=m.M,b=T.type||T,typeof T=="string")T=new le(T,m);else if(T instanceof le)T.target=T.target||m;else{var G=T;T=new le(b,m),U(T,G)}if(G=!0,C)for(var j=C.length-1;0<=j;j--){var ge=T.g=C[j];G=fe(ge,b,!0,T)&&G}if(ge=T.g=m,G=fe(ge,b,!0,T)&&G,G=fe(ge,b,!1,T)&&G,C)for(j=0;j<C.length;j++)ge=T.g=C[j],G=fe(ge,b,!1,T)&&G}ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var m=this.i,T;for(T in m.g){for(var C=m.g[T],b=0;b<C.length;b++)Dn(C[b]);delete m.g[T],m.h--}}this.F=null},ne.prototype.K=function(m,T,C,b){return this.i.add(String(m),T,!1,C,b)},ne.prototype.L=function(m,T,C,b){return this.i.add(String(m),T,!0,C,b)};function fe(m,T,C,b){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();for(var G=!0,j=0;j<T.length;++j){var ge=T[j];if(ge&&!ge.da&&ge.capture==C){var lt=ge.listener,Bt=ge.ha||ge.src;ge.fa&&Hn(m.i,ge),G=lt.call(Bt,b)!==!1&&G}}return G&&!b.defaultPrevented}function oe(m,T,C){if(typeof m=="function")C&&(m=S(m,C));else if(m&&typeof m.handleEvent=="function")m=S(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:d.setTimeout(m,T||0)}function Ne(m){m.g=oe(()=>{m.g=null,m.i&&(m.i=!1,Ne(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class It extends X{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Ne(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ft(m){X.call(this),this.h=m,this.g={}}M(Ft,X);var on=[];function Rt(m){W(m.g,function(T,C){this.g.hasOwnProperty(C)&&Ei(T)},m),m.g={}}Ft.prototype.N=function(){Ft.aa.N.call(this),Rt(this)},Ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ct=d.JSON.stringify,rn=d.JSON.parse,kr=class{stringify(m){return d.JSON.stringify(m,void 0)}parse(m){return d.JSON.parse(m,void 0)}};function Uo(){}Uo.prototype.h=null;function Lr(m){return m.h||(m.h=m.i())}function Vi(){}var $n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yn(){le.call(this,"d")}M(Yn,le);function Vn(){le.call(this,"c")}M(Vn,le);var An={},Si=null;function eo(){return Si=Si||new ne}An.La="serverreachability";function ri(m){le.call(this,An.La,m)}M(ri,le);function sn(m){const T=eo();ce(T,new ri(T))}An.STAT_EVENT="statevent";function gn(m,T){le.call(this,An.STAT_EVENT,m),this.stat=T}M(gn,le);function yt(m){const T=eo();ce(T,new gn(T,m))}An.Ma="timingevent";function Pa(m,T){le.call(this,An.Ma,m),this.size=T}M(Pa,le);function ko(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){m()},T)}function Lo(){this.g=!0}Lo.prototype.xa=function(){this.g=!1};function Va(m,T,C,b,G,j){m.info(function(){if(m.g)if(j)for(var ge="",lt=j.split("&"),Bt=0;Bt<lt.length;Bt++){var $e=lt[Bt].split("=");if(1<$e.length){var Wt=$e[0];$e=$e[1];var Zt=Wt.split("_");ge=2<=Zt.length&&Zt[1]=="type"?ge+(Wt+"="+$e+"&"):ge+(Wt+"=redacted&")}}else ge=null;else ge=j;return"XMLHTTP REQ ("+b+") [attempt "+G+"]: "+T+`
`+C+`
`+ge})}function Ua(m,T,C,b,G,j,ge){m.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+G+"]: "+T+`
`+C+`
`+j+" "+ge})}function to(m,T,C,b){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+Ui(m,C)+(b?" "+b:"")})}function cu(m,T){m.info(function(){return"TIMEOUT: "+T})}Lo.prototype.info=function(){};function Ui(m,T){if(!m.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var b=C[m];if(!(2>b.length)){var G=b[1];if(Array.isArray(G)&&!(1>G.length)){var j=G[0];if(j!="noop"&&j!="stop"&&j!="close")for(var ge=1;ge<G.length;ge++)G[ge]=""}}}}return ct(C)}catch{return T}}var bt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},an={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ki;function Oo(){}M(Oo,Uo),Oo.prototype.g=function(){return new XMLHttpRequest},Oo.prototype.i=function(){return{}},ki=new Oo;function Li(m,T,C,b){this.j=m,this.i=T,this.l=C,this.R=b||1,this.U=new Ft(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fu}function fu(){this.i=null,this.g="",this.h=!1}var ka={},no={};function Or(m,T,C){m.L=1,m.v=qr(xt(T)),m.m=C,m.P=!0,io(m,null)}function io(m,T){m.F=Date.now(),Ai(m),m.A=xt(m.v);var C=m.A,b=m.R;Array.isArray(b)||(b=[String(b)]),so(C.i,"t",b),m.C=0,C=m.j.J,m.h=new fu,m.g=Ru(m.j,C?T:null,!m.m),0<m.O&&(m.M=new It(S(m.Y,m,m.g),m.O)),T=m.U,C=m.g,b=m.ca;var G="readystatechange";Array.isArray(G)||(G&&(on[0]=G.toString()),G=on);for(var j=0;j<G.length;j++){var ge=oi(C,G[j],b||T.handleEvent,!1,T.h||T);if(!ge)break;T.g[ge.key]=ge}T=m.H?N(m.H):{},m.m?(m.u||(m.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,T)):(m.u="GET",m.g.ea(m.A,m.u,null,T)),sn(),Va(m.i,m.u,m.A,m.l,m.R,m.m)}Li.prototype.ca=function(m){m=m.target;const T=this.M;T&&In(m)==3?T.j():this.Y(m)},Li.prototype.Y=function(m){try{if(m==this.g)e:{const Zt=In(this.g);var T=this.g.Ba();const Wo=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||Hr(this.g)))){this.J||Zt!=4||T==7||(T==8||0>=Wo?sn(3):sn(2)),As(this);var C=this.g.Z();this.X=C;t:if(oo(this)){var b=Hr(this.g);m="";var G=b.length,j=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cn(this),Fo(this);var ge="";break t}this.h.i=new d.TextDecoder}for(T=0;T<G;T++)this.h.h=!0,m+=this.h.i.decode(b[T],{stream:!(j&&T==G-1)});b.length=0,this.h.g+=m,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=C==200,Ua(this.i,this.u,this.A,this.l,this.R,Zt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,Bt=this.g;if((lt=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(lt)){var $e=lt;break t}}$e=null}if(C=$e)to(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oi(this,C);else{this.o=!1,this.s=3,yt(12),Cn(this),Fo(this);break e}}if(this.P){C=!0;let kn;for(;!this.J&&this.C<ge.length;)if(kn=Fr(this,ge),kn==no){Zt==4&&(this.s=4,yt(14),C=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==ka){this.s=4,yt(15),to(this.i,this.l,ge,"[Invalid Chunk]"),C=!1;break}else to(this.i,this.l,kn,null),Oi(this,kn);if(oo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||ge.length!=0||this.h.h||(this.s=1,yt(16),C=!1),this.o=this.o&&C,!C)to(this.i,this.l,ge,"[Invalid Chunked Response]"),Cn(this),Fo(this);else if(0<ge.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Ja(Wt),Wt.M=!0,yt(11))}}else to(this.i,this.l,ge,null),Oi(this,ge);Zt==4&&Cn(this),this.o&&!this.J&&(Zt==4?Cu(this.j,this):(this.o=!1,Ai(this)))}else vu(this.g),C==400&&0<ge.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Cn(this),Fo(this)}}}catch{}finally{}};function oo(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Fr(m,T){var C=m.C,b=T.indexOf(`
`,C);return b==-1?no:(C=Number(T.substring(C,b)),isNaN(C)?ka:(b+=1,b+C>T.length?no:(T=T.slice(b,b+C),m.C=b+C,T)))}Li.prototype.cancel=function(){this.J=!0,Cn(this)};function Ai(m){m.S=Date.now()+m.I,Ut(m,m.I)}function Ut(m,T){if(m.B!=null)throw Error("WatchDog timer not null");m.B=ko(S(m.ba,m),T)}function As(m){m.B&&(d.clearTimeout(m.B),m.B=null)}Li.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(cu(this.i,this.A),this.L!=2&&(sn(),yt(17)),Cn(this),this.s=2,Fo(this)):Ut(this,this.S-m)};function Fo(m){m.j.G==0||m.J||Cu(m.j,m)}function Cn(m){As(m);var T=m.M;T&&typeof T.ma=="function"&&T.ma(),m.M=null,Rt(m.U),m.g&&(T=m.g,m.g=null,T.abort(),T.ma())}function Oi(m,T){try{var C=m.j;if(C.G!=0&&(C.g==m||Bo(C.h,m))){if(!m.K&&Bo(C.h,m)&&C.G==3){try{var b=C.Da.g.parse(T)}catch{b=null}if(Array.isArray(b)&&b.length==3){var G=b;if(G[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)Qo(C),Ko(C);else break e;Ya(C),yt(18)}}else C.za=G[1],0<C.za-C.T&&37500>G[2]&&C.F&&C.v==0&&!C.C&&(C.C=ko(S(C.Za,C),6e3));if(1>=du(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else lo(C,11)}else if((m.K||C.g==m)&&Qo(C),!Q(T))for(G=C.Da.g.parse(T),T=0;T<G.length;T++){let $e=G[T];if(C.T=$e[0],$e=$e[1],C.G==2)if($e[0]=="c"){C.K=$e[1],C.ia=$e[2];const Wt=$e[3];Wt!=null&&(C.la=Wt,C.j.info("VER="+C.la));const Zt=$e[4];Zt!=null&&(C.Aa=Zt,C.j.info("SVER="+C.Aa));const Wo=$e[5];Wo!=null&&typeof Wo=="number"&&0<Wo&&(b=1.5*Wo,C.L=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const kn=m.g;if(kn){const Jr=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var j=b.h;j.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(qo(j,j.h),j.h=null))}if(b.D){const uo=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(b.ya=uo,it(b.I,b.D,uo))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),b=C;var ge=m;if(b.qa=Iu(b,b.J?b.ia:null,b.W),ge.K){si(b.h,ge);var lt=ge,Bt=b.L;Bt&&(lt.I=Bt),lt.B&&(As(lt),Ai(lt)),b.g=ge}else Su(b);0<C.i.length&&Ms(C)}else $e[0]!="stop"&&$e[0]!="close"||lo(C,7);else C.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?lo(C,7):Ha(C):$e[0]!="noop"&&C.l&&C.l.ta($e),C.v=0)}}sn(4)}catch{}}var $f=class{constructor(m,T){this.g=m,this.map=T}};function La(m){this.l=m||10,d.PerformanceNavigationTiming?(m=d.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oa(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function du(m){return m.h?1:m.g?m.g.size:0}function Bo(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function qo(m,T){m.g?m.g.add(T):m.h=T}function si(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}La.prototype.cancel=function(){if(this.i=wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function wn(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const C of m.g.values())T=T.concat(C.D);return T}return L(m.i)}function hu(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var T=[],C=m.length,b=0;b<C;b++)T.push(m[b]);return T}T=[],C=0;for(b in m)T[C++]=m[b];return T}function Yf(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var T=[];m=m.length;for(var C=0;C<m;C++)T.push(C);return T}T=[],C=0;for(const b in m)T[C++]=b;return T}}}function Cs(m,T){if(m.forEach&&typeof m.forEach=="function")m.forEach(T,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,T,void 0);else for(var C=Yf(m),b=hu(m),G=b.length,j=0;j<G;j++)T.call(void 0,b[j],C&&C[j],m)}var Fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ws(m,T){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var b=m[C].indexOf("="),G=null;if(0<=b){var j=m[C].substring(0,b);G=m[C].substring(b+1)}else j=m[C];T(j,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function ro(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof ro){this.h=m.h,zo(this,m.j),this.o=m.o,this.g=m.g,Br(this,m.s),this.l=m.l;var T=m.i,C=new Fi;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),Is(this,C),this.m=m.m}else m&&(T=String(m).match(Fa))?(this.h=!1,zo(this,T[1]||"",!0),this.o=Go(T[2]||""),this.g=Go(T[3]||"",!0),Br(this,T[4]),this.l=Go(T[5]||"",!0),Is(this,T[6]||"",!0),this.m=Go(T[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}ro.prototype.toString=function(){var m=[],T=this.j;T&&m.push(ai(T,Ba,!0),":");var C=this.g;return(C||T=="file")&&(m.push("//"),(T=this.o)&&m.push(ai(T,Ba,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(ai(C,C.charAt(0)=="/"?qa:pu,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",ai(C,Qf)),m.join("")};function xt(m){return new ro(m)}function zo(m,T,C){m.j=C?Go(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function Br(m,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);m.s=T}else m.s=null}function Is(m,T,C){T instanceof Fi?(m.i=T,mu(m.i,m.h)):(C||(T=ai(T,Kf)),m.i=new Fi(T,m.h))}function it(m,T,C){m.i.set(T,C)}function qr(m){return it(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Go(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ai(m,T,C){return typeof m=="string"?(m=encodeURI(m).replace(T,Jf),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Jf(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ba=/[#\/\?@]/g,pu=/[#\?:]/g,qa=/[#\?]/g,Kf=/[#\?@]/g,Qf=/#/g;function Fi(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function Xt(m){m.g||(m.g=new Map,m.h=0,m.i&&ws(m.i,function(T,C){m.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=Fi.prototype,n.add=function(m,T){Xt(this),this.i=null,m=Jn(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(T),this.h+=1,this};function Rs(m,T){Xt(m),T=Jn(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function bs(m,T){return Xt(m),T=Jn(m,T),m.g.has(T)}n.forEach=function(m,T){Xt(this),this.g.forEach(function(C,b){C.forEach(function(G){m.call(T,G,b,this)},this)},this)},n.na=function(){Xt(this);const m=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let b=0;b<T.length;b++){const G=m[b];for(let j=0;j<G.length;j++)C.push(T[b])}return C},n.V=function(m){Xt(this);let T=[];if(typeof m=="string")bs(this,m)&&(T=T.concat(this.g.get(Jn(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)T=T.concat(m[C])}return T},n.set=function(m,T){return Xt(this),this.i=null,m=Jn(this,m),bs(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},n.get=function(m,T){return m?(m=this.V(m),0<m.length?String(m[0]):T):T};function so(m,T,C){Rs(m,T),0<C.length&&(m.i=null,m.g.set(Jn(m,T),L(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var b=T[C];const j=encodeURIComponent(String(b)),ge=this.V(b);for(b=0;b<ge.length;b++){var G=j;ge[b]!==""&&(G+="="+encodeURIComponent(String(ge[b]))),m.push(G)}}return this.i=m.join("&")};function Jn(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function mu(m,T){T&&!m.j&&(Xt(m),m.i=null,m.g.forEach(function(C,b){var G=b.toLowerCase();b!=G&&(Rs(this,b),so(this,G,C))},m)),m.j=T}function za(m,T){const C=new Lo;if(d.Image){const b=new Image;b.onload=w(Un,C,"TestLoadImage: loaded",!0,T,b),b.onerror=w(Un,C,"TestLoadImage: error",!1,T,b),b.onabort=w(Un,C,"TestLoadImage: abort",!1,T,b),b.ontimeout=w(Un,C,"TestLoadImage: timeout",!1,T,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=m}else T(!1)}function gu(m,T){const C=new Lo,b=new AbortController,G=setTimeout(()=>{b.abort(),Un(C,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:b.signal}).then(j=>{clearTimeout(G),j.ok?Un(C,"TestPingServer: ok",!0,T):Un(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(G),Un(C,"TestPingServer: error",!1,T)})}function Un(m,T,C,b,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),b(C)}catch{}}function Ci(){this.g=new kr}function Ga(m,T,C){const b=C||"";try{Cs(m,function(G,j){let ge=G;g(G)&&(ge=ct(G)),T.push(b+j+"="+encodeURIComponent(ge))})}catch(G){throw T.push(b+"type="+encodeURIComponent("_badmap")),G}}function Bi(m){this.l=m.Ub||null,this.j=m.eb||!1}M(Bi,Uo),Bi.prototype.g=function(){return new Kn(this.l,this.j)},Bi.prototype.i=(function(m){return function(){return m}})({});function Kn(m,T){ne.call(this),this.D=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Kn,ne),n=Kn.prototype,n.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=T,this.readyState=1,Ho(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(T.body=m),(this.D||d).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ho(this)),this.g&&(this.readyState=3,Ho(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xs(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function xs(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?qi(this):Ho(this),this.readyState==3&&xs(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,qi(this))},n.Qa=function(m){this.g&&(this.response=m,qi(this))},n.ga=function(){this.g&&qi(this)};function qi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ho(m)}n.setRequestHeader=function(m,T){this.u.append(m,T)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=T.next();return m.join(`\r
`)};function Ho(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Kn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function zr(m){let T="";return W(m,function(C,b){T+=b,T+=":",T+=C,T+=`\r
`}),T}function $o(m,T,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=zr(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):it(m,T,C))}function Et(m){ne.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Et,ne);var yn=/^https?$/i,ao=["POST","PUT"];n=Et.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,T,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ki.g(),this.v=this.o?Lr(this.o):Lr(ki),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(j){Gr(this,j);return}if(m=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var G in b)C.set(G,b[G]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const j of b.keys())C.set(j,b.get(j));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(j=>j.toLowerCase()=="content-type"),G=d.FormData&&m instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ao,T,void 0))||b||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,ge]of C)this.g.setRequestHeader(j,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ns(this),this.u=!0,this.g.send(m),this.u=!1}catch(j){Gr(this,j)}};function Gr(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.m=5,Yo(m),Jo(m)}function Yo(m){m.A||(m.A=!0,ce(m,"complete"),ce(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,ce(this,"complete"),ce(this,"abort"),Jo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),Et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yu(this):this.bb())},n.bb=function(){yu(this)};function yu(m){if(m.h&&typeof u<"u"&&(!m.v[1]||In(m)!=4||m.Z()!=2)){if(m.u&&In(m)==4)oe(m.Ea,0,m);else if(ce(m,"readystatechange"),In(m)==4){m.h=!1;try{const ge=m.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var b;if(b=ge===0){var G=String(m.D).match(Fa)[1]||null;!G&&d.self&&d.self.location&&(G=d.self.location.protocol.slice(0,-1)),b=!yn.test(G?G.toLowerCase():"")}C=b}if(C)ce(m,"complete"),ce(m,"success");else{m.m=6;try{var j=2<In(m)?m.g.statusText:""}catch{j=""}m.l=j+" ["+m.Z()+"]",Yo(m)}}finally{Jo(m)}}}}function Jo(m,T){if(m.g){Ns(m);const C=m.g,b=m.v[0]?()=>{}:null;m.g=null,m.v=null,T||ce(m,"ready");try{C.onreadystatechange=b}catch{}}}function Ns(m){m.I&&(d.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function In(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),rn(T)}};function Hr(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function vu(m){const T={};m=(m.g&&2<=In(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<m.length;b++){if(Q(m[b]))continue;var C=O(m[b]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const j=T[G]||[];T[G]=j,j.push(C)}D(T,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(m,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||T}function _u(m){this.Aa=0,this.i=[],this.j=new Lo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,m),this.cb=$r("retryDelaySeedMs",1e4,m),this.Wa=$r("forwardChannelMaxRetries",2,m),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new La(m&&m.concurrentRequestLimit),this.Da=new Ci,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_u.prototype,n.la=8,n.G=1,n.connect=function(m,T,C,b){yt(0),this.W=m,this.H=T||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.I=Iu(this,null,this.W),Ms(this)};function Ha(m){if(Tu(m),m.G==3){var T=m.U++,C=xt(m.I);if(it(C,"SID",m.K),it(C,"RID",T),it(C,"TYPE","terminate"),Yr(m,C),T=new Li(m,m.j,T),T.L=2,T.v=qr(xt(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=T.v,C=!0),C||(T.g=Ru(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Ai(T)}Ka(m)}function Ko(m){m.g&&(Ja(m),m.g.cancel(),m.g=null)}function Tu(m){Ko(m),m.u&&(d.clearTimeout(m.u),m.u=null),Qo(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&d.clearTimeout(m.s),m.s=null)}function Ms(m){if(!Oa(m.h)&&!m.s){m.s=!0;var T=m.Ga;he||je(),ve||(he(),ve=!0),qe.add(T,m),m.B=0}}function Xf(m,T){return du(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=T.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=ko(S(m.Ga,m,T),wu(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const G=new Li(this,this.j,m);let j=this.o;if(this.S&&(j?(j=N(j),U(j,this.S)):j=this.S),this.m!==null||this.O||(G.H=j,j=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(T+=b,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=$a(this,G,T),C=xt(this.I),it(C,"RID",m),it(C,"CVER",22),this.D&&it(C,"X-HTTP-Session-Id",this.D),Yr(this,C),j&&(this.O?T="headers="+encodeURIComponent(String(zr(j)))+"&"+T:this.m&&$o(C,this.m,j)),qo(this.h,G),this.Ua&&it(C,"TYPE","init"),this.P?(it(C,"$req",T),it(C,"SID","null"),G.T=!0,Or(G,C,null)):Or(G,C,T),this.G=2}}else this.G==3&&(m?Eu(this,m):this.i.length==0||Oa(this.h)||Eu(this))};function Eu(m,T){var C;T?C=T.l:C=m.U++;const b=xt(m.I);it(b,"SID",m.K),it(b,"RID",C),it(b,"AID",m.T),Yr(m,b),m.m&&m.o&&$o(b,m.m,m.o),C=new Li(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),T&&(m.i=T.D.concat(m.i)),T=$a(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),qo(m.h,C),Or(C,b,T)}function Yr(m,T){m.H&&W(m.H,function(C,b){it(T,b,C)}),m.l&&Cs({},function(C,b){it(T,b,C)})}function $a(m,T,C){C=Math.min(m.i.length,C);var b=m.l?S(m.l.Na,m.l,m):null;e:{var G=m.i;let j=-1;for(;;){const ge=["count="+C];j==-1?0<C?(j=G[0].g,ge.push("ofs="+j)):j=0:ge.push("ofs="+j);let lt=!0;for(let Bt=0;Bt<C;Bt++){let $e=G[Bt].g;const Wt=G[Bt].map;if($e-=j,0>$e)j=Math.max(0,G[Bt].g-100),lt=!1;else try{Ga(Wt,ge,"req"+$e+"_")}catch{b&&b(Wt)}}if(lt){b=ge.join("&");break e}}}return m=m.i.splice(0,C),T.D=m,b}function Su(m){if(!m.g&&!m.u){m.Y=1;var T=m.Fa;he||je(),ve||(he(),ve=!0),qe.add(T,m),m.v=0}}function Ya(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=ko(S(m.Fa,m),wu(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=ko(S(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Ko(this),Au(this))};function Ja(m){m.A!=null&&(d.clearTimeout(m.A),m.A=null)}function Au(m){m.g=new Li(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var T=xt(m.qa);it(T,"RID","rpc"),it(T,"SID",m.K),it(T,"AID",m.T),it(T,"CI",m.F?"0":"1"),!m.F&&m.ja&&it(T,"TO",m.ja),it(T,"TYPE","xmlhttp"),Yr(m,T),m.m&&m.o&&$o(T,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=qr(xt(T)),C.m=null,C.P=!0,io(C,m)}n.Za=function(){this.C!=null&&(this.C=null,Ko(this),Ya(this),yt(19))};function Qo(m){m.C!=null&&(d.clearTimeout(m.C),m.C=null)}function Cu(m,T){var C=null;if(m.g==T){Qo(m),Ja(m),m.g=null;var b=2}else if(Bo(m.h,T))C=T.D,si(m.h,T),b=1;else return;if(m.G!=0){if(T.o)if(b==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var G=m.B;b=eo(),ce(b,new Pa(b,C)),Ms(m)}else Su(m);else if(G=T.s,G==3||G==0&&0<T.X||!(b==1&&Xf(m,T)||b==2&&Ya(m)))switch(C&&0<C.length&&(T=m.h,T.i=T.i.concat(C)),G){case 1:lo(m,5);break;case 4:lo(m,10);break;case 3:lo(m,6);break;default:lo(m,2)}}}function wu(m,T){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*T}function lo(m,T){if(m.j.info("Error code "+T),T==2){var C=S(m.fb,m),b=m.Xa;const G=!b;b=new ro(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||zo(b,"https"),qr(b),G?za(b.toString(),C):gu(b.toString(),C)}else yt(2);m.G=0,m.l&&m.l.sa(T),Ka(m),Tu(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Ka(m){if(m.G=0,m.ka=[],m.l){const T=wn(m.h);(T.length!=0||m.i.length!=0)&&(V(m.ka,T),V(m.ka,m.i),m.h.i.length=0,L(m.i),m.i.length=0),m.l.ra()}}function Iu(m,T,C){var b=C instanceof ro?xt(C):new ro(C);if(b.g!="")T&&(b.g=T+"."+b.g),Br(b,b.s);else{var G=d.location;b=G.protocol,T=T?T+"."+G.hostname:G.hostname,G=+G.port;var j=new ro(null);b&&zo(j,b),T&&(j.g=T),G&&Br(j,G),C&&(j.l=C),b=j}return C=m.D,T=m.ya,C&&T&&it(b,C,T),it(b,"VER",m.la),Yr(m,b),b}function Ru(m,T,C){if(T&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Ca&&!m.pa?new Et(new Bi({eb:C})):new Et(m.pa),T.Ha(m.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function bu(){}n=bu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ds(){}Ds.prototype.g=function(m,T){return new Rn(m,T)};function Rn(m,T){ne.call(this),this.g=new _u(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(m?m["X-WebChannel-Client-Profile"]=T.va:m={"X-WebChannel-Client-Profile":T.va}),this.g.S=m,(m=T&&T.Sb)&&!Q(m)&&(this.g.m=m),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!Q(T)&&(this.g.D=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new Xo(this)}M(Rn,ne),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Ha(this.g)},Rn.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=ct(m),m=C);T.i.push(new $f(T.Ya++,m)),T.G==3&&Ms(T)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Ha(this.g),delete this.g,Rn.aa.N.call(this)};function xu(m){Yn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const C in T){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}M(xu,Yn);function Nu(){Vn.call(this),this.status=1}M(Nu,Vn);function Xo(m){this.g=m}M(Xo,bu),Xo.prototype.ua=function(){ce(this.g,"a")},Xo.prototype.ta=function(m){ce(this.g,new xu(m))},Xo.prototype.sa=function(m){ce(this.g,new Nu)},Xo.prototype.ra=function(){ce(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,tA=function(){return new Ds},eA=function(){return eo()},jS=An,Pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bt.NO_ERROR=0,bt.TIMEOUT=8,bt.HTTP_ERROR=6,Wc=bt,an.COMPLETE="complete",ZS=an,Vi.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",ne.prototype.listen=ne.prototype.K,kl=Vi,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,WS=Et}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const IT="@firebase/firestore",RT="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new BS("@firebase/firestore");function la(){return hs.logLevel}function Te(n,...e){if(hs.logLevel<=nt.DEBUG){const t=e.map(pm);hs.debug(`Firestore (${ba}): ${n}`,...t)}}function xo(n,...e){if(hs.logLevel<=nt.ERROR){const t=e.map(pm);hs.error(`Firestore (${ba}): ${n}`,...t)}}function br(n,...e){if(hs.logLevel<=nt.WARN){const t=e.map(pm);hs.warn(`Firestore (${ba}): ${n}`,...t)}}function pm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,nA(n,o,t)}function nA(n,e,t){let o=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw xo(o),new Error(o)}function ut(n,e,t,o){let s="Unexpected state";typeof t=="string"?s=t:o=t,n||nA(e,s,o)}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Tn.UNAUTHENTICATED)))}shutdown(){}}class fV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class dV{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ut(this.o===void 0,42304);let o=this.i;const s=h=>this.i!==o?(o=this.i,t(h)):Promise.resolve();let l=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ir,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const h=l;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},d=h=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ir)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ut(typeof o.accessToken=="string",31837,{l:o}),new iA(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class hV{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pV{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new hV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,HS(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ut(this.o===void 0,3512);const o=l=>{l.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Te("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const s=l=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ut(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<n;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const s=gV(40);for(let l=0;l<s.length;++l)o.length<20&&s[l]<t&&(o+=e.charAt(s[l]%62))}return o}}function Ye(n,e){return n<e?-1:n>e?1:0}function Vp(n,e){let t=0;for(;t<n.length&&t<e.length;){const o=n.codePointAt(t),s=e.codePointAt(t);if(o!==s){if(o<128&&s<128)return Ye(o,s);{const l=oA(),u=yV(l.encode(xT(n,t)),l.encode(xT(e,t)));return u!==0?u:Ye(o,s)}}t+=o>65535?2:1}return Ye(n.length,e.length)}function xT(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function yV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ye(n[t],e[t]);return Ye(n.length,e.length)}function Ta(n,e,t){return n.length===e.length&&n.every(((o,s)=>t(o,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="__name__";class Yi{constructor(e,t,o){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&De(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Yi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yi?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let s=0;s<o;s++){const l=Yi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Ye(e.length,t.length)}static compareSegments(e,t){const o=Yi.isNumericId(e),s=Yi.isNumericId(t);return o&&!s?-1:!o&&s?1:o&&s?Yi.extractNumericId(e).compare(Yi.extractNumericId(t)):Vp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class _t extends Yi{construct(e,t,o){return new _t(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new _e(ae.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((s=>s.length>0)))}return new _t(t)}static emptyPath(){return new _t([])}}const vV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends Yi{construct(e,t,o){return new hn(e,t,o)}static isValidIdentifier(e){return vV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NT}static keyField(){return new hn([NT])}static fromServerFormat(e){const t=[];let o="",s=0;const l=()=>{if(o.length===0)throw new _e(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new _e(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new _e(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=h,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(o+=d,s++):(l(),s++)}if(l(),u)throw new _e(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(t)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(_t.fromString(e))}static fromName(e){return new be(_t.fromString(e).popFirst(5))}static empty(){return new be(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(n,e,t){if(!t)throw new _e(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _V(n,e,t,o){if(e===!0&&o===!0)throw new _e(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MT(n){if(!be.isDocumentKey(n))throw new _e(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function DT(n){if(be.isDocumentKey(n))throw new _e(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Df(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function pf(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Df(n);throw new _e(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ou(n,e){if(!sA(n))throw new _e(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const s=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in n)){t=`JSON missing required field: '${o}'`;break}const u=n[o];if(s&&typeof u!==s){t=`JSON field '${o}' must be a ${s}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${o}' field to equal '${l.value}'`;break}}if(t)throw new _e(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=-62135596800,VT=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*VT);return new Tt(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PT)throw new _e(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/VT}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ou(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:Jt("string",Tt._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Tt(0,0))}static max(){return new ke(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=-1;function TV(n,e){const t=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(o===1e9?new Tt(t+1,0):new Tt(t,o));return new xr(s,be.empty(),e)}function EV(n){return new xr(n.readTime,n.key,Xl)}class xr{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new xr(ke.min(),be.empty(),Xl)}static max(){return new xr(ke.max(),be.empty(),Xl)}}function SV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:Ye(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==AV)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((o,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(o,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,o)=>{t(e)}))}static reject(e){return new ue(((t,o)=>{o(e)}))}static waitFor(e){return new ue(((t,o)=>{let s=0,l=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++l,u&&l===s&&t()}),(h=>o(h)))})),u=!0,l===s&&t()}))}static or(e){let t=ue.resolve(!1);for(const o of e)t=t.next((s=>s?ue.resolve(s):o()));return t}static forEach(e,t){const o=[];return e.forEach(((s,l)=>{o.push(t.call(this,s,l))})),this.waitFor(o)}static mapArray(e,t){return new ue(((o,s)=>{const l=e.length,u=new Array(l);let d=0;for(let h=0;h<l;h++){const g=h;t(e[g]).next((_=>{u[g]=_,++d,d===l&&o(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new ue(((o,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):o()};l()}))}}function wV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Na(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this._e(o),this.ae=o=>t.writeSequenceNumber(o))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Pf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=-1;function Vf(n){return n==null}function mf(n){return n===0&&1/n==-1/0}function IV(n){return typeof n=="number"&&Number.isInteger(n)&&!mf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="";function RV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=UT(e)),e=bV(n.get(t),e);return UT(e)}function bV(n,e){let t=e;const o=n.length;for(let s=0;s<o;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case aA:t+="";break;default:t+=l}}return t}function UT(n){return n+aA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){this.comparator=e,this.root=t||dn.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const s=this.comparator(e,o.key);if(s===0)return t+o.left.size;s<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qc(this.root,e,this.comparator,!0)}}class qc{constructor(e,t,o,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?o(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,t,o,s,l){this.key=e,this.value=t,this.color=o??dn.RED,this.left=s??dn.EMPTY,this.right=l??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,s,l){return new dn(e??this.key,t??this.value,o??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let s=this;const l=o(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,o),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,o)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return dn.EMPTY;o=s.right.min(),s=s.copy(o.key,o.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,o,s,l){return this}insert(e,t,o){return new dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const s=o.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new LT(this.data.getIterator())}getIteratorFrom(e){return new LT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=o.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class LT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new bi([])}unionWith(e){let t=new Qt(hn.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ta(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new uA("Invalid base64 string: "+l):l}})(e);return new pn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let u=0;u<s.length;++u)l+=String.fromCharCode(s[u]);return l})(e);return new pn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let s=0;s<t.length;s++)o[s]=t.charCodeAt(s);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const xV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(n){if(ut(!!n,39018),typeof n=="string"){let e=0;const t=xV.exec(n);if(ut(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ot(n.seconds),nanos:Ot(n.nanos)}}function Ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Mr(n){return typeof n=="string"?pn.fromBase64String(n):pn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="server_timestamp",fA="__type__",dA="__previous_value__",hA="__local_write_time__";function ym(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[fA])===null||t===void 0?void 0:t.stringValue)===cA}function Uf(n){const e=n.mapValue.fields[dA];return ym(e)?Uf(e):e}function Wl(n){const e=Nr(n.mapValue.fields[hA].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,t,o,s,l,u,d,h,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=s,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=g,this.isUsingEmulator=_}}const gf="(default)";class Zl{constructor(e,t){this.projectId=e,this.database=t||gf}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===gf}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="__type__",MV="__max__",zc={mapValue:{}},mA="__vector__",yf="value";function Dr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ym(n)?4:PV(n)?9007199254740991:DV(n)?10:11:De(28295,{value:n})}function ji(n,e){if(n===e)return!0;const t=Dr(n);if(t!==Dr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wl(n).isEqual(Wl(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const u=Nr(s.timestampValue),d=Nr(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Mr(s.bytesValue).isEqual(Mr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return Ot(s.geoPointValue.latitude)===Ot(l.geoPointValue.latitude)&&Ot(s.geoPointValue.longitude)===Ot(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return Ot(s.integerValue)===Ot(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const u=Ot(s.doubleValue),d=Ot(l.doubleValue);return u===d?mf(u)===mf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ta(n.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return(function(s,l){const u=s.mapValue.fields||{},d=l.mapValue.fields||{};if(kT(u)!==kT(d))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(d[h]===void 0||!ji(u[h],d[h])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function jl(n,e){return(n.values||[]).find((t=>ji(t,e)))!==void 0}function Ea(n,e){if(n===e)return 0;const t=Dr(n),o=Dr(e);if(t!==o)return Ye(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=Ot(l.integerValue||l.doubleValue),h=Ot(u.integerValue||u.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(n,e);case 3:return OT(n.timestampValue,e.timestampValue);case 4:return OT(Wl(n),Wl(e));case 5:return Vp(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=Mr(l),h=Mr(u);return d.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),h=u.split("/");for(let g=0;g<d.length&&g<h.length;g++){const _=Ye(d[g],h[g]);if(_!==0)return _}return Ye(d.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Ye(Ot(l.latitude),Ot(u.latitude));return d!==0?d:Ye(Ot(l.longitude),Ot(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return FT(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var d,h,g,_;const E=l.fields||{},S=u.fields||{},w=(d=E[yf])===null||d===void 0?void 0:d.arrayValue,M=(h=S[yf])===null||h===void 0?void 0:h.arrayValue,L=Ye(((g=w==null?void 0:w.values)===null||g===void 0?void 0:g.length)||0,((_=M==null?void 0:M.values)===null||_===void 0?void 0:_.length)||0);return L!==0?L:FT(w,M)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===zc.mapValue&&u===zc.mapValue)return 0;if(l===zc.mapValue)return 1;if(u===zc.mapValue)return-1;const d=l.fields||{},h=Object.keys(d),g=u.fields||{},_=Object.keys(g);h.sort(),_.sort();for(let E=0;E<h.length&&E<_.length;++E){const S=Vp(h[E],_[E]);if(S!==0)return S;const w=Ea(d[h[E]],g[_[E]]);if(w!==0)return w}return Ye(h.length,_.length)})(n.mapValue,e.mapValue);default:throw De(23264,{le:t})}}function OT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ye(n,e);const t=Nr(n),o=Nr(e),s=Ye(t.seconds,o.seconds);return s!==0?s:Ye(t.nanos,o.nanos)}function FT(n,e){const t=n.values||[],o=e.values||[];for(let s=0;s<t.length&&s<o.length;++s){const l=Ea(t[s],o[s]);if(l)return l}return Ye(t.length,o.length)}function Sa(n){return Up(n)}function Up(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const o=Nr(t);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Mr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let o="[",s=!0;for(const l of t.values||[])s?s=!1:o+=",",o+=Up(l);return o+"]"})(n.arrayValue):"mapValue"in n?(function(t){const o=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const u of o)l?l=!1:s+=",",s+=`${u}:${Up(t.fields[u])}`;return s+"}"})(n.mapValue):De(61005,{value:n})}function Zc(n){switch(Dr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uf(n);return e?16+Zc(e):16;case 5:return 2*n.stringValue.length;case 6:return Mr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((s,l)=>s+Zc(l)),0)})(n.arrayValue);case 10:case 11:return(function(o){let s=0;return vs(o.fields,((l,u)=>{s+=l.length+Zc(u)})),s})(n.mapValue);default:throw De(13486,{value:n})}}function BT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kp(n){return!!n&&"integerValue"in n}function vm(n){return!!n&&"arrayValue"in n}function qT(n){return!!n&&"nullValue"in n}function zT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jc(n){return!!n&&"mapValue"in n}function DV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[pA])===null||t===void 0?void 0:t.stringValue)===mA}function Bl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vs(n.mapValue.fields,((t,o)=>e.mapValue.fields[t]=Bl(o))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===MV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!jc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bl(t)}setAll(e){let t=hn.emptyPath(),o={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,o,s),o={},s=[],t=d.popLast()}u?o[d.lastSegment()]=Bl(u):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,o,s)}delete(e){const t=this.field(e.popLast());jc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let s=t.mapValue.fields[e.get(o)];jc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,o){vs(t,((s,l)=>e[s]=l));for(const s of o)delete e[s]}clone(){return new gi(Bl(this.value))}}function gA(n){const e=[];return vs(n.fields,((t,o)=>{const s=new hn([t]);if(jc(o)){const l=gA(o.mapValue).fields;if(l.length===0)e.push(s);else for(const u of l)e.push(s.child(u))}else e.push(s)})),new bi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,t,o,s,l,u,d){this.key=e,this.documentType=t,this.version=o,this.readTime=s,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new En(e,0,ke.min(),ke.min(),ke.min(),gi.empty(),0)}static newFoundDocument(e,t,o,s){return new En(e,1,t,ke.min(),o,s,0)}static newNoDocument(e,t){return new En(e,2,t,ke.min(),ke.min(),gi.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,ke.min(),ke.min(),gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.position=e,this.inclusive=t}}function GT(n,e,t){let o=0;for(let s=0;s<n.position.length;s++){const l=e[s],u=n.position[s];if(l.field.isKeyField()?o=be.comparator(be.fromName(u.referenceValue),t.key):o=Ea(u,t.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function HT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ji(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t="asc"){this.field=e,this.dir=t}}function VV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{}class Yt extends yA{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new kV(e,t,o):t==="array-contains"?new FV(e,o):t==="in"?new BV(e,o):t==="not-in"?new qV(e,o):t==="array-contains-any"?new zV(e,o):new Yt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new LV(e,o):new OV(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ea(t,this.value)):t!==null&&Dr(this.value)===Dr(t)&&this.matchesComparison(Ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mi extends yA{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Mi(e,t)}matches(e){return vA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function vA(n){return n.op==="and"}function _A(n){return UV(n)&&vA(n)}function UV(n){for(const e of n.filters)if(e instanceof Mi)return!1;return!0}function Lp(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+Sa(n.value);if(_A(n))return n.filters.map((e=>Lp(e))).join(",");{const e=n.filters.map((t=>Lp(t))).join(",");return`${n.op}(${e})`}}function TA(n,e){return n instanceof Yt?(function(o,s){return s instanceof Yt&&o.op===s.op&&o.field.isEqual(s.field)&&ji(o.value,s.value)})(n,e):n instanceof Mi?(function(o,s){return s instanceof Mi&&o.op===s.op&&o.filters.length===s.filters.length?o.filters.reduce(((l,u,d)=>l&&TA(u,s.filters[d])),!0):!1})(n,e):void De(19439)}function EA(n){return n instanceof Yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`})(n):n instanceof Mi?(function(t){return t.op.toString()+" {"+t.getFilters().map(EA).join(" ,")+"}"})(n):"Filter"}class kV extends Yt{constructor(e,t,o){super(e,t,o),this.key=be.fromName(o.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class LV extends Yt{constructor(e,t){super(e,"in",t),this.keys=SA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class OV extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=SA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function SA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((o=>be.fromName(o.referenceValue)))}class FV extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vm(t)&&jl(t.arrayValue,this.value)}}class BV extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jl(this.value.arrayValue,t)}}class qV extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jl(this.value.arrayValue,t)}}class zV extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>jl(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,t=null,o=[],s=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=s,this.limit=l,this.startAt=u,this.endAt=d,this.Pe=null}}function $T(n,e=null,t=[],o=[],s=null,l=null,u=null){return new GV(n,e,t,o,s,l,u)}function _m(n){const e=Oe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>Lp(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),Vf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>Sa(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>Sa(o))).join(",")),e.Pe=t}return e.Pe}function Tm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HT(n.startAt,e.startAt)&&HT(n.endAt,e.endAt)}function Op(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,t=null,o=[],s=[],l=null,u="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=s,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function HV(n,e,t,o,s,l,u,d){return new Ma(n,e,t,o,s,l,u,d)}function AA(n){return new Ma(n)}function YT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function CA(n){return n.collectionGroup!==null}function ql(n){const e=Oe(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Qt(hn.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new eu(l,o))})),t.has(hn.keyField().canonicalString())||e.Te.push(new eu(hn.keyField(),o))}return e.Te}function Ki(n){const e=Oe(n);return e.Ie||(e.Ie=$V(e,ql(n))),e.Ie}function $V(n,e){if(n.limitType==="F")return $T(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new eu(s.field,l)}));const t=n.endAt?new vf(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new vf(n.startAt.position,n.startAt.inclusive):null;return $T(n.path,n.collectionGroup,e,n.filters,n.limit,t,o)}}function Fp(n,e){const t=n.filters.concat([e]);return new Ma(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bp(n,e,t){return new Ma(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kf(n,e){return Tm(Ki(n),Ki(e))&&n.limitType===e.limitType}function wA(n){return`${_m(Ki(n))}|lt:${n.limitType}`}function ua(n){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((s=>EA(s))).join(", ")}]`),Vf(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((s=>Sa(s))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((s=>Sa(s))).join(",")),`Target(${o})`})(Ki(n))}; limitType=${n.limitType})`}function Lf(n,e){return e.isFoundDocument()&&(function(o,s){const l=s.key.path;return o.collectionGroup!==null?s.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):be.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(n,e)&&(function(o,s){for(const l of ql(o))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(o,s){for(const l of o.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(o,s){return!(o.startAt&&!(function(u,d,h){const g=GT(u,d,h);return u.inclusive?g<=0:g<0})(o.startAt,ql(o),s)||o.endAt&&!(function(u,d,h){const g=GT(u,d,h);return u.inclusive?g>=0:g>0})(o.endAt,ql(o),s))})(n,e)}function YV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function IA(n){return(e,t)=>{let o=!1;for(const s of ql(n)){const l=JV(s,e,t);if(l!==0)return l;o=o||s.field.isKeyField()}return 0}}function JV(n,e,t){const o=n.field.isKeyField()?be.comparator(e.key,t.key):(function(l,u,d){const h=u.data.field(l),g=d.data.field(l);return h!==null&&g!==null?Ea(h,g):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return De(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[s,l]of o)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),s=this.inner[o];if(s===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return o.length===1?delete this.inner[t]:o.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vs(this.inner,((t,o)=>{for(const[s,l]of o)e(s,l)}))}isEmpty(){return lA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=new wt(be.comparator);function No(){return KV}const RA=new wt(be.comparator);function Ll(...n){let e=RA;for(const t of n)e=e.insert(t.key,t);return e}function bA(n){let e=RA;return n.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function fs(){return zl()}function xA(){return zl()}function zl(){return new _s((n=>n.toString()),((n,e)=>n.isEqual(e)))}const QV=new wt(be.comparator),XV=new Qt(be.comparator);function Ze(...n){let e=XV;for(const t of n)e=e.add(t);return e}const WV=new Qt(Ye);function ZV(){return WV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(e)?"-0":e}}function NA(n){return{integerValue:""+n}}function jV(n,e){return IV(e)?NA(e):Em(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function eU(n,e,t){return n instanceof _f?(function(s,l){const u={fields:{[fA]:{stringValue:cA},[hA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&ym(l)&&(l=Uf(l)),l&&(u.fields[dA]=l),{mapValue:u}})(t,e):n instanceof tu?DA(n,e):n instanceof nu?PA(n,e):(function(s,l){const u=MA(s,l),d=JT(u)+JT(s.Ee);return kp(u)&&kp(s.Ee)?NA(d):Em(s.serializer,d)})(n,e)}function tU(n,e,t){return n instanceof tu?DA(n,e):n instanceof nu?PA(n,e):t}function MA(n,e){return n instanceof Tf?(function(o){return kp(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class _f extends Of{}class tu extends Of{constructor(e){super(),this.elements=e}}function DA(n,e){const t=VA(e);for(const o of n.elements)t.some((s=>ji(s,o)))||t.push(o);return{arrayValue:{values:t}}}class nu extends Of{constructor(e){super(),this.elements=e}}function PA(n,e){let t=VA(e);for(const o of n.elements)t=t.filter((s=>!ji(s,o)));return{arrayValue:{values:t}}}class Tf extends Of{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function JT(n){return Ot(n.integerValue||n.doubleValue)}function VA(n){return vm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function nU(n,e){return n.field.isEqual(e.field)&&(function(o,s){return o instanceof tu&&s instanceof tu||o instanceof nu&&s instanceof nu?Ta(o.elements,s.elements,ji):o instanceof Tf&&s instanceof Tf?ji(o.Ee,s.Ee):o instanceof _f&&s instanceof _f})(n.transform,e.transform)}class iU{constructor(e,t){this.version=e,this.transformResults=t}}class Io{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Io}static exists(e){return new Io(void 0,e)}static updateTime(e){return new Io(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ef(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ff{}function UA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new LA(n.key,Io.none()):new ru(n.key,n.data,Io.none());{const t=n.data,o=gi.empty();let s=new Qt(hn.comparator);for(let l of e.fields)if(!s.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?o.delete(l):o.set(l,u),s=s.add(l)}return new Ts(n.key,o,new bi(s.toArray()),Io.none())}}function oU(n,e,t){n instanceof ru?(function(s,l,u){const d=s.value.clone(),h=QT(s.fieldTransforms,l,u.transformResults);d.setAll(h),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ts?(function(s,l,u){if(!ef(s.precondition,l))return void l.convertToUnknownDocument(u.version);const d=QT(s.fieldTransforms,l,u.transformResults),h=l.data;h.setAll(kA(s)),h.setAll(d),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):(function(s,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Gl(n,e,t,o){return n instanceof ru?(function(l,u,d,h){if(!ef(l.precondition,u))return d;const g=l.value.clone(),_=XT(l.fieldTransforms,h,u);return g.setAll(_),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(n,e,t,o):n instanceof Ts?(function(l,u,d,h){if(!ef(l.precondition,u))return d;const g=XT(l.fieldTransforms,h,u),_=u.data;return _.setAll(kA(l)),_.setAll(g),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,o):(function(l,u,d){return ef(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function rU(n,e){let t=null;for(const o of n.fieldTransforms){const s=e.data.field(o.field),l=MA(o.transform,s||null);l!=null&&(t===null&&(t=gi.empty()),t.set(o.field,l))}return t||null}function KT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(o,s){return o===void 0&&s===void 0||!(!o||!s)&&Ta(o,s,((l,u)=>nU(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ru extends Ff{constructor(e,t,o,s=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ts extends Ff{constructor(e,t,o,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function kA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=n.data.field(t);e.set(t,o)}})),e}function QT(n,e,t){const o=new Map;ut(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const l=n[s],u=l.transform,d=e.data.field(l.field);o.set(l.field,tU(u,d,t[s]))}return o}function XT(n,e,t){const o=new Map;for(const s of n){const l=s.transform,u=t.data.field(s.field);o.set(s.field,eU(l,u,e))}return o}class LA extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sU extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,t,o,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=s}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&oU(l,e,o[s])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Gl(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Gl(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=xA();return this.mutations.forEach((s=>{const l=e.get(s.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(s.key)?null:d;const h=UA(u,d);h!==null&&o.set(s.key,h),u.isValidDocument()||u.convertToNoDocument(ke.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Ta(this.mutations,e.mutations,((t,o)=>KT(t,o)))&&Ta(this.baseMutations,e.baseMutations,((t,o)=>KT(t,o)))}}class Sm{constructor(e,t,o,s){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=s}static from(e,t,o){ut(e.mutations.length===o.length,58842,{Ve:e.mutations.length,me:o.length});let s=(function(){return QV})();const l=e.mutations;for(let u=0;u<l.length;u++)s=s.insert(l[u].key,o[u].version);return new Sm(e,t,o,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,tt;function cU(n){switch(n){case ae.OK:return De(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function OA(n){if(n===void 0)return xo("GRPC error has no .code"),ae.UNKNOWN;switch(n){case $t.OK:return ae.OK;case $t.CANCELLED:return ae.CANCELLED;case $t.UNKNOWN:return ae.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ae.INTERNAL;case $t.UNAVAILABLE:return ae.UNAVAILABLE;case $t.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case $t.NOT_FOUND:return ae.NOT_FOUND;case $t.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case $t.ABORTED:return ae.ABORTED;case $t.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case $t.DATA_LOSS:return ae.DATA_LOSS;default:return De(39323,{code:n})}}(tt=$t||($t={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=new wr([4294967295,4294967295],0);function WT(n){const e=oA().encode(n),t=new XS;return t.update(e),new Uint8Array(t.digest())}function ZT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new wr([t,o],0),new wr([s,l],0)]}class Am{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new Ol(`Invalid padding: ${t}`);if(o<0)throw new Ol(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Ol(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new Ol(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=wr.fromNumber(this.fe)}pe(e,t,o){let s=e.add(t.multiply(wr.fromNumber(o)));return s.compare(fU)===1&&(s=new wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=WT(e),[o,s]=ZT(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(o,s,l);if(!this.ye(u))return!1}return!0}static create(e,t,o){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Am(l,s,t);return o.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=WT(e),[o,s]=ZT(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(o,s,l);this.we(u)}}we(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,o,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const s=new Map;return s.set(e,su.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Bf(ke.min(),s,new wt(Ye),No(),Ze())}}class su{constructor(e,t,o,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new su(o,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t,o,s){this.Se=e,this.removedTargetIds=t,this.key=o,this.be=s}}class FA{constructor(e,t){this.targetId=e,this.De=t}}class BA{constructor(e,t,o=pn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=s}}class jT{constructor(){this.ve=0,this.Ce=eE(),this.Fe=pn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ze(),t=Ze(),o=Ze();return this.Ce.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:o=o.add(s);break;default:De(38017,{changeType:l})}})),new su(this.Fe,this.Me,e,t,o)}ke(){this.xe=!1,this.Ce=eE()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class dU{constructor(e){this.We=e,this.Ge=new Map,this.ze=No(),this.je=Gc(),this.Je=Gc(),this.He=new wt(Ye)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const o=this.tt(t);switch(e.state){case 0:this.nt(t)&&o.Be(e.resumeToken);break;case 1:o.Ue(),o.Oe||o.ke(),o.Be(e.resumeToken);break;case 2:o.Ue(),o.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(o.Ke(),o.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),o.Be(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((o,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,o=e.De.count,s=this.st(t);if(s){const l=s.target;if(Op(l))if(o===0){const u=new be(l.path);this.Xe(t,u,En.newNoDocument(u,ke.min()))}else ut(o===1,20013,{expectedCount:o});else{const u=this.ot(t);if(u!==o){const d=this._t(e),h=d?this.ut(d,e,u):1;if(h!==0){this.rt(t);const g=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:s=0},hashCount:l=0}=t;let u,d;try{u=Mr(o).toUint8Array()}catch(h){if(h instanceof uA)return br("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new Am(u,s,l)}catch(h){return br(h instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.fe===0?null:d}ut(e,t,o){return t.De.count===o-this.ht(e,t.targetId)?0:2}ht(e,t){const o=this.We.getRemoteKeysForTarget(t);let s=0;return o.forEach((l=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((l,u)=>{const d=this.st(u);if(d){if(l.current&&Op(d.target)){const h=new be(d.target.path);this.Tt(h).has(u)||this.It(u,h)||this.Xe(u,h,En.newNoDocument(h,e))}l.Ne&&(t.set(u,l.Le()),l.ke())}}));let o=Ze();this.Je.forEach(((l,u)=>{let d=!0;u.forEachWhile((h=>{const g=this.st(h);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.ze.forEach(((l,u)=>u.setReadTime(e)));const s=new Bf(e,t,this.He,this.ze,o);return this.ze=No(),this.je=Gc(),this.Je=Gc(),this.He=new wt(Ye),s}Ze(e,t){if(!this.nt(e))return;const o=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,o),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,o){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),o&&(this.ze=this.ze.insert(t,o))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new jT,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Qt(Ye),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Qt(Ye),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new jT),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Gc(){return new wt(be.comparator)}function eE(){return new wt(be.comparator)}const hU={asc:"ASCENDING",desc:"DESCENDING"},pU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mU={and:"AND",or:"OR"};class gU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qp(n,e){return n.useProto3Json||Vf(e)?e:{value:e}}function Ef(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yU(n,e){return Ef(n,e.toTimestamp())}function Qi(n){return ut(!!n,49232),ke.fromTimestamp((function(t){const o=Nr(t);return new Tt(o.seconds,o.nanos)})(n))}function Cm(n,e){return zp(n,e).canonicalString()}function zp(n,e){const t=(function(s){return new _t(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function zA(n){const e=_t.fromString(n);return ut(JA(e),10190,{key:e.toString()}),e}function Gp(n,e){return Cm(n.databaseId,e.path)}function ip(n,e){const t=zA(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(HA(t))}function GA(n,e){return Cm(n.databaseId,e)}function vU(n){const e=zA(n);return e.length===4?_t.emptyPath():HA(e)}function Hp(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HA(n){return ut(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function tE(n,e,t){return{name:Gp(n,e),fields:t.value.mapValue.fields}}function _U(n,e){let t;if("targetChange"in e){e.targetChange;const o=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:De(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(ut(_===void 0||typeof _=="string",58123),pn.fromBase64String(_||"")):(ut(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),pn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(g){const _=g.code===void 0?ae.UNKNOWN:OA(g.code);return new _e(_,g.message||"")})(u);t=new BA(o,s,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const s=ip(n,o.document.name),l=Qi(o.document.updateTime),u=o.document.createTime?Qi(o.document.createTime):ke.min(),d=new gi({mapValue:{fields:o.document.fields}}),h=En.newFoundDocument(s,l,u,d),g=o.targetIds||[],_=o.removedTargetIds||[];t=new tf(g,_,h.key,h)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const s=ip(n,o.document),l=o.readTime?Qi(o.readTime):ke.min(),u=En.newNoDocument(s,l),d=o.removedTargetIds||[];t=new tf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const s=ip(n,o.document),l=o.removedTargetIds||[];t=new tf([],l,s,null)}else{if(!("filter"in e))return De(11601,{At:e});{e.filter;const o=e.filter;o.targetId;const{count:s=0,unchangedNames:l}=o,u=new uU(s,l),d=o.targetId;t=new FA(d,u)}}return t}function TU(n,e){let t;if(e instanceof ru)t={update:tE(n,e.key,e.value)};else if(e instanceof LA)t={delete:Gp(n,e.key)};else if(e instanceof Ts)t={update:tE(n,e.key,e.data),updateMask:xU(e.fieldMask)};else{if(!(e instanceof sU))return De(16599,{Rt:e.type});t={verify:Gp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(l,u){const d=u.transform;if(d instanceof _f)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof nu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Tf)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw De(20930,{transform:u.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:yU(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:De(27497)})(n,e.precondition)),t}function EU(n,e){return n&&n.length>0?(ut(e!==void 0,14353),n.map((t=>(function(s,l){let u=s.updateTime?Qi(s.updateTime):Qi(l);return u.isEqual(ke.min())&&(u=Qi(l)),new iU(u,s.transformResults||[])})(t,e)))):[]}function SU(n,e){return{documents:[GA(n,e.path)]}}function AU(n,e){const t={structuredQuery:{}},o=e.path;let s;e.collectionGroup!==null?(s=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=GA(n,s);const l=(function(g){if(g.length!==0)return YA(Mi.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(g){if(g.length!==0)return g.map((_=>(function(S){return{field:ca(S.field),direction:IU(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=qp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{Vt:t,parent:s}}function CU(n){let e=vU(n.parent);const t=n.structuredQuery,o=t.from?t.from.length:0;let s=null;if(o>0){ut(o===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const S=$A(E);return S instanceof Mi&&_A(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(M){return new eu(fa(M.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Vf(S)?null:S})(t.limit));let h=null;t.startAt&&(h=(function(E){const S=!!E.before,w=E.values||[];return new vf(w,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,w=E.values||[];return new vf(w,S)})(t.endAt)),HV(e,s,u,l,d,"F",h,g)}function wU(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $A(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=fa(t.unaryFilter.field);return Yt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const s=fa(t.unaryFilter.field);return Yt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fa(t.unaryFilter.field);return Yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fa(t.unaryFilter.field);return Yt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Yt.create(fa(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Mi.create(t.compositeFilter.filters.map((o=>$A(o))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function IU(n){return hU[n]}function RU(n){return pU[n]}function bU(n){return mU[n]}function ca(n){return{fieldPath:n.canonicalString()}}function fa(n){return hn.fromServerFormat(n.fieldPath)}function YA(n){return n instanceof Yt?(function(t){if(t.op==="=="){if(zT(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NAN"}};if(qT(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zT(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NAN"}};if(qT(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ca(t.field),op:RU(t.op),value:t.value}}})(n):n instanceof Mi?(function(t){const o=t.getFilters().map((s=>YA(s)));return o.length===1?o[0]:{compositeFilter:{op:bU(t.op),filters:o}}})(n):De(54877,{filter:n})}function xU(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function JA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t,o,s,l=ke.min(),u=ke.min(),d=pn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e){this.gt=e}}function MU(n){const e=CU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.Dn=new PU}addToCollectionParentIndex(e,t){return this.Dn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(xr.min())}updateCollectionGroup(e,t,o){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class PU{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),s=this.index[t]||new Qt(_t.comparator),l=!s.has(o);return this.index[t]=s.add(o),l}has(e){const t=e.lastSegment(),o=e.popLast(),s=this.index[t];return s&&s.has(o)}getEntries(e){return(this.index[e]||new Qt(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KA=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(KA,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Aa(0)}static ur(){return new Aa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="LruGarbageCollector",VU=1048576;function oE([n,e],[t,o]){const s=Ye(n,t);return s===0?Ye(e,o):s}class UU{constructor(e){this.Tr=e,this.buffer=new Qt(oE),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();oE(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kU{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Te(iE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Na(t)?Te(iE,"Ignoring IndexedDB error during garbage collection: ",t):await xa(t)}await this.Rr(3e5)}))}}class LU{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Pf.ue);const o=new UU(t);return this.Vr.forEachTarget(e,(s=>o.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>o.Er(s))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(nE)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nE):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let o,s,l,u,d,h,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(o=E,d=Date.now(),this.removeTargets(e,o,t)))).next((E=>(l=E,h=Date.now(),this.removeOrphanedDocuments(e,o)))).next((E=>(g=Date.now(),la()<=nt.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${l} targets in `+(h-d)+`ms
	Removed ${E} documents in `+(g-h)+`ms
Total Duration: ${g-_}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function OU(n,e){return new LU(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(){this.changes=new _s((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?ue.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e,t,o,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=s}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(o=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(o!==null&&Gl(o.mutation,s,bi.empty(),Tt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,Ze()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=Ze()){const s=fs();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,o).next((l=>{let u=Ll();return l.forEach(((d,h)=>{u=u.insert(d,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const o=fs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,Ze())))}populateOverlays(e,t,o){const s=[];return o.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,o,s){let l=No();const u=zl(),d=(function(){return zl()})();return t.forEach(((h,g)=>{const _=o.get(g.key);s.has(g.key)&&(_===void 0||_.mutation instanceof Ts)?l=l.insert(g.key,g):_!==void 0?(u.set(g.key,_.mutation.getFieldMask()),Gl(_.mutation,g,_.mutation.getFieldMask(),Tt.now())):u.set(g.key,bi.empty())})),this.recalculateAndSaveOverlays(e,l).next((h=>(h.forEach(((g,_)=>u.set(g,_))),t.forEach(((g,_)=>{var E;return d.set(g,new BU(_,(E=u.get(g))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const o=zl();let s=new wt(((u,d)=>u-d)),l=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((h=>{const g=t.get(h);if(g===null)return;let _=o.get(h)||bi.empty();_=d.applyToLocalView(g,_),o.set(h,_);const E=(s.get(d.batchId)||Ze()).add(h);s=s.insert(d.batchId,E)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),g=h.key,_=h.value,E=xA();_.forEach((S=>{if(!l.has(S)){const w=UA(t.get(S),o.get(S));w!==null&&E.set(S,w),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ue.waitFor(u)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,s){return(function(u){return be.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):CA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,s):this.getDocumentsMatchingCollectionQuery(e,t,o,s)}getNextDocuments(e,t,o,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,s).next((l=>{const u=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,s-l.size):ue.resolve(fs());let d=Xl,h=l;return u.next((g=>ue.forEach(g,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?ue.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{h=h.insert(_,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,h,g,Ze()))).next((_=>({batchId:d,changes:bA(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((o=>{let s=Ll();return o.isFoundDocument()&&(s=s.insert(o.key,o)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,s){const l=t.collectionGroup;let u=Ll();return this.indexManager.getCollectionParents(e,l).next((d=>ue.forEach(d,(h=>{const g=(function(E,S){return new Ma(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,h.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,o,s).next((_=>{_.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,o,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l,s)))).next((u=>{l.forEach(((h,g)=>{const _=g.getKey();u.get(_)===null&&(u=u.insert(_,En.newInvalidDocument(_)))}));let d=Ll();return u.forEach(((h,g)=>{const _=l.get(h);_!==void 0&&Gl(_.mutation,g,bi.empty(),Tt.now()),Lf(t,g)&&(d=d.insert(h,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Qi(s.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:MU(s.bundledQuery),readTime:Qi(s.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(){this.overlays=new wt(be.comparator),this.kr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const o=fs();return ue.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&o.set(s,l)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((s,l)=>{this.wt(e,t,l)})),ue.resolve()}removeOverlaysForBatchId(e,t,o){const s=this.kr.get(o);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(o)),ue.resolve()}getOverlaysForCollection(e,t,o){const s=fs(),l=t.length+1,u=new be(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const h=d.getNext().value,g=h.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&h.largestBatchId>o&&s.set(h.getKey(),h)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,t,o,s){let l=new wt(((g,_)=>g-_));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>o){let _=l.get(g.largestBatchId);_===null&&(_=fs(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=fs(),h=l.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=s)););return ue.resolve(d)}wt(e,t,o){const s=this.overlays.get(o.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(o.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new lU(t,o));let l=this.kr.get(t);l===void 0&&(l=Ze(),this.kr.set(t,l)),this.kr.set(t,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.qr=new Qt(en.Qr),this.$r=new Qt(en.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const o=new en(e,t);this.qr=this.qr.add(o),this.$r=this.$r.add(o)}Kr(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new en(e,t))}Gr(e,t){e.forEach((o=>this.removeReference(o,t)))}zr(e){const t=new be(new _t([])),o=new en(t,e),s=new en(t,e+1),l=[];return this.$r.forEachInRange([o,s],(u=>{this.Wr(u),l.push(u.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new be(new _t([])),o=new en(t,e),s=new en(t,e+1);let l=Ze();return this.$r.forEachInRange([o,s],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new en(e,0),o=this.qr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class en{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return be.comparator(e.key,t.key)||Ye(e.Hr,t.Hr)}static Ur(e,t){return Ye(e.Hr,t.Hr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Qt(en.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,s){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new aU(l,t,o,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new en(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,t){return ue.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,s=this.Xr(o),l=s<0?0:s;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?gm:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new en(t,0),s=new en(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([o,s],(u=>{const d=this.Zr(u.Hr);l.push(d)})),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Qt(Ye);return t.forEach((s=>{const l=new en(s,0),u=new en(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,u],(d=>{o=o.add(d.Hr)}))})),ue.resolve(this.ei(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,s=o.length+1;let l=o;be.isDocumentKey(l)||(l=l.child(""));const u=new en(new be(l),0);let d=new Qt(Ye);return this.Yr.forEachWhile((h=>{const g=h.key.path;return!!o.isPrefixOf(g)&&(g.length===s&&(d=d.add(h.Hr)),!0)}),u),ue.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((o=>{const s=this.Zr(o);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ut(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Yr;return ue.forEach(t.mutations,(s=>{const l=new en(s.key,t.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=o}))}rr(e){}containsKey(e,t){const o=new en(t,0),s=this.Yr.firstAfterOrEqual(o);return ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e){this.ni=e,this.docs=(function(){return new wt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,s=this.docs.get(o),l=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return ue.resolve(o?o.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let o=No();return t.forEach((s=>{const l=this.docs.get(s);o=o.insert(s,l?l.document.mutableCopy():En.newInvalidDocument(s))})),ue.resolve(o)}getDocumentsMatchingQuery(e,t,o,s){let l=No();const u=t.path,d=new be(u.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:g,value:{document:_}}=h.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||SV(EV(_),o)<=0||(s.has(_.key)||Lf(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ue.resolve(l)}getAllFromCollectionGroup(e,t,o,s){De(9500)}ri(e,t){return ue.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new JU(this)}getSize(e){return ue.resolve(this.size)}}class JU extends FU{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((o,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(o)})),ue.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.persistence=e,this.ii=new _s((t=>_m(t)),Tm),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.si=0,this.oi=new wm,this.targetCount=0,this._i=Aa.ar()}forEachTarget(e,t){return this.ii.forEach(((o,s)=>t(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.si&&(this.si=t),ue.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Aa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.hr(t),ue.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,o){let s=0;const l=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&o.get(d.targetId)===null&&(this.ii.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ue.waitFor(l).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const o=this.ii.get(t)||null;return ue.resolve(o)}addMatchingKeys(e,t,o){return this.oi.Kr(t,o),ue.resolve()}removeMatchingKeys(e,t,o){this.oi.Gr(t,o);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((u=>{l.push(s.markPotentiallyOrphaned(e,u))})),ue.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const o=this.oi.Jr(t);return ue.resolve(o)}containsKey(e,t){return ue.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,t){this.ai={},this.overlays={},this.ui=new Pf(0),this.ci=!1,this.ci=!0,this.li=new HU,this.referenceDelegate=e(this),this.hi=new KU(this),this.indexManager=new DU,this.remoteDocumentCache=(function(s){return new YU(s)})((o=>this.referenceDelegate.Pi(o))),this.serializer=new NU(t),this.Ti=new zU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.ai[e.toKey()];return o||(o=new $U(t,this.referenceDelegate),this.ai[e.toKey()]=o),o}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,o){Te("MemoryPersistence","Starting transaction:",e);const s=new QU(this.ui.next());return this.referenceDelegate.Ii(),o(s).next((l=>this.referenceDelegate.di(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return ue.or(Object.values(this.ai).map((o=>()=>o.containsKey(e,t))))}}class QU extends CV{constructor(e){super(),this.currentSequenceNumber=e}}class Im{constructor(e){this.persistence=e,this.Ai=new wm,this.Ri=null}static Vi(e){return new Im(e)}get mi(){if(this.Ri)return this.Ri;throw De(60996)}addReference(e,t,o){return this.Ai.addReference(o,t),this.mi.delete(o.toString()),ue.resolve()}removeReference(e,t,o){return this.Ai.removeReference(o,t),this.mi.add(o.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.mi.add(l.toString())))})).next((()=>o.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,(o=>{const s=be.fromPath(o);return this.fi(e,s).next((l=>{l||t.removeEntry(s,ke.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((o=>{o?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ue.or([()=>ue.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Sf{constructor(e,t){this.persistence=e,this.gi=new _s((o=>RV(o.path)),((o,s)=>o.isEqual(s))),this.garbageCollector=OU(this,t)}static Vi(e,t){return new Sf(e,t)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((s=>o+s))))}yr(e){let t=0;return this.gr(e,(o=>{t++})).next((()=>t))}gr(e,t){return ue.forEach(this.gi,((o,s)=>this.Sr(e,o,s).next((l=>l?ue.resolve():t(s)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(o++,l.removeEntry(u,ke.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.gi.set(o,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,o){return this.gi.set(o,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ue.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zc(e.data.value)),t}Sr(e,t,o){return ue.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return ue.resolve(s!==void 0&&s>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,t,o,s){this.targetId=e,this.fromCache=t,this.Is=o,this.ds=s}static Es(e,t){let o=Ze(),s=Ze();for(const l of t.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Rm(e,t.fromCache,o,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return K4()?8:wV(Y4())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,o,s){const l={result:null};return this.ps(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ys(e,t,s,o).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new XU;return this.ws(e,t,u).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>l.result))}Ss(e,t,o,s){return o.documentReadCount<this.Vs?(la()<=nt.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",ua(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(la()<=nt.DEBUG&&Te("QueryEngine","Query:",ua(t),"scans",o.documentReadCount,"local documents and returns",s,"documents as results."),o.documentReadCount>this.fs*s?(la()<=nt.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",ua(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ki(t))):ue.resolve())}ps(e,t){if(YT(t))return ue.resolve(null);let o=Ki(t);return this.indexManager.getIndexType(e,o).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Bp(t,null,"F"),o=Ki(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const u=Ze(...l);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,o).next((h=>{const g=this.bs(t,d);return this.Ds(t,g,u,h.readTime)?this.ps(e,Bp(t,null,"F")):this.vs(e,g,t,h)}))))})))))}ys(e,t,o,s){return YT(t)||s.isEqual(ke.min())?ue.resolve(null):this.gs.getDocuments(e,o).next((l=>{const u=this.bs(t,l);return this.Ds(t,u,o,s)?ue.resolve(null):(la()<=nt.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ua(t)),this.vs(e,u,t,TV(s,Xl)).next((d=>d)))}))}bs(e,t){let o=new Qt(IA(e));return t.forEach(((s,l)=>{Lf(e,l)&&(o=o.add(l))})),o}Ds(e,t,o,s){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ws(e,t,o){return la()<=nt.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",ua(t)),this.gs.getDocumentsMatchingQuery(e,t,xr.min(),o)}vs(e,t,o,s){return this.gs.getDocumentsMatchingQuery(e,o,s).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="LocalStore",ZU=3e8;class jU{constructor(e,t,o,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new wt(Ye),this.Ms=new _s((l=>_m(l)),Tm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(o)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qU(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function ek(n,e,t,o){return new jU(n,e,t,o)}async function XA(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let s;return t.mutationQueue.getAllMutationBatches(o).next((l=>(s=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(o)))).next((l=>{const u=[],d=[];let h=Ze();for(const g of s){u.push(g.batchId);for(const _ of g.mutations)h=h.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)h=h.add(_.key)}return t.localDocuments.getDocuments(o,h).next((g=>({Bs:g,removedBatchIds:u,addedBatchIds:d})))}))}))}function tk(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const s=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,h,g,_){const E=g.batch,S=E.keys();let w=ue.resolve();return S.forEach((M=>{w=w.next((()=>_.getEntry(h,M))).next((L=>{const V=g.docVersions.get(M);ut(V!==null,48541),L.version.compareTo(V)<0&&(E.applyToRemoteDocument(L,g),L.isValidDocument()&&(L.setReadTime(g.commitVersion),_.addEntry(L)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(h,E)))})(t,o,e,l).next((()=>l.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let h=Ze();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(h=h.add(d.batch.mutations[g].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(o,s)))}))}function WA(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function nk(n,e){const t=Oe(n),o=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const d=[];e.targetChanges.forEach(((_,E)=>{const S=s.get(E);if(!S)return;d.push(t.hi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,_.addedDocuments,E))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(pn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,o)),s=s.insert(E,w),(function(L,V,Y){return L.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=ZU?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(S,w,_)&&d.push(t.hi.updateTargetData(l,w))}));let h=No(),g=Ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(ik(l,u,e.documentUpdates).next((_=>{h=_.Ls,g=_.ks}))),!o.isEqual(ke.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(_)}return ue.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,h,g))).next((()=>h))})).then((l=>(t.Fs=s,l)))}function ik(n,e,t){let o=Ze(),s=Ze();return t.forEach((l=>o=o.add(l))),e.getEntries(n,o).next((l=>{let u=No();return t.forEach(((d,h)=>{const g=l.get(d);h.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),h.isNoDocument()&&h.version.isEqual(ke.min())?(e.removeEntry(d,h.readTime),u=u.insert(d,h)):!g.isValidDocument()||h.version.compareTo(g.version)>0||h.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(h),u=u.insert(d,h)):Te(bm,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",h.version)})),{Ls:u,ks:s}}))}function ok(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=gm),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function rk(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let s;return t.hi.getTargetData(o,e).next((l=>l?(s=l,ue.resolve(s)):t.hi.allocateTargetId(o).next((u=>(s=new Er(e,u,"TargetPurposeListen",o.currentSequenceNumber),t.hi.addTargetData(o,s).next((()=>s)))))))})).then((o=>{const s=t.Fs.get(o.targetId);return(s===null||o.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(o.targetId,o),t.Ms.set(e,o.targetId)),o}))}async function $p(n,e,t){const o=Oe(n),s=o.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",l,(u=>o.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Na(u))throw u;Te(bm,`Failed to update sequence numbers for target ${e}: ${u}`)}o.Fs=o.Fs.remove(e),o.Ms.delete(s.target)}function rE(n,e,t){const o=Oe(n);let s=ke.min(),l=Ze();return o.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,g,_){const E=Oe(h),S=E.Ms.get(_);return S!==void 0?ue.resolve(E.Fs.get(S)):E.hi.getTargetData(g,_)})(o,u,Ki(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,o.hi.getMatchingKeysForTargetId(u,d.targetId).next((h=>{l=h}))})).next((()=>o.Cs.getDocumentsMatchingQuery(u,e,t?s:ke.min(),t?l:Ze()))).next((d=>(sk(o,YV(e),d),{documents:d,qs:l})))))}function sk(n,e,t){let o=n.xs.get(e)||ke.min();t.forEach(((s,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),n.xs.set(e,o)}class sE{constructor(){this.activeTargetIds=ZV()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ak{constructor(){this.Fo=new sE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,o){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new sE,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="ConnectivityMonitor";class lE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Te(aE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Te(aE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc=null;function Yp(){return Hc===null?Hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hc++,"0x"+Hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="RestConnection",uk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ck{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${o}/databases/${s}`,this.Ko=this.databaseId.database===gf?`project_id=${o}`:`project_id=${o}&database_id=${s}`}Wo(e,t,o,s,l){const u=Yp(),d=this.Go(e,t.toUriEncodedString());Te(op,`Sending RPC '${e}' ${u}:`,d,o);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,l);const{host:g}=new URL(d),_=iu(g);return this.jo(e,d,h,o,_).then((E=>(Te(op,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw br(op,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",o),E}))}Jo(e,t,o,s,l,u){return this.Wo(e,t,o,s,l)}zo(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ba})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),o&&o.headers.forEach(((s,l)=>e[l]=s))}Go(e,t){const o=uk[e];return`${this.$o}/v1/${t}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class dk extends ck{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,o,s,l){const u=Yp();return new Promise(((d,h)=>{const g=new WS;g.setWithCredentials(!0),g.listenOnce(ZS.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Wc.NO_ERROR:const E=g.getResponseJson();Te(_n,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Wc.TIMEOUT:Te(_n,`RPC '${e}' ${u} timed out`),h(new _e(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const S=g.getStatus();if(Te(_n,`RPC '${e}' ${u} failed with status:`,S,"response text:",g.getResponseText()),S>0){let w=g.getResponseJson();Array.isArray(w)&&(w=w[0]);const M=w==null?void 0:w.error;if(M&&M.status&&M.message){const L=(function(Y){const Q=Y.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Q)>=0?Q:ae.UNKNOWN})(M.status);h(new _e(L,M.message))}else h(new _e(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new _e(ae.UNAVAILABLE,"Connection failed."));break;default:De(9055,{c_:e,streamId:u,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{Te(_n,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(s);Te(_n,`RPC '${e}' ${u} sending request:`,s),g.send(t,"POST",_,o,15)}))}P_(e,t,o){const s=Yp(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=tA(),d=eA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(h.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,o),h.encodeInitMessageHeaders=!0;const _=l.join("");Te(_n,`Creating RPC '${e}' stream ${s}: ${_}`,h);const E=u.createWebChannel(_,h);this.T_(E);let S=!1,w=!1;const M=new fk({Ho:V=>{w?Te(_n,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(S||(Te(_n,`Opening RPC '${e}' stream ${s} transport.`),E.open(),S=!0),Te(_n,`RPC '${e}' stream ${s} sending:`,V),E.send(V))},Yo:()=>E.close()}),L=(V,Y,Q)=>{V.listen(Y,(J=>{try{Q(J)}catch(te){setTimeout((()=>{throw te}),0)}}))};return L(E,kl.EventType.OPEN,(()=>{w||(Te(_n,`RPC '${e}' stream ${s} transport opened.`),M.s_())})),L(E,kl.EventType.CLOSE,(()=>{w||(w=!0,Te(_n,`RPC '${e}' stream ${s} transport closed`),M.__(),this.I_(E))})),L(E,kl.EventType.ERROR,(V=>{w||(w=!0,br(_n,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),M.__(new _e(ae.UNAVAILABLE,"The operation could not be completed")))})),L(E,kl.EventType.MESSAGE,(V=>{var Y;if(!w){const Q=V.data[0];ut(!!Q,16349);const J=Q,te=(J==null?void 0:J.error)||((Y=J[0])===null||Y===void 0?void 0:Y.error);if(te){Te(_n,`RPC '${e}' stream ${s} received error:`,te);const me=te.status;let W=(function(x){const U=$t[x];if(U!==void 0)return OA(U)})(me),D=te.message;W===void 0&&(W=ae.INTERNAL,D="Unknown error status: "+me+" with message "+te.message),w=!0,M.__(new _e(W,D)),E.close()}else Te(_n,`RPC '${e}' stream ${s} received:`,Q),M.a_(Q)}})),L(d,jS.STAT_EVENT,(V=>{V.stat===Pp.PROXY?Te(_n,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Pp.NOPROXY&&Te(_n,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{M.o_()}),0),M}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function rp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(n){return new gU(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t,o=1e3,s=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=o,this.E_=s,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),o=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-o);s>0&&Te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="PersistentStream";class jA{constructor(e,t,o,s,l,u,d,h){this.Fi=e,this.w_=o,this.S_=s,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ZA(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(xo(t.toString()),xo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,s])=>{this.b_===t&&this.W_(o,s)}),(o=>{e((()=>{const s=new _e(ae.UNKNOWN,"Fetching auth token failed: "+o.message);return this.G_(s)}))}))}W_(e,t){const o=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.e_((()=>{o((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{o((()=>this.G_(s)))})),this.stream.onMessage((s=>{o((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Te(uE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Te(uE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hk extends jA{constructor(e,t,o,s,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,s,u),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=_U(this.serializer,e),o=(function(l){if(!("targetChange"in l))return ke.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?ke.min():u.readTime?Qi(u.readTime):ke.min()})(e);return this.listener.J_(t,o)}H_(e){const t={};t.database=Hp(this.serializer),t.addTarget=(function(l,u){let d;const h=u.target;if(d=Op(h)?{documents:SU(l,h)}:{query:AU(l,h).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=qA(l,u.resumeToken);const g=qp(l,u.expectedCount);g!==null&&(d.expectedCount=g)}else if(u.snapshotVersion.compareTo(ke.min())>0){d.readTime=Ef(l,u.snapshotVersion.toTimestamp());const g=qp(l,u.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const o=wU(this.serializer,e);o&&(t.labels=o),this.k_(t)}Y_(e){const t={};t.database=Hp(this.serializer),t.removeTarget=e,this.k_(t)}}class pk extends jA{constructor(e,t,o,s,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,s,u),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=EU(e.writeResults,e.commitTime),o=Qi(e.commitTime);return this.listener.ta(o,t)}na(){const e={};e.database=Hp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>TU(this.serializer,o)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{}class gk extends mk{constructor(e,t,o,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new _e(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,zp(t,o),s,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(ae.UNKNOWN,l.toString())}))}Jo(e,t,o,s,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,zp(t,o),s,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(ae.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class yk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xo(t),this._a=!1):Te("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="RemoteStore";class vk{constructor(e,t,o,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((u=>{o.enqueueAndForget((async()=>{Es(this)&&(Te(ps,"Restarting streams for network reachability change."),await(async function(h){const g=Oe(h);g.Ia.add(4),await au(g),g.Aa.set("Unknown"),g.Ia.delete(4),await zf(g)})(this))}))})),this.Aa=new yk(o,s)}}async function zf(n){if(Es(n))for(const e of n.da)await e(!0)}async function au(n){for(const e of n.da)await e(!1)}function eC(n,e){const t=Oe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Dm(t)?Mm(t):Da(t).x_()&&Nm(t,e))}function xm(n,e){const t=Oe(n),o=Da(t);t.Ta.delete(e),o.x_()&&tC(t,e),t.Ta.size===0&&(o.x_()?o.B_():Es(t)&&t.Aa.set("Unknown"))}function Nm(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Da(n).H_(e)}function tC(n,e){n.Ra.$e(e),Da(n).Y_(e)}function Mm(n){n.Ra=new dU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Da(n).start(),n.Aa.aa()}function Dm(n){return Es(n)&&!Da(n).M_()&&n.Ta.size>0}function Es(n){return Oe(n).Ia.size===0}function nC(n){n.Ra=void 0}async function _k(n){n.Aa.set("Online")}async function Tk(n){n.Ta.forEach(((e,t)=>{Nm(n,e)}))}async function Ek(n,e){nC(n),Dm(n)?(n.Aa.la(e),Mm(n)):n.Aa.set("Unknown")}async function Sk(n,e,t){if(n.Aa.set("Online"),e instanceof BA&&e.state===2&&e.cause)try{await(async function(s,l){const u=l.cause;for(const d of l.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(n,e)}catch(o){Te(ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Af(n,o)}else if(e instanceof tf?n.Ra.Ye(e):e instanceof FA?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ke.min()))try{const o=await WA(n.localStore);t.compareTo(o)>=0&&await(function(l,u){const d=l.Ra.Pt(u);return d.targetChanges.forEach(((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const _=l.Ta.get(g);_&&l.Ta.set(g,_.withResumeToken(h.resumeToken,u))}})),d.targetMismatches.forEach(((h,g)=>{const _=l.Ta.get(h);if(!_)return;l.Ta.set(h,_.withResumeToken(pn.EMPTY_BYTE_STRING,_.snapshotVersion)),tC(l,h);const E=new Er(_.target,h,g,_.sequenceNumber);Nm(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(o){Te(ps,"Failed to raise snapshot:",o),await Af(n,o)}}async function Af(n,e,t){if(!Na(e))throw e;n.Ia.add(1),await au(n),n.Aa.set("Offline"),t||(t=()=>WA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(ps,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await zf(n)}))}function iC(n,e){return e().catch((t=>Af(n,t,e)))}async function Gf(n){const e=Oe(n),t=Pr(e);let o=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:gm;for(;Ak(e);)try{const s=await ok(e.localStore,o);if(s===null){e.Pa.length===0&&t.B_();break}o=s.batchId,Ck(e,s)}catch(s){await Af(e,s)}oC(e)&&rC(e)}function Ak(n){return Es(n)&&n.Pa.length<10}function Ck(n,e){n.Pa.push(e);const t=Pr(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function oC(n){return Es(n)&&!Pr(n).M_()&&n.Pa.length>0}function rC(n){Pr(n).start()}async function wk(n){Pr(n).na()}async function Ik(n){const e=Pr(n);for(const t of n.Pa)e.X_(t.mutations)}async function Rk(n,e,t){const o=n.Pa.shift(),s=Sm.from(o,e,t);await iC(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Gf(n)}async function bk(n,e){e&&Pr(n).Z_&&await(async function(o,s){if((function(u){return cU(u)&&u!==ae.ABORTED})(s.code)){const l=o.Pa.shift();Pr(o).N_(),await iC(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Gf(o)}})(n,e),oC(n)&&rC(n)}async function cE(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),Te(ps,"RemoteStore received new credentials");const o=Es(t);t.Ia.add(3),await au(t),o&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await zf(t)}async function xk(n,e){const t=Oe(n);e?(t.Ia.delete(2),await zf(t)):e||(t.Ia.add(2),await au(t),t.Aa.set("Unknown"))}function Da(n){return n.Va||(n.Va=(function(t,o,s){const l=Oe(t);return l.ia(),new hk(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:_k.bind(null,n),e_:Tk.bind(null,n),n_:Ek.bind(null,n),J_:Sk.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Dm(n)?Mm(n):n.Aa.set("Unknown")):(await n.Va.stop(),nC(n))}))),n.Va}function Pr(n){return n.ma||(n.ma=(function(t,o,s){const l=Oe(t);return l.ia(),new pk(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:wk.bind(null,n),n_:bk.bind(null,n),ea:Ik.bind(null,n),ta:Rk.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Gf(n)):(await n.ma.stop(),n.Pa.length>0&&(Te(ps,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,t,o,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=s,this.removalCallback=l,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,s,l){const u=Date.now()+o,d=new Pm(e,t,u,s,l);return d.start(o),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vm(n,e){if(xo("AsyncQueue",`${e}: ${n}`),Na(n))return new _e(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{static emptySet(e){return new ga(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||be.comparator(t.key,o.key):(t,o)=>be.comparator(t.key,o.key),this.keyedMap=Ll(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=o.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new ga;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.fa=new wt(be.comparator)}track(e){const t=e.doc.key,o=this.fa.get(t);o?e.type!==0&&o.type===3?this.fa=this.fa.insert(t,e):e.type===3&&o.type!==1?this.fa=this.fa.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.fa=this.fa.remove(t):e.type===1&&o.type===2?this.fa=this.fa.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):De(63341,{At:e,ga:o}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,o)=>{e.push(o)})),e}}class Ca{constructor(e,t,o,s,l,u,d,h,g){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=s,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=g}static fromInitialDocuments(e,t,o,s,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ca(e,t,ga.emptySet(t),u,o,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==o[s].type||!t[s].doc.isEqual(o[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class Mk{constructor(){this.queries=dE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,o){const s=Oe(t),l=s.queries;s.queries=dE(),l.forEach(((u,d)=>{for(const h of d.wa)h.onError(o)}))})(this,new _e(ae.ABORTED,"Firestore shutting down"))}}function dE(){return new _s((n=>wA(n)),kf)}async function Dk(n,e){const t=Oe(n);let o=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.ba()&&(o=2):(l=new Nk,o=e.ba()?0:1);try{switch(o){case 0:l.ya=await t.onListen(s,!0);break;case 1:l.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=Vm(u,`Initialization of query '${ua(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&Um(t)}async function Pk(n,e){const t=Oe(n),o=e.query;let s=3;const l=t.queries.get(o);if(l){const u=l.wa.indexOf(e);u>=0&&(l.wa.splice(u,1),l.wa.length===0?s=e.ba()?0:1:!l.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function Vk(n,e){const t=Oe(n);let o=!1;for(const s of e){const l=s.query,u=t.queries.get(l);if(u){for(const d of u.wa)d.Ca(s)&&(o=!0);u.ya=s}}o&&Um(t)}function Uk(n,e,t){const o=Oe(n),s=o.queries.get(e);if(s)for(const l of s.wa)l.onError(t);o.queries.delete(e)}function Um(n){n.Da.forEach((e=>{e.next()}))}var Jp,hE;(hE=Jp||(Jp={})).Fa="default",hE.Cache="cache";class kk{constructor(e,t,o){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=o||{}}Ca(e){if(!this.options.includeMetadataChanges){const o=[];for(const s of e.docChanges)s.type!==3&&o.push(s);e=new Ca(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const o=t!=="Offline";return(!this.options.ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Jp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.key=e}}class aC{constructor(e){this.key=e}}class Lk{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ze(),this.mutatedKeys=Ze(),this.Xa=IA(e),this.eu=new ga(this.Xa)}get tu(){return this.Ha}nu(e,t){const o=t?t.ru:new fE,s=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const S=s.get(_),w=Lf(this.query,E)?E:null,M=!!S&&this.mutatedKeys.has(S.key),L=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let V=!1;S&&w?S.data.isEqual(w.data)?M!==L&&(o.track({type:3,doc:w}),V=!0):this.iu(S,w)||(o.track({type:2,doc:w}),V=!0,(h&&this.Xa(w,h)>0||g&&this.Xa(w,g)<0)&&(d=!0)):!S&&w?(o.track({type:0,doc:w}),V=!0):S&&!w&&(o.track({type:1,doc:S}),V=!0,(h||g)&&(d=!0)),V&&(w?(u=u.add(w),l=L?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),o.track({type:1,doc:_})}return{eu:u,ru:o,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,s){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((_,E)=>(function(w,M){const L=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{At:V})}};return L(w)-L(M)})(_.type,E.type)||this.Xa(_.doc,E.doc))),this.su(o),s=s!=null&&s;const d=t&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,g=h!==this.Ya;return this.Ya=h,u.length!==0||g?{snapshot:new Ca(this.query,e.eu,l,u,e.mutatedKeys,h===0,g,!1,!!o&&o.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new fE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ze(),this.eu.forEach((o=>{this.au(o.key)&&(this.Za=this.Za.add(o.key))}));const t=[];return e.forEach((o=>{this.Za.has(o)||t.push(new aC(o))})),this.Za.forEach((o=>{e.has(o)||t.push(new sC(o))})),t}uu(e){this.Ha=e.qs,this.Za=Ze();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ca.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const km="SyncEngine";class Ok{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Fk{constructor(e){this.key=e,this.lu=!1}}class Bk{constructor(e,t,o,s,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new _s((d=>wA(d)),kf),this.Tu=new Map,this.Iu=new Set,this.du=new wt(be.comparator),this.Eu=new Map,this.Au=new wm,this.Ru={},this.Vu=new Map,this.mu=Aa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function qk(n,e,t=!0){const o=hC(n);let s;const l=o.Pu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.cu()):s=await lC(o,e,t,!0),s}async function zk(n,e){const t=hC(n);await lC(t,e,!0,!1)}async function lC(n,e,t,o){const s=await rk(n.localStore,Ki(e)),l=s.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return o&&(d=await Gk(n,e,l,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&eC(n.remoteStore,s),d}async function Gk(n,e,t,o,s){n.gu=(E,S,w)=>(async function(L,V,Y,Q){let J=V.view.nu(Y);J.Ds&&(J=await rE(L.localStore,V.query,!1).then((({documents:D})=>V.view.nu(D,J))));const te=Q&&Q.targetChanges.get(V.targetId),me=Q&&Q.targetMismatches.get(V.targetId)!=null,W=V.view.applyChanges(J,L.isPrimaryClient,te,me);return mE(L,V.targetId,W._u),W.snapshot})(n,E,S,w);const l=await rE(n.localStore,e,!0),u=new Lk(e,l.qs),d=u.nu(l.documents),h=su.createSynthesizedTargetChangeForCurrentChange(t,o&&n.onlineState!=="Offline",s),g=u.applyChanges(d,n.isPrimaryClient,h);mE(n,t,g._u);const _=new Ok(e,t,u);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),g.snapshot}async function Hk(n,e,t){const o=Oe(n),s=o.Pu.get(e),l=o.Tu.get(s.targetId);if(l.length>1)return o.Tu.set(s.targetId,l.filter((u=>!kf(u,e)))),void o.Pu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(s.targetId),o.sharedClientState.isActiveQueryTarget(s.targetId)||await $p(o.localStore,s.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(s.targetId),t&&xm(o.remoteStore,s.targetId),Kp(o,s.targetId)})).catch(xa)):(Kp(o,s.targetId),await $p(o.localStore,s.targetId,!0))}async function $k(n,e){const t=Oe(n),o=t.Pu.get(e),s=t.Tu.get(o.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),xm(t.remoteStore,o.targetId))}async function Yk(n,e,t){const o=jk(n);try{const s=await(function(u,d){const h=Oe(u),g=Tt.now(),_=d.reduce(((w,M)=>w.add(M.key)),Ze());let E,S;return h.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let M=No(),L=Ze();return h.Os.getEntries(w,_).next((V=>{M=V,M.forEach(((Y,Q)=>{Q.isValidDocument()||(L=L.add(Y))}))})).next((()=>h.localDocuments.getOverlayedDocuments(w,M))).next((V=>{E=V;const Y=[];for(const Q of d){const J=rU(Q,E.get(Q.key).overlayedDocument);J!=null&&Y.push(new Ts(Q.key,J,gA(J.value.mapValue),Io.exists(!0)))}return h.mutationQueue.addMutationBatch(w,g,Y,d)})).next((V=>{S=V;const Y=V.applyToLocalDocumentSet(E,L);return h.documentOverlayCache.saveOverlays(w,V.batchId,Y)}))})).then((()=>({batchId:S.batchId,changes:bA(E)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(s.batchId),(function(u,d,h){let g=u.Ru[u.currentUser.toKey()];g||(g=new wt(Ye)),g=g.insert(d,h),u.Ru[u.currentUser.toKey()]=g})(o,s.batchId,t),await lu(o,s.changes),await Gf(o.remoteStore)}catch(s){const l=Vm(s,"Failed to persist write");t.reject(l)}}async function uC(n,e){const t=Oe(n);try{const o=await nk(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const u=t.Eu.get(l);u&&(ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?ut(u.lu,14607):s.removedDocuments.size>0&&(ut(u.lu,42227),u.lu=!1))})),await lu(t,o,e)}catch(o){await xa(o)}}function pE(n,e,t){const o=Oe(n);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const s=[];o.Pu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const h=Oe(u);h.onlineState=d;let g=!1;h.queries.forEach(((_,E)=>{for(const S of E.wa)S.va(d)&&(g=!0)})),g&&Um(h)})(o.eventManager,e),s.length&&o.hu.J_(s),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function Jk(n,e,t){const o=Oe(n);o.sharedClientState.updateQueryState(e,"rejected",t);const s=o.Eu.get(e),l=s&&s.key;if(l){let u=new wt(be.comparator);u=u.insert(l,En.newNoDocument(l,ke.min()));const d=Ze().add(l),h=new Bf(ke.min(),new Map,new wt(Ye),u,d);await uC(o,h),o.du=o.du.remove(l),o.Eu.delete(e),Lm(o)}else await $p(o.localStore,e,!1).then((()=>Kp(o,e,t))).catch(xa)}async function Kk(n,e){const t=Oe(n),o=e.batch.batchId;try{const s=await tk(t.localStore,e);fC(t,o,null),cC(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await lu(t,s)}catch(s){await xa(s)}}async function Qk(n,e,t){const o=Oe(n);try{const s=await(function(u,d){const h=Oe(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return h.mutationQueue.lookupMutationBatch(g,d).next((E=>(ut(E!==null,37113),_=E.keys(),h.mutationQueue.removeMutationBatch(g,E)))).next((()=>h.mutationQueue.performConsistencyCheck(g))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>h.localDocuments.getDocuments(g,_)))}))})(o.localStore,e);fC(o,e,t),cC(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await lu(o,s)}catch(s){await xa(s)}}function cC(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function fC(n,e,t){const o=Oe(n);let s=o.Ru[o.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),o.Ru[o.currentUser.toKey()]=s}}function Kp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const o of n.Tu.get(e))n.Pu.delete(o),t&&n.hu.pu(o,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((o=>{n.Au.containsKey(o)||dC(n,o)}))}function dC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(xm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Lm(n))}function mE(n,e,t){for(const o of t)o instanceof sC?(n.Au.addReference(o.key,e),Xk(n,o)):o instanceof aC?(Te(km,"Document no longer in limbo: "+o.key),n.Au.removeReference(o.key,e),n.Au.containsKey(o.key)||dC(n,o.key)):De(19791,{yu:o})}function Xk(n,e){const t=e.key,o=t.path.canonicalString();n.du.get(t)||n.Iu.has(o)||(Te(km,"New document in limbo: "+t),n.Iu.add(o),Lm(n))}function Lm(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new be(_t.fromString(e)),o=n.mu.next();n.Eu.set(o,new Fk(t)),n.du=n.du.insert(t,o),eC(n.remoteStore,new Er(Ki(AA(t.path)),o,"TargetPurposeLimboResolution",Pf.ue))}}async function lu(n,e,t){const o=Oe(n),s=[],l=[],u=[];o.Pu.isEmpty()||(o.Pu.forEach(((d,h)=>{u.push(o.gu(h,e,t).then((g=>{var _;if((g||t)&&o.isPrimaryClient){const E=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(h.targetId))===null||_===void 0?void 0:_.current;o.sharedClientState.updateQueryState(h.targetId,E?"current":"not-current")}if(g){s.push(g);const E=Rm.Es(h.targetId,g);l.push(E)}})))})),await Promise.all(u),o.hu.J_(s),await(async function(h,g){const _=Oe(h);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(g,(S=>ue.forEach(S.Is,(w=>_.persistence.referenceDelegate.addReference(E,S.targetId,w))).next((()=>ue.forEach(S.ds,(w=>_.persistence.referenceDelegate.removeReference(E,S.targetId,w)))))))))}catch(E){if(!Na(E))throw E;Te(bm,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const w=_.Fs.get(S),M=w.snapshotVersion,L=w.withLastLimboFreeSnapshotVersion(M);_.Fs=_.Fs.insert(S,L)}}})(o.localStore,l))}async function Wk(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){Te(km,"User change. New user:",e.toKey());const o=await XA(t.localStore,e);t.currentUser=e,(function(l,u){l.Vu.forEach((d=>{d.forEach((h=>{h.reject(new _e(ae.CANCELLED,u))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await lu(t,o.Bs)}}function Zk(n,e){const t=Oe(n),o=t.Eu.get(e);if(o&&o.lu)return Ze().add(o.key);{let s=Ze();const l=t.Tu.get(e);if(!l)return s;for(const u of l){const d=t.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function hC(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jk.bind(null,e),e.hu.J_=Vk.bind(null,e.eventManager),e.hu.pu=Uk.bind(null,e.eventManager),e}function jk(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Kk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qk.bind(null,e),e}class Cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return ek(this.persistence,new WU,e.initialUser,this.serializer)}Du(e){return new QA(Im.Vi,this.serializer)}bu(e){return new ak}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cf.provider={build:()=>new Cf};class e3 extends Cf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ut(this.persistence.referenceDelegate instanceof Sf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new kU(o,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new QA((o=>Sf.Vi(o,t)),this.serializer)}}class Qp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>pE(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wk.bind(null,this.syncEngine),await xk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Mk})()}createDatastore(e){const t=qf(e.databaseInfo.databaseId),o=(function(l){return new dk(l)})(e.databaseInfo);return(function(l,u,d,h){return new gk(l,u,d,h)})(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,s,l,u,d){return new vk(o,s,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>pE(this.syncEngine,t,0)),(function(){return lE.C()?new lE:new lk})())}createSyncEngine(e,t){return(function(s,l,u,d,h,g,_){const E=new Bk(s,l,u,d,h,g);return _&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Oe(s);Te(ps,"RemoteStore shutting down."),l.Ia.add(5),await au(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Qp.provider={build:()=>new Qp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="FirestoreClient";class n3{constructor(e,t,o,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=s,this.user=Tn.UNAUTHENTICATED,this.clientId=mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async u=>{Te(Vr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(o,(u=>(Te(Vr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=Vm(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function sp(n,e){n.asyncQueue.verifyOperationInProgress(),Te(Vr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let o=t.initialUser;n.setCredentialChangeListener((async s=>{o.isEqual(s)||(await XA(e.localStore,s),o=s)})),e.persistence.setDatabaseDeletedListener((()=>{br("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Te("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{br("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=e}async function gE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await i3(n);Te(Vr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((o=>cE(e.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,s)=>cE(e.remoteStore,s))),n._onlineComponents=e}async function i3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(Vr,"Using user provided OfflineComponentProvider");try{await sp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;br("Error using user provided cache. Falling back to memory cache: "+t),await sp(n,new Cf)}}else Te(Vr,"Using default OfflineComponentProvider"),await sp(n,new e3(void 0));return n._offlineComponents}async function pC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(Vr,"Using user provided OnlineComponentProvider"),await gE(n,n._uninitializedComponentsProvider._online)):(Te(Vr,"Using default OnlineComponentProvider"),await gE(n,new Qp))),n._onlineComponents}function o3(n){return pC(n).then((e=>e.syncEngine))}async function r3(n){const e=await pC(n),t=e.eventManager;return t.onListen=qk.bind(null,e.syncEngine),t.onUnlisten=Hk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$k.bind(null,e.syncEngine),t}function s3(n,e,t={}){const o=new Ir;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,h,g){const _=new t3({next:S=>{_.Ou(),u.enqueueAndForget((()=>Pk(l,E))),S.fromCache&&h.source==="server"?g.reject(new _e(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new kk(d,_,{includeMetadataChanges:!0,ka:!0});return Dk(l,E)})(await r3(n),n.asyncQueue,e,t,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="firestore.googleapis.com",vE=!0;class _E{constructor(e){var t,o;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gC,this.ssl=vE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:vE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VU)throw new _e(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_V("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mC((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,s){return o.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,t,o,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _E({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _E(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new cV;switch(o.type){case"firstParty":return new pV(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new _e(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=yE.get(t);o&&(Te("ComponentProvider","Removing Datastore"),yE.delete(t),o.terminate())})(this),Promise.resolve()}}function a3(n,e,t,o={}){var s;n=pf(n,Hf);const l=iu(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;l&&(kS(`https://${h}`),OS("Firestore",!0)),u.host!==gC&&u.host!==h&&br("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:h,ssl:l,emulatorOptions:o});if(!hf(g,d)&&(n._setSettings(g),o.mockUserToken)){let _,E;if(typeof o.mockUserToken=="string")_=o.mockUserToken,E=Tn.MOCK_USER;else{_=LS(o.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const S=o.mockUserToken.sub||o.mockUserToken.user_id;if(!S)throw new _e(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Tn(S)}n._authCredentials=new fV(new iA(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class tn{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}toJSON(){return{type:tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(ou(t,tn._jsonSchema))return new tn(e,o||null,new be(_t.fromString(t.referencePath)))}}tn._jsonSchemaVersion="firestore/documentReference/1.0",tn._jsonSchema={type:Jt("string",tn._jsonSchemaVersion),referencePath:Jt("string")};class Rr extends Ss{constructor(e,t,o){super(e,t,AA(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new be(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function yC(n,e,...t){if(n=Zi(n),rA("collection","path",e),n instanceof Hf){const o=_t.fromString(e,...t);return DT(o),new Rr(n,null,o)}{if(!(n instanceof tn||n instanceof Rr))throw new _e(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(_t.fromString(e,...t));return DT(o),new Rr(n.firestore,null,o)}}function l3(n,e,...t){if(n=Zi(n),arguments.length===1&&(e=mm.newId()),rA("doc","path",e),n instanceof Hf){const o=_t.fromString(e,...t);return MT(o),new tn(n,null,new be(o))}{if(!(n instanceof tn||n instanceof Rr))throw new _e(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(_t.fromString(e,...t));return MT(o),new tn(n.firestore,n instanceof Rr?n.converter:null,new be(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="AsyncQueue";class EE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ZA(this,"async_queue_retry"),this.oc=()=>{const o=rp();o&&Te(TE,"Visibility state changed to "+o.visibilityState),this.F_.y_()},this._c=e;const t=rp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=rp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Ir;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Na(e))throw e;Te(TE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((o=>{throw this.tc=o,this.nc=!1,xo("INTERNAL UNHANDLED ERROR: ",SE(o)),o})).then((o=>(this.nc=!1,o))))));return this._c=t,t}enqueueAfterDelay(e,t,o){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Pm.createAndSchedule(this,e,t,o,(l=>this.lc(l)));return this.ec.push(s),s}ac(){this.tc&&De(47125,{hc:SE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function SE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Om extends Hf{constructor(e,t,o,s){super(e,t,o,s),this.type="firestore",this._queue=new EE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new EE(e),this._firestoreClient=void 0,await e}}}function u3(n,e){const t=typeof n=="object"?n:JS(),o=typeof n=="string"?n:gf,s=GS(t,"firestore").getImmediate({identifier:o});if(!s._initialized){const l=VS("firestore");l&&a3(s,...l)}return s}function vC(n){if(n._terminated)throw new _e(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||c3(n),n._firestoreClient}function c3(n){var e,t,o;const s=n._freezeSettings(),l=(function(d,h,g,_){return new NV(d,h,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,mC(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((o=s.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new n3(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yi(pn.fromBase64String(e))}catch(t){throw new _e(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yi(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ou(e,yi._jsonSchema))return yi.fromBase64String(e.bytes)}}yi._jsonSchemaVersion="firestore/bytes/1.0",yi._jsonSchema={type:Jt("string",yi._jsonSchemaVersion),bytes:Jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xi._jsonSchemaVersion}}static fromJSON(e){if(ou(e,Xi._jsonSchema))return new Xi(e.latitude,e.longitude)}}Xi._jsonSchemaVersion="firestore/geoPoint/1.0",Xi._jsonSchema={type:Jt("string",Xi._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,s){if(o.length!==s.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ou(e,Wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Wi(e.vectorValues);throw new _e(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:Jt("string",Wi._jsonSchemaVersion),vectorValues:Jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=/^__.*__$/;class d3{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new ru(e,this.data,t,this.fieldTransforms)}}function TC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ec:n})}}class Bm{constructor(e,t,o,s,l,u){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=s,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Bm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const o=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:o,mc:!1});return s.fc(e),s}gc(e){var t;const o=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:o,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return wf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(TC(this.Ec)&&f3.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class h3{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||qf(e)}Dc(e,t,o,s=!1){return new Bm({Ec:e,methodName:t,bc:o,path:hn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function EC(n){const e=n._freezeSettings(),t=qf(n._databaseId);return new h3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function p3(n,e,t,o,s,l={}){const u=n.Dc(l.merge||l.mergeFields?2:0,e,t,s);CC("Data must be an object, but it was:",u,o);const d=SC(o,u);let h,g;if(l.merge)h=new bi(u.fieldMask),g=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const S=g3(e,E,t);if(!u.contains(S))throw new _e(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);v3(_,S)||_.push(S)}h=new bi(_),g=u.fieldTransforms.filter((E=>h.covers(E.field)))}else h=null,g=u.fieldTransforms;return new d3(new gi(d),h,g)}function m3(n,e,t,o=!1){return qm(t,n.Dc(o?4:3,e))}function qm(n,e){if(AC(n=Zi(n)))return CC("Unsupported field value:",e,n),SC(n,e);if(n instanceof _C)return(function(o,s){if(!TC(s.Ec))throw s.wc(`${o._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(o,s){const l=[];let u=0;for(const d of o){let h=qm(d,s.yc(u));h==null&&(h={nullValue:"NULL_VALUE"}),l.push(h),u++}return{arrayValue:{values:l}}})(n,e)}return(function(o,s){if((o=Zi(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return jV(s.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=Tt.fromDate(o);return{timestampValue:Ef(s.serializer,l)}}if(o instanceof Tt){const l=new Tt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Ef(s.serializer,l)}}if(o instanceof Xi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof yi)return{bytesValue:qA(s.serializer,o._byteString)};if(o instanceof tn){const l=s.databaseId,u=o.firestore._databaseId;if(!u.isEqual(l))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Cm(o.firestore._databaseId||s.databaseId,o._key.path)}}if(o instanceof Wi)return(function(u,d){return{mapValue:{fields:{[pA]:{stringValue:mA},[yf]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw d.wc("VectorValues must only contain numeric values.");return Em(d.serializer,g)}))}}}}}})(o,s);throw s.wc(`Unsupported field value: ${Df(o)}`)})(n,e)}function SC(n,e){const t={};return lA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(n,((o,s)=>{const l=qm(s,e.Vc(o));l!=null&&(t[o]=l)})),{mapValue:{fields:t}}}function AC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tt||n instanceof Xi||n instanceof yi||n instanceof tn||n instanceof _C||n instanceof Wi)}function CC(n,e,t){if(!AC(t)||!sA(t)){const o=Df(t);throw o==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+o)}}function g3(n,e,t){if((e=Zi(e))instanceof Fm)return e._internalPath;if(typeof e=="string")return wC(n,e);throw wf("Field path arguments must be of type string or ",n,!1,void 0,t)}const y3=new RegExp("[~\\*/\\[\\]]");function wC(n,e,t){if(e.search(y3)>=0)throw wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fm(...e.split("."))._internalPath}catch{throw wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wf(n,e,t,o,s){const l=o&&!o.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(l||u)&&(h+=" (found",l&&(h+=` in field ${o}`),u&&(h+=` in document ${s}`),h+=")"),new _e(ae.INVALID_ARGUMENT,d+n+h)}function v3(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t,o,s,l){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _3 extends IC{data(){return super.data()}}function zm(n,e){return typeof e=="string"?wC(n,e):e instanceof Fm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gm{}class RC extends Gm{}function E3(n,e,...t){let o=[];e instanceof Gm&&o.push(e),o=o.concat(t),(function(l){const u=l.filter((h=>h instanceof $m)).length,d=l.filter((h=>h instanceof Hm)).length;if(u>1||u>0&&d>0)throw new _e(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const s of o)n=s._apply(n);return n}class Hm extends RC{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new Hm(e,t,o)}_apply(e){const t=this._parse(e);return bC(e._query,t),new Ss(e.firestore,e.converter,Fp(e._query,t))}_parse(e){const t=EC(e.firestore);return(function(l,u,d,h,g,_,E){let S;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new _e(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){CE(E,_);const M=[];for(const L of E)M.push(AE(h,l,L));S={arrayValue:{values:M}}}else S=AE(h,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||CE(E,_),S=m3(d,u,E,_==="in"||_==="not-in");return Yt.create(g,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class $m extends Gm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $m(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:Mi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let u=s;const d=l.getFlattenedFilters();for(const h of d)bC(u,h),u=Fp(u,h)})(e._query,t),new Ss(e.firestore,e.converter,Fp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ym extends RC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ym(e,t)}_apply(e){const t=(function(s,l,u){if(s.startAt!==null)throw new _e(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new _e(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eu(l,u)})(e._query,this._field,this._direction);return new Ss(e.firestore,e.converter,(function(s,l){const u=s.explicitOrderBy.concat([l]);return new Ma(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function S3(n,e="asc"){const t=e,o=zm("orderBy",n);return Ym._create(o,t)}function AE(n,e,t){if(typeof(t=Zi(t))=="string"){if(t==="")throw new _e(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CA(e)&&t.indexOf("/")!==-1)throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(_t.fromString(t));if(!be.isDocumentKey(o))throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return BT(n,new be(o))}if(t instanceof tn)return BT(n,t._key);throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(t)}.`)}function CE(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bC(n,e){const t=(function(s,l){for(const u of s)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class A3{convertValue(e,t="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return vs(e,((s,l)=>{o[s]=this.convertValue(l,t)})),o}convertVectorValue(e){var t,o,s;const l=(s=(o=(t=e.fields)===null||t===void 0?void 0:t[yf].arrayValue)===null||o===void 0?void 0:o.values)===null||s===void 0?void 0:s.map((u=>Ot(u.doubleValue)));return new Wi(l)}convertGeoPoint(e){return new Xi(Ot(e.latitude),Ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Uf(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const t=Nr(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=_t.fromString(e);ut(JA(o),9688,{name:e});const s=new Zl(o.get(1),o.get(3)),l=new be(o.popFirst(5));return s.isEqual(t)||xo(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(n,e,t){let o;return o=n?n.toFirestore(e):e,o}class $c{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends IC{constructor(e,t,o,s,l,u){super(e,t,o,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(zm("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ya._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:Jt("string",ya._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class nf extends ya{data(e={}){return super.data(e)}}class va{constructor(e,t,o,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new $c(s.hasPendingWrites,s.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new nf(this._firestore,this._userDataWriter,o.key,o,new $c(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const h=new nf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new $c(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const h=new nf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new $c(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,_=-1;return d.type!==0&&(g=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:w3(d.type),doc:h,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function w3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:Jt("string",va._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class I3 extends A3{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,t)}}function R3(n){n=pf(n,Ss);const e=pf(n.firestore,Om),t=vC(e),o=new I3(e);return T3(n._query),s3(t,n._query).then((s=>new va(e,o,n,s)))}function b3(n,e){const t=pf(n.firestore,Om),o=l3(n),s=C3(n.converter,e);return x3(t,[p3(EC(n.firestore),"addDoc",o._key,s,n.converter!==null,{}).toMutation(o._key,Io.exists(!1))]).then((()=>o))}function x3(n,e){return(function(o,s){const l=new Ir;return o.asyncQueue.enqueueAndForget((async()=>Yk(await o3(o),s,l))),l.promise})(vC(n),e)}(function(e,t=!0){(function(s){ba=s})($S),Kl(new _a("firestore",((o,{instanceIdentifier:s,options:l})=>{const u=o.getProvider("app").getImmediate(),d=new Om(new dV(o.getProvider("auth-internal")),new mV(u,o.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new _e(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(g.options.projectId,_)})(u,s),u);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Cr(IT,RT,e),Cr(IT,RT,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="firebasestorage.googleapis.com",NC="storageBucket",N3=120*1e3,M3=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt extends ys{constructor(e,t,o=0){super(ap(e),`Firebase Storage: ${t} (${ap(e)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ap(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pt||(Pt={}));function ap(n){return"storage/"+n}function Jm(){const n="An unknown error occurred, please check the error payload for server response.";return new Vt(Pt.UNKNOWN,n)}function D3(n){return new Vt(Pt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function P3(n){return new Vt(Pt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function V3(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Vt(Pt.UNAUTHENTICATED,n)}function U3(){return new Vt(Pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function k3(n){return new Vt(Pt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function L3(){return new Vt(Pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O3(){return new Vt(Pt.CANCELED,"User canceled the upload/download.")}function F3(n){return new Vt(Pt.INVALID_URL,"Invalid URL '"+n+"'.")}function B3(n){return new Vt(Pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function q3(){return new Vt(Pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+NC+"' property when initializing the app?")}function z3(){return new Vt(Pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function G3(){return new Vt(Pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function H3(n){return new Vt(Pt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Xp(n){return new Vt(Pt.INVALID_ARGUMENT,n)}function MC(){return new Vt(Pt.APP_DELETED,"The Firebase app was deleted.")}function $3(n){return new Vt(Pt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hl(n,e){return new Vt(Pt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Vl(n){throw new Vt(Pt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let o;try{o=ni.makeFromUrl(e,t)}catch{return new ni(e,"")}if(o.path==="")return o;throw B3(e)}static makeFromUrl(e,t){let o=null;const s="([A-Za-z0-9.\\-_]+)";function l(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),h={bucket:1,path:3};function g(te){te.path_=decodeURIComponent(te.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",w=new RegExp(`^https?://${E}/${_}/b/${s}/o${S}`,"i"),M={bucket:1,path:3},L=t===xC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",Y=new RegExp(`^https?://${L}/${s}/${V}`,"i"),J=[{regex:d,indices:h,postModify:l},{regex:w,indices:M,postModify:g},{regex:Y,indices:{bucket:1,path:2},postModify:g}];for(let te=0;te<J.length;te++){const me=J[te],W=me.regex.exec(e);if(W){const D=W[me.indices.bucket];let N=W[me.indices.path];N||(N=""),o=new ni(D,N),me.postModify(o);break}}if(o==null)throw F3(e);return o}}class Y3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(n,e,t){let o=1,s=null,l=null,u=!1,d=0;function h(){return d===2}let g=!1;function _(...V){g||(g=!0,e.apply(null,V))}function E(V){s=setTimeout(()=>{s=null,n(w,h())},V)}function S(){l&&clearTimeout(l)}function w(V,...Y){if(g){S();return}if(V){S(),_.call(null,V,...Y);return}if(h()||u){S(),_.call(null,V,...Y);return}o<64&&(o*=2);let J;d===1?(d=2,J=0):J=(o+Math.random())*1e3,E(J)}let M=!1;function L(V){M||(M=!0,S(),!g&&(s!==null?(V||(d=2),clearTimeout(s),E(0)):V||(d=1)))}return E(0),l=setTimeout(()=>{u=!0,L(!0)},t),L}function K3(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(n){return n!==void 0}function X3(n){return typeof n=="object"&&!Array.isArray(n)}function Km(n){return typeof n=="string"||n instanceof String}function wE(n){return Qm()&&n instanceof Blob}function Qm(){return typeof Blob<"u"}function IE(n,e,t,o){if(o<e)throw Xp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(o>t)throw Xp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n,e,t){let o=e;return t==null&&(o=`https://${e}`),`${t}://${o}/v0${n}`}function DC(n){const e=encodeURIComponent;let t="?";for(const o in n)if(n.hasOwnProperty(o)){const s=e(o)+"="+e(n[o]);t=t+s+"&"}return t=t.slice(0,-1),t}var ds;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ds||(ds={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||s||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,t,o,s,l,u,d,h,g,_,E,S=!0,w=!1){this.url_=e,this.method_=t,this.headers_=o,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=h,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=E,this.retry=S,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,L)=>{this.resolve_=M,this.reject_=L,this.start_()})}start_(){const e=(o,s)=>{if(s){o(!1,new Yc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=d=>{const h=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,g)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const d=l.getErrorCode()===ds.NO_ERROR,h=l.getStatus();if(!d||W3(h,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===ds.ABORT;o(!1,new Yc(!1,null,_));return}const g=this.successCodes_.indexOf(h)!==-1;o(!0,new Yc(g,l))})},t=(o,s)=>{const l=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(d,d.getResponse());Q3(h)?l(h):l()}catch(h){u(h)}else if(d!==null){const h=Jm();h.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,h)):u(h)}else if(s.canceled){const h=this.appDelete_?MC():O3();u(h)}else{const h=L3();u(h)}};this.canceled_?t(!1,new Yc(!1,null,!0)):this.backoffId_=J3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&K3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yc{constructor(e,t,o){this.wasSuccessCode=e,this.connection=t,this.canceled=!!o}}function j3(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function e5(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function t5(n,e){e&&(n["X-Firebase-GMPID"]=e)}function n5(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function i5(n,e,t,o,s,l,u=!0,d=!1){const h=DC(n.urlParams),g=n.url+h,_=Object.assign({},n.headers);return t5(_,e),j3(_,t),e5(_,l),n5(_,o),new Z3(g,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function r5(...n){const e=o5();if(e!==void 0){const t=new e;for(let o=0;o<n.length;o++)t.append(n[o]);return t.getBlob()}else{if(Qm())return new Blob(n);throw new Vt(Pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function s5(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(n){if(typeof atob>"u")throw H3("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lp{constructor(e,t){this.data=e,this.contentType=t||null}}function l5(n,e){switch(n){case Ji.RAW:return new lp(PC(e));case Ji.BASE64:case Ji.BASE64URL:return new lp(VC(n,e));case Ji.DATA_URL:return new lp(c5(e),f5(e))}throw Jm()}function PC(n){const e=[];for(let t=0;t<n.length;t++){let o=n.charCodeAt(t);if(o<=127)e.push(o);else if(o<=2047)e.push(192|o>>6,128|o&63);else if((o&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=o,u=n.charCodeAt(++t);o=65536|(l&1023)<<10|u&1023,e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|o&63)}else(o&64512)===56320?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|o&63)}return new Uint8Array(e)}function u5(n){let e;try{e=decodeURIComponent(n)}catch{throw Hl(Ji.DATA_URL,"Malformed data URL.")}return PC(e)}function VC(n,e){switch(n){case Ji.BASE64:{const s=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(s||l)throw Hl(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ji.BASE64URL:{const s=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(s||l)throw Hl(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=a5(e)}catch(s){throw s.message.includes("polyfill")?s:Hl(n,"Invalid character found")}const o=new Uint8Array(t.length);for(let s=0;s<t.length;s++)o[s]=t.charCodeAt(s);return o}class UC{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Hl(Ji.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=t[1]||null;o!=null&&(this.base64=d5(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=e.substring(e.indexOf(",")+1)}}function c5(n){const e=new UC(n);return e.base64?VC(Ji.BASE64,e.rest):u5(e.rest)}function f5(n){return new UC(n).contentType}function d5(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){let o=0,s="";wE(e)?(this.data_=e,o=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),o=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),o=e.length),this.size_=o,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(wE(this.data_)){const o=this.data_,s=s5(o,e,t);return s===null?null:new Tr(s)}else{const o=new Uint8Array(this.data_.buffer,e,t-e);return new Tr(o,!0)}}static getBlob(...e){if(Qm()){const t=e.map(o=>o instanceof Tr?o.data_:o);return new Tr(r5.apply(null,t))}else{const t=e.map(u=>Km(u)?l5(Ji.RAW,u).data:u.data_);let o=0;t.forEach(u=>{o+=u.byteLength});const s=new Uint8Array(o);let l=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)s[l++]=u[d]}),new Tr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(n){let e;try{e=JSON.parse(n)}catch{return null}return X3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function p5(n,e){const t=e.split("/").filter(o=>o.length>0).join("/");return n.length===0?t:n+"/"+t}function LC(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(n,e){return e}class xn{constructor(e,t,o,s){this.server=e,this.local=t||e,this.writable=!!o,this.xform=s||m5}}let Jc=null;function g5(n){return!Km(n)||n.length<2?n:LC(n)}function OC(){if(Jc)return Jc;const n=[];n.push(new xn("bucket")),n.push(new xn("generation")),n.push(new xn("metageneration")),n.push(new xn("name","fullPath",!0));function e(l,u){return g5(u)}const t=new xn("name");t.xform=e,n.push(t);function o(l,u){return u!==void 0?Number(u):u}const s=new xn("size");return s.xform=o,n.push(s),n.push(new xn("timeCreated")),n.push(new xn("updated")),n.push(new xn("md5Hash",null,!0)),n.push(new xn("cacheControl",null,!0)),n.push(new xn("contentDisposition",null,!0)),n.push(new xn("contentEncoding",null,!0)),n.push(new xn("contentLanguage",null,!0)),n.push(new xn("contentType",null,!0)),n.push(new xn("metadata","customMetadata",!0)),Jc=n,Jc}function y5(n,e){function t(){const o=n.bucket,s=n.fullPath,l=new ni(o,s);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function v5(n,e,t){const o={};o.type="file";const s=t.length;for(let l=0;l<s;l++){const u=t[l];o[u.local]=u.xform(o,e[u.server])}return y5(o,n),o}function FC(n,e,t){const o=kC(e);return o===null?null:v5(n,o,t)}function _5(n,e,t,o){const s=kC(e);if(s===null||!Km(s.downloadTokens))return null;const l=s.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(g=>{const _=n.bucket,E=n.fullPath,S="/b/"+u(_)+"/o/"+u(E),w=Xm(S,t,o),M=DC({alt:"media",token:g});return w+M})[0]}function T5(n,e){const t={},o=e.length;for(let s=0;s<o;s++){const l=e[s];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class BC{constructor(e,t,o,s){this.url=e,this.method=t,this.handler=o,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(n){if(!n)throw Jm()}function E5(n,e){function t(o,s){const l=FC(n,s,e);return qC(l!==null),l}return t}function S5(n,e){function t(o,s){const l=FC(n,s,e);return qC(l!==null),_5(l,s,n.host,n._protocol)}return t}function zC(n){function e(t,o){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=U3():s=V3():t.getStatus()===402?s=P3(n.bucket):t.getStatus()===403?s=k3(n.path):s=o,s.status=t.getStatus(),s.serverResponse=o.serverResponse,s}return e}function A5(n){const e=zC(n);function t(o,s){let l=e(o,s);return o.getStatus()===404&&(l=D3(n.path)),l.serverResponse=s.serverResponse,l}return t}function C5(n,e,t){const o=e.fullServerUrl(),s=Xm(o,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,d=new BC(s,l,S5(n,t),u);return d.errorHandler=A5(e),d}function w5(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function I5(n,e,t){const o=Object.assign({},t);return o.fullPath=n.path,o.size=e.size(),o.contentType||(o.contentType=w5(null,e)),o}function R5(n,e,t,o,s){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let J="";for(let te=0;te<2;te++)J=J+Math.random().toString().slice(2);return J}const h=d();u["Content-Type"]="multipart/related; boundary="+h;const g=I5(e,o,s),_=T5(g,t),E="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+h+`\r
Content-Type: `+g.contentType+`\r
\r
`,S=`\r
--`+h+"--",w=Tr.getBlob(E,o,S);if(w===null)throw z3();const M={name:g.fullPath},L=Xm(l,n.host,n._protocol),V="POST",Y=n.maxUploadRetryTime,Q=new BC(L,V,E5(n,t),Y);return Q.urlParams=M,Q.headers=u,Q.body=w.uploadData(),Q.errorHandler=zC(e),Q}class b5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ds.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ds.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ds.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,o,s,l){if(this.sent_)throw Vl("cannot .send() more than once");if(iu(e)&&o&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const u in l)l.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,l[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class x5 extends b5{initXhr(){this.xhr_.responseType="text"}}function GC(){return new x5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){this._service=e,t instanceof ni?this._location=t:this._location=ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ms(e,t)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LC(this._location.path)}get storage(){return this._service}get parent(){const e=h5(this._location.path);if(e===null)return null;const t=new ni(this._location.bucket,e);return new ms(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw $3(e)}}function N5(n,e,t){n._throwIfRoot("uploadBytes");const o=R5(n.storage,n._location,OC(),new Tr(e,!0),t);return n.storage.makeRequestWithTokens(o,GC).then(s=>({metadata:s,ref:n}))}function M5(n){n._throwIfRoot("getDownloadURL");const e=C5(n.storage,n._location,OC());return n.storage.makeRequestWithTokens(e,GC).then(t=>{if(t===null)throw G3();return t})}function D5(n,e){const t=p5(n._location.path,e),o=new ni(n._location.bucket,t);return new ms(n.storage,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(n){return/^[A-Za-z]+:\/\//.test(n)}function V5(n,e){return new ms(n,e)}function HC(n,e){if(n instanceof Wm){const t=n;if(t._bucket==null)throw q3();const o=new ms(t,t._bucket);return e!=null?HC(o,e):o}else return e!==void 0?D5(n,e):n}function U5(n,e){if(e&&P5(e)){if(n instanceof Wm)return V5(n,e);throw Xp("To use ref(service, url), the first argument must be a Storage instance.")}else return HC(n,e)}function RE(n,e){const t=e==null?void 0:e[NC];return t==null?null:ni.makeFromBucketSpec(t,n)}function k5(n,e,t,o={}){n.host=`${e}:${t}`;const s=iu(e);s&&(kS(`https://${n.host}/b`),OS("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:l}=o;l&&(n._overrideAuthToken=typeof l=="string"?l:LS(l,n.app.options.projectId))}class Wm{constructor(e,t,o,s,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=o,this._url=s,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=xC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=N3,this._maxUploadRetryTime=M3,this._requests=new Set,s!=null?this._bucket=ni.makeFromBucketSpec(s,this._host):this._bucket=RE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,e):this._bucket=RE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(HS(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ms(this,e)}_makeRequest(e,t,o,s,l=!0){if(this._deleted)return new Y3(MC());{const u=i5(e,this._appId,o,s,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[o,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,o,s).getPromise()}}const bE="@firebase/storage",xE="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="storage";function L5(n,e,t){return n=Zi(n),N5(n,e,t)}function YC(n){return n=Zi(n),M5(n)}function JC(n,e){return n=Zi(n),U5(n,e)}function O5(n=JS(),e){n=Zi(n);const o=GS(n,$C).getImmediate({identifier:e}),s=VS("storage");return s&&F5(o,...s),o}function F5(n,e,t,o={}){k5(n,e,t,o)}function B5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Wm(t,o,s,e,$S)}function q5(){Kl(new _a($C,B5,"PUBLIC").setMultipleInstances(!0)),Cr(bE,xE,""),Cr(bE,xE,"esm2017")}q5();const z5={apiKey:"AIzaSyCuaVUrIgq0_pzwpcX-FZVcKxBSokC8l8M",authDomain:"ucapan-fajmuls.firebaseapp.com",projectId:"ucapan-fajmuls",storageBucket:"ucapan-fajmuls.firebasestorage.app",messagingSenderId:"485138495948",appId:"1:485138495948:web:6d7c7e5e7289a5681cc569"};let Kc,Zm,jm,uu=!1;try{ET().length?Kc=ET()[0]:Kc=YS(z5),Zm=u3(Kc),jm=O5(Kc),uu=!0,console.log("Firebase initialized successfully")}catch(n){console.error("Firebase Initialization Failed. Make sure 'firebase' is installed in node_modules.",n)}const up=()=>uu,NE=async(n,e)=>{if(!n)return"";if(n.startsWith("http")&&!n.startsWith("blob:"))return n;try{const o=await(await fetch(n)).blob(),s=JC(jm,e);return await L5(s,o),await YC(s)}catch(t){return console.error("Failed to upload blob:",n,t),n}},G5=async(n,e,t,o,s,l)=>{if(!uu)throw new Error("Firebase not initialized");try{const u=`draft_${Date.now()}`,d="",h=await Promise.all(t.map(async _=>{let E=_.imageUrl,S=_.activeImageUrl;return _.imageUrl&&(E=await NE(_.imageUrl,`drafts/${u}/speakers/${_.id}_idle`)),_.activeImageUrl&&(S=await NE(_.activeImageUrl,`drafts/${u}/speakers/${_.id}_active`)),{..._,imageUrl:E,activeImageUrl:S}})),g={name:n||"Untitled Draft",createdAt:Tt.now(),detectionMode:s,manualSpeakerCount:l,speakers:h,analysisResult:o?JSON.parse(JSON.stringify(o)):null,audioStoragePath:d,audioName:e.name,audioMimeType:e.type,speakerCount:t.length};return await b3(yC(Zm,"drafts"),g),!0}catch(u){throw console.error("Error saving to cloud:",u),u}},H5=async()=>{if(!uu)return[];const n=yC(Zm,"drafts"),e=E3(n,S3("createdAt","desc"));return(await R3(e)).docs.map(o=>({id:o.id,...o.data()}))},$5=async(n,e,t)=>{if(!uu)throw new Error("Firebase not initialized");if(!n)return null;try{const o=JC(jm,n),s=await YC(o),u=await(await fetch(s)).blob();return new File([u],e,{type:t})}catch(o){return console.warn("Could not fetch remote audio, likely not uploaded.",o),null}},Y5=({isOpen:n,onClose:e,onSelectDraft:t})=>{const[o,s]=Ee.useState([]),[l,u]=Ee.useState(!0);Ee.useEffect(()=>{n&&d()},[n]);const d=async()=>{u(!0);try{const h=await H5();s(h)}catch(h){console.error("Failed to load drafts",h)}finally{u(!1)}};return n?R.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:R.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl max-h-[80vh] flex flex-col shadow-2xl animate-in fade-in zoom-in-95 duration-200",children:[R.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-950/50",children:[R.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-3",children:[R.jsx(ff,{className:"text-neon-blue"}),"Cloud Drafts"]}),R.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:R.jsx(fm,{size:24})})]}),R.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:l?R.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[R.jsx(Yl,{size:32,className:"animate-spin mb-3 text-primary-500"}),R.jsx("p",{children:"Loading your saved sessions..."})]}):o.length===0?R.jsx("div",{className:"text-center py-12 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:R.jsx("p",{children:"No drafts found in the cloud."})}):o.map(h=>R.jsxs("button",{onClick:()=>t(h),className:"w-full text-left bg-gray-800/50 hover:bg-gray-800 border border-gray-700 hover:border-primary-500/50 rounded-xl p-4 transition-all group flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("h4",{className:"text-lg font-bold text-white group-hover:text-primary-400 mb-1",children:h.name}),R.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[R.jsxs("span",{className:"flex items-center gap-1",children:[R.jsx(yD,{size:12}),new Date(h.createdAt.seconds*1e3).toLocaleDateString()]}),R.jsxs("span",{className:"flex items-center gap-1",children:[R.jsx(ND,{size:12}),h.audioName]}),R.jsx("span",{className:"uppercase border border-gray-700 px-1.5 rounded bg-black/20",children:h.detectionMode})]})]}),R.jsxs("div",{className:"flex flex-col items-end gap-2",children:[R.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-gray-300 bg-black/30 px-3 py-1 rounded-full",children:[R.jsx(Rp,{size:14,className:"text-neon-green"}),R.jsxs("span",{children:[h.speakerCount," Speakers"]})]}),R.jsx("span",{className:"text-xs text-primary-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to Load"})]})]},h.id))})]})}):null},J5=[{id:"default",name:"Indigo",primary:"#6366f1",secondary:"#00f3ff"},{id:"crimson",name:"Crimson",primary:"#e11d48",secondary:"#facc15"},{id:"emerald",name:"Emerald",primary:"#10b981",secondary:"#34d399"},{id:"amber",name:"Amber",primary:"#f59e0b",secondary:"#ff0055"},{id:"cyan",name:"Cyan",primary:"#06b6d4",secondary:"#a855f7"},{id:"fuchsia",name:"Fuchsia",primary:"#d946ef",secondary:"#00f3ff"}],ME=[{id:"#0b0f19",name:"Default Dark"},{id:"#000000",name:"Pitch Black"},{id:"#0f172a",name:"Navy Slate"},{id:"#1e1b4b",name:"Deep Indigo"},{id:"#022c22",name:"Dark Forest"},{id:"#450a0a",name:"Wine Red"},{id:"#280525",name:"Midnight Plum"},{id:"#ffffff",name:"Pure White"},{id:"#f8fafc",name:"Slate White"},{id:"#f0f9ff",name:"Sky White"},{id:"#fdf2f8",name:"Rose White"}],K5=[{id:"none",name:"Solid"},{id:"grid",name:"Grid"},{id:"dots",name:"Dots"},{id:"diagonal",name:"Diagonal"},{id:"checkered",name:"Checkered"},{id:"waves",name:"Waves"},{id:"hexagons",name:"Hexagons"},{id:"triangles",name:"Triangles"},{id:"noise",name:"Noise"}],Q5=({isOpen:n,onClose:e,settings:t,onUpdateSettings:o})=>{if(!n)return null;const s=(h,g)=>{o({...t,[h]:g})},l=t.mode==="light",u=l?"#000000":"#ffffff",d=l?"%23000000":"%23ffffff";return R.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:R.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[R.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-950/50",children:[R.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-3",children:[R.jsx(MS,{className:"text-primary-500"}),"Appearance Settings"]}),R.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:R.jsx(fm,{size:24})})]}),R.jsxs("div",{className:"p-6 overflow-y-auto space-y-8",children:[R.jsxs("section",{children:[R.jsxs("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[t.mode==="light"?R.jsx(dT,{size:16}):R.jsx(Ip,{size:16})," Overall Theme"]}),R.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-xl w-fit",children:[R.jsxs("button",{onClick:()=>s("mode","light"),className:`flex items-center gap-2 px-6 py-2 rounded-lg text-sm font-medium transition-all ${t.mode==="light"?"bg-white text-gray-900 shadow-md":"text-gray-400 hover:text-white"}`,children:[R.jsx(dT,{size:16})," Light"]}),R.jsxs("button",{onClick:()=>s("mode","dark"),className:`flex items-center gap-2 px-6 py-2 rounded-lg text-sm font-medium transition-all ${t.mode==="dark"?"bg-gray-700 text-white shadow-md":"text-gray-400 hover:text-white"}`,children:[R.jsx(Ip,{size:16})," Dark"]})]})]}),R.jsxs("section",{children:[R.jsxs("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[R.jsx(YD,{size:16})," Color Accent"]}),R.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:J5.map(h=>R.jsxs("button",{onClick:()=>s("theme",h.id),className:`relative p-3 rounded-xl border-2 transition-all flex items-center gap-3 group ${t.theme===h.id?"border-primary-500 bg-primary-500/10":"border-gray-800 hover:border-gray-600 bg-gray-800/50"}`,children:[R.jsx("div",{className:"w-8 h-8 rounded-full shadow-lg flex-shrink-0",style:{background:`linear-gradient(135deg, ${h.primary}, ${h.secondary})`}}),R.jsx("span",{className:`text-sm font-medium ${t.theme===h.id?"text-white":"text-gray-400 group-hover:text-gray-200"}`,children:h.name}),t.theme===h.id&&R.jsx(wp,{size:16,className:"absolute top-2 right-2 text-primary-500"})]},h.id))})]}),R.jsxs("section",{children:[R.jsx("div",{className:"flex justify-between items-center mb-4",children:R.jsxs("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[R.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-600"})," Background Color"]})}),R.jsxs("div",{className:"flex flex-wrap gap-4",children:[ME.map(h=>R.jsx("button",{onClick:()=>s("bgColor",h.id),className:`w-12 h-12 rounded-full border-2 transition-all shadow-lg relative group ${t.bgColor===h.id?"border-primary-500 scale-110":"border-gray-700 hover:scale-105"}`,style:{backgroundColor:h.id},title:h.name,children:t.bgColor===h.id&&R.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:R.jsx(wp,{size:16,className:`drop-shadow-md ${["#ffffff","#f8fafc","#f0f9ff","#fdf2f8"].includes(h.id)?"text-black":"text-white"}`})})},h.id)),R.jsxs("label",{className:`w-12 h-12 rounded-full border-2 border-gray-700 hover:border-gray-500 transition-all flex items-center justify-center cursor-pointer relative overflow-hidden group ${ME.find(h=>h.id===t.bgColor)?"":"border-primary-500"}`,children:[R.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500 via-green-500 to-blue-500 opacity-50"}),R.jsx(e4,{size:20,className:"text-white relative z-10"}),R.jsx("input",{type:"color",value:t.bgColor,onChange:h=>s("bgColor",h.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]})]}),R.jsxs("section",{children:[R.jsxs("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[R.jsx(bS,{size:16})," Background Pattern"]}),R.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:K5.map(h=>R.jsxs("button",{onClick:()=>s("bgPattern",h.id),className:`h-24 rounded-xl border-2 transition-all relative overflow-hidden group ${t.bgPattern===h.id?"border-primary-500":"border-gray-800 hover:border-gray-600"}`,children:[R.jsx("div",{className:"absolute inset-0 opacity-50 bg-gray-900",style:{backgroundImage:h.id==="dots"?`radial-gradient(circle, ${u} 1px, transparent 1px)`:h.id==="grid"?`linear-gradient(${u} 1px, transparent 1px), linear-gradient(90deg, ${u} 1px, transparent 1px)`:h.id==="diagonal"?`repeating-linear-gradient(45deg, ${u} 0, ${u} 1px, transparent 0, transparent 50%)`:h.id==="checkered"?`linear-gradient(45deg, ${u} 25%, transparent 25%, transparent 75%, ${u} 75%, ${u}), linear-gradient(45deg, ${u} 25%, transparent 25%, transparent 75%, ${u} 75%, ${u})`:h.id==="waves"?`radial-gradient(circle at 100% 50%, transparent 20%, ${u} 21%, ${u} 34%, transparent 35%, transparent), radial-gradient(circle at 0% 50%, transparent 20%, ${u} 21%, ${u} 34%, transparent 35%, transparent)`:h.id==="hexagons"?`url("data:image/svg+xml,%3Csvg width='24' height='40' viewBox='0 0 24 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 40c5.523 0 10-4.477 10-10V10c0-5.523-4.477-10-10-10s-10 4.477-10 10v20c0 5.523 4.477 10 10 10zM24 20c0 5.523-4.477 10-10 10S4 25.523 4 20s4.477-10 10-10 10 4.477 10 10z' fill='${d}' fill-opacity='1' fill-rule='evenodd'/%3E%3C/svg%3E")`:h.id==="triangles"?`linear-gradient(135deg, ${u} 25%, transparent 25%), linear-gradient(225deg, ${u} 25%, transparent 25%), linear-gradient(45deg, ${u} 25%, transparent 25%), linear-gradient(315deg, ${u} 25%, transparent 25%)`:h.id==="noise"?`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='${l?.3:.4}'/%3E%3C/svg%3E")`:"none",backgroundSize:h.id==="waves"||h.id==="checkered"?"20px 20px":h.id==="hexagons"?"24px 40px":h.id==="triangles"?"20px 20px":"10px 10px",backgroundPosition:h.id==="checkered"?"0 0, 10px 10px":"0 0"}}),R.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/10",children:R.jsx("span",{className:`text-sm font-medium ${t.bgPattern===h.id?"text-primary-400":"text-gray-300"}`,children:h.name})})]},h.id))})]})]}),R.jsx("div",{className:"p-6 border-t border-gray-800 bg-gray-950/50 flex justify-end",children:R.jsx("button",{onClick:e,className:"bg-primary-600 hover:bg-primary-500 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Done"})})]})})},X5=({toast:n,onClose:e})=>(Ee.useEffect(()=>{const t=setTimeout(e,4e3);return()=>clearTimeout(t)},[e]),R.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 rounded-xl shadow-2xl border backdrop-blur-md animate-in slide-in-from-top-2 fade-in duration-300 pointer-events-auto ${n.type==="success"?"bg-green-900/90 border-green-500/50 text-green-100":n.type==="error"?"bg-red-900/90 border-red-500/50 text-red-100":"bg-gray-800/90 border-gray-600 text-gray-100"}`,children:[n.type==="success"&&R.jsx(TD,{size:18,className:"text-green-400"}),n.type==="error"&&R.jsx(SD,{size:18,className:"text-red-400"}),n.type==="info"&&R.jsx(ff,{size:18,className:"text-blue-400"}),R.jsx("span",{className:"text-sm font-medium",children:n.message})]})),DE=n=>{const e=n*137.508%360,t=75,o=50,s=e,l=t/100,u=o/100,d=l*Math.min(u,1-u),h=g=>{const _=(g+s/30)%12,E=u-d*Math.max(Math.min(_-3,9-_,1),-1);return Math.round(255*E).toString(16).padStart(2,"0")};return`#${h(0)}${h(8)}${h(4)}`},W5=()=>{const[n,e]=Ee.useState("upload"),[t,o]=Ee.useState("auto"),[s,l]=Ee.useState(null),[u,d]=Ee.useState(null),[h,g]=Ee.useState([]),[_,E]=Ee.useState(2),[S,w]=Ee.useState(""),[M,L]=Ee.useState(new Set),[V,Y]=Ee.useState([]),[Q,J]=Ee.useState(null),[te,me]=Ee.useState(!1),[W,D]=Ee.useState(!1),[N,x]=Ee.useState(null),[U,O]=Ee.useState("idle"),[q,P]=Ee.useState(null),[Ie,Qe]=Ee.useState(!1),[ee,he]=Ee.useState(!1),[ve,qe]=Ee.useState(!1),[je,F]=Ee.useState(!1),[X,le]=Ee.useState({mode:"dark",theme:"default",bgColor:"#0b0f19",bgPattern:"none"}),[de,xe]=Ee.useState(null),[Pe,Ve]=Ee.useState([]),He=(ne,ce="info")=>{const fe=Date.now();Ve(oe=>[...oe,{id:fe,message:ne,type:ce}])},gt=ne=>{Ve(ce=>ce.filter(fe=>fe.id!==ne))};Ee.useEffect(()=>{document.body.style.backgroundColor=X.bgColor;let ne="";const ce=X.mode==="light",fe=ce?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.03)";switch(X.bgPattern){case"dots":ne=`radial-gradient(${fe} 1px, transparent 1px)`;break;case"grid":ne=`linear-gradient(${fe} 1px, transparent 1px), linear-gradient(90deg, ${fe} 1px, transparent 1px)`;break;case"diagonal":ne=`repeating-linear-gradient(45deg, ${fe} 0, ${fe} 1px, transparent 0, transparent 50%)`;break;case"checkered":ne=`linear-gradient(45deg, ${fe} 25%, transparent 25%, transparent 75%, ${fe} 75%, ${fe}), linear-gradient(45deg, ${fe} 25%, transparent 25%, transparent 75%, ${fe} 75%, ${fe})`;break;case"waves":ne=`radial-gradient(circle at 100% 50%, transparent 20%, ${fe} 21%, ${fe} 34%, transparent 35%, transparent), radial-gradient(circle at 0% 50%, transparent 20%, ${fe} 21%, ${fe} 34%, transparent 35%, transparent)`;break;case"hexagons":ne=`url("data:image/svg+xml,%3Csvg width='24' height='40' viewBox='0 0 24 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 40c5.523 0 10-4.477 10-10V10c0-5.523-4.477-10-10-10s-10 4.477-10 10v20c0 5.523 4.477 10 10 10zM24 20c0 5.523-4.477 10-10 10S4 25.523 4 20s4.477-10 10-10 10 4.477 10 10z' fill='${ce?"%23000000":"%23ffffff"}' fill-opacity='${ce?"0.05":"0.03"}' fill-rule='evenodd'/%3E%3C/svg%3E")`;break;case"triangles":ne=`linear-gradient(135deg, ${fe} 25%, transparent 25%), linear-gradient(225deg, ${fe} 25%, transparent 25%), linear-gradient(45deg, ${fe} 25%, transparent 25%), linear-gradient(315deg, ${fe} 25%, transparent 25%)`;break;case"noise":ne=`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='${ce?.2:.05}'/%3E%3C/svg%3E")`;break;default:ne="none"}document.body.style.backgroundImage=ne,document.body.style.backgroundSize=X.bgPattern==="waves"||X.bgPattern==="checkered"||X.bgPattern==="triangles"?"40px 40px":X.bgPattern==="dots"?"20px 20px":X.bgPattern==="hexagons"?"24px 40px":"40px 40px",X.bgPattern==="checkered"?document.body.style.backgroundPosition="0 0, 20px 20px":document.body.style.backgroundPosition="0 0";const oe=document.documentElement,Ne=It=>{const Ft=parseInt(It.slice(1),16),on=Ft>>16&255,Rt=Ft>>8&255,ct=Ft&255;return`${on} ${Rt} ${ct}`};switch(X.theme){case"crimson":oe.style.setProperty("--primary-400",Ne("#fb7185")),oe.style.setProperty("--primary-500",Ne("#e11d48")),oe.style.setProperty("--primary-600",Ne("#be123c")),oe.style.setProperty("--neon-blue",Ne("#facc15")),oe.style.setProperty("--neon-purple",Ne("#fb7185"));break;case"emerald":oe.style.setProperty("--primary-400",Ne("#34d399")),oe.style.setProperty("--primary-500",Ne("#10b981")),oe.style.setProperty("--primary-600",Ne("#059669")),oe.style.setProperty("--neon-blue",Ne("#6ee7b7")),oe.style.setProperty("--neon-purple",Ne("#a7f3d0"));break;case"amber":oe.style.setProperty("--primary-400",Ne("#fbbf24")),oe.style.setProperty("--primary-500",Ne("#f59e0b")),oe.style.setProperty("--primary-600",Ne("#d97706")),oe.style.setProperty("--neon-blue",Ne("#ff0055")),oe.style.setProperty("--neon-purple",Ne("#ffbb00"));break;case"cyan":oe.style.setProperty("--primary-400",Ne("#22d3ee")),oe.style.setProperty("--primary-500",Ne("#06b6d4")),oe.style.setProperty("--primary-600",Ne("#0891b2")),oe.style.setProperty("--neon-blue",Ne("#a855f7")),oe.style.setProperty("--neon-purple",Ne("#67e8f9"));break;case"fuchsia":oe.style.setProperty("--primary-400",Ne("#e879f9")),oe.style.setProperty("--primary-500",Ne("#d946ef")),oe.style.setProperty("--primary-600",Ne("#c026d3")),oe.style.setProperty("--neon-blue",Ne("#00f3ff")),oe.style.setProperty("--neon-purple",Ne("#f0abfc"));break;default:oe.style.setProperty("--primary-400","129 140 248"),oe.style.setProperty("--primary-500","99 102 241"),oe.style.setProperty("--primary-600","79 70 229"),oe.style.setProperty("--neon-blue","0 243 255"),oe.style.setProperty("--neon-purple","188 19 254");break}X.mode==="light"?(oe.style.setProperty("--c-white","17 24 39"),oe.style.setProperty("--c-black","255 255 255"),oe.style.setProperty("--c-gray-50","17 24 39"),oe.style.setProperty("--c-gray-100","31 41 55"),oe.style.setProperty("--c-gray-200","55 65 81"),oe.style.setProperty("--c-gray-300","75 85 99"),oe.style.setProperty("--c-gray-400","107 114 128"),oe.style.setProperty("--c-gray-500","156 163 175"),oe.style.setProperty("--c-gray-600","209 213 219"),oe.style.setProperty("--c-gray-700","229 231 235"),oe.style.setProperty("--c-gray-800","243 244 246"),oe.style.setProperty("--c-gray-850","249 250 251"),oe.style.setProperty("--c-gray-900","255 255 255"),oe.style.setProperty("--c-gray-950","249 250 251")):(oe.style.setProperty("--c-white","255 255 255"),oe.style.setProperty("--c-black","0 0 0"),oe.style.setProperty("--c-gray-50","249 250 251"),oe.style.setProperty("--c-gray-100","243 244 246"),oe.style.setProperty("--c-gray-200","229 231 235"),oe.style.setProperty("--c-gray-300","209 213 219"),oe.style.setProperty("--c-gray-400","156 163 175"),oe.style.setProperty("--c-gray-500","107 114 128"),oe.style.setProperty("--c-gray-600","75 85 99"),oe.style.setProperty("--c-gray-700","55 65 81"),oe.style.setProperty("--c-gray-800","31 41 55"),oe.style.setProperty("--c-gray-850","31 41 55"),oe.style.setProperty("--c-gray-900","17 24 39"),oe.style.setProperty("--c-gray-950","11 15 25"))},[X]),Ee.useEffect(()=>{setTimeout(()=>{up()||He("Firebase not connected. Save to Cloud unavailable.","error")},1e3)},[]);const Dn=ne=>{if(ne.target.files&&ne.target.files[0]){const ce=ne.target.files[0];if(!ce.type.startsWith("audio/")){J("Please upload a valid audio file.");return}l(ce),J(null),h.length>0&&u?(e("visualizer"),xe(null),He("Session restored successfully!","success")):e("setup")}},Gn=async()=>{if(s)if(t==="manual"){const ne=Array.from({length:_}).map((ce,fe)=>{const Ne=["1","2","3","4","5","6","7","8","9"][fe]||"?";return{id:`manual_${fe}`,name:`Speaker ${fe+1}`,imageUrl:null,activeImageUrl:null,color:DE(fe),triggerKey:Ne,rotation:0}});g(ne),e("visualizer")}else{e("analyzing");try{const ne=S===""?void 0:Number(S),ce=await rD(s,ne);d(ce);const fe=ce.uniqueSpeakers.map((oe,Ne)=>({id:oe,name:oe,imageUrl:null,activeImageUrl:null,color:DE(Ne),rotation:0}));g(fe),e("visualizer")}catch(ne){console.error(ne),J("AI Analysis failed. Try Manual Mode or a shorter file."),e("setup")}}};Ee.useEffect(()=>{if(n!=="visualizer"||t!=="manual")return;const ne=fe=>{const oe=fe.key.toLowerCase();L(Ne=>{const It=new Set(Ne);return It.add(oe),It})},ce=fe=>{const oe=fe.key.toLowerCase();L(Ne=>{const It=new Set(Ne);return It.delete(oe),It})};return window.addEventListener("keydown",ne),window.addEventListener("keyup",ce),()=>{window.removeEventListener("keydown",ne),window.removeEventListener("keyup",ce)}},[n,t]),Ee.useEffect(()=>{if(t==="manual"){const ne=h.filter(ce=>ce.triggerKey&&M.has(ce.triggerKey.toLowerCase())).map(ce=>ce.id);Y(ne)}},[M,h,t]);const Hn=(ne,ce,fe)=>{x(ne),O(fe),P(ce)},Ti=(ne,ce)=>{const fe=h.find(oe=>oe.id===ne);if(fe){const oe=ce==="active"?fe.activeImageUrl:fe.imageUrl;oe&&(x(ne),O(ce),P(oe))}},mn=ne=>{setTimeout(()=>{window.confirm("Delete both idle and active images for this speaker?")&&(g(ce=>ce.map(fe=>fe.id===ne?{...fe,imageUrl:null,activeImageUrl:null}:fe)),He("Images deleted.","info"))},50)},ii=ne=>{g(ce=>ce.map(fe=>{if(fe.id===ne){const Ne=((fe.rotation||0)+90)%360;return{...fe,rotation:Ne}}return fe}))},oi=async()=>{if(!s)return;if(!up()){He("Firebase not initialized. Check internet or API keys.","error");return}const ne=prompt("Enter a name for this cloud draft:");if(ne){he(!0),He("Saving session metadata...","info");try{await G5(ne,s,h,u,t,_),He("Successfully saved to Cloud!","success")}catch(ce){console.error(ce);const fe=(ce==null?void 0:ce.message)||"Unknown error";He(`Save failed: ${fe}`,"error")}finally{he(!1)}}},Po=async ne=>{Qe(!1),qe(!0),J(null),He("Downloading draft...","info");try{const ce=await $5(ne.audioStoragePath,ne.audioName,ne.audioMimeType);ce&&l(ce),g(ne.speakers),d(ne.analysisResult),o(ne.detectionMode),E(ne.manualSpeakerCount),ce?(e("visualizer"),He("Draft loaded successfully!","success")):(e("upload"),xe(ne.audioName),He("Draft loaded. Please select your audio file to continue.","info"))}catch(ce){console.error("Failed to load draft",ce),J("Failed to download draft data."),He("Failed to load draft.","error"),e("upload")}finally{qe(!1)}},Vo=ne=>{if(N){const ce=URL.createObjectURL(ne);g(fe=>fe.map(oe=>oe.id===N?U==="active"?{...oe,activeImageUrl:ce}:{...oe,imageUrl:ce}:oe)),He("Image saved!","success")}x(null),P(null)},Pi=async(ne,ce)=>await sD(ne,ce),Ei=async ne=>await aD(ne),Pn=(ne,ce)=>{g(fe=>fe.map(oe=>oe.id===ne?{...oe,name:ce}:oe))},pe=(ne,ce)=>{g(fe=>fe.map(oe=>oe.id===ne?{...oe,color:ce}:oe))},Ae=()=>{const ne={metadata:{exportedAt:new Date().toISOString(),version:"1.0",mode:t},speakers:h.map(Ne=>({id:Ne.id,name:Ne.name,color:Ne.color,triggerKey:Ne.triggerKey,rotation:Ne.rotation})),segments:(u==null?void 0:u.segments)||[]},ce=new Blob([JSON.stringify(ne,null,2)],{type:"application/json"}),fe=URL.createObjectURL(ce),oe=document.createElement("a");oe.href=fe,oe.download=`fajmuls-voice-${t}-${new Date().getTime()}.json`,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(fe),He("Exported JSON.","success")},we=ne=>{if(t==="manual"||!u)return;const ce=u.segments.filter(oe=>ne>=oe.start&&ne<=oe.end),fe=Array.from(new Set(ce.map(oe=>oe.speaker)));Y(oe=>{if(oe.length!==fe.length)return fe;const Ne=[...oe].sort(),It=[...fe].sort();return Ne.every((Ft,on)=>Ft===It[on])?oe:fe})},Ge=()=>{l(null),d(null),g([]),Y([]),L(new Set),e("upload"),w(""),J(null),me(!1),D(!1),xe(null)};return R.jsxs("div",{className:"h-screen flex flex-col overflow-hidden relative transition-colors duration-500",children:[R.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-[200] flex flex-col gap-2 pointer-events-none",children:Pe.map(ne=>R.jsx(X5,{toast:ne,onClose:()=>gt(ne.id)},ne.id))}),R.jsx(Q5,{isOpen:je,onClose:()=>F(!1),settings:X,onUpdateSettings:le}),n==="upload"&&R.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative",children:[R.jsx("div",{className:"absolute top-6 right-6 z-10",children:R.jsx("button",{onClick:()=>F(!0),className:"p-3 rounded-full bg-gray-900 border border-gray-700 hover:border-primary-500 hover:text-primary-400 transition-all text-gray-400",title:"Settings",children:R.jsx(c4,{size:20})})}),R.jsxs("div",{className:"max-w-xl w-full text-center space-y-8",children:[R.jsxs("div",{className:"space-y-2",children:[R.jsx("h1",{className:"text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary-400 to-neon-purple animate-pulse",children:"Fajmuls Voice"}),R.jsx("p",{className:"text-gray-400",children:"Deep AI Audio Diarization & Visualization"})]}),ve?R.jsxs("div",{className:"py-20 flex flex-col items-center",children:[R.jsx(Yl,{size:48,className:"text-neon-blue animate-spin mb-4"}),R.jsx("p",{className:"text-white",children:"Downloading metadata from Cloud..."})]}):R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"relative group cursor-pointer",children:[R.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary-600 to-neon-blue rounded-2xl blur opacity-25 group-hover:opacity-75 transition duration-1000 group-hover:duration-200"}),R.jsxs("div",{className:`relative p-10 bg-gray-900 ring-1 ring-gray-800 rounded-2xl leading-none flex flex-col items-center justify-center space-y-6 ${de?"ring-neon-blue ring-2":""}`,children:[R.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-800 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:R.jsx(CD,{size:40,className:de?"text-neon-blue animate-bounce":"text-primary-400"})}),R.jsxs("div",{className:"space-y-1",children:[R.jsx("p",{className:"text-xl font-medium text-gray-200",children:de?"Select Local Audio File":"Select Audio File"}),R.jsx("p",{className:"text-sm text-gray-500",children:de?`Please select "${de}" to restore your session`:"MP3, WAV, OGG supported"})]}),R.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"audio/*",onChange:Dn})]})]}),!de&&R.jsx("div",{className:"flex justify-center gap-4",children:R.jsxs("button",{onClick:()=>{if(!up()){He("Firebase not connected.","error");return}Qe(!0)},className:"flex items-center gap-2 px-6 py-3 rounded-full border border-gray-700 hover:border-neon-blue bg-gray-900 hover:bg-gray-800 text-gray-400 hover:text-white transition-all text-sm font-medium",children:[R.jsx(ff,{size:16}),"Load Cloud Draft"]})})]}),Q&&R.jsx("div",{className:"text-red-400 text-sm mt-4",children:Q})]}),R.jsx(Y5,{isOpen:Ie,onClose:()=>Qe(!1),onSelectDraft:Po})]}),n==="setup"&&R.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:R.jsxs("div",{className:"max-w-2xl w-full space-y-8 bg-gray-900/50 p-8 rounded-2xl border border-gray-800 backdrop-blur-xl",children:[R.jsxs("div",{className:"text-center space-y-2",children:[R.jsx("h2",{className:"text-3xl font-bold text-white",children:"Analysis Configuration"}),R.jsxs("p",{className:"text-gray-400",children:['How would you like to process "',s==null?void 0:s.name,'"?']})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[R.jsxs("div",{onClick:()=>o("auto"),className:`p-6 rounded-xl border-2 cursor-pointer transition-all relative overflow-hidden ${t==="auto"?"border-primary-500 bg-primary-500/10":"border-gray-700 hover:border-gray-600"}`,children:[R.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[R.jsx(cm,{className:"text-neon-blue",size:24}),R.jsx("h3",{className:"text-xl font-bold text-white",children:"AI Deep Detect"})]}),R.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Uses Gemini 2.0 Thinking model to deeply analyze simultaneous speech. Best for precision."}),t==="auto"&&R.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/50 animate-in fade-in slide-in-from-top-2",children:[R.jsxs("label",{className:"text-sm text-gray-300 block mb-2 flex items-center gap-2",children:[R.jsx(Rp,{size:14}),"How many speakers? ",R.jsx("span",{className:"text-gray-500 text-xs",children:"(Optional)"})]}),R.jsx("input",{type:"number",min:"1",max:"20",placeholder:"Auto-detect if empty",value:S,onChange:ne=>w(ne.target.value===""?"":parseInt(ne.target.value)),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-primary-500",onClick:ne=>ne.stopPropagation()}),R.jsx("p",{className:"text-xs text-primary-400/80 mt-1",children:"*Specifying exact count greatly improves AI accuracy."})]})]}),R.jsxs("div",{onClick:()=>o("manual"),className:`p-6 rounded-xl border-2 cursor-pointer transition-all relative overflow-hidden ${t==="manual"?"border-neon-purple bg-neon-purple/10":"border-gray-700 hover:border-gray-600"}`,children:[R.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[R.jsx(xS,{className:"text-neon-purple",size:24}),R.jsx("h3",{className:"text-xl font-bold text-white",children:"Manual Control"})]}),R.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Manually control speaker lights using keyboard keys (1, 2, 3...) while listening. Best for live control."}),t==="manual"&&R.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/50 animate-in fade-in slide-in-from-top-2",children:[R.jsxs("label",{className:"text-sm text-gray-300 block mb-2 flex items-center gap-2",children:[R.jsx(Rp,{size:14}),"Number of Speakers:"]}),R.jsx("input",{type:"number",min:"1",max:"9",value:_,onChange:ne=>E(parseInt(ne.target.value)),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-neon-purple",onClick:ne=>ne.stopPropagation()})]})]})]}),R.jsxs("div",{className:"flex justify-between pt-4",children:[R.jsx("button",{onClick:Ge,className:"text-gray-500 hover:text-white transition-colors",children:"Cancel"}),R.jsx("button",{onClick:Gn,className:"bg-white text-black px-8 py-3 rounded-full font-bold hover:bg-gray-200 transition-colors flex items-center gap-2",children:t==="auto"?"Start AI Analysis":"Start Manual Session"})]}),Q&&R.jsx("div",{className:"text-red-400 text-center text-sm",children:Q})]})}),n==="analyzing"&&R.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 space-y-8",children:[R.jsxs("div",{className:"relative w-32 h-32",children:[R.jsx("div",{className:"absolute inset-0 border-4 border-primary-500/30 rounded-full animate-ping"}),R.jsx("div",{className:"absolute inset-0 border-4 border-t-neon-blue border-r-neon-purple border-b-primary-500 border-l-transparent rounded-full animate-spin"}),R.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:R.jsx(pD,{size:48,className:"text-white animate-pulse"})})]}),R.jsxs("div",{className:"text-center space-y-4 max-w-lg",children:[R.jsx("h2",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-neon-blue to-neon-purple",children:"Deep AI Researching..."}),R.jsxs("div",{className:"space-y-2",children:[R.jsx("div",{className:"h-1 w-full bg-gray-800 rounded-full overflow-hidden",children:R.jsx("div",{className:"h-full bg-primary-500 w-1/2 animate-[pulse_1s_ease-in-out_infinite]"})}),R.jsx("p",{className:"text-gray-400 text-sm",children:"Analyzing acoustic patterns, separating overlapping voices, and verifying speaker identities."})]})]})]}),n==="visualizer"&&R.jsxs(R.Fragment,{children:[!te&&R.jsxs("header",{className:"px-6 py-4 flex items-center justify-between bg-gray-900/50 backdrop-blur border-b border-gray-800 z-50",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-2 h-8 bg-primary-500 rounded-full"}),R.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white",children:["Fajmuls Voice ",R.jsxs("span",{className:"text-xs text-gray-500 font-normal ml-2 border border-gray-800 px-2 py-0.5 rounded uppercase",children:[t," MODE"]})]})]}),R.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[R.jsxs("button",{onClick:oi,disabled:ee,className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-gray-800 transition-colors text-xs font-medium border border-gray-800 text-neon-green border-neon-green/20 hover:bg-neon-green/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[ee?R.jsx(Yl,{size:14,className:"animate-spin"}):R.jsx(ff,{size:14}),ee?"Saving...":"Save to Cloud"]}),R.jsxs("button",{onClick:()=>me(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-gray-800 transition-colors text-xs font-medium border border-gray-800 text-neon-blue border-neon-blue/20 hover:bg-neon-blue/10",children:[R.jsx(NS,{size:14}),"Play Mode"]}),R.jsxs("button",{onClick:Ae,className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-gray-800 transition-colors text-xs font-medium border border-gray-800",children:[R.jsx(RD,{size:14}),"Export Data"]}),R.jsx("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-gray-800 transition-colors text-xs font-medium border border-gray-800 text-gray-300",title:"Settings",children:R.jsx(h4,{size:14})}),R.jsx("span",{className:"w-px h-4 bg-gray-700"}),R.jsxs("span",{className:"flex items-center gap-2",children:[R.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),h.length," Speakers"]})]})]}),R.jsx("main",{className:`flex-1 relative overflow-hidden transition-all duration-500 ${W?"bg-black":""}`,children:R.jsx(N4,{speakers:h,activeSpeakerIds:V,onUpdateImage:Hn,onDeleteImages:mn,onEditExistingImage:Ti,onUpdateName:Pn,onUpdateColor:pe,onRotateSpeaker:ii,isManualMode:t==="manual",isPlayMode:te,isCinemaMode:W})}),s&&R.jsx(M4,{file:s,onTimeUpdate:we,onReset:Ge,isPlayMode:te,onTogglePlayMode:()=>{me(!te),te&&D(!1)},isCinemaMode:W,onToggleCinemaMode:()=>D(!W)})]}),N&&q&&R.jsx(D4,{isOpen:!0,imageSource:q,onClose:()=>{x(null),P(null)},onSave:Vo,onAiEdit:Pi,onDetectFaces:Ei})]})},KC=document.getElementById("root");if(!KC)throw new Error("Could not find root element to mount to");const Z5=Pw.createRoot(KC);Z5.render(R.jsx(ww.StrictMode,{children:R.jsx(W5,{})}));
