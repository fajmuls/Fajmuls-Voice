(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function PE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hh={exports:{}},Nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function Aw(){if(vv)return Nl;vv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(o,s,l){var u=null;if(l!==void 0&&(u=""+l),s.key!==void 0&&(u=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:o,key:u,ref:s!==void 0?s:null,props:l}}return Nl.Fragment=e,Nl.jsx=t,Nl.jsxs=t,Nl}var _v;function Cw(){return _v||(_v=1,Hh.exports=Aw()),Hh.exports}var w=Cw(),$h={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function ww(){if(Tv)return Fe;Tv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function R(F){return F===null||typeof F!="object"?null:(F=S&&F[S]||F["@@iterator"],typeof F=="function"?F:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,x={};function G(F,X,le){this.props=F,this.context=X,this.refs=x,this.updater=le||V}G.prototype.isReactComponent={},G.prototype.setState=function(F,X){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,X,"setState")},G.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Z(){}Z.prototype=G.prototype;function K(F,X,le){this.props=F,this.context=X,this.refs=x,this.updater=le||V}var te=K.prototype=new Z;te.constructor=K,O(te,G.prototype),te.isPureReactComponent=!0;var he=Array.isArray;function $(){}var D={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function N(F,X,le){var fe=le.ref;return{$$typeof:n,type:F,key:X,ref:fe!==void 0?fe:null,props:le}}function k(F,X){return N(F.type,X,F.props)}function L(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function q(F){var X={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(le){return X[le]})}var P=/\/+/g;function Ie(F,X){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):X.toString(36)}function Xe(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then($,$):(F.status="pending",F.then(function(X){F.status==="pending"&&(F.status="fulfilled",F.value=X)},function(X){F.status==="pending"&&(F.status="rejected",F.reason=X)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function ee(F,X,le,fe,Ne){var Ve=typeof F;(Ve==="undefined"||Ve==="boolean")&&(F=null);var ke=!1;if(F===null)ke=!0;else switch(Ve){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(F.$$typeof){case n:case e:ke=!0;break;case _:return ke=F._init,ee(ke(F._payload),X,le,fe,Ne)}}if(ke)return Ne=Ne(F),ke=fe===""?"."+Ie(F,0):fe,he(Ne)?(le="",ke!=null&&(le=ke.replace(P,"$&/")+"/"),ee(Ne,X,le,"",function(Dn){return Dn})):Ne!=null&&(L(Ne)&&(Ne=k(Ne,le+(Ne.key==null||F&&F.key===Ne.key?"":(""+Ne.key).replace(P,"$&/")+"/")+ke)),X.push(Ne)),1;ke=0;var He=fe===""?".":fe+":";if(he(F))for(var yt=0;yt<F.length;yt++)fe=F[yt],Ve=He+Ie(fe,yt),ke+=ee(fe,X,le,Ve,Ne);else if(yt=R(F),typeof yt=="function")for(F=yt.call(F),yt=0;!(fe=F.next()).done;)fe=fe.value,Ve=He+Ie(fe,yt++),ke+=ee(fe,X,le,Ve,Ne);else if(Ve==="object"){if(typeof F.then=="function")return ee(Xe(F),X,le,fe,Ne);throw X=String(F),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ke}function de(F,X,le){if(F==null)return F;var fe=[],Ne=0;return ee(F,fe,"","",function(Ve){return X.call(le,Ve,Ne++)}),fe}function ve(F){if(F._status===-1){var X=F._result;X=X(),X.then(function(le){(F._status===0||F._status===-1)&&(F._status=1,F._result=le)},function(le){(F._status===0||F._status===-1)&&(F._status=2,F._result=le)}),F._status===-1&&(F._status=0,F._result=X)}if(F._status===1)return F._result.default;throw F._result}var ze=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},et={map:de,forEach:function(F,X,le){de(F,function(){X.apply(this,arguments)},le)},count:function(F){var X=0;return de(F,function(){X++}),X},toArray:function(F){return de(F,function(X){return X})||[]},only:function(F){if(!L(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Fe.Activity=E,Fe.Children=et,Fe.Component=G,Fe.Fragment=t,Fe.Profiler=s,Fe.PureComponent=K,Fe.StrictMode=o,Fe.Suspense=h,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(F){return D.H.useMemoCache(F)}},Fe.cache=function(F){return function(){return F.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(F,X,le){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var fe=O({},F.props),Ne=F.key;if(X!=null)for(Ve in X.key!==void 0&&(Ne=""+X.key),X)!M.call(X,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&X.ref===void 0||(fe[Ve]=X[Ve]);var Ve=arguments.length-2;if(Ve===1)fe.children=le;else if(1<Ve){for(var ke=Array(Ve),He=0;He<Ve;He++)ke[He]=arguments[He+2];fe.children=ke}return N(F.type,Ne,fe)},Fe.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},Fe.createElement=function(F,X,le){var fe,Ne={},Ve=null;if(X!=null)for(fe in X.key!==void 0&&(Ve=""+X.key),X)M.call(X,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Ne[fe]=X[fe]);var ke=arguments.length-2;if(ke===1)Ne.children=le;else if(1<ke){for(var He=Array(ke),yt=0;yt<ke;yt++)He[yt]=arguments[yt+2];Ne.children=He}if(F&&F.defaultProps)for(fe in ke=F.defaultProps,ke)Ne[fe]===void 0&&(Ne[fe]=ke[fe]);return N(F,Ve,Ne)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(F){return{$$typeof:d,render:F}},Fe.isValidElement=L,Fe.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:ve}},Fe.memo=function(F,X){return{$$typeof:g,type:F,compare:X===void 0?null:X}},Fe.startTransition=function(F){var X=D.T,le={};D.T=le;try{var fe=F(),Ne=D.S;Ne!==null&&Ne(le,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then($,ze)}catch(Ve){ze(Ve)}finally{X!==null&&le.types!==null&&(X.types=le.types),D.T=X}},Fe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Fe.use=function(F){return D.H.use(F)},Fe.useActionState=function(F,X,le){return D.H.useActionState(F,X,le)},Fe.useCallback=function(F,X){return D.H.useCallback(F,X)},Fe.useContext=function(F){return D.H.useContext(F)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(F,X){return D.H.useDeferredValue(F,X)},Fe.useEffect=function(F,X){return D.H.useEffect(F,X)},Fe.useEffectEvent=function(F){return D.H.useEffectEvent(F)},Fe.useId=function(){return D.H.useId()},Fe.useImperativeHandle=function(F,X,le){return D.H.useImperativeHandle(F,X,le)},Fe.useInsertionEffect=function(F,X){return D.H.useInsertionEffect(F,X)},Fe.useLayoutEffect=function(F,X){return D.H.useLayoutEffect(F,X)},Fe.useMemo=function(F,X){return D.H.useMemo(F,X)},Fe.useOptimistic=function(F,X){return D.H.useOptimistic(F,X)},Fe.useReducer=function(F,X,le){return D.H.useReducer(F,X,le)},Fe.useRef=function(F){return D.H.useRef(F)},Fe.useState=function(F){return D.H.useState(F)},Fe.useSyncExternalStore=function(F,X,le){return D.H.useSyncExternalStore(F,X,le)},Fe.useTransition=function(){return D.H.useTransition()},Fe.version="19.2.4",Fe}var Ev;function Wp(){return Ev||(Ev=1,$h.exports=ww()),$h.exports}var _e=Wp();const Iw=PE(_e);var Yh={exports:{}},Ml={},Jh={exports:{}},Kh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function Rw(){return Sv||(Sv=1,(function(n){function e(ee,de){var ve=ee.length;ee.push(de);e:for(;0<ve;){var ze=ve-1>>>1,et=ee[ze];if(0<s(et,de))ee[ze]=de,ee[ve]=et,ve=ze;else break e}}function t(ee){return ee.length===0?null:ee[0]}function o(ee){if(ee.length===0)return null;var de=ee[0],ve=ee.pop();if(ve!==de){ee[0]=ve;e:for(var ze=0,et=ee.length,F=et>>>1;ze<F;){var X=2*(ze+1)-1,le=ee[X],fe=X+1,Ne=ee[fe];if(0>s(le,ve))fe<et&&0>s(Ne,le)?(ee[ze]=Ne,ee[fe]=ve,ze=fe):(ee[ze]=le,ee[X]=ve,ze=X);else if(fe<et&&0>s(Ne,ve))ee[ze]=Ne,ee[fe]=ve,ze=fe;else break e}}return de}function s(ee,de){var ve=ee.sortIndex-de.sortIndex;return ve!==0?ve:ee.id-de.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var h=[],g=[],_=1,E=null,S=3,R=!1,V=!1,O=!1,x=!1,G=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function te(ee){for(var de=t(g);de!==null;){if(de.callback===null)o(g);else if(de.startTime<=ee)o(g),de.sortIndex=de.expirationTime,e(h,de);else break;de=t(g)}}function he(ee){if(O=!1,te(ee),!V)if(t(h)!==null)V=!0,$||($=!0,q());else{var de=t(g);de!==null&&Xe(he,de.startTime-ee)}}var $=!1,D=-1,M=5,N=-1;function k(){return x?!0:!(n.unstable_now()-N<M)}function L(){if(x=!1,$){var ee=n.unstable_now();N=ee;var de=!0;try{e:{V=!1,O&&(O=!1,Z(D),D=-1),R=!0;var ve=S;try{t:{for(te(ee),E=t(h);E!==null&&!(E.expirationTime>ee&&k());){var ze=E.callback;if(typeof ze=="function"){E.callback=null,S=E.priorityLevel;var et=ze(E.expirationTime<=ee);if(ee=n.unstable_now(),typeof et=="function"){E.callback=et,te(ee),de=!0;break t}E===t(h)&&o(h),te(ee)}else o(h);E=t(h)}if(E!==null)de=!0;else{var F=t(g);F!==null&&Xe(he,F.startTime-ee),de=!1}}break e}finally{E=null,S=ve,R=!1}de=void 0}}finally{de?q():$=!1}}}var q;if(typeof K=="function")q=function(){K(L)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ie=P.port2;P.port1.onmessage=L,q=function(){Ie.postMessage(null)}}else q=function(){G(L,0)};function Xe(ee,de){D=G(function(){ee(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(ee){switch(S){case 1:case 2:case 3:var de=3;break;default:de=S}var ve=S;S=de;try{return ee()}finally{S=ve}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(ee,de){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ve=S;S=ee;try{return de()}finally{S=ve}},n.unstable_scheduleCallback=function(ee,de,ve){var ze=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ze+ve:ze):ve=ze,ee){case 1:var et=-1;break;case 2:et=250;break;case 5:et=1073741823;break;case 4:et=1e4;break;default:et=5e3}return et=ve+et,ee={id:_++,callback:de,priorityLevel:ee,startTime:ve,expirationTime:et,sortIndex:-1},ve>ze?(ee.sortIndex=ve,e(g,ee),t(h)===null&&ee===t(g)&&(O?(Z(D),D=-1):O=!0,Xe(he,ve-ze))):(ee.sortIndex=et,e(h,ee),V||R||(V=!0,$||($=!0,q()))),ee},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(ee){var de=S;return function(){var ve=S;S=de;try{return ee.apply(this,arguments)}finally{S=ve}}}})(Kh)),Kh}var Av;function bw(){return Av||(Av=1,Jh.exports=Rw()),Jh.exports}var Qh={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function xw(){if(Cv)return vn;Cv=1;var n=Wp();function e(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var o={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(h,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:h,containerInfo:g,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,vn.createPortal=function(h,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(h,g,null,_)},vn.flushSync=function(h){var g=u.T,_=o.p;try{if(u.T=null,o.p=2,h)return h()}finally{u.T=g,o.p=_,o.d.f()}},vn.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(h,g))},vn.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},vn.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?o.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:R}):_==="script"&&o.d.X(h,{crossOrigin:E,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},vn.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);o.d.M(h,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(h)},vn.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin);o.d.L(h,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},vn.preloadModule=function(h,g){if(typeof h=="string")if(g){var _=d(g.as,g.crossOrigin);o.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(h)},vn.requestFormReset=function(h){o.d.r(h)},vn.unstable_batchedUpdates=function(h,g){return h(g)},vn.useFormState=function(h,g,_){return u.H.useFormState(h,g,_)},vn.useFormStatus=function(){return u.H.useHostTransitionStatus()},vn.version="19.2.4",vn}var wv;function Nw(){if(wv)return Qh.exports;wv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qh.exports=xw(),Qh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function Mw(){if(Iv)return Ml;Iv=1;var n=bw(),e=Wp(),t=Nw();function o(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(l(i)!==i)throw Error(o(188))}function g(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(o(188));return r!==i?null:i}for(var a=i,c=r;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return h(y),i;if(v===c)return h(y),r;v=v.sibling}throw Error(o(188))}if(a.return!==c.return)a=y,c=v;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,c=v;break}if(I===c){A=!0,c=y,a=v;break}I=I.sibling}if(!A){for(I=v.child;I;){if(I===a){A=!0,a=v,c=y;break}if(I===c){A=!0,c=v,a=y;break}I=I.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:r}function _(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=_(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),K=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var P=Symbol.for("react.client.reference");function Ie(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===P?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case G:return"Profiler";case x:return"StrictMode";case he:return"Suspense";case $:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case V:return"Portal";case K:return i.displayName||"Context";case Z:return(i._context.displayName||"Context")+".Consumer";case te:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return r=i.displayName||null,r!==null?r:Ie(i.type)||"Memo";case M:r=i._payload,i=i._init;try{return Ie(i(r))}catch{}}return null}var Xe=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},ze=[],et=-1;function F(i){return{current:i}}function X(i){0>et||(i.current=ze[et],ze[et]=null,et--)}function le(i,r){et++,ze[et]=i.current,i.current=r}var fe=F(null),Ne=F(null),Ve=F(null),ke=F(null);function He(i,r){switch(le(Ve,r),le(Ne,i),le(fe,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?q0(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=q0(r),i=z0(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}X(fe),le(fe,i)}function yt(){X(fe),X(Ne),X(Ve)}function Dn(i){i.memoizedState!==null&&le(ke,i);var r=fe.current,a=z0(r,i.type);r!==a&&(le(Ne,i),le(fe,a))}function Gn(i){Ne.current===i&&(X(fe),X(Ne)),ke.current===i&&(X(ke),Il._currentValue=ve)}var Hn,Ti;function mn(i){if(Hn===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Hn=r&&r[1]||"",Ti=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hn+i+Ti}var ii=!1;function oi(i,r){if(!i||ii)return"";ii=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var Q=W}Reflect.construct(i,[],se)}else{try{se.call()}catch(W){Q=W}i.call(se.prototype)}}else{try{throw Error()}catch(W){Q=W}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&Q&&typeof W.stack=="string")return[W.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],I=v[1];if(A&&I){var U=A.split(`
`),J=I.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===J.length)for(c=U.length-1,y=J.length-1;1<=c&&0<=y&&U[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==J[y]){var ne=`
`+U[c].replace(" at new "," at ");return i.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",i.displayName)),ne}while(1<=c&&0<=y);break}}}finally{ii=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?mn(a):""}function Po(i,r){switch(i.tag){case 26:case 27:case 5:return mn(i.type);case 16:return mn("Lazy");case 13:return i.child!==r&&r!==null?mn("Suspense Fallback"):mn("Suspense");case 19:return mn("SuspenseList");case 0:case 15:return oi(i.type,!1);case 11:return oi(i.type.render,!1);case 1:return oi(i.type,!0);case 31:return mn("Activity");default:return""}}function Vo(i){try{var r="",a=null;do r+=Po(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Pi=Object.prototype.hasOwnProperty,Ei=n.unstable_scheduleCallback,Pn=n.unstable_cancelCallback,me=n.unstable_shouldYield,Ae=n.unstable_requestPaint,we=n.unstable_now,$e=n.unstable_getCurrentPriorityLevel,Me=n.unstable_ImmediatePriority,ie=n.unstable_UserBlockingPriority,ce=n.unstable_NormalPriority,pe=n.unstable_LowPriority,re=n.unstable_IdlePriority,Re=n.log,wt=n.unstable_setDisableYieldValue,Bt=null,It=null;function ft(i){if(typeof Re=="function"&&wt(i),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(Bt,i)}catch{}}var Qt=Math.clz32?Math.clz32:Lr,Ur=Math.log,ko=Math.LN2;function Lr(i){return i>>>=0,i===0?32:31-(Ur(i)/ko|0)|0}var Vi=256,$n=262144,Yn=4194304;function Vn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function An(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,v=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=c&134217727;return I!==0?(c=I&~v,c!==0?y=Vn(c):(A&=I,A!==0?y=Vn(A):a||(a=I&~i,a!==0&&(y=Vn(a))))):(I=c&~v,I!==0?y=Vn(I):A!==0?y=Vn(A):a||(a=c&~i,a!==0&&(y=Vn(a)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,a=r&-r,v>=a||v===32&&(a&4194048)!==0)?r:y}function Si(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function eo(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(){var i=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),i}function sn(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function gn(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function vt(i,r,a,c,y,v){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,U=i.expirationTimes,J=i.hiddenUpdates;for(a=A&~a;0<a;){var ne=31-Qt(a),se=1<<ne;I[ne]=0,U[ne]=-1;var Q=J[ne];if(Q!==null)for(J[ne]=null,ne=0;ne<Q.length;ne++){var W=Q[ne];W!==null&&(W.lane&=-536870913)}a&=~se}c!==0&&Pa(i,c,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(A&~r))}function Pa(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-Qt(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function Uo(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-Qt(a),y=1<<c;y&r|i[c]&r&&(i[c]|=r),a&=~y}}function Lo(i,r){var a=r&-r;return a=(a&42)!==0?1:Va(a),(a&(i.suspendedLanes|r))!==0?0:a}function Va(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ka(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function to(){var i=de.p;return i!==0?i:(i=window.event,i===void 0?32:fv(i.type))}function cu(i,r){var a=de.p;try{return de.p=i,r()}finally{de.p=a}}var ki=Math.random().toString(36).slice(2),xt="__reactFiber$"+ki,an="__reactProps$"+ki,Ui="__reactContainer$"+ki,Oo="__reactEvents$"+ki,Li="__reactListeners$"+ki,fu="__reactHandles$"+ki,Ua="__reactResources$"+ki,no="__reactMarker$"+ki;function Or(i){delete i[xt],delete i[an],delete i[Oo],delete i[Li],delete i[fu]}function io(i){var r=i[xt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[Ui]||a[xt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=Q0(i);i!==null;){if(a=i[xt])return a;i=Q0(i)}return r}i=a,a=i.parentNode}return null}function oo(i){if(i=i[xt]||i[Ui]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Fr(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(o(33))}function Ai(i){var r=i[Ua];return r||(r=i[Ua]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ut(i){i[no]=!0}var As=new Set,Fo={};function Cn(i,r){Oi(i,r),Oi(i+"Capture",r)}function Oi(i,r){for(Fo[i]=r,i=0;i<r.length;i++)As.add(r[i])}var $f=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),La={},Oa={};function du(i){return Pi.call(Oa,i)?!0:Pi.call(La,i)?!1:$f.test(i)?Oa[i]=!0:(La[i]=!0,!1)}function Bo(i,r,a){if(du(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function qo(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function si(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function wn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function hu(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Yf(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Cs(i){if(!i._valueTracker){var r=hu(i)?"checked":"value";i._valueTracker=Yf(i,r,""+i[r])}}function Fa(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=hu(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function ws(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ro=/[\n"\\]/g;function Nt(i){return i.replace(ro,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function zo(i,r,a,c,y,v,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),r!=null?A==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+wn(r)):i.value!==""+wn(r)&&(i.value=""+wn(r)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),r!=null?Is(i,A,wn(r)):a!=null?Is(i,A,wn(a)):c!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+wn(I):i.removeAttribute("name")}function Br(i,r,a,c,y,v,A,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){Cs(i);return}a=a!=null?""+wn(a):"",r=r!=null?""+wn(r):a,I||r===i.value||(i.value=r),i.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=I?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Cs(i)}function Is(i,r,a){r==="number"&&ws(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function ot(i,r,a,c){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+wn(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function qr(i,r,a){if(r!=null&&(r=""+wn(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+wn(a):""}function Go(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(o(92));if(Xe(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=wn(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),Cs(i)}function ai(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ba(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||Jf.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function pu(i,r,a){if(r!=null&&typeof r!="object")throw Error(o(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&Ba(i,y,c)}else for(var v in r)r.hasOwnProperty(v)&&Ba(i,v,r[v])}function qa(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fi(i){return Qf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Zt(){}var Rs=null;function bs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var so=null,Jn=null;function mu(i){var r=oo(i);if(r&&(i=r.stateNode)){var a=i[an]||null;e:switch(i=r.stateNode,r.type){case"input":if(zo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var y=c[an]||null;if(!y)throw Error(o(90));zo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&Fa(c)}break e;case"textarea":qr(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ot(i,!!a.multiple,r,!1)}}}var za=!1;function gu(i,r,a){if(za)return i(r,a);za=!0;try{var c=i(r);return c}finally{if(za=!1,(so!==null||Jn!==null)&&(dc(),so&&(r=so,i=Jn,Jn=so=null,mu(r),i)))for(r=0;r<i.length;r++)mu(i[r])}}function kn(i,r){var a=i.stateNode;if(a===null)return null;var c=a[an]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,r,typeof a));return a}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(Ci)try{var Bi={};Object.defineProperty(Bi,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",Bi,Bi),window.removeEventListener("test",Bi,Bi)}catch{Ga=!1}var Kn=null,xs=null,qi=null;function Ho(){if(qi)return qi;var i,r=xs,a=r.length,c,y="value"in Kn?Kn.value:Kn.textContent,v=y.length;for(i=0;i<a&&r[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&r[a-c]===y[v-c];c++);return qi=y.slice(i,1<c?1-c:void 0)}function zr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function $o(){return!0}function St(){return!1}function yn(i){function r(a,c,y,v,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?$o:St,this.isPropagationStopped=St,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$o)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$o)},persist:function(){},isPersistent:$o}),r}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gr=yn(ao),Yo=E({},ao,{view:0,detail:0}),yu=yn(Yo),Jo,Ns,In,Hr=E({},Yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==In&&(In&&i.type==="mousemove"?(Jo=i.screenX-In.screenX,Ns=i.screenY-In.screenY):Ns=Jo=0,In=i),Jo)},movementY:function(i){return"movementY"in i?i.movementY:Ns}}),vu=yn(Hr),$r=E({},Hr,{dataTransfer:0}),_u=yn($r),Ha=E({},Yo,{relatedTarget:0}),Ko=yn(Ha),Tu=E({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),Ms=yn(Tu),Xf=E({},ao,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Eu=yn(Xf),Yr=E({},ao,{data:0}),$a=yn(Yr),Su={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ya={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ja={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Au(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Ja[i])?!!r[i]:!1}function Qo(){return Au}var Cu=E({},Yo,{key:function(i){if(i.key){var r=Su[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=zr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ya[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qo,charCode:function(i){return i.type==="keypress"?zr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?zr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wu=yn(Cu),lo=E({},Hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ka=yn(lo),Iu=E({},Yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qo}),Ru=yn(Iu),bu=E({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ds=yn(bu),Rn=E({},Hr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),xu=yn(Rn),Nu=E({},ao,{newState:0,oldState:0}),Xo=yn(Nu),m=[9,13,27,32],T=Ci&&"CompositionEvent"in window,C=null;Ci&&"documentMode"in document&&(C=document.documentMode);var b=Ci&&"TextEvent"in window&&!C,H=Ci&&(!T||C&&8<C&&11>=C),j=" ",ge=!1;function ut(i,r){switch(i){case"keyup":return m.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ye=!1;function jt(i,r){switch(i){case"compositionend":return qt(r);case"keypress":return r.which!==32?null:(ge=!0,j);case"textInput":return i=r.data,i===j&&ge?null:i;default:return null}}function en(i,r){if(Ye)return i==="compositionend"||!T&&ut(i,r)?(i=Ho(),qi=xs=Kn=null,Ye=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return H&&r.locale!=="ko"?null:r.data;default:return null}}var Wo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Wo[i.type]:r==="textarea"}function Jr(i,r,a,c){so?Jn?Jn.push(c):Jn=[c]:so=c,r=_c(r,"onChange"),0<r.length&&(a=new Gr("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var uo=null,Qa=null;function XC(i){k0(i,0)}function Mu(i){var r=Fr(i);if(Fa(r))return i}function eg(i,r){if(i==="change")return r}var tg=!1;if(Ci){var Wf;if(Ci){var Zf="oninput"in document;if(!Zf){var ng=document.createElement("div");ng.setAttribute("oninput","return;"),Zf=typeof ng.oninput=="function"}Wf=Zf}else Wf=!1;tg=Wf&&(!document.documentMode||9<document.documentMode)}function ig(){uo&&(uo.detachEvent("onpropertychange",og),Qa=uo=null)}function og(i){if(i.propertyName==="value"&&Mu(Qa)){var r=[];Jr(r,Qa,i,bs(i)),gu(XC,r)}}function WC(i,r,a){i==="focusin"?(ig(),uo=r,Qa=a,uo.attachEvent("onpropertychange",og)):i==="focusout"&&ig()}function ZC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Mu(Qa)}function jC(i,r){if(i==="click")return Mu(r)}function e1(i,r){if(i==="input"||i==="change")return Mu(r)}function t1(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Qn=typeof Object.is=="function"?Object.is:t1;function Xa(i,r){if(Qn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!Pi.call(r,y)||!Qn(i[y],r[y]))return!1}return!0}function rg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sg(i,r){var a=rg(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=rg(a)}}function ag(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?ag(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function lg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=ws(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=ws(i.document)}return r}function jf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var n1=Ci&&"documentMode"in document&&11>=document.documentMode,Ps=null,ed=null,Wa=null,td=!1;function ug(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;td||Ps==null||Ps!==ws(c)||(c=Ps,"selectionStart"in c&&jf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Wa&&Xa(Wa,c)||(Wa=c,c=_c(ed,"onSelect"),0<c.length&&(r=new Gr("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=Ps)))}function Kr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Vs={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},nd={},cg={};Ci&&(cg=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function Qr(i){if(nd[i])return nd[i];if(!Vs[i])return i;var r=Vs[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in cg)return nd[i]=r[a];return i}var fg=Qr("animationend"),dg=Qr("animationiteration"),hg=Qr("animationstart"),i1=Qr("transitionrun"),o1=Qr("transitionstart"),r1=Qr("transitioncancel"),pg=Qr("transitionend"),mg=new Map,id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");id.push("scrollEnd");function wi(i,r){mg.set(i,r),Cn(r,[i])}var Du=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},li=[],ks=0,od=0;function Pu(){for(var i=ks,r=od=ks=0;r<i;){var a=li[r];li[r++]=null;var c=li[r];li[r++]=null;var y=li[r];li[r++]=null;var v=li[r];if(li[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&gg(a,y,v)}}function Vu(i,r,a,c){li[ks++]=i,li[ks++]=r,li[ks++]=a,li[ks++]=c,od|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function rd(i,r,a,c){return Vu(i,r,a,c),ku(i)}function Xr(i,r){return Vu(i,null,null,r),ku(i)}function gg(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&r!==null&&(y=31-Qt(a),i=v.hiddenUpdates,c=i[y],c===null?i[y]=[r]:c.push(r),r.lane=a|536870912),v):null}function ku(i){if(50<_l)throw _l=0,ph=null,Error(o(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Us={};function s1(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(i,r,a,c){return new s1(i,r,a,c)}function sd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function co(i,r){var a=i.alternate;return a===null?(a=Xn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function yg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Uu(i,r,a,c,y,v){var A=0;if(c=i,typeof i=="function")sd(i)&&(A=1);else if(typeof i=="string")A=fw(i,a,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Xn(31,a,r,y),i.elementType=N,i.lanes=v,i;case O:return Wr(a.children,y,v,r);case x:A=8,y|=24;break;case G:return i=Xn(12,a,r,y|2),i.elementType=G,i.lanes=v,i;case he:return i=Xn(13,a,r,y),i.elementType=he,i.lanes=v,i;case $:return i=Xn(19,a,r,y),i.elementType=$,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case K:A=10;break e;case Z:A=9;break e;case te:A=11;break e;case D:A=14;break e;case M:A=16,c=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),c=null}return r=Xn(A,a,r,y),r.elementType=i,r.type=c,r.lanes=v,r}function Wr(i,r,a,c){return i=Xn(7,i,c,r),i.lanes=a,i}function ad(i,r,a){return i=Xn(6,i,null,r),i.lanes=a,i}function vg(i){var r=Xn(18,null,null,0);return r.stateNode=i,r}function ld(i,r,a){return r=Xn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var _g=new WeakMap;function ui(i,r){if(typeof i=="object"&&i!==null){var a=_g.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Vo(r)},_g.set(i,r),r)}return{value:i,source:r,stack:Vo(r)}}var Ls=[],Os=0,Lu=null,Za=0,ci=[],fi=0,Zo=null,zi=1,Gi="";function fo(i,r){Ls[Os++]=Za,Ls[Os++]=Lu,Lu=i,Za=r}function Tg(i,r,a){ci[fi++]=zi,ci[fi++]=Gi,ci[fi++]=Zo,Zo=i;var c=zi;i=Gi;var y=32-Qt(c)-1;c&=~(1<<y),a+=1;var v=32-Qt(r)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,zi=1<<32-Qt(r)+y|a<<y|c,Gi=v+i}else zi=1<<v|a<<y|c,Gi=i}function ud(i){i.return!==null&&(fo(i,1),Tg(i,1,0))}function cd(i){for(;i===Lu;)Lu=Ls[--Os],Ls[Os]=null,Za=Ls[--Os],Ls[Os]=null;for(;i===Zo;)Zo=ci[--fi],ci[fi]=null,Gi=ci[--fi],ci[fi]=null,zi=ci[--fi],ci[fi]=null}function Eg(i,r){ci[fi++]=zi,ci[fi++]=Gi,ci[fi++]=Zo,zi=r.id,Gi=r.overflow,Zo=i}var ln=null,At=null,tt=!1,jo=null,di=!1,fd=Error(o(519));function er(i){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ja(ui(r,i)),fd}function Sg(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[xt]=i,r[an]=c,a){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(a=0;a<El.length;a++)Qe(El[a],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Qe("invalid",r),Br(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Qe("invalid",r);break;case"textarea":Qe("invalid",r),Go(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||F0(r.textContent,a)?(c.popover!=null&&(Qe("beforetoggle",r),Qe("toggle",r)),c.onScroll!=null&&Qe("scroll",r),c.onScrollEnd!=null&&Qe("scrollend",r),c.onClick!=null&&(r.onclick=Zt),r=!0):r=!1,r||er(i,!0)}function Ag(i){for(ln=i.return;ln;)switch(ln.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:ln=ln.return}}function Fs(i){if(i!==ln)return!1;if(!tt)return Ag(i),tt=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||xh(i.type,i.memoizedProps)),a=!a),a&&At&&er(i),Ag(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));At=K0(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));At=K0(i)}else r===27?(r=At,pr(i.type)?(i=Vh,Vh=null,At=i):At=r):At=ln?pi(i.stateNode.nextSibling):null;return!0}function Zr(){At=ln=null,tt=!1}function dd(){var i=jo;return i!==null&&(Bn===null?Bn=i:Bn.push.apply(Bn,i),jo=null),i}function ja(i){jo===null?jo=[i]:jo.push(i)}var hd=F(null),jr=null,ho=null;function tr(i,r,a){le(hd,r._currentValue),r._currentValue=a}function po(i){i._currentValue=hd.current,X(hd)}function pd(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function md(i,r,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=y;for(var U=0;U<r.length;U++)if(I.context===r[U]){v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),pd(v.return,a,i),c||(A=null);break e}v=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(o(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),pd(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Bs(i,r,a,c){i=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var I=y.type;Qn(y.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(y===ke.current){if(A=y.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Il):i=[Il])}y=y.return}i!==null&&md(r,i,a,c),r.flags|=262144}function Ou(i){for(i=i.firstContext;i!==null;){if(!Qn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function es(i){jr=i,ho=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function un(i){return Cg(jr,i)}function Fu(i,r){return jr===null&&es(i),Cg(i,r)}function Cg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ho===null){if(i===null)throw Error(o(308));ho=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ho=ho.next=r;return a}var a1=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},l1=n.unstable_scheduleCallback,u1=n.unstable_NormalPriority,zt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gd(){return{controller:new a1,data:new Map,refCount:0}}function el(i){i.refCount--,i.refCount===0&&l1(u1,function(){i.controller.abort()})}var tl=null,yd=0,qs=0,zs=null;function c1(i,r){if(tl===null){var a=tl=[];yd=0,qs=Th(),zs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return yd++,r.then(wg,wg),r}function wg(){if(--yd===0&&tl!==null){zs!==null&&(zs.status="fulfilled");var i=tl;tl=null,qs=0,zs=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function f1(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Ig=ee.S;ee.S=function(i,r){u0=we(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&c1(i,r),Ig!==null&&Ig(i,r)};var ts=F(null);function vd(){var i=ts.current;return i!==null?i:_t.pooledCache}function Bu(i,r){r===null?le(ts,ts.current):le(ts,r.pool)}function Rg(){var i=vd();return i===null?null:{parent:zt._currentValue,pool:i}}var Gs=Error(o(460)),_d=Error(o(474)),qu=Error(o(542)),zu={then:function(){}};function bg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function xg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Zt,Zt),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Mg(i),i;default:if(typeof r.status=="string")r.then(Zt,Zt);else{if(i=_t,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Mg(i),i}throw is=r,Gs}}function ns(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(is=a,Gs):a}}var is=null;function Ng(){if(is===null)throw Error(o(459));var i=is;return is=null,i}function Mg(i){if(i===Gs||i===qu)throw Error(o(483))}var Hs=null,nl=0;function Gu(i){var r=nl;return nl+=1,Hs===null&&(Hs=[]),xg(Hs,i,r)}function il(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Hu(i,r){throw r.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(r),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Dg(i){function r(z,B){if(i){var Y=z.deletions;Y===null?(z.deletions=[B],z.flags|=16):Y.push(B)}}function a(z,B){if(!i)return null;for(;B!==null;)r(z,B),B=B.sibling;return null}function c(z){for(var B=new Map;z!==null;)z.key!==null?B.set(z.key,z):B.set(z.index,z),z=z.sibling;return B}function y(z,B){return z=co(z,B),z.index=0,z.sibling=null,z}function v(z,B,Y){return z.index=Y,i?(Y=z.alternate,Y!==null?(Y=Y.index,Y<B?(z.flags|=67108866,B):Y):(z.flags|=67108866,B)):(z.flags|=1048576,B)}function A(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function I(z,B,Y,oe){return B===null||B.tag!==6?(B=ad(Y,z.mode,oe),B.return=z,B):(B=y(B,Y),B.return=z,B)}function U(z,B,Y,oe){var be=Y.type;return be===O?ne(z,B,Y.props.children,oe,Y.key):B!==null&&(B.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===M&&ns(be)===B.type)?(B=y(B,Y.props),il(B,Y),B.return=z,B):(B=Uu(Y.type,Y.key,Y.props,null,z.mode,oe),il(B,Y),B.return=z,B)}function J(z,B,Y,oe){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=ld(Y,z.mode,oe),B.return=z,B):(B=y(B,Y.children||[]),B.return=z,B)}function ne(z,B,Y,oe,be){return B===null||B.tag!==7?(B=Wr(Y,z.mode,oe,be),B.return=z,B):(B=y(B,Y),B.return=z,B)}function se(z,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=ad(""+B,z.mode,Y),B.return=z,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case R:return Y=Uu(B.type,B.key,B.props,null,z.mode,Y),il(Y,B),Y.return=z,Y;case V:return B=ld(B,z.mode,Y),B.return=z,B;case M:return B=ns(B),se(z,B,Y)}if(Xe(B)||q(B))return B=Wr(B,z.mode,Y,null),B.return=z,B;if(typeof B.then=="function")return se(z,Gu(B),Y);if(B.$$typeof===K)return se(z,Fu(z,B),Y);Hu(z,B)}return null}function Q(z,B,Y,oe){var be=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return be!==null?null:I(z,B,""+Y,oe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case R:return Y.key===be?U(z,B,Y,oe):null;case V:return Y.key===be?J(z,B,Y,oe):null;case M:return Y=ns(Y),Q(z,B,Y,oe)}if(Xe(Y)||q(Y))return be!==null?null:ne(z,B,Y,oe,null);if(typeof Y.then=="function")return Q(z,B,Gu(Y),oe);if(Y.$$typeof===K)return Q(z,B,Fu(z,Y),oe);Hu(z,Y)}return null}function W(z,B,Y,oe,be){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return z=z.get(Y)||null,I(B,z,""+oe,be);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case R:return z=z.get(oe.key===null?Y:oe.key)||null,U(B,z,oe,be);case V:return z=z.get(oe.key===null?Y:oe.key)||null,J(B,z,oe,be);case M:return oe=ns(oe),W(z,B,Y,oe,be)}if(Xe(oe)||q(oe))return z=z.get(Y)||null,ne(B,z,oe,be,null);if(typeof oe.then=="function")return W(z,B,Y,Gu(oe),be);if(oe.$$typeof===K)return W(z,B,Y,Fu(B,oe),be);Hu(B,oe)}return null}function Se(z,B,Y,oe){for(var be=null,rt=null,Ce=B,Ge=B=0,Ze=null;Ce!==null&&Ge<Y.length;Ge++){Ce.index>Ge?(Ze=Ce,Ce=null):Ze=Ce.sibling;var st=Q(z,Ce,Y[Ge],oe);if(st===null){Ce===null&&(Ce=Ze);break}i&&Ce&&st.alternate===null&&r(z,Ce),B=v(st,B,Ge),rt===null?be=st:rt.sibling=st,rt=st,Ce=Ze}if(Ge===Y.length)return a(z,Ce),tt&&fo(z,Ge),be;if(Ce===null){for(;Ge<Y.length;Ge++)Ce=se(z,Y[Ge],oe),Ce!==null&&(B=v(Ce,B,Ge),rt===null?be=Ce:rt.sibling=Ce,rt=Ce);return tt&&fo(z,Ge),be}for(Ce=c(Ce);Ge<Y.length;Ge++)Ze=W(Ce,z,Ge,Y[Ge],oe),Ze!==null&&(i&&Ze.alternate!==null&&Ce.delete(Ze.key===null?Ge:Ze.key),B=v(Ze,B,Ge),rt===null?be=Ze:rt.sibling=Ze,rt=Ze);return i&&Ce.forEach(function(_r){return r(z,_r)}),tt&&fo(z,Ge),be}function De(z,B,Y,oe){if(Y==null)throw Error(o(151));for(var be=null,rt=null,Ce=B,Ge=B=0,Ze=null,st=Y.next();Ce!==null&&!st.done;Ge++,st=Y.next()){Ce.index>Ge?(Ze=Ce,Ce=null):Ze=Ce.sibling;var _r=Q(z,Ce,st.value,oe);if(_r===null){Ce===null&&(Ce=Ze);break}i&&Ce&&_r.alternate===null&&r(z,Ce),B=v(_r,B,Ge),rt===null?be=_r:rt.sibling=_r,rt=_r,Ce=Ze}if(st.done)return a(z,Ce),tt&&fo(z,Ge),be;if(Ce===null){for(;!st.done;Ge++,st=Y.next())st=se(z,st.value,oe),st!==null&&(B=v(st,B,Ge),rt===null?be=st:rt.sibling=st,rt=st);return tt&&fo(z,Ge),be}for(Ce=c(Ce);!st.done;Ge++,st=Y.next())st=W(Ce,z,Ge,st.value,oe),st!==null&&(i&&st.alternate!==null&&Ce.delete(st.key===null?Ge:st.key),B=v(st,B,Ge),rt===null?be=st:rt.sibling=st,rt=st);return i&&Ce.forEach(function(Sw){return r(z,Sw)}),tt&&fo(z,Ge),be}function gt(z,B,Y,oe){if(typeof Y=="object"&&Y!==null&&Y.type===O&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case R:e:{for(var be=Y.key;B!==null;){if(B.key===be){if(be=Y.type,be===O){if(B.tag===7){a(z,B.sibling),oe=y(B,Y.props.children),oe.return=z,z=oe;break e}}else if(B.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===M&&ns(be)===B.type){a(z,B.sibling),oe=y(B,Y.props),il(oe,Y),oe.return=z,z=oe;break e}a(z,B);break}else r(z,B);B=B.sibling}Y.type===O?(oe=Wr(Y.props.children,z.mode,oe,Y.key),oe.return=z,z=oe):(oe=Uu(Y.type,Y.key,Y.props,null,z.mode,oe),il(oe,Y),oe.return=z,z=oe)}return A(z);case V:e:{for(be=Y.key;B!==null;){if(B.key===be)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){a(z,B.sibling),oe=y(B,Y.children||[]),oe.return=z,z=oe;break e}else{a(z,B);break}else r(z,B);B=B.sibling}oe=ld(Y,z.mode,oe),oe.return=z,z=oe}return A(z);case M:return Y=ns(Y),gt(z,B,Y,oe)}if(Xe(Y))return Se(z,B,Y,oe);if(q(Y)){if(be=q(Y),typeof be!="function")throw Error(o(150));return Y=be.call(Y),De(z,B,Y,oe)}if(typeof Y.then=="function")return gt(z,B,Gu(Y),oe);if(Y.$$typeof===K)return gt(z,B,Fu(z,Y),oe);Hu(z,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(a(z,B.sibling),oe=y(B,Y),oe.return=z,z=oe):(a(z,B),oe=ad(Y,z.mode,oe),oe.return=z,z=oe),A(z)):a(z,B)}return function(z,B,Y,oe){try{nl=0;var be=gt(z,B,Y,oe);return Hs=null,be}catch(Ce){if(Ce===Gs||Ce===qu)throw Ce;var rt=Xn(29,Ce,null,z.mode);return rt.lanes=oe,rt.return=z,rt}finally{}}}var os=Dg(!0),Pg=Dg(!1),nr=!1;function Td(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ed(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ir(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function or(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(lt&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=ku(i),gg(i,null,a),r}return Vu(i,c,r,a),ku(i)}function ol(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Uo(i,a)}}function Sd(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=r:v=v.next=r}else y=v=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Ad=!1;function rl(){if(Ad){var i=zs;if(i!==null)throw i}}function sl(i,r,a,c){Ad=!1;var y=i.updateQueue;nr=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var U=I,J=U.next;U.next=null,A===null?v=J:A.next=J,A=U;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,I=ne.lastBaseUpdate,I!==A&&(I===null?ne.firstBaseUpdate=J:I.next=J,ne.lastBaseUpdate=U))}if(v!==null){var se=y.baseState;A=0,ne=J=U=null,I=v;do{var Q=I.lane&-536870913,W=Q!==I.lane;if(W?(We&Q)===Q:(c&Q)===Q){Q!==0&&Q===qs&&(Ad=!0),ne!==null&&(ne=ne.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Se=i,De=I;Q=r;var gt=a;switch(De.tag){case 1:if(Se=De.payload,typeof Se=="function"){se=Se.call(gt,se,Q);break e}se=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=De.payload,Q=typeof Se=="function"?Se.call(gt,se,Q):Se,Q==null)break e;se=E({},se,Q);break e;case 2:nr=!0}}Q=I.callback,Q!==null&&(i.flags|=64,W&&(i.flags|=8192),W=y.callbacks,W===null?y.callbacks=[Q]:W.push(Q))}else W={lane:Q,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ne===null?(J=ne=W,U=se):ne=ne.next=W,A|=Q;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;W=I,I=W.next,W.next=null,y.lastBaseUpdate=W,y.shared.pending=null}}while(!0);ne===null&&(U=se),y.baseState=U,y.firstBaseUpdate=J,y.lastBaseUpdate=ne,v===null&&(y.shared.lanes=0),ur|=A,i.lanes=A,i.memoizedState=se}}function Vg(i,r){if(typeof i!="function")throw Error(o(191,i));i.call(r)}function kg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Vg(a[i],r)}var $s=F(null),$u=F(0);function Ug(i,r){i=Ao,le($u,i),le($s,r),Ao=i|r.baseLanes}function Cd(){le($u,Ao),le($s,$s.current)}function wd(){Ao=$u.current,X($s),X($u)}var Wn=F(null),hi=null;function rr(i){var r=i.alternate;le(Lt,Lt.current&1),le(Wn,i),hi===null&&(r===null||$s.current!==null||r.memoizedState!==null)&&(hi=i)}function Id(i){le(Lt,Lt.current),le(Wn,i),hi===null&&(hi=i)}function Lg(i){i.tag===22?(le(Lt,Lt.current),le(Wn,i),hi===null&&(hi=i)):sr()}function sr(){le(Lt,Lt.current),le(Wn,Wn.current)}function Zn(i){X(Wn),hi===i&&(hi=null),X(Lt)}var Lt=F(0);function Yu(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Dh(a)||Ph(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var mo=0,qe=null,pt=null,Gt=null,Ju=!1,Ys=!1,rs=!1,Ku=0,al=0,Js=null,d1=0;function Mt(){throw Error(o(321))}function Rd(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Qn(i[a],r[a]))return!1;return!0}function bd(i,r,a,c,y,v){return mo=v,qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=i===null||i.memoizedState===null?Ty:Gd,rs=!1,v=a(c,y),rs=!1,Ys&&(v=Fg(r,a,c,y)),Og(i),v}function Og(i){ee.H=cl;var r=pt!==null&&pt.next!==null;if(mo=0,Gt=pt=qe=null,Ju=!1,al=0,Js=null,r)throw Error(o(300));i===null||Ht||(i=i.dependencies,i!==null&&Ou(i)&&(Ht=!0))}function Fg(i,r,a,c){qe=i;var y=0;do{if(Ys&&(Js=null),al=0,Ys=!1,25<=y)throw Error(o(301));if(y+=1,Gt=pt=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}ee.H=Ey,v=r(a,c)}while(Ys);return v}function h1(){var i=ee.H,r=i.useState()[0];return r=typeof r.then=="function"?ll(r):r,i=i.useState()[0],(pt!==null?pt.memoizedState:null)!==i&&(qe.flags|=1024),r}function xd(){var i=Ku!==0;return Ku=0,i}function Nd(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function Md(i){if(Ju){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ju=!1}mo=0,Gt=pt=qe=null,Ys=!1,al=Ku=0,Js=null}function bn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?qe.memoizedState=Gt=i:Gt=Gt.next=i,Gt}function Ot(){if(pt===null){var i=qe.alternate;i=i!==null?i.memoizedState:null}else i=pt.next;var r=Gt===null?qe.memoizedState:Gt.next;if(r!==null)Gt=r,pt=i;else{if(i===null)throw qe.alternate===null?Error(o(467)):Error(o(310));pt=i,i={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Gt===null?qe.memoizedState=Gt=i:Gt=Gt.next=i}return Gt}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(i){var r=al;return al+=1,Js===null&&(Js=[]),i=xg(Js,i,r),r=qe,(Gt===null?r.memoizedState:Gt.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?Ty:Gd),i}function Xu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ll(i);if(i.$$typeof===K)return un(i)}throw Error(o(438,String(i)))}function Dd(i){var r=null,a=qe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=qe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Qu(),qe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=k;return r.index++,a}function go(i,r){return typeof r=="function"?r(i):r}function Wu(i){var r=Ot();return Pd(r,pt,i)}function Pd(i,r,a){var c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var y=i.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}r.baseQueue=y=v,c.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{r=y.next;var I=A=null,U=null,J=r,ne=!1;do{var se=J.lane&-536870913;if(se!==J.lane?(We&se)===se:(mo&se)===se){var Q=J.revertLane;if(Q===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),se===qs&&(ne=!0);else if((mo&Q)===Q){J=J.next,Q===qs&&(ne=!0);continue}else se={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(I=U=se,A=v):U=U.next=se,qe.lanes|=Q,ur|=Q;se=J.action,rs&&a(v,se),v=J.hasEagerState?J.eagerState:a(v,se)}else Q={lane:se,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(I=U=Q,A=v):U=U.next=Q,qe.lanes|=se,ur|=se;J=J.next}while(J!==null&&J!==r);if(U===null?A=v:U.next=I,!Qn(v,i.memoizedState)&&(Ht=!0,ne&&(a=zs,a!==null)))throw a;i.memoizedState=v,i.baseState=A,i.baseQueue=U,c.lastRenderedState=v}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Vd(i){var r=Ot(),a=r.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,v=r.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=i(v,A.action),A=A.next;while(A!==y);Qn(v,r.memoizedState)||(Ht=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),a.lastRenderedState=v}return[v,c]}function Bg(i,r,a){var c=qe,y=Ot(),v=tt;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=r();var A=!Qn((pt||y).memoizedState,a);if(A&&(y.memoizedState=a,Ht=!0),y=y.queue,Ld(Gg.bind(null,c,y,i),[i]),y.getSnapshot!==r||A||Gt!==null&&Gt.memoizedState.tag&1){if(c.flags|=2048,Ks(9,{destroy:void 0},zg.bind(null,c,y,a,r),null),_t===null)throw Error(o(349));v||(mo&127)!==0||qg(c,r,a)}return a}function qg(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=qe.updateQueue,r===null?(r=Qu(),qe.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function zg(i,r,a,c){r.value=a,r.getSnapshot=c,Hg(r)&&$g(i)}function Gg(i,r,a){return a(function(){Hg(r)&&$g(i)})}function Hg(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Qn(i,a)}catch{return!0}}function $g(i){var r=Xr(i,2);r!==null&&qn(r,i,2)}function kd(i){var r=bn();if(typeof i=="function"){var a=i;if(i=a(),rs){ft(!0);try{a()}finally{ft(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:i},r}function Yg(i,r,a,c){return i.baseState=a,Pd(i,pt,typeof c=="function"?c:go)}function p1(i,r,a,c,y){if(ec(i))throw Error(o(485));if(i=r.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};ee.T!==null?a(!0):v.isTransition=!1,c(v),a=r.pending,a===null?(v.next=r.pending=v,Jg(r,v)):(v.next=a.next,r.pending=a.next=v)}}function Jg(i,r){var a=r.action,c=r.payload,y=i.state;if(r.isTransition){var v=ee.T,A={};ee.T=A;try{var I=a(y,c),U=ee.S;U!==null&&U(A,I),Kg(i,r,I)}catch(J){Ud(i,r,J)}finally{v!==null&&A.types!==null&&(v.types=A.types),ee.T=v}}else try{v=a(y,c),Kg(i,r,v)}catch(J){Ud(i,r,J)}}function Kg(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Qg(i,r,c)},function(c){return Ud(i,r,c)}):Qg(i,r,a)}function Qg(i,r,a){r.status="fulfilled",r.value=a,Xg(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Jg(i,a)))}function Ud(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,Xg(r),r=r.next;while(r!==c)}i.action=null}function Xg(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Wg(i,r){return r}function Zg(i,r){if(tt){var a=_t.formState;if(a!==null){e:{var c=qe;if(tt){if(At){t:{for(var y=At,v=di;y.nodeType!==8;){if(!v){y=null;break t}if(y=pi(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){At=pi(y.nextSibling),c=y.data==="F!";break e}}er(c)}c=!1}c&&(r=a[0])}}return a=bn(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wg,lastRenderedState:r},a.queue=c,a=yy.bind(null,qe,c),c.dispatch=a,c=kd(!1),v=zd.bind(null,qe,!1,c.queue),c=bn(),y={state:r,dispatch:null,action:i,pending:null},c.queue=y,a=p1.bind(null,qe,y,v,a),y.dispatch=a,c.memoizedState=i,[r,a,!1]}function jg(i){var r=Ot();return ey(r,pt,i)}function ey(i,r,a){if(r=Pd(i,r,Wg)[0],i=Wu(go)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=ll(r)}catch(A){throw A===Gs?qu:A}else c=r;r=Ot();var y=r.queue,v=y.dispatch;return a!==r.memoizedState&&(qe.flags|=2048,Ks(9,{destroy:void 0},m1.bind(null,y,a),null)),[c,v,i]}function m1(i,r){i.action=r}function ty(i){var r=Ot(),a=pt;if(a!==null)return ey(r,a,i);Ot(),r=r.memoizedState,a=Ot();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function Ks(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=qe.updateQueue,r===null&&(r=Qu(),qe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function ny(){return Ot().memoizedState}function Zu(i,r,a,c){var y=bn();qe.flags|=i,y.memoizedState=Ks(1|r,{destroy:void 0},a,c===void 0?null:c)}function ju(i,r,a,c){var y=Ot();c=c===void 0?null:c;var v=y.memoizedState.inst;pt!==null&&c!==null&&Rd(c,pt.memoizedState.deps)?y.memoizedState=Ks(r,v,a,c):(qe.flags|=i,y.memoizedState=Ks(1|r,v,a,c))}function iy(i,r){Zu(8390656,8,i,r)}function Ld(i,r){ju(2048,8,i,r)}function g1(i){qe.flags|=4;var r=qe.updateQueue;if(r===null)r=Qu(),qe.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function oy(i){var r=Ot().memoizedState;return g1({ref:r,nextImpl:i}),function(){if((lt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function ry(i,r){return ju(4,2,i,r)}function sy(i,r){return ju(4,4,i,r)}function ay(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function ly(i,r,a){a=a!=null?a.concat([i]):null,ju(4,4,ay.bind(null,r,i),a)}function Od(){}function uy(i,r){var a=Ot();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&Rd(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function cy(i,r){var a=Ot();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&Rd(r,c[1]))return c[0];if(c=i(),rs){ft(!0);try{i()}finally{ft(!1)}}return a.memoizedState=[c,r],c}function Fd(i,r,a){return a===void 0||(mo&1073741824)!==0&&(We&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=f0(),qe.lanes|=i,ur|=i,a)}function fy(i,r,a,c){return Qn(a,r)?a:$s.current!==null?(i=Fd(i,a,c),Qn(i,r)||(Ht=!0),i):(mo&42)===0||(mo&1073741824)!==0&&(We&261930)===0?(Ht=!0,i.memoizedState=a):(i=f0(),qe.lanes|=i,ur|=i,r)}function dy(i,r,a,c,y){var v=de.p;de.p=v!==0&&8>v?v:8;var A=ee.T,I={};ee.T=I,zd(i,!1,r,a);try{var U=y(),J=ee.S;if(J!==null&&J(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ne=f1(U,c);ul(i,r,ne,ti(i))}else ul(i,r,c,ti(i))}catch(se){ul(i,r,{then:function(){},status:"rejected",reason:se},ti())}finally{de.p=v,A!==null&&I.types!==null&&(A.types=I.types),ee.T=A}}function y1(){}function Bd(i,r,a,c){if(i.tag!==5)throw Error(o(476));var y=hy(i).queue;dy(i,y,r,ve,a===null?y1:function(){return py(i),a(c)})}function hy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:ve},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function py(i){var r=hy(i);r.next===null&&(r=i.alternate.memoizedState),ul(i,r.next.queue,{},ti())}function qd(){return un(Il)}function my(){return Ot().memoizedState}function gy(){return Ot().memoizedState}function v1(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=ti();i=ir(a);var c=or(r,i,a);c!==null&&(qn(c,r,a),ol(c,r,a)),r={cache:gd()},i.payload=r;return}r=r.return}}function _1(i,r,a){var c=ti();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ec(i)?vy(r,a):(a=rd(i,r,a,c),a!==null&&(qn(a,i,c),_y(a,r,c)))}function yy(i,r,a){var c=ti();ul(i,r,a,c)}function ul(i,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ec(i))vy(r,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var A=r.lastRenderedState,I=v(A,a);if(y.hasEagerState=!0,y.eagerState=I,Qn(I,A))return Vu(i,r,y,0),_t===null&&Pu(),!1}catch{}finally{}if(a=rd(i,r,y,c),a!==null)return qn(a,i,c),_y(a,r,c),!0}return!1}function zd(i,r,a,c){if(c={lane:2,revertLane:Th(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ec(i)){if(r)throw Error(o(479))}else r=rd(i,a,c,2),r!==null&&qn(r,i,2)}function ec(i){var r=i.alternate;return i===qe||r!==null&&r===qe}function vy(i,r){Ys=Ju=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function _y(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Uo(i,a)}}var cl={readContext:un,use:Xu,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};cl.useEffectEvent=Mt;var Ty={readContext:un,use:Xu,useCallback:function(i,r){return bn().memoizedState=[i,r===void 0?null:r],i},useContext:un,useEffect:iy,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,Zu(4194308,4,ay.bind(null,r,i),a)},useLayoutEffect:function(i,r){return Zu(4194308,4,i,r)},useInsertionEffect:function(i,r){Zu(4,2,i,r)},useMemo:function(i,r){var a=bn();r=r===void 0?null:r;var c=i();if(rs){ft(!0);try{i()}finally{ft(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=bn();if(a!==void 0){var y=a(r);if(rs){ft(!0);try{a(r)}finally{ft(!1)}}}else y=r;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=_1.bind(null,qe,i),[c.memoizedState,i]},useRef:function(i){var r=bn();return i={current:i},r.memoizedState=i},useState:function(i){i=kd(i);var r=i.queue,a=yy.bind(null,qe,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:Od,useDeferredValue:function(i,r){var a=bn();return Fd(a,i,r)},useTransition:function(){var i=kd(!1);return i=dy.bind(null,qe,i.queue,!0,!1),bn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=qe,y=bn();if(tt){if(a===void 0)throw Error(o(407));a=a()}else{if(a=r(),_t===null)throw Error(o(349));(We&127)!==0||qg(c,r,a)}y.memoizedState=a;var v={value:a,getSnapshot:r};return y.queue=v,iy(Gg.bind(null,c,v,i),[i]),c.flags|=2048,Ks(9,{destroy:void 0},zg.bind(null,c,v,a,r),null),a},useId:function(){var i=bn(),r=_t.identifierPrefix;if(tt){var a=Gi,c=zi;a=(c&~(1<<32-Qt(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Ku++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=d1++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:qd,useFormState:Zg,useActionState:Zg,useOptimistic:function(i){var r=bn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=zd.bind(null,qe,!0,a),a.dispatch=r,[i,r]},useMemoCache:Dd,useCacheRefresh:function(){return bn().memoizedState=v1.bind(null,qe)},useEffectEvent:function(i){var r=bn(),a={impl:i};return r.memoizedState=a,function(){if((lt&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Gd={readContext:un,use:Xu,useCallback:uy,useContext:un,useEffect:Ld,useImperativeHandle:ly,useInsertionEffect:ry,useLayoutEffect:sy,useMemo:cy,useReducer:Wu,useRef:ny,useState:function(){return Wu(go)},useDebugValue:Od,useDeferredValue:function(i,r){var a=Ot();return fy(a,pt.memoizedState,i,r)},useTransition:function(){var i=Wu(go)[0],r=Ot().memoizedState;return[typeof i=="boolean"?i:ll(i),r]},useSyncExternalStore:Bg,useId:my,useHostTransitionStatus:qd,useFormState:jg,useActionState:jg,useOptimistic:function(i,r){var a=Ot();return Yg(a,pt,i,r)},useMemoCache:Dd,useCacheRefresh:gy};Gd.useEffectEvent=oy;var Ey={readContext:un,use:Xu,useCallback:uy,useContext:un,useEffect:Ld,useImperativeHandle:ly,useInsertionEffect:ry,useLayoutEffect:sy,useMemo:cy,useReducer:Vd,useRef:ny,useState:function(){return Vd(go)},useDebugValue:Od,useDeferredValue:function(i,r){var a=Ot();return pt===null?Fd(a,i,r):fy(a,pt.memoizedState,i,r)},useTransition:function(){var i=Vd(go)[0],r=Ot().memoizedState;return[typeof i=="boolean"?i:ll(i),r]},useSyncExternalStore:Bg,useId:my,useHostTransitionStatus:qd,useFormState:ty,useActionState:ty,useOptimistic:function(i,r){var a=Ot();return pt!==null?Yg(a,pt,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Dd,useCacheRefresh:gy};Ey.useEffectEvent=oy;function Hd(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var $d={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=ti(),y=ir(c);y.payload=r,a!=null&&(y.callback=a),r=or(i,y,c),r!==null&&(qn(r,i,c),ol(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=ti(),y=ir(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=or(i,y,c),r!==null&&(qn(r,i,c),ol(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=ti(),c=ir(a);c.tag=2,r!=null&&(c.callback=r),r=or(i,c,a),r!==null&&(qn(r,i,a),ol(r,i,a))}};function Sy(i,r,a,c,y,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,A):r.prototype&&r.prototype.isPureReactComponent?!Xa(a,c)||!Xa(y,v):!0}function Ay(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&$d.enqueueReplaceState(r,r.state,null)}function ss(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Cy(i){Du(i)}function wy(i){console.error(i)}function Iy(i){Du(i)}function tc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Ry(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Yd(i,r,a){return a=ir(a),a.tag=3,a.payload={element:null},a.callback=function(){tc(i,r)},a}function by(i){return i=ir(i),i.tag=3,i}function xy(i,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;i.payload=function(){return y(v)},i.callback=function(){Ry(r,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Ry(r,a,c),typeof y!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function T1(i,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Bs(r,a,y,!0),a=Wn.current,a!==null){switch(a.tag){case 31:case 13:return hi===null?hc():a.alternate===null&&Dt===0&&(Dt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===zu?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),yh(i,c,y)),!1;case 22:return a.flags|=65536,c===zu?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),yh(i,c,y)),!1}throw Error(o(435,a.tag))}return yh(i,c,y),hc(),!1}if(tt)return r=Wn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==fd&&(i=Error(o(422),{cause:c}),ja(ui(i,a)))):(c!==fd&&(r=Error(o(423),{cause:c}),ja(ui(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=ui(c,a),y=Yd(i.stateNode,c,y),Sd(i,y),Dt!==4&&(Dt=2)),!1;var v=Error(o(520),{cause:c});if(v=ui(v,a),vl===null?vl=[v]:vl.push(v),Dt!==4&&(Dt=2),r===null)return!0;c=ui(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Yd(a.stateNode,c,i),Sd(a,i),!1;case 1:if(r=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(cr===null||!cr.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=by(y),xy(y,i,a,c),Sd(a,y),!1}a=a.return}while(a!==null);return!1}var Jd=Error(o(461)),Ht=!1;function cn(i,r,a,c){r.child=i===null?Pg(r,null,a,c):os(r,i.child,a,c)}function Ny(i,r,a,c,y){a=a.render;var v=r.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return es(r),c=bd(i,r,a,A,v,y),I=xd(),i!==null&&!Ht?(Nd(i,r,y),yo(i,r,y)):(tt&&I&&ud(r),r.flags|=1,cn(i,r,c,y),r.child)}function My(i,r,a,c,y){if(i===null){var v=a.type;return typeof v=="function"&&!sd(v)&&v.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=v,Dy(i,r,v,c,y)):(i=Uu(a.type,null,c,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!th(i,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:Xa,a(A,c)&&i.ref===r.ref)return yo(i,r,y)}return r.flags|=1,i=co(v,c),i.ref=r.ref,i.return=r,r.child=i}function Dy(i,r,a,c,y){if(i!==null){var v=i.memoizedProps;if(Xa(v,c)&&i.ref===r.ref)if(Ht=!1,r.pendingProps=c=v,th(i,y))(i.flags&131072)!==0&&(Ht=!0);else return r.lanes=i.lanes,yo(i,r,y)}return Kd(i,r,a,c,y)}function Py(i,r,a,c){var y=c.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=r.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,r.child=null;return Vy(i,r,v,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bu(r,v!==null?v.cachePool:null),v!==null?Ug(r,v):Cd(),Lg(r);else return c=r.lanes=536870912,Vy(i,r,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(Bu(r,v.cachePool),Ug(r,v),sr(),r.memoizedState=null):(i!==null&&Bu(r,null),Cd(),sr());return cn(i,r,y,a),r.child}function fl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Vy(i,r,a,c,y){var v=vd();return v=v===null?null:{parent:zt._currentValue,pool:v},r.memoizedState={baseLanes:a,cachePool:v},i!==null&&Bu(r,null),Cd(),Lg(r),i!==null&&Bs(i,r,c,!0),r.childLanes=y,null}function nc(i,r){return r=oc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function ky(i,r,a){return os(r,i.child,null,a),i=nc(r,r.pendingProps),i.flags|=2,Zn(r),r.memoizedState=null,i}function E1(i,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(tt){if(c.mode==="hidden")return i=nc(r,c),r.lanes=536870912,fl(null,i);if(Id(r),(i=At)?(i=J0(i,di),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Zo!==null?{id:zi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=vg(i),a.return=r,r.child=a,ln=r,At=null)):i=null,i===null)throw er(r);return r.lanes=536870912,null}return nc(r,c)}var v=i.memoizedState;if(v!==null){var A=v.dehydrated;if(Id(r),y)if(r.flags&256)r.flags&=-257,r=ky(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(o(558));else if(Ht||Bs(i,r,a,!1),y=(a&i.childLanes)!==0,Ht||y){if(c=_t,c!==null&&(A=Lo(c,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,Xr(i,A),qn(c,i,A),Jd;hc(),r=ky(i,r,a)}else i=v.treeContext,At=pi(A.nextSibling),ln=r,tt=!0,jo=null,di=!1,i!==null&&Eg(r,i),r=nc(r,c),r.flags|=4096;return r}return i=co(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function ic(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function Kd(i,r,a,c,y){return es(r),a=bd(i,r,a,c,void 0,y),c=xd(),i!==null&&!Ht?(Nd(i,r,y),yo(i,r,y)):(tt&&c&&ud(r),r.flags|=1,cn(i,r,a,y),r.child)}function Uy(i,r,a,c,y,v){return es(r),r.updateQueue=null,a=Fg(r,c,a,y),Og(i),c=xd(),i!==null&&!Ht?(Nd(i,r,v),yo(i,r,v)):(tt&&c&&ud(r),r.flags|=1,cn(i,r,a,v),r.child)}function Ly(i,r,a,c,y){if(es(r),r.stateNode===null){var v=Us,A=a.contextType;typeof A=="object"&&A!==null&&(v=un(A)),v=new a(c,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=$d,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=c,v.state=r.memoizedState,v.refs={},Td(r),A=a.contextType,v.context=typeof A=="object"&&A!==null?un(A):Us,v.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Hd(r,a,A,c),v.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&$d.enqueueReplaceState(v,v.state,null),sl(r,c,v,y),rl(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){v=r.stateNode;var I=r.memoizedProps,U=ss(a,I);v.props=U;var J=v.context,ne=a.contextType;A=Us,typeof ne=="object"&&ne!==null&&(A=un(ne));var se=a.getDerivedStateFromProps;ne=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,ne||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||J!==A)&&Ay(r,v,c,A),nr=!1;var Q=r.memoizedState;v.state=Q,sl(r,c,v,y),rl(),J=r.memoizedState,I||Q!==J||nr?(typeof se=="function"&&(Hd(r,a,se,c),J=r.memoizedState),(U=nr||Sy(r,a,U,c,Q,J,A))?(ne||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=J),v.props=c,v.state=J,v.context=A,c=U):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,Ed(i,r),A=r.memoizedProps,ne=ss(a,A),v.props=ne,se=r.pendingProps,Q=v.context,J=a.contextType,U=Us,typeof J=="object"&&J!==null&&(U=un(J)),I=a.getDerivedStateFromProps,(J=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==se||Q!==U)&&Ay(r,v,c,U),nr=!1,Q=r.memoizedState,v.state=Q,sl(r,c,v,y),rl();var W=r.memoizedState;A!==se||Q!==W||nr||i!==null&&i.dependencies!==null&&Ou(i.dependencies)?(typeof I=="function"&&(Hd(r,a,I,c),W=r.memoizedState),(ne=nr||Sy(r,a,ne,c,Q,W,U)||i!==null&&i.dependencies!==null&&Ou(i.dependencies))?(J||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,W,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,W,U)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=W),v.props=c,v.state=W,v.context=U,c=ne):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),c=!1)}return v=c,ic(i,r),c=(r.flags&128)!==0,v||c?(v=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&c?(r.child=os(r,i.child,null,y),r.child=os(r,null,a,y)):cn(i,r,a,y),r.memoizedState=v.state,i=r.child):i=yo(i,r,y),i}function Oy(i,r,a,c){return Zr(),r.flags|=256,cn(i,r,a,c),r.child}var Qd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xd(i){return{baseLanes:i,cachePool:Rg()}}function Wd(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=ei),i}function Fy(i,r,a){var c=r.pendingProps,y=!1,v=(r.flags&128)!==0,A;if((A=v)||(A=i!==null&&i.memoizedState===null?!1:(Lt.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,i===null){if(tt){if(y?rr(r):sr(),(i=At)?(i=J0(i,di),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Zo!==null?{id:zi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=vg(i),a.return=r,r.child=a,ln=r,At=null)):i=null,i===null)throw er(r);return Ph(i)?r.lanes=32:r.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(sr(),y=r.mode,I=oc({mode:"hidden",children:I},y),c=Wr(c,y,a,null),I.return=r,c.return=r,I.sibling=c,r.child=I,c=r.child,c.memoizedState=Xd(a),c.childLanes=Wd(i,A,a),r.memoizedState=Qd,fl(null,c)):(rr(r),Zd(r,I))}var U=i.memoizedState;if(U!==null&&(I=U.dehydrated,I!==null)){if(v)r.flags&256?(rr(r),r.flags&=-257,r=jd(i,r,a)):r.memoizedState!==null?(sr(),r.child=i.child,r.flags|=128,r=null):(sr(),I=c.fallback,y=r.mode,c=oc({mode:"visible",children:c.children},y),I=Wr(I,y,a,null),I.flags|=2,c.return=r,I.return=r,c.sibling=I,r.child=c,os(r,i.child,null,a),c=r.child,c.memoizedState=Xd(a),c.childLanes=Wd(i,A,a),r.memoizedState=Qd,r=fl(null,c));else if(rr(r),Ph(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var J=A.dgst;A=J,c=Error(o(419)),c.stack="",c.digest=A,ja({value:c,source:null,stack:null}),r=jd(i,r,a)}else if(Ht||Bs(i,r,a,!1),A=(a&i.childLanes)!==0,Ht||A){if(A=_t,A!==null&&(c=Lo(A,a),c!==0&&c!==U.retryLane))throw U.retryLane=c,Xr(i,c),qn(A,i,c),Jd;Dh(I)||hc(),r=jd(i,r,a)}else Dh(I)?(r.flags|=192,r.child=i.child,r=null):(i=U.treeContext,At=pi(I.nextSibling),ln=r,tt=!0,jo=null,di=!1,i!==null&&Eg(r,i),r=Zd(r,c.children),r.flags|=4096);return r}return y?(sr(),I=c.fallback,y=r.mode,U=i.child,J=U.sibling,c=co(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,J!==null?I=co(J,I):(I=Wr(I,y,a,null),I.flags|=2),I.return=r,c.return=r,c.sibling=I,r.child=c,fl(null,c),c=r.child,I=i.child.memoizedState,I===null?I=Xd(a):(y=I.cachePool,y!==null?(U=zt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=Rg(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=Wd(i,A,a),r.memoizedState=Qd,fl(i.child,c)):(rr(r),a=i.child,i=a.sibling,a=co(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(A=r.deletions,A===null?(r.deletions=[i],r.flags|=16):A.push(i)),r.child=a,r.memoizedState=null,a)}function Zd(i,r){return r=oc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function oc(i,r){return i=Xn(22,i,null,r),i.lanes=0,i}function jd(i,r,a){return os(r,i.child,null,a),i=Zd(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function By(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),pd(i.return,r,a)}function eh(i,r,a,c,y,v){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function qy(i,r,a){var c=r.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Lt.current,I=(A&2)!==0;if(I?(A=A&1|2,r.flags|=128):A&=1,le(Lt,A),cn(i,r,c,a),c=tt?Za:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&By(i,a,r);else if(i.tag===19)By(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&Yu(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),eh(r,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&Yu(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}eh(r,!0,a,null,v,c);break;case"together":eh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function yo(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),ur|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Bs(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(o(153));if(r.child!==null){for(i=r.child,a=co(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=co(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function th(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Ou(i)))}function S1(i,r,a){switch(r.tag){case 3:He(r,r.stateNode.containerInfo),tr(r,zt,i.memoizedState.cache),Zr();break;case 27:case 5:Dn(r);break;case 4:He(r,r.stateNode.containerInfo);break;case 10:tr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Id(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(rr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Fy(i,r,a):(rr(r),i=yo(i,r,a),i!==null?i.sibling:null);rr(r);break;case 19:var y=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Bs(i,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return qy(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(Lt,Lt.current),c)break;return null;case 22:return r.lanes=0,Py(i,r,a,r.pendingProps);case 24:tr(r,zt,i.memoizedState.cache)}return yo(i,r,a)}function zy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Ht=!0;else{if(!th(i,a)&&(r.flags&128)===0)return Ht=!1,S1(i,r,a);Ht=(i.flags&131072)!==0}else Ht=!1,tt&&(r.flags&1048576)!==0&&Tg(r,Za,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=ns(r.elementType),r.type=i,typeof i=="function")sd(i)?(c=ss(i,c),r.tag=1,r=Ly(null,r,i,c,a)):(r.tag=0,r=Kd(null,r,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===te){r.tag=11,r=Ny(null,r,i,c,a);break e}else if(y===D){r.tag=14,r=My(null,r,i,c,a);break e}}throw r=Ie(i)||i,Error(o(306,r,""))}}return r;case 0:return Kd(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=ss(c,r.pendingProps),Ly(i,r,c,y,a);case 3:e:{if(He(r,r.stateNode.containerInfo),i===null)throw Error(o(387));c=r.pendingProps;var v=r.memoizedState;y=v.element,Ed(i,r),sl(r,c,null,a);var A=r.memoizedState;if(c=A.cache,tr(r,zt,c),c!==v.cache&&md(r,[zt],a,!0),rl(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=Oy(i,r,c,a);break e}else if(c!==y){y=ui(Error(o(424)),r),ja(y),r=Oy(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(At=pi(i.firstChild),ln=r,tt=!0,jo=null,di=!0,a=Pg(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Zr(),c===y){r=yo(i,r,a);break e}cn(i,r,c,a)}r=r.child}return r;case 26:return ic(i,r),i===null?(a=j0(r.type,null,r.pendingProps,null))?r.memoizedState=a:tt||(a=r.type,i=r.pendingProps,c=Tc(Ve.current).createElement(a),c[xt]=r,c[an]=i,fn(c,a,i),Ut(c),r.stateNode=c):r.memoizedState=j0(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Dn(r),i===null&&tt&&(c=r.stateNode=X0(r.type,r.pendingProps,Ve.current),ln=r,di=!0,y=At,pr(r.type)?(Vh=y,At=pi(c.firstChild)):At=y),cn(i,r,r.pendingProps.children,a),ic(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&tt&&((y=c=At)&&(c=Z1(c,r.type,r.pendingProps,di),c!==null?(r.stateNode=c,ln=r,At=pi(c.firstChild),di=!1,y=!0):y=!1),y||er(r)),Dn(r),y=r.type,v=r.pendingProps,A=i!==null?i.memoizedProps:null,c=v.children,xh(y,v)?c=null:A!==null&&xh(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=bd(i,r,h1,null,null,a),Il._currentValue=y),ic(i,r),cn(i,r,c,a),r.child;case 6:return i===null&&tt&&((i=a=At)&&(a=j1(a,r.pendingProps,di),a!==null?(r.stateNode=a,ln=r,At=null,i=!0):i=!1),i||er(r)),null;case 13:return Fy(i,r,a);case 4:return He(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=os(r,null,c,a):cn(i,r,c,a),r.child;case 11:return Ny(i,r,r.type,r.pendingProps,a);case 7:return cn(i,r,r.pendingProps,a),r.child;case 8:return cn(i,r,r.pendingProps.children,a),r.child;case 12:return cn(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,tr(r,r.type,c.value),cn(i,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,es(r),y=un(y),c=c(y),r.flags|=1,cn(i,r,c,a),r.child;case 14:return My(i,r,r.type,r.pendingProps,a);case 15:return Dy(i,r,r.type,r.pendingProps,a);case 19:return qy(i,r,a);case 31:return E1(i,r,a);case 22:return Py(i,r,a,r.pendingProps);case 24:return es(r),c=un(zt),i===null?(y=vd(),y===null&&(y=_t,v=gd(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),r.memoizedState={parent:c,cache:y},Td(r),tr(r,zt,y)):((i.lanes&a)!==0&&(Ed(i,r),sl(r,null,null,a),rl()),y=i.memoizedState,v=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),tr(r,zt,c)):(c=v.cache,tr(r,zt,c),c!==y.cache&&md(r,[zt],a,!0))),cn(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function vo(i){i.flags|=4}function nh(i,r,a,c,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(m0())i.flags|=8192;else throw is=zu,_d}else i.flags&=-16777217}function Gy(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ov(r))if(m0())i.flags|=8192;else throw is=zu,_d}function rc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?ri():536870912,i.lanes|=r,Zs|=r)}function dl(i,r){if(!tt)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Ct(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function A1(i,r,a){var c=r.pendingProps;switch(cd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(r),null;case 1:return Ct(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),po(zt),yt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Fs(r)?vo(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,dd())),Ct(r),null;case 26:var y=r.type,v=r.memoizedState;return i===null?(vo(r),v!==null?(Ct(r),Gy(r,v)):(Ct(r),nh(r,y,null,c,a))):v?v!==i.memoizedState?(vo(r),Ct(r),Gy(r,v)):(Ct(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&vo(r),Ct(r),nh(r,y,i,c,a)),null;case 27:if(Gn(r),a=Ve.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&vo(r);else{if(!c){if(r.stateNode===null)throw Error(o(166));return Ct(r),null}i=fe.current,Fs(r)?Sg(r):(i=X0(y,c,a),r.stateNode=i,vo(r))}return Ct(r),null;case 5:if(Gn(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&vo(r);else{if(!c){if(r.stateNode===null)throw Error(o(166));return Ct(r),null}if(v=fe.current,Fs(r))Sg(r);else{var A=Tc(Ve.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[xt]=r,v[an]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=v;e:switch(fn(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&vo(r)}}return Ct(r),nh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&vo(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(o(166));if(i=Ve.current,Fs(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,y=ln,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[xt]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||F0(i.nodeValue,a)),i||er(r,!0)}else i=Tc(i).createTextNode(c),i[xt]=r,r.stateNode=i}return Ct(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=Fs(r),a!==null){if(i===null){if(!c)throw Error(o(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[xt]=r}else Zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ct(r),i=!1}else a=dd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Zn(r),r):(Zn(r),null);if((r.flags&128)!==0)throw Error(o(558))}return Ct(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Fs(r),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(o(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[xt]=r}else Zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ct(r),y=!1}else y=dd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Zn(r),r):(Zn(r),null)}return Zn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),rc(r,r.updateQueue),Ct(r),null);case 4:return yt(),i===null&&Ch(r.stateNode.containerInfo),Ct(r),null;case 10:return po(r.type),Ct(r),null;case 19:if(X(Lt),c=r.memoizedState,c===null)return Ct(r),null;if(y=(r.flags&128)!==0,v=c.rendering,v===null)if(y)dl(c,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=Yu(i),v!==null){for(r.flags|=128,dl(c,!1),i=v.updateQueue,r.updateQueue=i,rc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)yg(a,i),a=a.sibling;return le(Lt,Lt.current&1|2),tt&&fo(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&we()>cc&&(r.flags|=128,y=!0,dl(c,!1),r.lanes=4194304)}else{if(!y)if(i=Yu(v),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,rc(r,i),dl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!tt)return Ct(r),null}else 2*we()-c.renderingStartTime>cc&&a!==536870912&&(r.flags|=128,y=!0,dl(c,!1),r.lanes=4194304);c.isBackwards?(v.sibling=r.child,r.child=v):(i=c.last,i!==null?i.sibling=v:r.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=we(),i.sibling=null,a=Lt.current,le(Lt,y?a&1|2:a&1),tt&&fo(r,c.treeForkCount),i):(Ct(r),null);case 22:case 23:return Zn(r),wd(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(Ct(r),r.subtreeFlags&6&&(r.flags|=8192)):Ct(r),a=r.updateQueue,a!==null&&rc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&X(ts),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),po(zt),Ct(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function C1(i,r){switch(cd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return po(zt),yt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Gn(r),null;case 31:if(r.memoizedState!==null){if(Zn(r),r.alternate===null)throw Error(o(340));Zr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Zn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(o(340));Zr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return X(Lt),null;case 4:return yt(),null;case 10:return po(r.type),null;case 22:case 23:return Zn(r),wd(),i!==null&&X(ts),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return po(zt),null;case 25:return null;default:return null}}function Hy(i,r){switch(cd(r),r.tag){case 3:po(zt),yt();break;case 26:case 27:case 5:Gn(r);break;case 4:yt();break;case 31:r.memoizedState!==null&&Zn(r);break;case 13:Zn(r);break;case 19:X(Lt);break;case 10:po(r.type);break;case 22:case 23:Zn(r),wd(),i!==null&&X(ts);break;case 24:po(zt)}}function hl(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var v=a.create,A=a.inst;c=v(),A.destroy=c}a=a.next}while(a!==y)}}catch(I){ht(r,r.return,I)}}function ar(i,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&i)===i){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=r;var U=a,J=I;try{J()}catch(ne){ht(y,U,ne)}}}c=c.next}while(c!==v)}}catch(ne){ht(r,r.return,ne)}}function $y(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{kg(r,a)}catch(c){ht(i,i.return,c)}}}function Yy(i,r,a){a.props=ss(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){ht(i,r,c)}}function pl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){ht(i,r,y)}}function Hi(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){ht(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){ht(i,r,y)}else a.current=null}function Jy(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){ht(i,i.return,y)}}function ih(i,r,a){try{var c=i.stateNode;Y1(c,i.type,a,r),c[an]=r}catch(y){ht(i,i.return,y)}}function Ky(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&pr(i.type)||i.tag===4}function oh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ky(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&pr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rh(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Zt));else if(c!==4&&(c===27&&pr(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(rh(i,r,a),i=i.sibling;i!==null;)rh(i,r,a),i=i.sibling}function sc(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&pr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(sc(i,r,a),i=i.sibling;i!==null;)sc(i,r,a),i=i.sibling}function Qy(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);fn(r,c,a),r[xt]=i,r[an]=a}catch(v){ht(i,i.return,v)}}var _o=!1,$t=!1,sh=!1,Xy=typeof WeakSet=="function"?WeakSet:Set,tn=null;function w1(i,r){if(i=i.containerInfo,Rh=Rc,i=lg(i),jf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,I=-1,U=-1,J=0,ne=0,se=i,Q=null;t:for(;;){for(var W;se!==a||y!==0&&se.nodeType!==3||(I=A+y),se!==v||c!==0&&se.nodeType!==3||(U=A+c),se.nodeType===3&&(A+=se.nodeValue.length),(W=se.firstChild)!==null;)Q=se,se=W;for(;;){if(se===i)break t;if(Q===a&&++J===y&&(I=A),Q===v&&++ne===c&&(U=A),(W=se.nextSibling)!==null)break;se=Q,Q=se.parentNode}se=W}a=I===-1||U===-1?null:{start:I,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(bh={focusedElem:i,selectionRange:a},Rc=!1,tn=r;tn!==null;)if(r=tn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,tn=i;else for(;tn!==null;){switch(r=tn,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=r,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var Se=ss(a.type,y);i=c.getSnapshotBeforeUpdate(Se,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(De){ht(a,a.return,De)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)Mh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Mh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=r.sibling,i!==null){i.return=r.return,tn=i;break}tn=r.return}}function Wy(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Eo(i,a),c&4&&hl(5,a);break;case 1:if(Eo(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(A){ht(a,a.return,A)}else{var y=ss(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(A){ht(a,a.return,A)}}c&64&&$y(a),c&512&&pl(a,a.return);break;case 3:if(Eo(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{kg(i,r)}catch(A){ht(a,a.return,A)}}break;case 27:r===null&&c&4&&Qy(a);case 26:case 5:Eo(i,a),r===null&&c&4&&Jy(a),c&512&&pl(a,a.return);break;case 12:Eo(i,a);break;case 31:Eo(i,a),c&4&&e0(i,a);break;case 13:Eo(i,a),c&4&&t0(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=V1.bind(null,a),ew(i,a))));break;case 22:if(c=a.memoizedState!==null||_o,!c){r=r!==null&&r.memoizedState!==null||$t,y=_o;var v=$t;_o=c,($t=r)&&!v?So(i,a,(a.subtreeFlags&8772)!==0):Eo(i,a),_o=y,$t=v}break;case 30:break;default:Eo(i,a)}}function Zy(i){var r=i.alternate;r!==null&&(i.alternate=null,Zy(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Or(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Rt=null,Ln=!1;function To(i,r,a){for(a=a.child;a!==null;)jy(i,r,a),a=a.sibling}function jy(i,r,a){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Bt,a)}catch{}switch(a.tag){case 26:$t||Hi(a,r),To(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:$t||Hi(a,r);var c=Rt,y=Ln;pr(a.type)&&(Rt=a.stateNode,Ln=!1),To(i,r,a),Al(a.stateNode),Rt=c,Ln=y;break;case 5:$t||Hi(a,r);case 6:if(c=Rt,y=Ln,Rt=null,To(i,r,a),Rt=c,Ln=y,Rt!==null)if(Ln)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(a.stateNode)}catch(v){ht(a,r,v)}else try{Rt.removeChild(a.stateNode)}catch(v){ht(a,r,v)}break;case 18:Rt!==null&&(Ln?(i=Rt,$0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),sa(i)):$0(Rt,a.stateNode));break;case 4:c=Rt,y=Ln,Rt=a.stateNode.containerInfo,Ln=!0,To(i,r,a),Rt=c,Ln=y;break;case 0:case 11:case 14:case 15:ar(2,a,r),$t||ar(4,a,r),To(i,r,a);break;case 1:$t||(Hi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Yy(a,r,c)),To(i,r,a);break;case 21:To(i,r,a);break;case 22:$t=(c=$t)||a.memoizedState!==null,To(i,r,a),$t=c;break;default:To(i,r,a)}}function e0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{sa(i)}catch(a){ht(r,r.return,a)}}}function t0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{sa(i)}catch(a){ht(r,r.return,a)}}function I1(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Xy),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Xy),r;default:throw Error(o(435,i.tag))}}function ac(i,r){var a=I1(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=k1.bind(null,i,c);c.then(y,y)}})}function On(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=i,A=r,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(pr(I.type)){Rt=I.stateNode,Ln=!1;break e}break;case 5:Rt=I.stateNode,Ln=!1;break e;case 3:case 4:Rt=I.stateNode.containerInfo,Ln=!0;break e}I=I.return}if(Rt===null)throw Error(o(160));jy(v,A,y),Rt=null,Ln=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)n0(r,i),r=r.sibling}var Ii=null;function n0(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:On(r,i),Fn(i),c&4&&(ar(3,i,i.return),hl(3,i),ar(5,i,i.return));break;case 1:On(r,i),Fn(i),c&512&&($t||a===null||Hi(a,a.return)),c&64&&_o&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=Ii;if(On(r,i),Fn(i),c&512&&($t||a===null||Hi(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[no]||v[xt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),fn(v,c,a),v[xt]=i,Ut(v),c=v;break e;case"link":var A=nv("link","href",y).get(c+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(v=A[I],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}v=y.createElement(c),fn(v,c,a),y.head.appendChild(v);break;case"meta":if(A=nv("meta","content",y).get(c+(a.content||""))){for(I=0;I<A.length;I++)if(v=A[I],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}v=y.createElement(c),fn(v,c,a),y.head.appendChild(v);break;default:throw Error(o(468,c))}v[xt]=i,Ut(v),c=v}i.stateNode=c}else iv(y,i.type,i.stateNode);else i.stateNode=tv(y,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?iv(y,i.type,i.stateNode):tv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&ih(i,i.memoizedProps,a.memoizedProps)}break;case 27:On(r,i),Fn(i),c&512&&($t||a===null||Hi(a,a.return)),a!==null&&c&4&&ih(i,i.memoizedProps,a.memoizedProps);break;case 5:if(On(r,i),Fn(i),c&512&&($t||a===null||Hi(a,a.return)),i.flags&32){y=i.stateNode;try{ai(y,"")}catch(Se){ht(i,i.return,Se)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,ih(i,y,a!==null?a.memoizedProps:y)),c&1024&&(sh=!0);break;case 6:if(On(r,i),Fn(i),c&4){if(i.stateNode===null)throw Error(o(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(Se){ht(i,i.return,Se)}}break;case 3:if(Ac=null,y=Ii,Ii=Ec(r.containerInfo),On(r,i),Ii=y,Fn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{sa(r.containerInfo)}catch(Se){ht(i,i.return,Se)}sh&&(sh=!1,i0(i));break;case 4:c=Ii,Ii=Ec(i.stateNode.containerInfo),On(r,i),Fn(i),Ii=c;break;case 12:On(r,i),Fn(i);break;case 31:On(r,i),Fn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 13:On(r,i),Fn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uc=we()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 22:y=i.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,J=_o,ne=$t;if(_o=J||y,$t=ne||U,On(r,i),$t=ne,_o=J,Fn(i),c&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||U||_o||$t||as(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(v=U.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=U.stateNode;var se=U.memoizedProps.style,Q=se!=null&&se.hasOwnProperty("display")?se.display:null;I.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Se){ht(U,U.return,Se)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(Se){ht(U,U.return,Se)}}}else if(r.tag===18){if(a===null){U=r;try{var W=U.stateNode;y?Y0(W,!0):Y0(U.stateNode,!1)}catch(Se){ht(U,U.return,Se)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,ac(i,a))));break;case 19:On(r,i),Fn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 30:break;case 21:break;default:On(r,i),Fn(i)}}function Fn(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(Ky(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var y=a.stateNode,v=oh(i);sc(i,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(ai(A,""),a.flags&=-33);var I=oh(i);sc(i,I,A);break;case 3:case 4:var U=a.stateNode.containerInfo,J=oh(i);rh(i,J,U);break;default:throw Error(o(161))}}catch(ne){ht(i,i.return,ne)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function i0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;i0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Eo(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Wy(i,r.alternate,r),r=r.sibling}function as(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ar(4,r,r.return),as(r);break;case 1:Hi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Yy(r,r.return,a),as(r);break;case 27:Al(r.stateNode);case 26:case 5:Hi(r,r.return),as(r);break;case 22:r.memoizedState===null&&as(r);break;case 30:as(r);break;default:as(r)}i=i.sibling}}function So(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=i,v=r,A=v.flags;switch(v.tag){case 0:case 11:case 15:So(y,v,a),hl(4,v);break;case 1:if(So(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){ht(c,c.return,J)}if(c=v,y=c.updateQueue,y!==null){var I=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)Vg(U[y],I)}catch(J){ht(c,c.return,J)}}a&&A&64&&$y(v),pl(v,v.return);break;case 27:Qy(v);case 26:case 5:So(y,v,a),a&&c===null&&A&4&&Jy(v),pl(v,v.return);break;case 12:So(y,v,a);break;case 31:So(y,v,a),a&&A&4&&e0(y,v);break;case 13:So(y,v,a),a&&A&4&&t0(y,v);break;case 22:v.memoizedState===null&&So(y,v,a),pl(v,v.return);break;case 30:break;default:So(y,v,a)}r=r.sibling}}function ah(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&el(a))}function lh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&el(i))}function Ri(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)o0(i,r,a,c),r=r.sibling}function o0(i,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Ri(i,r,a,c),y&2048&&hl(9,r);break;case 1:Ri(i,r,a,c);break;case 3:Ri(i,r,a,c),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&el(i)));break;case 12:if(y&2048){Ri(i,r,a,c),i=r.stateNode;try{var v=r.memoizedProps,A=v.id,I=v.onPostCommit;typeof I=="function"&&I(A,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){ht(r,r.return,U)}}else Ri(i,r,a,c);break;case 31:Ri(i,r,a,c);break;case 13:Ri(i,r,a,c);break;case 23:break;case 22:v=r.stateNode,A=r.alternate,r.memoizedState!==null?v._visibility&2?Ri(i,r,a,c):ml(i,r):v._visibility&2?Ri(i,r,a,c):(v._visibility|=2,Qs(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&ah(A,r);break;case 24:Ri(i,r,a,c),y&2048&&lh(r.alternate,r);break;default:Ri(i,r,a,c)}}function Qs(i,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,A=r,I=a,U=c,J=A.flags;switch(A.tag){case 0:case 11:case 15:Qs(v,A,I,U,y),hl(8,A);break;case 23:break;case 22:var ne=A.stateNode;A.memoizedState!==null?ne._visibility&2?Qs(v,A,I,U,y):ml(v,A):(ne._visibility|=2,Qs(v,A,I,U,y)),y&&J&2048&&ah(A.alternate,A);break;case 24:Qs(v,A,I,U,y),y&&J&2048&&lh(A.alternate,A);break;default:Qs(v,A,I,U,y)}r=r.sibling}}function ml(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,y=c.flags;switch(c.tag){case 22:ml(a,c),y&2048&&ah(c.alternate,c);break;case 24:ml(a,c),y&2048&&lh(c.alternate,c);break;default:ml(a,c)}r=r.sibling}}var gl=8192;function Xs(i,r,a){if(i.subtreeFlags&gl)for(i=i.child;i!==null;)r0(i,r,a),i=i.sibling}function r0(i,r,a){switch(i.tag){case 26:Xs(i,r,a),i.flags&gl&&i.memoizedState!==null&&dw(a,Ii,i.memoizedState,i.memoizedProps);break;case 5:Xs(i,r,a);break;case 3:case 4:var c=Ii;Ii=Ec(i.stateNode.containerInfo),Xs(i,r,a),Ii=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=gl,gl=16777216,Xs(i,r,a),gl=c):Xs(i,r,a));break;default:Xs(i,r,a)}}function s0(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function yl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];tn=c,l0(c,i)}s0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)a0(i),i=i.sibling}function a0(i){switch(i.tag){case 0:case 11:case 15:yl(i),i.flags&2048&&ar(9,i,i.return);break;case 3:yl(i);break;case 12:yl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,lc(i)):yl(i);break;default:yl(i)}}function lc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];tn=c,l0(c,i)}s0(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ar(8,r,r.return),lc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,lc(r));break;default:lc(r)}i=i.sibling}}function l0(i,r){for(;tn!==null;){var a=tn;switch(a.tag){case 0:case 11:case 15:ar(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:el(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,tn=c;else e:for(a=i;tn!==null;){c=tn;var y=c.sibling,v=c.return;if(Zy(c),c===a){tn=null;break e}if(y!==null){y.return=v,tn=y;break e}tn=v}}}var R1={getCacheForType:function(i){var r=un(zt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return un(zt).controller.signal}},b1=typeof WeakMap=="function"?WeakMap:Map,lt=0,_t=null,Ke=null,We=0,dt=0,jn=null,lr=!1,Ws=!1,uh=!1,Ao=0,Dt=0,ur=0,ls=0,ch=0,ei=0,Zs=0,vl=null,Bn=null,fh=!1,uc=0,u0=0,cc=1/0,fc=null,cr=null,Xt=0,fr=null,js=null,Co=0,dh=0,hh=null,c0=null,_l=0,ph=null;function ti(){return(lt&2)!==0&&We!==0?We&-We:ee.T!==null?Th():to()}function f0(){if(ei===0)if((We&536870912)===0||tt){var i=$n;$n<<=1,($n&3932160)===0&&($n=262144),ei=i}else ei=536870912;return i=Wn.current,i!==null&&(i.flags|=32),ei}function qn(i,r,a){(i===_t&&(dt===2||dt===9)||i.cancelPendingCommit!==null)&&(ea(i,0),dr(i,We,ei,!1)),gn(i,a),((lt&2)===0||i!==_t)&&(i===_t&&((lt&2)===0&&(ls|=a),Dt===4&&dr(i,We,ei,!1)),$i(i))}function d0(i,r,a){if((lt&6)!==0)throw Error(o(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||Si(i,r),y=c?M1(i,r):gh(i,r,!0),v=c;do{if(y===0){Ws&&!c&&dr(i,r,0,!1);break}else{if(a=i.current.alternate,v&&!x1(a)){y=gh(i,r,!1),v=!1;continue}if(y===2){if(v=r,i.errorRecoveryDisabledLanes&v)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var I=i;y=vl;var U=I.current.memoizedState.isDehydrated;if(U&&(ea(I,A).flags|=256),A=gh(I,A,!1),A!==2){if(uh&&!U){I.errorRecoveryDisabledLanes|=v,ls|=v,y=4;break e}v=Bn,Bn=y,v!==null&&(Bn===null?Bn=v:Bn.push.apply(Bn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){ea(i,0),dr(i,r,0,!0);break}e:{switch(c=i,v=y,v){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:dr(c,r,ei,!lr);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(y=uc+300-we(),10<y)){if(dr(c,r,ei,!lr),An(c,0,!0)!==0)break e;Co=r,c.timeoutHandle=G0(h0.bind(null,c,a,Bn,fc,fh,r,ei,ls,Zs,lr,v,"Throttled",-0,0),y);break e}h0(c,a,Bn,fc,fh,r,ei,ls,Zs,lr,v,null,-0,0)}}break}while(!0);$i(i)}function h0(i,r,a,c,y,v,A,I,U,J,ne,se,Q,W){if(i.timeoutHandle=-1,se=r.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zt},r0(r,v,se);var Se=(v&62914560)===v?uc-we():(v&4194048)===v?u0-we():0;if(Se=hw(se,Se),Se!==null){Co=v,i.cancelPendingCommit=Se(E0.bind(null,i,r,v,a,c,y,A,I,U,ne,se,null,Q,W)),dr(i,v,A,!J);return}}E0(i,r,v,a,c,y,A,I,U)}function x1(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!Qn(v(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function dr(i,r,a,c){r&=~ch,r&=~ls,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var y=r;0<y;){var v=31-Qt(y),A=1<<v;c[v]=-1,y&=~A}a!==0&&Pa(i,a,r)}function dc(){return(lt&6)===0?(Tl(0),!1):!0}function mh(){if(Ke!==null){if(dt===0)var i=Ke.return;else i=Ke,ho=jr=null,Md(i),Hs=null,nl=0,i=Ke;for(;i!==null;)Hy(i.alternate,i),i=i.return;Ke=null}}function ea(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,Q1(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Co=0,mh(),_t=i,Ke=a=co(i.current,null),We=r,dt=0,jn=null,lr=!1,Ws=Si(i,r),uh=!1,Zs=ei=ch=ls=ur=Dt=0,Bn=vl=null,fh=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var y=31-Qt(c),v=1<<y;r|=i[y],c&=~v}return Ao=r,Pu(),a}function p0(i,r){qe=null,ee.H=cl,r===Gs||r===qu?(r=Ng(),dt=3):r===_d?(r=Ng(),dt=4):dt=r===Jd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,jn=r,Ke===null&&(Dt=1,tc(i,ui(r,i.current)))}function m0(){var i=Wn.current;return i===null?!0:(We&4194048)===We?hi===null:(We&62914560)===We||(We&536870912)!==0?i===hi:!1}function g0(){var i=ee.H;return ee.H=cl,i===null?cl:i}function y0(){var i=ee.A;return ee.A=R1,i}function hc(){Dt=4,lr||(We&4194048)!==We&&Wn.current!==null||(Ws=!0),(ur&134217727)===0&&(ls&134217727)===0||_t===null||dr(_t,We,ei,!1)}function gh(i,r,a){var c=lt;lt|=2;var y=g0(),v=y0();(_t!==i||We!==r)&&(fc=null,ea(i,r)),r=!1;var A=Dt;e:do try{if(dt!==0&&Ke!==null){var I=Ke,U=jn;switch(dt){case 8:mh(),A=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(r=!0);var J=dt;if(dt=0,jn=null,ta(i,I,U,J),a&&Ws){A=0;break e}break;default:J=dt,dt=0,jn=null,ta(i,I,U,J)}}N1(),A=Dt;break}catch(ne){p0(i,ne)}while(!0);return r&&i.shellSuspendCounter++,ho=jr=null,lt=c,ee.H=y,ee.A=v,Ke===null&&(_t=null,We=0,Pu()),A}function N1(){for(;Ke!==null;)v0(Ke)}function M1(i,r){var a=lt;lt|=2;var c=g0(),y=y0();_t!==i||We!==r?(fc=null,cc=we()+500,ea(i,r)):Ws=Si(i,r);e:do try{if(dt!==0&&Ke!==null){r=Ke;var v=jn;t:switch(dt){case 1:dt=0,jn=null,ta(i,r,v,1);break;case 2:case 9:if(bg(v)){dt=0,jn=null,_0(r);break}r=function(){dt!==2&&dt!==9||_t!==i||(dt=7),$i(i)},v.then(r,r);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:bg(v)?(dt=0,jn=null,_0(r)):(dt=0,jn=null,ta(i,r,v,7));break;case 5:var A=null;switch(Ke.tag){case 26:A=Ke.memoizedState;case 5:case 27:var I=Ke;if(A?ov(A):I.stateNode.complete){dt=0,jn=null;var U=I.sibling;if(U!==null)Ke=U;else{var J=I.return;J!==null?(Ke=J,pc(J)):Ke=null}break t}}dt=0,jn=null,ta(i,r,v,5);break;case 6:dt=0,jn=null,ta(i,r,v,6);break;case 8:mh(),Dt=6;break e;default:throw Error(o(462))}}D1();break}catch(ne){p0(i,ne)}while(!0);return ho=jr=null,ee.H=c,ee.A=y,lt=a,Ke!==null?0:(_t=null,We=0,Pu(),Dt)}function D1(){for(;Ke!==null&&!me();)v0(Ke)}function v0(i){var r=zy(i.alternate,i,Ao);i.memoizedProps=i.pendingProps,r===null?pc(i):Ke=r}function _0(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Uy(a,r,r.pendingProps,r.type,void 0,We);break;case 11:r=Uy(a,r,r.pendingProps,r.type.render,r.ref,We);break;case 5:Md(r);default:Hy(a,r),r=Ke=yg(r,Ao),r=zy(a,r,Ao)}i.memoizedProps=i.pendingProps,r===null?pc(i):Ke=r}function ta(i,r,a,c){ho=jr=null,Md(r),Hs=null,nl=0;var y=r.return;try{if(T1(i,y,r,a,We)){Dt=1,tc(i,ui(a,i.current)),Ke=null;return}}catch(v){if(y!==null)throw Ke=y,v;Dt=1,tc(i,ui(a,i.current)),Ke=null;return}r.flags&32768?(tt||c===1?i=!0:Ws||(We&536870912)!==0?i=!1:(lr=i=!0,(c===2||c===9||c===3||c===6)&&(c=Wn.current,c!==null&&c.tag===13&&(c.flags|=16384))),T0(r,i)):pc(r)}function pc(i){var r=i;do{if((r.flags&32768)!==0){T0(r,lr);return}i=r.return;var a=A1(r.alternate,r,Ao);if(a!==null){Ke=a;return}if(r=r.sibling,r!==null){Ke=r;return}Ke=r=i}while(r!==null);Dt===0&&(Dt=5)}function T0(i,r){do{var a=C1(i.alternate,i);if(a!==null){a.flags&=32767,Ke=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Ke=i;return}Ke=i=a}while(i!==null);Dt=6,Ke=null}function E0(i,r,a,c,y,v,A,I,U){i.cancelPendingCommit=null;do mc();while(Xt!==0);if((lt&6)!==0)throw Error(o(327));if(r!==null){if(r===i.current)throw Error(o(177));if(v=r.lanes|r.childLanes,v|=od,vt(i,a,v,A,I,U),i===_t&&(Ke=_t=null,We=0),js=r,fr=i,Co=a,dh=v,hh=y,c0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,U1(ce,function(){return I0(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null,y=de.p,de.p=2,A=lt,lt|=4;try{w1(i,r,a)}finally{lt=A,de.p=y,ee.T=c}}Xt=1,S0(),A0(),C0()}}function S0(){if(Xt===1){Xt=0;var i=fr,r=js,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ee.T,ee.T=null;var c=de.p;de.p=2;var y=lt;lt|=4;try{n0(r,i);var v=bh,A=lg(i.containerInfo),I=v.focusedElem,U=v.selectionRange;if(A!==I&&I&&I.ownerDocument&&ag(I.ownerDocument.documentElement,I)){if(U!==null&&jf(I)){var J=U.start,ne=U.end;if(ne===void 0&&(ne=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(ne,I.value.length);else{var se=I.ownerDocument||document,Q=se&&se.defaultView||window;if(Q.getSelection){var W=Q.getSelection(),Se=I.textContent.length,De=Math.min(U.start,Se),gt=U.end===void 0?De:Math.min(U.end,Se);!W.extend&&De>gt&&(A=gt,gt=De,De=A);var z=sg(I,De),B=sg(I,gt);if(z&&B&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==B.node||W.focusOffset!==B.offset)){var Y=se.createRange();Y.setStart(z.node,z.offset),W.removeAllRanges(),De>gt?(W.addRange(Y),W.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),W.addRange(Y))}}}}for(se=[],W=I;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<se.length;I++){var oe=se[I];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Rc=!!Rh,bh=Rh=null}finally{lt=y,de.p=c,ee.T=a}}i.current=r,Xt=2}}function A0(){if(Xt===2){Xt=0;var i=fr,r=js,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ee.T,ee.T=null;var c=de.p;de.p=2;var y=lt;lt|=4;try{Wy(i,r.alternate,r)}finally{lt=y,de.p=c,ee.T=a}}Xt=3}}function C0(){if(Xt===4||Xt===3){Xt=0,Ae();var i=fr,r=js,a=Co,c=c0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Xt=5:(Xt=0,js=fr=null,w0(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(cr=null),ka(a),r=r.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Bt,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=ee.T,y=de.p,de.p=2,ee.T=null;try{for(var v=i.onRecoverableError,A=0;A<c.length;A++){var I=c[A];v(I.value,{componentStack:I.stack})}}finally{ee.T=r,de.p=y}}(Co&3)!==0&&mc(),$i(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===ph?_l++:(_l=0,ph=i):_l=0,Tl(0)}}function w0(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,el(r)))}function mc(){return S0(),A0(),C0(),I0()}function I0(){if(Xt!==5)return!1;var i=fr,r=dh;dh=0;var a=ka(Co),c=ee.T,y=de.p;try{de.p=32>a?32:a,ee.T=null,a=hh,hh=null;var v=fr,A=Co;if(Xt=0,js=fr=null,Co=0,(lt&6)!==0)throw Error(o(331));var I=lt;if(lt|=4,a0(v.current),o0(v,v.current,A,a),lt=I,Tl(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Bt,v)}catch{}return!0}finally{de.p=y,ee.T=c,w0(i,r)}}function R0(i,r,a){r=ui(a,r),r=Yd(i.stateNode,r,2),i=or(i,r,2),i!==null&&(gn(i,2),$i(i))}function ht(i,r,a){if(i.tag===3)R0(i,i,a);else for(;r!==null;){if(r.tag===3){R0(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(cr===null||!cr.has(c))){i=ui(a,i),a=by(2),c=or(r,a,2),c!==null&&(xy(a,c,r,i),gn(c,2),$i(c));break}}r=r.return}}function yh(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new b1;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(uh=!0,y.add(a),i=P1.bind(null,i,r,a),r.then(i,i))}function P1(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,_t===i&&(We&a)===a&&(Dt===4||Dt===3&&(We&62914560)===We&&300>we()-uc?(lt&2)===0&&ea(i,0):ch|=a,Zs===We&&(Zs=0)),$i(i)}function b0(i,r){r===0&&(r=ri()),i=Xr(i,r),i!==null&&(gn(i,r),$i(i))}function V1(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),b0(i,a)}function k1(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(r),b0(i,a)}function U1(i,r){return Ei(i,r)}var gc=null,na=null,vh=!1,yc=!1,_h=!1,hr=0;function $i(i){i!==na&&i.next===null&&(na===null?gc=na=i:na=na.next=i),yc=!0,vh||(vh=!0,O1())}function Tl(i,r){if(!_h&&yc){_h=!0;do for(var a=!1,c=gc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,I=c.pingedLanes;v=(1<<31-Qt(42|i)+1)-1,v&=y&~(A&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,D0(c,v))}else v=We,v=An(c,c===_t?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Si(c,v)||(a=!0,D0(c,v));c=c.next}while(a);_h=!1}}function L1(){x0()}function x0(){yc=vh=!1;var i=0;hr!==0&&K1()&&(i=hr);for(var r=we(),a=null,c=gc;c!==null;){var y=c.next,v=N0(c,r);v===0?(c.next=null,a===null?gc=y:a.next=y,y===null&&(na=a)):(a=c,(i!==0||(v&3)!==0)&&(yc=!0)),c=y}Xt!==0&&Xt!==5||Tl(i),hr!==0&&(hr=0)}function N0(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var A=31-Qt(v),I=1<<A,U=y[A];U===-1?((I&a)===0||(I&c)!==0)&&(y[A]=eo(I,r)):U<=r&&(i.expiredLanes|=I),v&=~I}if(r=_t,a=We,a=An(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(dt===2||dt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Pn(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Si(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&Pn(c),ka(a)){case 2:case 8:a=ie;break;case 32:a=ce;break;case 268435456:a=re;break;default:a=ce}return c=M0.bind(null,i),a=Ei(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&Pn(c),i.callbackPriority=2,i.callbackNode=null,2}function M0(i,r){if(Xt!==0&&Xt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(mc()&&i.callbackNode!==a)return null;var c=We;return c=An(i,i===_t?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(d0(i,c,r),N0(i,we()),i.callbackNode!=null&&i.callbackNode===a?M0.bind(null,i):null)}function D0(i,r){if(mc())return null;d0(i,r,!0)}function O1(){X1(function(){(lt&6)!==0?Ei(Me,L1):x0()})}function Th(){if(hr===0){var i=qs;i===0&&(i=Vi,Vi<<=1,(Vi&261888)===0&&(Vi=256)),hr=i}return hr}function P0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Fi(""+i)}function V0(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function F1(i,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var v=P0((y[an]||null).action),A=c.submitter;A&&(r=(r=A[an]||null)?P0(r.formAction):A.getAttribute("formAction"),r!==null&&(v=r,A=null));var I=new Gr("action","action",null,c,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hr!==0){var U=A?V0(y,A):new FormData(y);Bd(a,{pending:!0,data:U,method:y.method,action:v},null,U)}}else typeof v=="function"&&(I.preventDefault(),U=A?V0(y,A):new FormData(y),Bd(a,{pending:!0,data:U,method:y.method,action:v},v,U))},currentTarget:y}]})}}for(var Eh=0;Eh<id.length;Eh++){var Sh=id[Eh],B1=Sh.toLowerCase(),q1=Sh[0].toUpperCase()+Sh.slice(1);wi(B1,"on"+q1)}wi(fg,"onAnimationEnd"),wi(dg,"onAnimationIteration"),wi(hg,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(i1,"onTransitionRun"),wi(o1,"onTransitionStart"),wi(r1,"onTransitionCancel"),wi(pg,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function k0(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var A=c.length-1;0<=A;A--){var I=c[A],U=I.instance,J=I.currentTarget;if(I=I.listener,U!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=J;try{v(y)}catch(ne){Du(ne)}y.currentTarget=null,v=U}else for(A=0;A<c.length;A++){if(I=c[A],U=I.instance,J=I.currentTarget,I=I.listener,U!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=J;try{v(y)}catch(ne){Du(ne)}y.currentTarget=null,v=U}}}}function Qe(i,r){var a=r[Oo];a===void 0&&(a=r[Oo]=new Set);var c=i+"__bubble";a.has(c)||(U0(r,i,2,!1),a.add(c))}function Ah(i,r,a){var c=0;r&&(c|=4),U0(a,i,c,r)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Ch(i){if(!i[vc]){i[vc]=!0,As.forEach(function(a){a!=="selectionchange"&&(z1.has(a)||Ah(a,!1,i),Ah(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[vc]||(r[vc]=!0,Ah("selectionchange",!1,r))}}function U0(i,r,a,c){switch(fv(r)){case 2:var y=gw;break;case 8:y=yw;break;default:y=Fh}a=y.bind(null,r,a,i),y=void 0,!Ga||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function wh(i,r,a,c,y){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var U=A.tag;if((U===3||U===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=io(I),A===null)return;if(U=A.tag,U===5||U===6||U===26||U===27){c=v=A;continue e}I=I.parentNode}}c=c.return}gu(function(){var J=v,ne=bs(a),se=[];e:{var Q=mg.get(i);if(Q!==void 0){var W=Gr,Se=i;switch(i){case"keypress":if(zr(a)===0)break e;case"keydown":case"keyup":W=wu;break;case"focusin":Se="focus",W=Ko;break;case"focusout":Se="blur",W=Ko;break;case"beforeblur":case"afterblur":W=Ko;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Ru;break;case fg:case dg:case hg:W=Ms;break;case pg:W=Ds;break;case"scroll":case"scrollend":W=yu;break;case"wheel":W=xu;break;case"copy":case"cut":case"paste":W=Eu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Ka;break;case"toggle":case"beforetoggle":W=Xo}var De=(r&4)!==0,gt=!De&&(i==="scroll"||i==="scrollend"),z=De?Q!==null?Q+"Capture":null:Q;De=[];for(var B=J,Y;B!==null;){var oe=B;if(Y=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Y===null||z===null||(oe=kn(B,z),oe!=null&&De.push(Sl(B,oe,Y))),gt)break;B=B.return}0<De.length&&(Q=new W(Q,Se,null,a,ne),se.push({event:Q,listeners:De}))}}if((r&7)===0){e:{if(Q=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",Q&&a!==Rs&&(Se=a.relatedTarget||a.fromElement)&&(io(Se)||Se[Ui]))break e;if((W||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,W?(Se=a.relatedTarget||a.toElement,W=J,Se=Se?io(Se):null,Se!==null&&(gt=l(Se),De=Se.tag,Se!==gt||De!==5&&De!==27&&De!==6)&&(Se=null)):(W=null,Se=J),W!==Se)){if(De=vu,oe="onMouseLeave",z="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(De=Ka,oe="onPointerLeave",z="onPointerEnter",B="pointer"),gt=W==null?Q:Fr(W),Y=Se==null?Q:Fr(Se),Q=new De(oe,B+"leave",W,a,ne),Q.target=gt,Q.relatedTarget=Y,oe=null,io(ne)===J&&(De=new De(z,B+"enter",Se,a,ne),De.target=Y,De.relatedTarget=gt,oe=De),gt=oe,W&&Se)t:{for(De=G1,z=W,B=Se,Y=0,oe=z;oe;oe=De(oe))Y++;oe=0;for(var be=B;be;be=De(be))oe++;for(;0<Y-oe;)z=De(z),Y--;for(;0<oe-Y;)B=De(B),oe--;for(;Y--;){if(z===B||B!==null&&z===B.alternate){De=z;break t}z=De(z),B=De(B)}De=null}else De=null;W!==null&&L0(se,Q,W,De,!1),Se!==null&&gt!==null&&L0(se,gt,Se,De,!0)}}e:{if(Q=J?Fr(J):window,W=Q.nodeName&&Q.nodeName.toLowerCase(),W==="select"||W==="input"&&Q.type==="file")var rt=eg;else if(Un(Q))if(tg)rt=e1;else{rt=ZC;var Ce=WC}else W=Q.nodeName,!W||W.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?J&&qa(J.elementType)&&(rt=eg):rt=jC;if(rt&&(rt=rt(i,J))){Jr(se,rt,a,ne);break e}Ce&&Ce(i,Q,J),i==="focusout"&&J&&Q.type==="number"&&J.memoizedProps.value!=null&&Is(Q,"number",Q.value)}switch(Ce=J?Fr(J):window,i){case"focusin":(Un(Ce)||Ce.contentEditable==="true")&&(Ps=Ce,ed=J,Wa=null);break;case"focusout":Wa=ed=Ps=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,ug(se,a,ne);break;case"selectionchange":if(n1)break;case"keydown":case"keyup":ug(se,a,ne)}var Ge;if(T)e:{switch(i){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Ye?ut(i,a)&&(Ze="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ze="onCompositionStart");Ze&&(H&&a.locale!=="ko"&&(Ye||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Ye&&(Ge=Ho()):(Kn=ne,xs="value"in Kn?Kn.value:Kn.textContent,Ye=!0)),Ce=_c(J,Ze),0<Ce.length&&(Ze=new $a(Ze,i,null,a,ne),se.push({event:Ze,listeners:Ce}),Ge?Ze.data=Ge:(Ge=qt(a),Ge!==null&&(Ze.data=Ge)))),(Ge=b?jt(i,a):en(i,a))&&(Ze=_c(J,"onBeforeInput"),0<Ze.length&&(Ce=new $a("onBeforeInput","beforeinput",null,a,ne),se.push({event:Ce,listeners:Ze}),Ce.data=Ge)),F1(se,i,J,a,ne)}k0(se,r)})}function Sl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function _c(i,r){for(var a=r+"Capture",c=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=kn(i,a),y!=null&&c.unshift(Sl(i,y,v)),y=kn(i,r),y!=null&&c.push(Sl(i,y,v))),i.tag===3)return c;i=i.return}return[]}function G1(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function L0(i,r,a,c,y){for(var v=r._reactName,A=[];a!==null&&a!==c;){var I=a,U=I.alternate,J=I.stateNode;if(I=I.tag,U!==null&&U===c)break;I!==5&&I!==26&&I!==27||J===null||(U=J,y?(J=kn(a,v),J!=null&&A.unshift(Sl(a,J,U))):y||(J=kn(a,v),J!=null&&A.push(Sl(a,J,U)))),a=a.return}A.length!==0&&i.push({event:r,listeners:A})}var H1=/\r\n?/g,$1=/\u0000|\uFFFD/g;function O0(i){return(typeof i=="string"?i:""+i).replace(H1,`
`).replace($1,"")}function F0(i,r){return r=O0(r),O0(i)===r}function mt(i,r,a,c,y,v){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||ai(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&ai(i,""+c);break;case"className":qo(i,"class",c);break;case"tabIndex":qo(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":qo(i,a,c);break;case"style":pu(i,c,v);break;case"data":if(r!=="object"){qo(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Fi(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(r!=="input"&&mt(i,r,"name",y.name,y,null),mt(i,r,"formEncType",y.formEncType,y,null),mt(i,r,"formMethod",y.formMethod,y,null),mt(i,r,"formTarget",y.formTarget,y,null)):(mt(i,r,"encType",y.encType,y,null),mt(i,r,"method",y.method,y,null),mt(i,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Fi(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Zt);break;case"onScroll":c!=null&&Qe("scroll",i);break;case"onScrollEnd":c!=null&&Qe("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Fi(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Qe("beforetoggle",i),Qe("toggle",i),Bo(i,"popover",c);break;case"xlinkActuate":si(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":si(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":si(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":si(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":si(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":si(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":si(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":si(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":si(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Bo(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Kf.get(a)||a,Bo(i,a,c))}}function Ih(i,r,a,c,y,v){switch(a){case"style":pu(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof c=="string"?ai(i,c):(typeof c=="number"||typeof c=="bigint")&&ai(i,""+c);break;case"onScroll":c!=null&&Qe("scroll",i);break;case"onScrollEnd":c!=null&&Qe("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Zt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),v=i[an]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(r,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Bo(i,a,c)}}}function fn(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",i),Qe("load",i);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:mt(i,r,v,A,a,null)}}y&&mt(i,r,"srcSet",a.srcSet,a,null),c&&mt(i,r,"src",a.src,a,null);return;case"input":Qe("invalid",i);var I=v=A=y=null,U=null,J=null;for(c in a)if(a.hasOwnProperty(c)){var ne=a[c];if(ne!=null)switch(c){case"name":y=ne;break;case"type":A=ne;break;case"checked":U=ne;break;case"defaultChecked":J=ne;break;case"value":v=ne;break;case"defaultValue":I=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,r));break;default:mt(i,r,c,ne,a,null)}}Br(i,v,I,U,J,A,y,!1);return;case"select":Qe("invalid",i),c=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":v=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:mt(i,r,y,I,a,null)}r=v,a=A,i.multiple=!!c,r!=null?ot(i,!!c,r,!1):a!=null&&ot(i,!!c,a,!0);return;case"textarea":Qe("invalid",i),v=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(91));break;default:mt(i,r,A,I,a,null)}Go(i,c,y,v);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(c=a[U],c!=null))switch(U){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:mt(i,r,U,c,a,null)}return;case"dialog":Qe("beforetoggle",i),Qe("toggle",i),Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":Qe("load",i);break;case"video":case"audio":for(c=0;c<El.length;c++)Qe(El[c],i);break;case"image":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"embed":case"source":case"link":Qe("error",i),Qe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(c=a[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:mt(i,r,J,c,a,null)}return;default:if(qa(r)){for(ne in a)a.hasOwnProperty(ne)&&(c=a[ne],c!==void 0&&Ih(i,r,ne,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&mt(i,r,I,c,a,null))}function Y1(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,I=null,U=null,J=null,ne=null;for(W in a){var se=a[W];if(a.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":U=se;default:c.hasOwnProperty(W)||mt(i,r,W,null,c,se)}}for(var Q in c){var W=c[Q];if(se=a[Q],c.hasOwnProperty(Q)&&(W!=null||se!=null))switch(Q){case"type":v=W;break;case"name":y=W;break;case"checked":J=W;break;case"defaultChecked":ne=W;break;case"value":A=W;break;case"defaultValue":I=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(o(137,r));break;default:W!==se&&mt(i,r,Q,W,c,se)}}zo(i,A,I,U,J,ne,v,y);return;case"select":W=A=I=Q=null;for(v in a)if(U=a[v],a.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":W=U;default:c.hasOwnProperty(v)||mt(i,r,v,null,c,U)}for(y in c)if(v=c[y],U=a[y],c.hasOwnProperty(y)&&(v!=null||U!=null))switch(y){case"value":Q=v;break;case"defaultValue":I=v;break;case"multiple":A=v;default:v!==U&&mt(i,r,y,v,c,U)}r=I,a=A,c=W,Q!=null?ot(i,!!a,Q,!1):!!c!=!!a&&(r!=null?ot(i,!!a,r,!0):ot(i,!!a,a?[]:"",!1));return;case"textarea":W=Q=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:mt(i,r,I,null,c,y)}for(A in c)if(y=c[A],v=a[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":Q=y;break;case"defaultValue":W=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==v&&mt(i,r,A,y,c,v)}qr(i,Q,W);return;case"option":for(var Se in a)if(Q=a[Se],a.hasOwnProperty(Se)&&Q!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":i.selected=!1;break;default:mt(i,r,Se,null,c,Q)}for(U in c)if(Q=c[U],W=a[U],c.hasOwnProperty(U)&&Q!==W&&(Q!=null||W!=null))switch(U){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:mt(i,r,U,Q,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in a)Q=a[De],a.hasOwnProperty(De)&&Q!=null&&!c.hasOwnProperty(De)&&mt(i,r,De,null,c,Q);for(J in c)if(Q=c[J],W=a[J],c.hasOwnProperty(J)&&Q!==W&&(Q!=null||W!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,r));break;default:mt(i,r,J,Q,c,W)}return;default:if(qa(r)){for(var gt in a)Q=a[gt],a.hasOwnProperty(gt)&&Q!==void 0&&!c.hasOwnProperty(gt)&&Ih(i,r,gt,void 0,c,Q);for(ne in c)Q=c[ne],W=a[ne],!c.hasOwnProperty(ne)||Q===W||Q===void 0&&W===void 0||Ih(i,r,ne,Q,c,W);return}}for(var z in a)Q=a[z],a.hasOwnProperty(z)&&Q!=null&&!c.hasOwnProperty(z)&&mt(i,r,z,null,c,Q);for(se in c)Q=c[se],W=a[se],!c.hasOwnProperty(se)||Q===W||Q==null&&W==null||mt(i,r,se,Q,c,W)}function B0(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function J1(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,A=y.initiatorType,I=y.duration;if(v&&I&&B0(A)){for(A=0,I=y.responseEnd,c+=1;c<a.length;c++){var U=a[c],J=U.startTime;if(J>I)break;var ne=U.transferSize,se=U.initiatorType;ne&&B0(se)&&(U=U.responseEnd,A+=ne*(U<I?1:(I-J)/(U-J)))}if(--c,r+=8*(v+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Rh=null,bh=null;function Tc(i){return i.nodeType===9?i:i.ownerDocument}function q0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z0(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function xh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Nh=null;function K1(){var i=window.event;return i&&i.type==="popstate"?i===Nh?!1:(Nh=i,!0):(Nh=null,!1)}var G0=typeof setTimeout=="function"?setTimeout:void 0,Q1=typeof clearTimeout=="function"?clearTimeout:void 0,H0=typeof Promise=="function"?Promise:void 0,X1=typeof queueMicrotask=="function"?queueMicrotask:typeof H0<"u"?function(i){return H0.resolve(null).then(i).catch(W1)}:G0;function W1(i){setTimeout(function(){throw i})}function pr(i){return i==="head"}function $0(i,r){var a=r,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),sa(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Al(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Al(a);for(var v=a.firstChild;v;){var A=v.nextSibling,I=v.nodeName;v[no]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&Al(i.ownerDocument.body);a=y}while(a);sa(r)}function Y0(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function Mh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Mh(a),Or(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function Z1(i,r,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[no])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=pi(i.nextSibling),i===null)break}return null}function j1(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=pi(i.nextSibling),i===null))return null;return i}function J0(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=pi(i.nextSibling),i===null))return null;return i}function Dh(i){return i.data==="$?"||i.data==="$~"}function Ph(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function ew(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function pi(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Vh=null;function K0(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return pi(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function Q0(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function X0(i,r,a){switch(r=Tc(a),i){case"html":if(i=r.documentElement,!i)throw Error(o(452));return i;case"head":if(i=r.head,!i)throw Error(o(453));return i;case"body":if(i=r.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function Al(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Or(i)}var mi=new Map,W0=new Set;function Ec(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var wo=de.d;de.d={f:tw,r:nw,D:iw,C:ow,L:rw,m:sw,X:lw,S:aw,M:uw};function tw(){var i=wo.f(),r=dc();return i||r}function nw(i){var r=oo(i);r!==null&&r.tag===5&&r.type==="form"?py(r):wo.r(i)}var ia=typeof document>"u"?null:document;function Z0(i,r,a){var c=ia;if(c&&typeof r=="string"&&r){var y=Nt(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),W0.has(y)||(W0.add(y),i={rel:i,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),fn(r,"link",i),Ut(r),c.head.appendChild(r)))}}function iw(i){wo.D(i),Z0("dns-prefetch",i,null)}function ow(i,r){wo.C(i,r),Z0("preconnect",i,r)}function rw(i,r,a){wo.L(i,r,a);var c=ia;if(c&&i&&r){var y='link[rel="preload"][as="'+Nt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+Nt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+Nt(a.imageSizes)+'"]')):y+='[href="'+Nt(i)+'"]';var v=y;switch(r){case"style":v=oa(i);break;case"script":v=ra(i)}mi.has(v)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),mi.set(v,i),c.querySelector(y)!==null||r==="style"&&c.querySelector(Cl(v))||r==="script"&&c.querySelector(wl(v))||(r=c.createElement("link"),fn(r,"link",i),Ut(r),c.head.appendChild(r)))}}function sw(i,r){wo.m(i,r);var a=ia;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Nt(c)+'"][href="'+Nt(i)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ra(i)}if(!mi.has(v)&&(i=E({rel:"modulepreload",href:i},r),mi.set(v,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(wl(v)))return}c=a.createElement("link"),fn(c,"link",i),Ut(c),a.head.appendChild(c)}}}function aw(i,r,a){wo.S(i,r,a);var c=ia;if(c&&i){var y=Ai(c).hoistableStyles,v=oa(i);r=r||"default";var A=y.get(v);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(Cl(v)))I.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=mi.get(v))&&kh(i,a);var U=A=c.createElement("link");Ut(U),fn(U,"link",i),U._p=new Promise(function(J,ne){U.onload=J,U.onerror=ne}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Sc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(v,A)}}}function lw(i,r){wo.X(i,r);var a=ia;if(a&&i){var c=Ai(a).hoistableScripts,y=ra(i),v=c.get(y);v||(v=a.querySelector(wl(y)),v||(i=E({src:i,async:!0},r),(r=mi.get(y))&&Uh(i,r),v=a.createElement("script"),Ut(v),fn(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function uw(i,r){wo.M(i,r);var a=ia;if(a&&i){var c=Ai(a).hoistableScripts,y=ra(i),v=c.get(y);v||(v=a.querySelector(wl(y)),v||(i=E({src:i,async:!0,type:"module"},r),(r=mi.get(y))&&Uh(i,r),v=a.createElement("script"),Ut(v),fn(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function j0(i,r,a,c){var y=(y=Ve.current)?Ec(y):null;if(!y)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=oa(a.href),a=Ai(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=oa(a.href);var v=Ai(y).hoistableStyles,A=v.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,A),(v=y.querySelector(Cl(i)))&&!v._p&&(A.instance=v,A.state.loading=5),mi.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},mi.set(i,a),v||cw(y,i,a,A.state))),r&&c===null)throw Error(o(528,""));return A}if(r&&c!==null)throw Error(o(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ra(a),a=Ai(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function oa(i){return'href="'+Nt(i)+'"'}function Cl(i){return'link[rel="stylesheet"]['+i+"]"}function ev(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function cw(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),fn(r,"link",a),Ut(r),i.head.appendChild(r))}function ra(i){return'[src="'+Nt(i)+'"]'}function wl(i){return"script[async]"+i}function tv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+Nt(a.href)+'"]');if(c)return r.instance=c,Ut(c),c;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Ut(c),fn(c,"style",y),Sc(c,a.precedence,i),r.instance=c;case"stylesheet":y=oa(a.href);var v=i.querySelector(Cl(y));if(v)return r.state.loading|=4,r.instance=v,Ut(v),v;c=ev(a),(y=mi.get(y))&&kh(c,y),v=(i.ownerDocument||i).createElement("link"),Ut(v);var A=v;return A._p=new Promise(function(I,U){A.onload=I,A.onerror=U}),fn(v,"link",c),r.state.loading|=4,Sc(v,a.precedence,i),r.instance=v;case"script":return v=ra(a.src),(y=i.querySelector(wl(v)))?(r.instance=y,Ut(y),y):(c=a,(y=mi.get(v))&&(c=E({},a),Uh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Ut(y),fn(y,"link",c),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Sc(c,a.precedence,i));return r.instance}function Sc(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===r)v=I;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function kh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Uh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Ac=null;function nv(i,r,a){if(Ac===null){var c=new Map,y=Ac=new Map;y.set(a,c)}else y=Ac,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[no]||v[xt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(r)||"";A=i+A;var I=c.get(A);I?I.push(v):c.set(A,[v])}}return c}function iv(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function fw(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function ov(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function dw(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=oa(c.href),v=r.querySelector(Cl(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Cc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=v,Ut(v);return}v=r.ownerDocument||r,c=ev(c),(y=mi.get(y))&&kh(c,y),v=v.createElement("link"),Ut(v);var A=v;A._p=new Promise(function(I,U){A.onload=I,A.onerror=U}),fn(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Cc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var Lh=0;function hw(i,r){return i.stylesheets&&i.count===0&&Ic(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Ic(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&Lh===0&&(Lh=62500*J1());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ic(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>Lh?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ic(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wc=null;function Ic(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wc=new Map,r.forEach(pw,i),wc=null,Cc.call(i))}function pw(i,r){if(!(r.state.loading&4)){var a=wc.get(i);if(a)var c=a.get(null);else{a=new Map,wc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||c,v===c&&a.set(null,y),a.set(A,y),this.count++,c=Cc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Il={$$typeof:K,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function mw(i,r,a,c,y,v,A,I,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sn(0),this.hiddenUpdates=sn(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function rv(i,r,a,c,y,v,A,I,U,J,ne,se){return i=new mw(i,r,a,A,U,J,ne,se,I),r=1,v===!0&&(r|=24),v=Xn(3,null,null,r),i.current=v,v.stateNode=i,r=gd(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:r},Td(v),i}function sv(i){return i?(i=Us,i):Us}function av(i,r,a,c,y,v){y=sv(y),c.context===null?c.context=y:c.pendingContext=y,c=ir(r),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=or(i,c,r),a!==null&&(qn(a,i,r),ol(a,i,r))}function lv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function Oh(i,r){lv(i,r),(i=i.alternate)&&lv(i,r)}function uv(i){if(i.tag===13||i.tag===31){var r=Xr(i,67108864);r!==null&&qn(r,i,67108864),Oh(i,67108864)}}function cv(i){if(i.tag===13||i.tag===31){var r=ti();r=Va(r);var a=Xr(i,r);a!==null&&qn(a,i,r),Oh(i,r)}}var Rc=!0;function gw(i,r,a,c){var y=ee.T;ee.T=null;var v=de.p;try{de.p=2,Fh(i,r,a,c)}finally{de.p=v,ee.T=y}}function yw(i,r,a,c){var y=ee.T;ee.T=null;var v=de.p;try{de.p=8,Fh(i,r,a,c)}finally{de.p=v,ee.T=y}}function Fh(i,r,a,c){if(Rc){var y=Bh(c);if(y===null)wh(i,r,c,bc,a),dv(i,c);else if(_w(y,i,r,a,c))c.stopPropagation();else if(dv(i,c),r&4&&-1<vw.indexOf(i)){for(;y!==null;){var v=oo(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Vn(v.pendingLanes);if(A!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var U=1<<31-Qt(A);I.entanglements[1]|=U,A&=~U}$i(v),(lt&6)===0&&(cc=we()+500,Tl(0))}}break;case 31:case 13:I=Xr(v,2),I!==null&&qn(I,v,2),dc(),Oh(v,2)}if(v=Bh(c),v===null&&wh(i,r,c,bc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else wh(i,r,c,null,a)}}function Bh(i){return i=bs(i),qh(i)}var bc=null;function qh(i){if(bc=null,i=io(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return bc=i,null}function fv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($e()){case Me:return 2;case ie:return 8;case ce:case pe:return 32;case re:return 268435456;default:return 32}default:return 32}}var zh=!1,mr=null,gr=null,yr=null,Rl=new Map,bl=new Map,vr=[],vw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dv(i,r){switch(i){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Rl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(r.pointerId)}}function xl(i,r,a,c,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},r!==null&&(r=oo(r),r!==null&&uv(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function _w(i,r,a,c,y){switch(r){case"focusin":return mr=xl(mr,i,r,a,c,y),!0;case"dragenter":return gr=xl(gr,i,r,a,c,y),!0;case"mouseover":return yr=xl(yr,i,r,a,c,y),!0;case"pointerover":var v=y.pointerId;return Rl.set(v,xl(Rl.get(v)||null,i,r,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,bl.set(v,xl(bl.get(v)||null,i,r,a,c,y)),!0}return!1}function hv(i){var r=io(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,cu(i.priority,function(){cv(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,cu(i.priority,function(){cv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=Bh(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Rs=c,a.target.dispatchEvent(c),Rs=null}else return r=oo(a),r!==null&&uv(r),i.blockedOn=a,!1;r.shift()}return!0}function pv(i,r,a){xc(i)&&a.delete(r)}function Tw(){zh=!1,mr!==null&&xc(mr)&&(mr=null),gr!==null&&xc(gr)&&(gr=null),yr!==null&&xc(yr)&&(yr=null),Rl.forEach(pv),bl.forEach(pv)}function Nc(i,r){i.blockedOn===r&&(i.blockedOn=null,zh||(zh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Tw)))}var Mc=null;function mv(i){Mc!==i&&(Mc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Mc===i&&(Mc=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],y=i[r+2];if(typeof c!="function"){if(qh(c||a)===null)continue;break}var v=oo(a);v!==null&&(i.splice(r,3),r-=3,Bd(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function sa(i){function r(U){return Nc(U,i)}mr!==null&&Nc(mr,i),gr!==null&&Nc(gr,i),yr!==null&&Nc(yr,i),Rl.forEach(r),bl.forEach(r);for(var a=0;a<vr.length;a++){var c=vr[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<vr.length&&(a=vr[0],a.blockedOn===null);)hv(a),a.blockedOn===null&&vr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],A=y[an]||null;if(typeof v=="function")A||mv(a);else if(A){var I=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[an]||null)I=A.formAction;else if(qh(y)!==null)continue}else I=A.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),mv(a)}}}function gv(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Gh(i){this._internalRoot=i}Dc.prototype.render=Gh.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(o(409));var a=r.current,c=ti();av(a,c,i,r,null,null)},Dc.prototype.unmount=Gh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;av(i.current,2,null,i,null,null),dc(),r[Ui]=null}};function Dc(i){this._internalRoot=i}Dc.prototype.unstable_scheduleHydration=function(i){if(i){var r=to();i={blockedOn:null,target:i,priority:r};for(var a=0;a<vr.length&&r!==0&&r<vr[a].priority;a++);vr.splice(a,0,i),a===0&&hv(i)}};var yv=e.version;if(yv!=="19.2.4")throw Error(o(527,yv,"19.2.4"));de.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=g(r),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var Ew={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{Bt=Pc.inject(Ew),It=Pc}catch{}}return Ml.createRoot=function(i,r){if(!s(i))throw Error(o(299));var a=!1,c="",y=Cy,v=wy,A=Iy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=rv(i,1,!1,null,null,a,c,null,y,v,A,gv),i[Ui]=r.current,Ch(i),new Gh(r)},Ml.hydrateRoot=function(i,r,a){if(!s(i))throw Error(o(299));var c=!1,y="",v=Cy,A=wy,I=Iy,U=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(U=a.formState)),r=rv(i,1,!0,r,a??null,c,y,U,v,A,I,gv),r.context=sv(null),a=r.current,c=ti(),c=Va(c),y=ir(c),y.callback=null,or(a,y,c),a=c,r.current.lanes=a,gn(r,a),$i(r),i[Ui]=r.current,Ch(i),new Dc(r)},Ml.version="19.2.4",Ml}var Rv;function Dw(){if(Rv)return Yh.exports;Rv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yh.exports=Mw(),Yh.exports}var Pw=Dw();const Vw=PE(Pw),kw=Object.prototype.toString,Uw=n=>kw.call(n)==="[object Error]",Lw=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function Ow(n){if(!(n&&Uw(n)&&n.name==="TypeError"&&typeof n.message=="string"))return!1;const{message:t,stack:o}=n;return t==="Load failed"?o===void 0||"__sentry_captured__"in n:t.startsWith("error sending request for url")?!0:Lw.has(t)}function Fw(n){if(typeof n=="number"){if(n<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(n))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(n!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Vc(n,e,{min:t=0,allowInfinity:o=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${n}\` to be a number${o?" or Infinity":""}.`);if(!o&&!Number.isFinite(e))throw new TypeError(`Expected \`${n}\` to be a finite number.`);if(e<t)throw new TypeError(`Expected \`${n}\` to be  ${t}.`)}}class VE extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function Bw(n,e){const t=Math.max(1,n+1),o=e.randomize?Math.random()+1:1;let s=Math.round(o*e.minTimeout*e.factor**(t-1));return s=Math.min(s,e.maxTimeout),s}function bv(n,e){return Number.isFinite(e)?e-(performance.now()-n):e}async function qw({error:n,attemptNumber:e,retriesConsumed:t,startTime:o,options:s}){var R,V,O,x;const l=n instanceof Error?n:new TypeError(`Non-error was thrown: "${n}". You should only throw errors.`);if(l instanceof VE)throw l.originalError;const u=Number.isFinite(s.retries)?Math.max(0,s.retries-t):s.retries,d=s.maxRetryTime??Number.POSITIVE_INFINITY,h=Object.freeze({error:l,attemptNumber:e,retriesLeft:u,retriesConsumed:t});if(await s.onFailedAttempt(h),bv(o,d)<=0)throw l;const g=await s.shouldConsumeRetry(h),_=bv(o,d);if(_<=0||u<=0)throw l;if(l instanceof TypeError&&!Ow(l)){if(g)throw l;return(R=s.signal)==null||R.throwIfAborted(),!1}if(!await s.shouldRetry(h))throw l;if(!g)return(V=s.signal)==null||V.throwIfAborted(),!1;const E=Bw(t,s),S=Math.min(E,_);return(O=s.signal)==null||O.throwIfAborted(),S>0&&await new Promise((G,Z)=>{var he,$;const K=()=>{var D;clearTimeout(te),(D=s.signal)==null||D.removeEventListener("abort",K),Z(s.signal.reason)},te=setTimeout(()=>{var D;(D=s.signal)==null||D.removeEventListener("abort",K),G()},S);s.unref&&((he=te.unref)==null||he.call(te)),($=s.signal)==null||$.addEventListener("abort",K,{once:!0})}),(x=s.signal)==null||x.throwIfAborted(),!0}async function zw(n,e={}){var l,u,d;if(e={...e},Fw(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),Vc("factor",e.factor,{min:0,allowInfinity:!1}),Vc("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Vc("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Vc("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(l=e.signal)==null||l.throwIfAborted();let t=0,o=0;const s=performance.now();for(;!Number.isFinite(e.retries)||o<=e.retries;){t++;try{(u=e.signal)==null||u.throwIfAborted();const h=await n(t);return(d=e.signal)==null||d.throwIfAborted(),h}catch(h){await qw({error:h,attemptNumber:t,retriesConsumed:o,startTime:s,options:e})&&o++}}throw new Error("Retry attempts exhausted without throwing an error.")}var Gw={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Hw,$w;function Yw(){return{geminiUrl:Hw,vertexUrl:$w}}function Jw(n,e,t,o){var s,l;if(!(n!=null&&n.baseUrl)){const u=Yw();return e?(s=u.vertexUrl)!==null&&s!==void 0?s:t:(l=u.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mo{}function ye(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const h=n[d];if(Array.isArray(t))for(let g=0;g<h.length;g++){const _=h[g];p(_,e.slice(l+1),t[g])}else for(const g of h)p(g,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const h=n[d];p(h[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const o=e[e.length-1],s=n[o];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return t;const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(o+1),t)):t}else return t}else n=n[s]}return n}catch(o){if(o instanceof TypeError)return t;throw o}}function Kw(n,e){for(const[t,o]of Object.entries(e)){const s=t.split("."),l=o.split("."),u=new Set;let d=-1;for(let h=0;h<s.length;h++)if(s[h]==="*"){d=h;break}if(d!==-1&&l.length>d)for(let h=d;h<l.length;h++){const g=l[h];g!=="*"&&!g.endsWith("[]")&&!g.endsWith("[0]")&&u.add(g)}cp(n,s,l,0,u)}}function cp(n,e,t,o,s){if(o>=e.length||typeof n!="object"||n===null)return;const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const h of d[u])cp(h,e,t,o+1,s)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(g=>!g.startsWith("_")&&!s.has(g)),h={};for(const g of d)h[g]=u[g];for(const[g,_]of Object.entries(h)){const E=[];for(const S of t.slice(o))S==="*"?E.push(g):E.push(S);p(u,E,_)}for(const g of d)delete u[g]}}else{const u=n;l in u&&cp(u[l],e,t,o+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qw(n){const e={},t=f(n,["operationName"]);t!=null&&p(e,["operationName"],t);const o=f(n,["resourceName"]);return o!=null&&p(e,["_url","resourceName"],o),e}function Xw(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],Zw(u)),e}function Ww(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["response"]);return u!=null&&p(e,["response"],jw(u)),e}function Zw(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>eI(u))),p(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(e,["raiMediaFilteredCount"],o);const s=f(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function jw(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>tI(u))),p(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(e,["raiMediaFilteredCount"],o);const s=f(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function eI(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],aI(t)),e}function tI(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],lI(t)),e}function nI(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function iI(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function oI(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["response"]);return u!=null&&p(e,["response"],rI(u)),e}function rI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&p(e,["parent"],o);const s=f(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function kE(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["response"]);return u!=null&&p(e,["response"],sI(u)),e}function sI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&p(e,["parent"],o);const s=f(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function aI(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const o=f(n,["encodedVideo"]);o!=null&&p(e,["videoBytes"],Zp(o));const s=f(n,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function lI(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(e,["videoBytes"],Zp(o));const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xv||(xv={}));var Nv;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Nv||(Nv={}));var Mv;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Mv||(Mv={}));var Pt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Pt||(Pt={}));var Dv;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Dv||(Dv={}));var Pv;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Pv||(Pv={}));var Vv;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Vv||(Vv={}));var kv;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(kv||(kv={}));var Uv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Uv||(Uv={}));var Lv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Lv||(Lv={}));var Ov;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Ov||(Ov={}));var Fv;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Fv||(Fv={}));var Bv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Bv||(Bv={}));var qv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(qv||(qv={}));var zv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(zv||(zv={}));var Gv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Gv||(Gv={}));var Hv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Hv||(Hv={}));var $v;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($v||($v={}));var Yv;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Yv||(Yv={}));var Jv;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Jv||(Jv={}));var Kv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Kv||(Kv={}));var of;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(of||(of={}));var Qv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Qv||(Qv={}));var Xv;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Xv||(Xv={}));var Wv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Wv||(Wv={}));var fp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(fp||(fp={}));var Zv;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Zv||(Zv={}));var jv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(jv||(jv={}));var dp;(function(n){n.COLLECTION="COLLECTION"})(dp||(dp={}));var e_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(e_||(e_={}));var t_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(t_||(t_={}));var n_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(n_||(n_={}));var i_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(i_||(i_={}));var o_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(o_||(o_={}));var r_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(r_||(r_={}));var s_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(s_||(s_={}));var a_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(a_||(a_={}));var l_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(l_||(l_={}));var u_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(u_||(u_={}));var c_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(c_||(c_={}));var f_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(f_||(f_={}));var d_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(d_||(d_={}));var h_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(h_||(h_={}));var p_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(p_||(p_={}));var m_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(m_||(m_={}));var g_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(g_||(g_={}));var y_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(y_||(y_={}));var v_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(v_||(v_={}));var __;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(__||(__={}));var T_;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(T_||(T_={}));var E_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(E_||(E_={}));var S_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(S_||(S_={}));var A_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(A_||(A_={}));var C_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(C_||(C_={}));var w_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(w_||(w_={}));var I_;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(I_||(I_={}));var da;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(da||(da={}));class hp{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Dl{get text(){var e,t,o,s,l,u,d,h;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",_=!1;const E=[];for(const S of(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[R,V]of Object.entries(S))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(V!==null||V!==void 0)&&E.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,g+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?g:void 0}get data(){var e,t,o,s,l,u,d,h;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const _=[];for(const E of(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[S,R]of Object.entries(E))S!=="inlineData"&&(R!==null||R!==void 0)&&_.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(g+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var e,t,o,s,l,u,d,h;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var e,t,o,s,l,u,d,h,g;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(g=_==null?void 0:_[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,t,o,s,l,u,d,h,g;if(((s=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(g=_==null?void 0:_[0])===null||g===void 0?void 0:g.output}}class R_{}class b_{}class uI{}class cI{}class fI{}class dI{}class x_{}class N_{}class M_{}class hI{}class rf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new rf;let s;const l=e;return t?s=Ww(l):s=Xw(l),Object.assign(o,s),o}}class D_{}class P_{}class V_{}class k_{}class pI{}class mI{}class gI{}class jp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new jp,l=oI(e);return Object.assign(o,l),o}}class yI{}class vI{}class _I{}class TI{}class U_{}class EI{get text(){var e,t,o;let s="",l=!1;const u=[];for(const d of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[h,g]of Object.entries(d))h!=="text"&&h!=="thought"&&g!==null&&u.push(h);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,s+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,t,o;let s="";const l=[];for(const u of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[d,h]of Object.entries(u))d!=="inlineData"&&h!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(s+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class SI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class em{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new em,l=kE(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function at(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function UE(n,e){const t=at(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function LE(n){return Array.isArray(n)?n.map(e=>sf(e)):[sf(n)]}function sf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function OE(n){const e=sf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function FE(n){const e=sf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function L_(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function BE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>L_(e)):[L_(n)]}function pp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function O_(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function F_(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Sn(n){if(n==null)throw new Error("ContentUnion is required");return pp(n)?n:{role:"user",parts:BE(n)}}function tm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=Sn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=Sn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Sn(t)):[Sn(e)]}function vi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(O_(n)||F_(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Sn(n)]}const e=[],t=[],o=pp(n[0]);for(const s of n){const l=pp(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(O_(s)||F_(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return o||e.push({role:"user",parts:BE(t)}),e}function AI(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(Pt).includes(t[0].toUpperCase())?t[0].toUpperCase():Pt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(Pt).includes(o.toUpperCase())?o.toUpperCase():Pt.TYPE_UNSPECIFIED})}}function pa(n){const e={},t=["items"],o=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&AI(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Pt).includes(d.toUpperCase())?d.toUpperCase():Pt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=pa(d);else if(o.includes(u)){const h=[];for(const g of d){if(g.type=="null"){e.nullable=!0;continue}h.push(pa(g))}e[u]=h}else if(s.includes(u)){const h={};for(const[g,_]of Object.entries(d))h[g]=pa(_);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=d}return e}function nm(n){return pa(n)}function im(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function om(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function wa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=pa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=pa(e.response));return n}function Ia(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function CI(n,e,t,o=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function Do(n,e){if(typeof e!="string")throw new Error("name must be a string");return CI(n,e,"cachedContents")}function qE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function kr(n){return Zp(n)}function wI(n){return n!=null&&typeof n=="object"&&"name"in n}function II(n){return n!=null&&typeof n=="object"&&"video"in n}function RI(n){return n!=null&&typeof n=="object"&&"uri"in n}function zE(n){var e;let t;if(wI(n)&&(t=n.name),!(RI(n)&&(t=n.uri,t===void 0))&&!(II(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function GE(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function HE(n){for(const e of["models","tunedModels","publisherModels"])if(bI(n,e))return n[e];return[]}function bI(n,e){return n!==null&&typeof n=="object"&&e in n}function xI(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function NI(n,e={}){const t=[],o=new Set;for(const s of n){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const u=xI(s,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function $E(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function MI(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function YE(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let l=!1;for(const u of s){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ra(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function JE(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DI(n){const e={},t=f(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const o=f(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>dR(u))),p(e,["inlinedResponses"],l)}const s=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["inlinedEmbedContentResponses"],l)}return e}function PI(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const o=f(n,["gcsDestination","outputUriPrefix"]);o!=null&&p(e,["gcsUri"],o);const s=f(n,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function VI(n){const e={},t=f(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const o=f(n,["gcsUri"]);o!=null&&p(e,["gcsDestination","outputUriPrefix"],o);const s=f(n,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Qc(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata","displayName"]);o!=null&&p(e,["displayName"],o);const s=f(n,["metadata","state"]);s!=null&&p(e,["state"],JE(s));const l=f(n,["metadata","createTime"]);l!=null&&p(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const h=f(n,["metadata","model"]);h!=null&&p(e,["model"],h);const g=f(n,["metadata","output"]);return g!=null&&p(e,["dest"],DI(YE(g))),e}function mp(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["displayName"]);o!=null&&p(e,["displayName"],o);const s=f(n,["state"]);s!=null&&p(e,["state"],JE(s));const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["createTime"]);u!=null&&p(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(e,["startTime"],d);const h=f(n,["endTime"]);h!=null&&p(e,["endTime"],h);const g=f(n,["updateTime"]);g!=null&&p(e,["updateTime"],g);const _=f(n,["model"]);_!=null&&p(e,["model"],_);const E=f(n,["inputConfig"]);E!=null&&p(e,["src"],kI(E));const S=f(n,["outputConfig"]);S!=null&&p(e,["dest"],PI(YE(S)));const R=f(n,["completionStats"]);return R!=null&&p(e,["completionStats"],R),e}function kI(n){const e={},t=f(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const o=f(n,["gcsSource","uris"]);o!=null&&p(e,["gcsUri"],o);const s=f(n,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function UI(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&p(t,["fileName"],o);const s=f(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>fR(n,u))),p(t,["requests","requests"],l)}return t}function LI(n){const e={},t=f(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const o=f(n,["gcsUri"]);o!=null&&p(e,["gcsSource","uris"],o);const s=f(n,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function OI(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function FI(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function BI(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function qI(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const o=f(n,["citationMetadata"]);o!=null&&p(e,["citationMetadata"],zI(o));const s=f(n,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const l=f(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const h=f(n,["index"]);h!=null&&p(e,["index"],h);const g=f(n,["logprobsResult"]);g!=null&&p(e,["logprobsResult"],g);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(R=>R)),p(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&p(e,["urlContextMetadata"],E),e}function zI(n){const e={},t=f(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["citations"],o)}return e}function KE(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>_R(l))),p(e,["parts"],s)}const o=f(n,["role"]);return o!=null&&p(e,["role"],o),e}function GI(n,e){const t={},o=f(n,["displayName"]);if(e!==void 0&&o!=null&&p(e,["batch","displayName"],o),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function HI(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const s=f(n,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],VI(MI(s))),t}function B_(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["_url","model"],at(n,o));const s=f(e,["src"]);s!=null&&p(t,["batch","inputConfig"],UI(n,$E(n,s)));const l=f(e,["config"]);return l!=null&&GI(l,t),t}function $I(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["model"],at(n,o));const s=f(e,["src"]);s!=null&&p(t,["inputConfig"],LI($E(n,s)));const l=f(e,["config"]);return l!=null&&HI(l,t),t}function YI(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&p(e,["batch","displayName"],o),t}function JI(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["_url","model"],at(n,o));const s=f(e,["src"]);s!=null&&p(t,["batch","inputConfig"],eR(n,s));const l=f(e,["config"]);return l!=null&&YI(l,t),t}function KI(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function QI(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function XI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&p(e,["name"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);return l!=null&&p(e,["error"],l),e}function WI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&p(e,["name"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);return l!=null&&p(e,["error"],l),e}function ZI(n,e){const t={},o=f(e,["contents"]);if(o!=null){let l=tm(n,o);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["requests[]","request","content"],l)}const s=f(e,["config"]);return s!=null&&(p(t,["_self"],jI(s,t)),Kw(t,{"requests[].*":"requests[].request.*"})),t}function jI(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&p(e,["requests[]","taskType"],o);const s=f(n,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function eR(n,e){const t={},o=f(e,["fileName"]);o!=null&&p(t,["file_name"],o);const s=f(e,["inlinedRequests"]);return s!=null&&p(t,["requests"],ZI(n,s)),t}function tR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function nR(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const o=f(n,["args"]);o!=null&&p(e,["args"],o);const s=f(n,["name"]);if(s!=null&&p(e,["name"],s),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iR(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&p(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function oR(n,e,t){const o={},s=f(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],KE(Sn(s)));const l=f(e,["temperature"]);l!=null&&p(o,["temperature"],l);const u=f(e,["topP"]);u!=null&&p(o,["topP"],u);const d=f(e,["topK"]);d!=null&&p(o,["topK"],d);const h=f(e,["candidateCount"]);h!=null&&p(o,["candidateCount"],h);const g=f(e,["maxOutputTokens"]);g!=null&&p(o,["maxOutputTokens"],g);const _=f(e,["stopSequences"]);_!=null&&p(o,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&p(o,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&p(o,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&p(o,["presencePenalty"],R);const V=f(e,["frequencyPenalty"]);V!=null&&p(o,["frequencyPenalty"],V);const O=f(e,["seed"]);O!=null&&p(o,["seed"],O);const x=f(e,["responseMimeType"]);x!=null&&p(o,["responseMimeType"],x);const G=f(e,["responseSchema"]);G!=null&&p(o,["responseSchema"],nm(G));const Z=f(e,["responseJsonSchema"]);if(Z!=null&&p(o,["responseJsonSchema"],Z),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const K=f(e,["safetySettings"]);if(t!==void 0&&K!=null){let P=K;Array.isArray(P)&&(P=P.map(Ie=>TR(Ie))),p(t,["safetySettings"],P)}const te=f(e,["tools"]);if(t!==void 0&&te!=null){let P=Ia(te);Array.isArray(P)&&(P=P.map(Ie=>SR(wa(Ie)))),p(t,["tools"],P)}const he=f(e,["toolConfig"]);if(t!==void 0&&he!=null&&p(t,["toolConfig"],ER(he)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=f(e,["cachedContent"]);t!==void 0&&$!=null&&p(t,["cachedContent"],Do(n,$));const D=f(e,["responseModalities"]);D!=null&&p(o,["responseModalities"],D);const M=f(e,["mediaResolution"]);M!=null&&p(o,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&p(o,["speechConfig"],im(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=f(e,["thinkingConfig"]);k!=null&&p(o,["thinkingConfig"],k);const L=f(e,["imageConfig"]);L!=null&&p(o,["imageConfig"],cR(L));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&p(o,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function rR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(g=>qI(g))),p(e,["candidates"],h)}const s=f(n,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const l=f(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function sR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function aR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Ra(n,o)),t}function lR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function uR(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function cR(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const o=f(n,["imageSize"]);if(o!=null&&p(e,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function fR(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["request","model"],at(n,o));const s=f(e,["contents"]);if(s!=null){let d=vi(s);Array.isArray(d)&&(d=d.map(h=>KE(h))),p(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&p(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&p(t,["request","generationConfig"],oR(n,u,f(t,["request"],{}))),t}function dR(n){const e={},t=f(n,["response"]);t!=null&&p(e,["response"],rR(t));const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["error"]);return s!=null&&p(e,["error"],s),e}function hR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function pR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const l=f(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),t}function mR(n){const e={},t=f(n,["config"]);return t!=null&&hR(t,e),e}function gR(n){const e={},t=f(n,["config"]);return t!=null&&pR(t,e),e}function yR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Qc(u))),p(e,["batchJobs"],l)}return e}function vR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>mp(u))),p(e,["batchJobs"],l)}return e}function _R(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const s=f(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],tR(l));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],nR(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(n,["inlineData"]);h!=null&&p(e,["inlineData"],OI(h));const g=f(n,["text"]);g!=null&&p(e,["text"],g);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function TR(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&p(e,["threshold"],o),e}function ER(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&p(e,["functionCallingConfig"],iR(o)),e}function SR(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const s=f(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],lR(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],uR(d));const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const g=f(n,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ro;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ro||(Ro={}));class gs{constructor(e,t,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,s)}init(e,t,o){var s,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(s=u.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AR extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gs(Ro.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=B_(this.apiClient,e),o=t._url,s=ye("{model}:batchGenerateContent",o),d=t.batch.inputConfig.requests,h=d.requests,g=[];for(const _ of h){const E=Object.assign({},_);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const R=E.request;R.systemInstruction=S,E.request=R}g.push(E)}return d.requests=g,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${s}`;else if(u)o.dest=`${u}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=$I(this.apiClient,e);return d=ye("batchPredictionJobs",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>mp(_))}else{const g=B_(this.apiClient,e);return d=ye("{model}:batchGenerateContent",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Qc(_))}}async createEmbeddingsInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=JI(this.apiClient,e);return l=ye("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Qc(h))}}async get(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=aR(this.apiClient,e);return d=ye("batchPredictionJobs/{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>mp(_))}else{const g=sR(this.apiClient,e);return d=ye("batches/{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Qc(_))}}async cancel(e){var t,o,s,l;let u="",d={};if(this.apiClient.isVertexAI()){const h=BI(this.apiClient,e);u=ye("batchPredictionJobs/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const h=FI(this.apiClient,e);u=ye("batches/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=gR(e);return d=ye("batchPredictionJobs",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=vR(_),S=new U_;return Object.assign(S,E),S})}else{const g=mR(e);return d=ye("batches",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=yR(_),S=new U_;return Object.assign(S,E),S})}}async delete(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=QI(this.apiClient,e);return d=ye("batchPredictionJobs/{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>WI(_))}else{const g=KI(this.apiClient,e);return d=ye("batches/{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>XI(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CR(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function q_(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>JR(l))),p(e,["parts"],s)}const o=f(n,["role"]);return o!=null&&p(e,["role"],o),e}function wR(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const s=f(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const l=f(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=vi(u);Array.isArray(_)&&(_=_.map(E=>q_(E))),p(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],q_(Sn(d)));const h=f(n,["tools"]);if(e!==void 0&&h!=null){let _=h;Array.isArray(_)&&(_=_.map(E=>QR(E))),p(e,["tools"],_)}const g=f(n,["toolConfig"]);if(e!==void 0&&g!=null&&p(e,["toolConfig"],KR(g)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function IR(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const s=f(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const l=f(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=vi(u);Array.isArray(E)&&(E=E.map(S=>S)),p(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],Sn(d));const h=f(n,["tools"]);if(e!==void 0&&h!=null){let E=h;Array.isArray(E)&&(E=E.map(S=>XR(S))),p(e,["tools"],E)}const g=f(n,["toolConfig"]);e!==void 0&&g!=null&&p(e,["toolConfig"],g);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function RR(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["model"],UE(n,o));const s=f(e,["config"]);return s!=null&&wR(s,t),t}function bR(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["model"],UE(n,o));const s=f(e,["config"]);return s!=null&&IR(s,t),t}function xR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Do(n,o)),t}function NR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Do(n,o)),t}function MR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function DR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function PR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function VR(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const o=f(n,["args"]);o!=null&&p(e,["args"],o);const s=f(n,["name"]);if(s!=null&&p(e,["name"],s),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kR(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&p(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function UR(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const o=f(n,["name"]);o!=null&&p(e,["name"],o);const s=f(n,["parameters"]);s!=null&&p(e,["parameters"],s);const l=f(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function LR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Do(n,o)),t}function OR(n,e){const t={},o=f(e,["name"]);return o!=null&&p(t,["_url","name"],Do(n,o)),t}function FR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function BR(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function qR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function zR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function GR(n){const e={},t=f(n,["config"]);return t!=null&&qR(t,e),e}function HR(n){const e={},t=f(n,["config"]);return t!=null&&zR(t,e),e}function $R(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function YR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function JR(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const s=f(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],PR(l));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],VR(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(n,["inlineData"]);h!=null&&p(e,["inlineData"],CR(h));const g=f(n,["text"]);g!=null&&p(e,["text"],g);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function KR(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&p(e,["functionCallingConfig"],kR(o)),e}function QR(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const s=f(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],FR(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],BR(d));const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const g=f(n,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}function XR(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&p(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(n,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const l=f(n,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>UR(S))),p(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const _=f(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function WR(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const s=f(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function ZR(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&p(e,["ttl"],o);const s=f(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function jR(n,e){const t={},o=f(e,["name"]);o!=null&&p(t,["_url","name"],Do(n,o));const s=f(e,["config"]);return s!=null&&WR(s,t),t}function eb(n,e){const t={},o=f(e,["name"]);o!=null&&p(t,["_url","name"],Do(n,o));const s=f(e,["config"]);return s!=null&&ZR(s,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tb extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gs(Ro.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=bR(this.apiClient,e);return d=ye("cachedContents",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const g=RR(this.apiClient,e);return d=ye("cachedContents",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=OR(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const g=LR(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=NR(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=DR(_),S=new V_;return Object.assign(S,E),S})}else{const g=xR(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=MR(_),S=new V_;return Object.assign(S,E),S})}}async update(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=eb(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const g=jR(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=HR(e);return d=ye("cachedContents",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=YR(_),S=new k_;return Object.assign(S,E),S})}else{const g=GR(e);return d=ye("cachedContents",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=$R(_),S=new k_;return Object.assign(S,E),S})}}}function af(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(n);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(n,o[s])&&(t[o[s]]=n[o[s]]);return t}function z_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ue(n){return this instanceof Ue?(this.v=n,this):new Ue(n)}function xi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(R){return function(V){return Promise.resolve(V).then(R,E)}}function d(R,V){o[R]&&(s[R]=function(O){return new Promise(function(x,G){l.push([R,O,x,G])>1||h(R,O)})},V&&(s[R]=V(s[R])))}function h(R,V){try{g(o[R](V))}catch(O){S(l[0][3],O)}}function g(R){R.value instanceof Ue?Promise.resolve(R.value.v).then(_,E):S(l[0][2],R)}function _(R){h("next",R)}function E(R){h("throw",R)}function S(R,V){R(V),l.shift(),l.length&&h(l[0][0],l[0][1])}}function Ni(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof z_=="function"?z_(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(u){return new Promise(function(d,h){u=n[l](u),s(d,h,u.done,u.value)})}}function s(l,u,d,h){Promise.resolve(h).then(function(g){l({value:g,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nb(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:QE(t)}function QE(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ib(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function G_(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const s=[];let l=!0;for(;o<t&&n[o].role==="model";)s.push(n[o]),l&&!QE(n[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class ob{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new rb(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class rb{constructor(e,t,o,s={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),ib(l)}async sendMessage(e){var t;await this.sendPromise;const o=Sn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const h=await s,g=(u=(l=h.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=h.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];_!=null&&(S=(d=_.slice(E))!==null&&d!==void 0?d:[]);const R=g?[g]:[];this.recordHistory(o,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const o=Sn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?G_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return xi(this,arguments,function*(){var s,l,u,d,h,g;const _=[];try{for(var E=!0,S=Ni(e),R;R=yield Ue(S.next()),s=R.done,!s;E=!0){d=R.value,E=!1;const V=d;if(nb(V)){const O=(g=(h=V.candidates)===null||h===void 0?void 0:h[0])===null||g===void 0?void 0:g.content;O!==void 0&&_.push(O)}yield yield Ue(V)}}catch(V){l={error:V}}finally{try{!E&&!s&&(u=S.return)&&(yield Ue(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,_)})}recordHistory(e,t,o){let s=[];t.length>0&&t.every(l=>l.role!==void 0)?s=t:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...G_(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $l extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,$l.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sb(n){const e={},t=f(n,["file"]);return t!=null&&p(e,["file"],t),e}function ab(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function lb(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],zE(t)),e}function ub(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function cb(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],zE(t)),e}function fb(n){const e={},t=f(n,["uris"]);return t!=null&&p(e,["uris"],t),e}function db(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function hb(n){const e={},t=f(n,["config"]);return t!=null&&db(t,e),e}function pb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["files"],l)}return e}function mb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),p(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gb extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gs(Ro.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=hb(e);return l=ye("files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const g=pb(h),_=new yI;return Object.assign(_,g),_})}}async createInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sb(e);return l=ye("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=ab(h),_=new vI;return Object.assign(_,g),_})}}async get(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cb(e);return l=ye("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lb(e);return l=ye("files/{file}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const g=ub(h),_=new _I;return Object.assign(_,g),_})}}async registerFilesInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fb(e);return l=ye("files:register",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=mb(h),_=new TI;return Object.assign(_,g),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xc(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function yb(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>Pb(l))),p(e,["parts"],s)}const o=f(n,["role"]);return o!=null&&p(e,["role"],o),e}function vb(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function _b(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const o=f(n,["args"]);o!=null&&p(e,["args"],o);const s=f(n,["name"]);if(s!=null&&p(e,["name"],s),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Tb(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const o=f(n,["name"]);o!=null&&p(e,["name"],o);const s=f(n,["parameters"]);s!=null&&p(e,["parameters"],s);const l=f(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Eb(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const o=f(n,["responseJsonSchema"]);o!=null&&p(e,["responseJsonSchema"],o);const s=f(n,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const l=f(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const h=f(n,["logprobs"]);h!=null&&p(e,["logprobs"],h);const g=f(n,["maxOutputTokens"]);g!=null&&p(e,["maxOutputTokens"],g);const _=f(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const E=f(n,["presencePenalty"]);E!=null&&p(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&p(e,["responseMimeType"],R);const V=f(n,["responseModalities"]);V!=null&&p(e,["responseModalities"],V);const O=f(n,["responseSchema"]);O!=null&&p(e,["responseSchema"],O);const x=f(n,["routingConfig"]);x!=null&&p(e,["routingConfig"],x);const G=f(n,["seed"]);G!=null&&p(e,["seed"],G);const Z=f(n,["speechConfig"]);Z!=null&&p(e,["speechConfig"],Z);const K=f(n,["stopSequences"]);K!=null&&p(e,["stopSequences"],K);const te=f(n,["temperature"]);te!=null&&p(e,["temperature"],te);const he=f(n,["thinkingConfig"]);he!=null&&p(e,["thinkingConfig"],he);const $=f(n,["topK"]);$!=null&&p(e,["topK"],$);const D=f(n,["topP"]);if(D!=null&&p(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Sb(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Ab(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function Cb(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig"],o);const s=f(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const l=f(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=f(n,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","mediaResolution"],g);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],om(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],R);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],yb(Sn(V)));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let $=Ia(O);Array.isArray($)&&($=$.map(D=>kb(wa(D)))),p(e,["setup","tools"],$)}const x=f(n,["sessionResumption"]);e!==void 0&&x!=null&&p(e,["setup","sessionResumption"],Vb(x));const G=f(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&p(e,["setup","inputAudioTranscription"],G);const Z=f(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&p(e,["setup","outputAudioTranscription"],Z);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&p(e,["setup","realtimeInputConfig"],K);const te=f(n,["contextWindowCompression"]);e!==void 0&&te!=null&&p(e,["setup","contextWindowCompression"],te);const he=f(n,["proactivity"]);if(e!==void 0&&he!=null&&p(e,["setup","proactivity"],he),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function wb(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig"],Eb(o));const s=f(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const l=f(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=f(n,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","mediaResolution"],g);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],om(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],R);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],Sn(V));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let D=Ia(O);Array.isArray(D)&&(D=D.map(M=>Ub(wa(M)))),p(e,["setup","tools"],D)}const x=f(n,["sessionResumption"]);e!==void 0&&x!=null&&p(e,["setup","sessionResumption"],x);const G=f(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&p(e,["setup","inputAudioTranscription"],G);const Z=f(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&p(e,["setup","outputAudioTranscription"],Z);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&p(e,["setup","realtimeInputConfig"],K);const te=f(n,["contextWindowCompression"]);e!==void 0&&te!=null&&p(e,["setup","contextWindowCompression"],te);const he=f(n,["proactivity"]);e!==void 0&&he!=null&&p(e,["setup","proactivity"],he);const $=f(n,["explicitVadSignal"]);return e!==void 0&&$!=null&&p(e,["setup","explicitVadSignal"],$),t}function Ib(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["setup","model"],at(n,o));const s=f(e,["config"]);return s!=null&&p(t,["config"],Cb(s,t)),t}function Rb(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["setup","model"],at(n,o));const s=f(e,["config"]);return s!=null&&p(t,["config"],wb(s,t)),t}function bb(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function xb(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["weightedPrompts"],o)}return e}function Nb(n){const e={},t=f(n,["media"]);if(t!=null){let g=LE(t);Array.isArray(g)&&(g=g.map(_=>Xc(_))),p(e,["mediaChunks"],g)}const o=f(n,["audio"]);o!=null&&p(e,["audio"],Xc(FE(o)));const s=f(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const l=f(n,["video"]);l!=null&&p(e,["video"],Xc(OE(l)));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const h=f(n,["activityEnd"]);return h!=null&&p(e,["activityEnd"],h),e}function Mb(n){const e={},t=f(n,["media"]);if(t!=null){let g=LE(t);Array.isArray(g)&&(g=g.map(_=>_)),p(e,["mediaChunks"],g)}const o=f(n,["audio"]);o!=null&&p(e,["audio"],FE(o));const s=f(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const l=f(n,["video"]);l!=null&&p(e,["video"],OE(l));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const h=f(n,["activityEnd"]);return h!=null&&p(e,["activityEnd"],h),e}function Db(n){const e={},t=f(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const o=f(n,["serverContent"]);o!=null&&p(e,["serverContent"],o);const s=f(n,["toolCall"]);s!=null&&p(e,["toolCall"],s);const l=f(n,["toolCallCancellation"]);l!=null&&p(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],Lb(u));const d=f(n,["goAway"]);d!=null&&p(e,["goAway"],d);const h=f(n,["sessionResumptionUpdate"]);h!=null&&p(e,["sessionResumptionUpdate"],h);const g=f(n,["voiceActivityDetectionSignal"]);g!=null&&p(e,["voiceActivityDetectionSignal"],g);const _=f(n,["voiceActivity"]);return _!=null&&p(e,["voiceActivity"],Ob(_)),e}function Pb(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const s=f(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],vb(l));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],_b(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(n,["inlineData"]);h!=null&&p(e,["inlineData"],Xc(h));const g=f(n,["text"]);g!=null&&p(e,["text"],g);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function Vb(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function kb(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const s=f(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],Sb(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],Ab(d));const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const g=f(n,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}function Ub(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&p(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=f(n,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const l=f(n,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>Tb(S))),p(e,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const _=f(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function Lb(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const o=f(n,["cachedContentTokenCount"]);o!=null&&p(e,["cachedContentTokenCount"],o);const s=f(n,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&p(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const h=f(n,["promptTokensDetails"]);if(h!=null){let R=h;Array.isArray(R)&&(R=R.map(V=>V)),p(e,["promptTokensDetails"],R)}const g=f(n,["cacheTokensDetails"]);if(g!=null){let R=g;Array.isArray(R)&&(R=R.map(V=>V)),p(e,["cacheTokensDetails"],R)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let R=_;Array.isArray(R)&&(R=R.map(V=>V)),p(e,["responseTokensDetails"],R)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let R=E;Array.isArray(R)&&(R=R.map(V=>V)),p(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}function Ob(n){const e={},t=f(n,["type"]);return t!=null&&p(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fb(n,e){const t={},o=f(n,["data"]);if(o!=null&&p(t,["data"],o),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function Bb(n,e){const t={},o=f(n,["content"]);o!=null&&p(t,["content"],o);const s=f(n,["citationMetadata"]);s!=null&&p(t,["citationMetadata"],qb(s));const l=f(n,["tokenCount"]);l!=null&&p(t,["tokenCount"],l);const u=f(n,["finishReason"]);u!=null&&p(t,["finishReason"],u);const d=f(n,["avgLogprobs"]);d!=null&&p(t,["avgLogprobs"],d);const h=f(n,["groundingMetadata"]);h!=null&&p(t,["groundingMetadata"],h);const g=f(n,["index"]);g!=null&&p(t,["index"],g);const _=f(n,["logprobsResult"]);_!=null&&p(t,["logprobsResult"],_);const E=f(n,["safetyRatings"]);if(E!=null){let R=E;Array.isArray(R)&&(R=R.map(V=>V)),p(t,["safetyRatings"],R)}const S=f(n,["urlContextMetadata"]);return S!=null&&p(t,["urlContextMetadata"],S),t}function qb(n,e){const t={},o=f(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),p(t,["citations"],s)}return t}function zb(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["contents"]);if(l!=null){let u=vi(l);Array.isArray(u)&&(u=u.map(d=>d)),p(o,["contents"],u)}return o}function Gb(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["tokensInfo"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(t,["tokensInfo"],l)}return t}function Hb(n,e){const t={},o=f(n,["values"]);o!=null&&p(t,["values"],o);const s=f(n,["statistics"]);return s!=null&&p(t,["statistics"],$b(s)),t}function $b(n,e){const t={},o=f(n,["truncated"]);o!=null&&p(t,["truncated"],o);const s=f(n,["token_count"]);return s!=null&&p(t,["tokenCount"],s),t}function If(n,e){const t={},o=f(n,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>eN(u))),p(t,["parts"],l)}const s=f(n,["role"]);return s!=null&&p(t,["role"],s),t}function Yb(n,e){const t={},o=f(n,["controlType"]);o!=null&&p(t,["controlType"],o);const s=f(n,["enableControlImageComputation"]);return s!=null&&p(t,["computeControl"],s),t}function Jb(n,e){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Kb(n,e,t){const o={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&p(e,["systemInstruction"],Sn(s));const l=f(n,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>jE(h))),p(e,["tools"],d)}const u=f(n,["generationConfig"]);return e!==void 0&&u!=null&&p(e,["generationConfig"],Fx(u)),o}function Qb(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["contents"]);if(l!=null){let d=vi(l);Array.isArray(d)&&(d=d.map(h=>If(h))),p(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&Jb(u),o}function Xb(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["contents"]);if(l!=null){let d=vi(l);Array.isArray(d)&&(d=d.map(h=>h)),p(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&Kb(u,o),o}function Wb(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["totalTokens"]);s!=null&&p(t,["totalTokens"],s);const l=f(n,["cachedContentTokenCount"]);return l!=null&&p(t,["cachedContentTokenCount"],l),t}function Zb(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["totalTokens"]);return s!=null&&p(t,["totalTokens"],s),t}function jb(n,e,t){const o={},s=f(e,["model"]);return s!=null&&p(o,["_url","name"],at(n,s)),o}function ex(n,e,t){const o={},s=f(e,["model"]);return s!=null&&p(o,["_url","name"],at(n,s)),o}function tx(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(t,["sdkHttpResponse"],o),t}function nx(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(t,["sdkHttpResponse"],o),t}function ix(n,e,t){const o={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const g=f(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&p(e,["parameters","safetySetting"],_);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&p(e,["parameters","includeRaiReason"],R);const V=f(n,["language"]);e!==void 0&&V!=null&&p(e,["parameters","language"],V);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&p(e,["parameters","outputOptions","mimeType"],O);const x=f(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const G=f(n,["addWatermark"]);e!==void 0&&G!=null&&p(e,["parameters","addWatermark"],G);const Z=f(n,["labels"]);e!==void 0&&Z!=null&&p(e,["labels"],Z);const K=f(n,["editMode"]);e!==void 0&&K!=null&&p(e,["parameters","editMode"],K);const te=f(n,["baseSteps"]);return e!==void 0&&te!=null&&p(e,["parameters","editConfig","baseSteps"],te),o}function ox(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["prompt"]);l!=null&&p(o,["instances[0]","prompt"],l);const u=f(e,["referenceImages"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(g=>sN(g))),p(o,["instances[0]","referenceImages"],h)}const d=f(e,["config"]);return d!=null&&ix(d,o),o}function rx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Rf(u))),p(t,["generatedImages"],l)}return t}function sx(n,e,t){const o={},s=f(n,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const l=f(n,["title"]);e!==void 0&&l!=null&&p(e,["requests[]","title"],l);const u=f(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function ax(n,e,t){const o={},s=f(n,["taskType"]);e!==void 0&&s!=null&&p(e,["instances[]","task_type"],s);const l=f(n,["title"]);e!==void 0&&l!=null&&p(e,["instances[]","title"],l);const u=f(n,["outputDimensionality"]);e!==void 0&&u!=null&&p(e,["parameters","outputDimensionality"],u);const d=f(n,["mimeType"]);e!==void 0&&d!=null&&p(e,["instances[]","mimeType"],d);const h=f(n,["autoTruncate"]);return e!==void 0&&h!=null&&p(e,["parameters","autoTruncate"],h),o}function lx(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["contents"]);if(l!=null){let h=tm(n,l);Array.isArray(h)&&(h=h.map(g=>g)),p(o,["requests[]","content"],h)}const u=f(e,["config"]);u!=null&&sx(u,o);const d=f(e,["model"]);return d!==void 0&&p(o,["requests[]","model"],at(n,d)),o}function ux(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["contents"]);if(l!=null){let d=tm(n,l);Array.isArray(d)&&(d=d.map(h=>h)),p(o,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&ax(u,o),o}function cx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),p(t,["embeddings"],u)}const l=f(n,["metadata"]);return l!=null&&p(t,["metadata"],l),t}function fx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Hb(d))),p(t,["embeddings"],u)}const l=f(n,["metadata"]);return l!=null&&p(t,["metadata"],l),t}function dx(n,e){const t={},o=f(n,["endpoint"]);o!=null&&p(t,["name"],o);const s=f(n,["deployedModelId"]);return s!=null&&p(t,["deployedModelId"],s),t}function hx(n,e){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["fileUri"]);o!=null&&p(t,["fileUri"],o);const s=f(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function px(n,e){const t={},o=f(n,["id"]);o!=null&&p(t,["id"],o);const s=f(n,["args"]);s!=null&&p(t,["args"],s);const l=f(n,["name"]);if(l!=null&&p(t,["name"],l),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function mx(n,e){const t={},o=f(n,["allowedFunctionNames"]);o!=null&&p(t,["allowedFunctionNames"],o);const s=f(n,["mode"]);if(s!=null&&p(t,["mode"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function gx(n,e){const t={},o=f(n,["description"]);o!=null&&p(t,["description"],o);const s=f(n,["name"]);s!=null&&p(t,["name"],s);const l=f(n,["parameters"]);l!=null&&p(t,["parameters"],l);const u=f(n,["parametersJsonSchema"]);u!=null&&p(t,["parametersJsonSchema"],u);const d=f(n,["response"]);d!=null&&p(t,["response"],d);const h=f(n,["responseJsonSchema"]);if(h!=null&&p(t,["responseJsonSchema"],h),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function yx(n,e,t,o){const s={},l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&p(t,["systemInstruction"],If(Sn(l)));const u=f(e,["temperature"]);u!=null&&p(s,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(s,["topP"],d);const h=f(e,["topK"]);h!=null&&p(s,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const _=f(e,["maxOutputTokens"]);_!=null&&p(s,["maxOutputTokens"],_);const E=f(e,["stopSequences"]);E!=null&&p(s,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&p(s,["responseLogprobs"],S);const R=f(e,["logprobs"]);R!=null&&p(s,["logprobs"],R);const V=f(e,["presencePenalty"]);V!=null&&p(s,["presencePenalty"],V);const O=f(e,["frequencyPenalty"]);O!=null&&p(s,["frequencyPenalty"],O);const x=f(e,["seed"]);x!=null&&p(s,["seed"],x);const G=f(e,["responseMimeType"]);G!=null&&p(s,["responseMimeType"],G);const Z=f(e,["responseSchema"]);Z!=null&&p(s,["responseSchema"],nm(Z));const K=f(e,["responseJsonSchema"]);if(K!=null&&p(s,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const te=f(e,["safetySettings"]);if(t!==void 0&&te!=null){let Ie=te;Array.isArray(Ie)&&(Ie=Ie.map(Xe=>aN(Xe))),p(t,["safetySettings"],Ie)}const he=f(e,["tools"]);if(t!==void 0&&he!=null){let Ie=Ia(he);Array.isArray(Ie)&&(Ie=Ie.map(Xe=>pN(wa(Xe)))),p(t,["tools"],Ie)}const $=f(e,["toolConfig"]);if(t!==void 0&&$!=null&&p(t,["toolConfig"],hN($)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=f(e,["cachedContent"]);t!==void 0&&D!=null&&p(t,["cachedContent"],Do(n,D));const M=f(e,["responseModalities"]);M!=null&&p(s,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&p(s,["mediaResolution"],N);const k=f(e,["speechConfig"]);if(k!=null&&p(s,["speechConfig"],im(k)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&p(s,["thinkingConfig"],L);const q=f(e,["imageConfig"]);q!=null&&p(s,["imageConfig"],Hx(q));const P=f(e,["enableEnhancedCivicAnswers"]);if(P!=null&&p(s,["enableEnhancedCivicAnswers"],P),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function vx(n,e,t,o){const s={},l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&p(t,["systemInstruction"],Sn(l));const u=f(e,["temperature"]);u!=null&&p(s,["temperature"],u);const d=f(e,["topP"]);d!=null&&p(s,["topP"],d);const h=f(e,["topK"]);h!=null&&p(s,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const _=f(e,["maxOutputTokens"]);_!=null&&p(s,["maxOutputTokens"],_);const E=f(e,["stopSequences"]);E!=null&&p(s,["stopSequences"],E);const S=f(e,["responseLogprobs"]);S!=null&&p(s,["responseLogprobs"],S);const R=f(e,["logprobs"]);R!=null&&p(s,["logprobs"],R);const V=f(e,["presencePenalty"]);V!=null&&p(s,["presencePenalty"],V);const O=f(e,["frequencyPenalty"]);O!=null&&p(s,["frequencyPenalty"],O);const x=f(e,["seed"]);x!=null&&p(s,["seed"],x);const G=f(e,["responseMimeType"]);G!=null&&p(s,["responseMimeType"],G);const Z=f(e,["responseSchema"]);Z!=null&&p(s,["responseSchema"],nm(Z));const K=f(e,["responseJsonSchema"]);K!=null&&p(s,["responseJsonSchema"],K);const te=f(e,["routingConfig"]);te!=null&&p(s,["routingConfig"],te);const he=f(e,["modelSelectionConfig"]);he!=null&&p(s,["modelConfig"],he);const $=f(e,["safetySettings"]);if(t!==void 0&&$!=null){let ve=$;Array.isArray(ve)&&(ve=ve.map(ze=>ze)),p(t,["safetySettings"],ve)}const D=f(e,["tools"]);if(t!==void 0&&D!=null){let ve=Ia(D);Array.isArray(ve)&&(ve=ve.map(ze=>jE(wa(ze)))),p(t,["tools"],ve)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&p(t,["toolConfig"],M);const N=f(e,["labels"]);t!==void 0&&N!=null&&p(t,["labels"],N);const k=f(e,["cachedContent"]);t!==void 0&&k!=null&&p(t,["cachedContent"],Do(n,k));const L=f(e,["responseModalities"]);L!=null&&p(s,["responseModalities"],L);const q=f(e,["mediaResolution"]);q!=null&&p(s,["mediaResolution"],q);const P=f(e,["speechConfig"]);P!=null&&p(s,["speechConfig"],im(P));const Ie=f(e,["audioTimestamp"]);Ie!=null&&p(s,["audioTimestamp"],Ie);const Xe=f(e,["thinkingConfig"]);Xe!=null&&p(s,["thinkingConfig"],Xe);const ee=f(e,["imageConfig"]);if(ee!=null&&p(s,["imageConfig"],$x(ee)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const de=f(e,["modelArmorConfig"]);return t!==void 0&&de!=null&&p(t,["modelArmorConfig"],de),s}function H_(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["contents"]);if(l!=null){let d=vi(l);Array.isArray(d)&&(d=d.map(h=>If(h))),p(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(o,["generationConfig"],yx(n,u,o)),o}function $_(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["contents"]);if(l!=null){let d=vi(l);Array.isArray(d)&&(d=d.map(h=>h)),p(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&p(o,["generationConfig"],vx(n,u,o)),o}function Y_(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(_=>Bb(_))),p(t,["candidates"],g)}const l=f(n,["modelVersion"]);l!=null&&p(t,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&p(t,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&p(t,["responseId"],d);const h=f(n,["usageMetadata"]);return h!=null&&p(t,["usageMetadata"],h),t}function J_(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["candidates"]);if(s!=null){let _=s;Array.isArray(_)&&(_=_.map(E=>E)),p(t,["candidates"],_)}const l=f(n,["createTime"]);l!=null&&p(t,["createTime"],l);const u=f(n,["modelVersion"]);u!=null&&p(t,["modelVersion"],u);const d=f(n,["promptFeedback"]);d!=null&&p(t,["promptFeedback"],d);const h=f(n,["responseId"]);h!=null&&p(t,["responseId"],h);const g=f(n,["usageMetadata"]);return g!=null&&p(t,["usageMetadata"],g),t}function _x(n,e,t){const o={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=f(n,["guidanceScale"]);if(e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const g=f(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const _=f(n,["includeRaiReason"]);e!==void 0&&_!=null&&p(e,["parameters","includeRaiReason"],_);const E=f(n,["language"]);e!==void 0&&E!=null&&p(e,["parameters","language"],E);const S=f(n,["outputMimeType"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","mimeType"],S);const R=f(n,["outputCompressionQuality"]);if(e!==void 0&&R!=null&&p(e,["parameters","outputOptions","compressionQuality"],R),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=f(n,["imageSize"]);if(e!==void 0&&V!=null&&p(e,["parameters","sampleImageSize"],V),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Tx(n,e,t){const o={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&p(e,["parameters","aspectRatio"],d);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const g=f(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&p(e,["parameters","safetySetting"],_);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const S=f(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&p(e,["parameters","includeRaiReason"],R);const V=f(n,["language"]);e!==void 0&&V!=null&&p(e,["parameters","language"],V);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&p(e,["parameters","outputOptions","mimeType"],O);const x=f(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const G=f(n,["addWatermark"]);e!==void 0&&G!=null&&p(e,["parameters","addWatermark"],G);const Z=f(n,["labels"]);e!==void 0&&Z!=null&&p(e,["labels"],Z);const K=f(n,["imageSize"]);e!==void 0&&K!=null&&p(e,["parameters","sampleImageSize"],K);const te=f(n,["enhancePrompt"]);return e!==void 0&&te!=null&&p(e,["parameters","enhancePrompt"],te),o}function Ex(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["prompt"]);l!=null&&p(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&_x(u,o),o}function Sx(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["prompt"]);l!=null&&p(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&Tx(u,o),o}function Ax(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>kx(d))),p(t,["generatedImages"],u)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&p(t,["positivePromptSafetyAttributes"],WE(l)),t}function Cx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Rf(d))),p(t,["generatedImages"],u)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&p(t,["positivePromptSafetyAttributes"],ZE(l)),t}function wx(n,e,t){const o={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(n,["durationSeconds"]);if(e!==void 0&&l!=null&&p(e,["parameters","durationSeconds"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(n,["resolution"]);e!==void 0&&d!=null&&p(e,["parameters","resolution"],d);const h=f(n,["personGeneration"]);if(e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(n,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const _=f(n,["enhancePrompt"]);if(e!==void 0&&_!=null&&p(e,["parameters","enhancePrompt"],_),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=f(n,["lastFrame"]);e!==void 0&&E!=null&&p(e,["instances[0]","lastFrame"],bf(E));const S=f(n,["referenceImages"]);if(e!==void 0&&S!=null){let R=S;Array.isArray(R)&&(R=R.map(V=>RN(V))),p(e,["instances[0]","referenceImages"],R)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function Ix(n,e,t){const o={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const u=f(n,["fps"]);e!==void 0&&u!=null&&p(e,["parameters","fps"],u);const d=f(n,["durationSeconds"]);e!==void 0&&d!=null&&p(e,["parameters","durationSeconds"],d);const h=f(n,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const g=f(n,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const _=f(n,["resolution"]);e!==void 0&&_!=null&&p(e,["parameters","resolution"],_);const E=f(n,["personGeneration"]);e!==void 0&&E!=null&&p(e,["parameters","personGeneration"],E);const S=f(n,["pubsubTopic"]);e!==void 0&&S!=null&&p(e,["parameters","pubsubTopic"],S);const R=f(n,["negativePrompt"]);e!==void 0&&R!=null&&p(e,["parameters","negativePrompt"],R);const V=f(n,["enhancePrompt"]);e!==void 0&&V!=null&&p(e,["parameters","enhancePrompt"],V);const O=f(n,["generateAudio"]);e!==void 0&&O!=null&&p(e,["parameters","generateAudio"],O);const x=f(n,["lastFrame"]);e!==void 0&&x!=null&&p(e,["instances[0]","lastFrame"],Di(x));const G=f(n,["referenceImages"]);if(e!==void 0&&G!=null){let te=G;Array.isArray(te)&&(te=te.map(he=>bN(he))),p(e,["instances[0]","referenceImages"],te)}const Z=f(n,["mask"]);e!==void 0&&Z!=null&&p(e,["instances[0]","mask"],IN(Z));const K=f(n,["compressionQuality"]);return e!==void 0&&K!=null&&p(e,["parameters","compressionQuality"],K),o}function Rx(n,e){const t={},o=f(n,["name"]);o!=null&&p(t,["name"],o);const s=f(n,["metadata"]);s!=null&&p(t,["metadata"],s);const l=f(n,["done"]);l!=null&&p(t,["done"],l);const u=f(n,["error"]);u!=null&&p(t,["error"],u);const d=f(n,["response","generateVideoResponse"]);return d!=null&&p(t,["response"],Mx(d)),t}function bx(n,e){const t={},o=f(n,["name"]);o!=null&&p(t,["name"],o);const s=f(n,["metadata"]);s!=null&&p(t,["metadata"],s);const l=f(n,["done"]);l!=null&&p(t,["done"],l);const u=f(n,["error"]);u!=null&&p(t,["error"],u);const d=f(n,["response"]);return d!=null&&p(t,["response"],Dx(d)),t}function xx(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["prompt"]);l!=null&&p(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&p(o,["instances[0]","image"],bf(u));const d=f(e,["video"]);d!=null&&p(o,["instances[0]","video"],eS(d));const h=f(e,["source"]);h!=null&&Px(h,o);const g=f(e,["config"]);return g!=null&&wx(g,o),o}function Nx(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["prompt"]);l!=null&&p(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&p(o,["instances[0]","image"],Di(u));const d=f(e,["video"]);d!=null&&p(o,["instances[0]","video"],tS(d));const h=f(e,["source"]);h!=null&&Vx(h,o);const g=f(e,["config"]);return g!=null&&Ix(g,o),o}function Mx(n,e){const t={},o=f(n,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Lx(d))),p(t,["generatedVideos"],u)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&p(t,["raiMediaFilteredCount"],s);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&p(t,["raiMediaFilteredReasons"],l),t}function Dx(n,e){const t={},o=f(n,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Ox(d))),p(t,["generatedVideos"],u)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&p(t,["raiMediaFilteredCount"],s);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&p(t,["raiMediaFilteredReasons"],l),t}function Px(n,e,t){const o={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const l=f(n,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],bf(l));const u=f(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],eS(u)),o}function Vx(n,e,t){const o={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const l=f(n,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],Di(l));const u=f(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],tS(u)),o}function kx(n,e){const t={},o=f(n,["_self"]);o!=null&&p(t,["image"],Yx(o));const s=f(n,["raiFilteredReason"]);s!=null&&p(t,["raiFilteredReason"],s);const l=f(n,["_self"]);return l!=null&&p(t,["safetyAttributes"],WE(l)),t}function Rf(n,e){const t={},o=f(n,["_self"]);o!=null&&p(t,["image"],XE(o));const s=f(n,["raiFilteredReason"]);s!=null&&p(t,["raiFilteredReason"],s);const l=f(n,["_self"]);l!=null&&p(t,["safetyAttributes"],ZE(l));const u=f(n,["prompt"]);return u!=null&&p(t,["enhancedPrompt"],u),t}function Ux(n,e){const t={},o=f(n,["_self"]);o!=null&&p(t,["mask"],XE(o));const s=f(n,["labels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(t,["labels"],l)}return t}function Lx(n,e){const t={},o=f(n,["video"]);return o!=null&&p(t,["video"],CN(o)),t}function Ox(n,e){const t={},o=f(n,["_self"]);return o!=null&&p(t,["video"],wN(o)),t}function Fx(n,e){const t={},o=f(n,["modelSelectionConfig"]);o!=null&&p(t,["modelConfig"],o);const s=f(n,["responseJsonSchema"]);s!=null&&p(t,["responseJsonSchema"],s);const l=f(n,["audioTimestamp"]);l!=null&&p(t,["audioTimestamp"],l);const u=f(n,["candidateCount"]);u!=null&&p(t,["candidateCount"],u);const d=f(n,["enableAffectiveDialog"]);d!=null&&p(t,["enableAffectiveDialog"],d);const h=f(n,["frequencyPenalty"]);h!=null&&p(t,["frequencyPenalty"],h);const g=f(n,["logprobs"]);g!=null&&p(t,["logprobs"],g);const _=f(n,["maxOutputTokens"]);_!=null&&p(t,["maxOutputTokens"],_);const E=f(n,["mediaResolution"]);E!=null&&p(t,["mediaResolution"],E);const S=f(n,["presencePenalty"]);S!=null&&p(t,["presencePenalty"],S);const R=f(n,["responseLogprobs"]);R!=null&&p(t,["responseLogprobs"],R);const V=f(n,["responseMimeType"]);V!=null&&p(t,["responseMimeType"],V);const O=f(n,["responseModalities"]);O!=null&&p(t,["responseModalities"],O);const x=f(n,["responseSchema"]);x!=null&&p(t,["responseSchema"],x);const G=f(n,["routingConfig"]);G!=null&&p(t,["routingConfig"],G);const Z=f(n,["seed"]);Z!=null&&p(t,["seed"],Z);const K=f(n,["speechConfig"]);K!=null&&p(t,["speechConfig"],K);const te=f(n,["stopSequences"]);te!=null&&p(t,["stopSequences"],te);const he=f(n,["temperature"]);he!=null&&p(t,["temperature"],he);const $=f(n,["thinkingConfig"]);$!=null&&p(t,["thinkingConfig"],$);const D=f(n,["topK"]);D!=null&&p(t,["topK"],D);const M=f(n,["topP"]);if(M!=null&&p(t,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Bx(n,e,t){const o={},s=f(e,["model"]);return s!=null&&p(o,["_url","name"],at(n,s)),o}function qx(n,e,t){const o={},s=f(e,["model"]);return s!=null&&p(o,["_url","name"],at(n,s)),o}function zx(n,e){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(n,["enableWidget"]);return o!=null&&p(t,["enableWidget"],o),t}function Gx(n,e){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(n,["timeRangeFilter"]);return o!=null&&p(t,["timeRangeFilter"],o),t}function Hx(n,e){const t={},o=f(n,["aspectRatio"]);o!=null&&p(t,["aspectRatio"],o);const s=f(n,["imageSize"]);if(s!=null&&p(t,["imageSize"],s),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function $x(n,e){const t={},o=f(n,["aspectRatio"]);o!=null&&p(t,["aspectRatio"],o);const s=f(n,["imageSize"]);s!=null&&p(t,["imageSize"],s);const l=f(n,["personGeneration"]);l!=null&&p(t,["personGeneration"],l);const u=f(n,["outputMimeType"]);u!=null&&p(t,["imageOutputOptions","mimeType"],u);const d=f(n,["outputCompressionQuality"]);return d!=null&&p(t,["imageOutputOptions","compressionQuality"],d),t}function Yx(n,e){const t={},o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["imageBytes"],kr(o));const s=f(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function XE(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&p(t,["gcsUri"],o);const s=f(n,["bytesBase64Encoded"]);s!=null&&p(t,["imageBytes"],kr(s));const l=f(n,["mimeType"]);return l!=null&&p(t,["mimeType"],l),t}function bf(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=f(n,["imageBytes"]);o!=null&&p(t,["bytesBase64Encoded"],kr(o));const s=f(n,["mimeType"]);return s!=null&&p(t,["mimeType"],s),t}function Di(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&p(t,["gcsUri"],o);const s=f(n,["imageBytes"]);s!=null&&p(t,["bytesBase64Encoded"],kr(s));const l=f(n,["mimeType"]);return l!=null&&p(t,["mimeType"],l),t}function Jx(n,e,t,o){const s={},l=f(e,["pageSize"]);t!==void 0&&l!=null&&p(t,["_query","pageSize"],l);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&p(t,["_query","filter"],d);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&p(t,["_url","models_url"],GE(n,h)),s}function Kx(n,e,t,o){const s={},l=f(e,["pageSize"]);t!==void 0&&l!=null&&p(t,["_query","pageSize"],l);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&p(t,["_query","filter"],d);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&p(t,["_url","models_url"],GE(n,h)),s}function Qx(n,e,t){const o={},s=f(e,["config"]);return s!=null&&Jx(n,s,o),o}function Xx(n,e,t){const o={},s=f(e,["config"]);return s!=null&&Kx(n,s,o),o}function Wx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const l=f(n,["_self"]);if(l!=null){let u=HE(l);Array.isArray(u)&&(u=u.map(d=>gp(d))),p(t,["models"],u)}return t}function Zx(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const l=f(n,["_self"]);if(l!=null){let u=HE(l);Array.isArray(u)&&(u=u.map(d=>yp(d))),p(t,["models"],u)}return t}function jx(n,e){const t={},o=f(n,["maskMode"]);o!=null&&p(t,["maskMode"],o);const s=f(n,["segmentationClasses"]);s!=null&&p(t,["maskClasses"],s);const l=f(n,["maskDilation"]);return l!=null&&p(t,["dilation"],l),t}function gp(n,e){const t={},o=f(n,["name"]);o!=null&&p(t,["name"],o);const s=f(n,["displayName"]);s!=null&&p(t,["displayName"],s);const l=f(n,["description"]);l!=null&&p(t,["description"],l);const u=f(n,["version"]);u!=null&&p(t,["version"],u);const d=f(n,["_self"]);d!=null&&p(t,["tunedModelInfo"],mN(d));const h=f(n,["inputTokenLimit"]);h!=null&&p(t,["inputTokenLimit"],h);const g=f(n,["outputTokenLimit"]);g!=null&&p(t,["outputTokenLimit"],g);const _=f(n,["supportedGenerationMethods"]);_!=null&&p(t,["supportedActions"],_);const E=f(n,["temperature"]);E!=null&&p(t,["temperature"],E);const S=f(n,["maxTemperature"]);S!=null&&p(t,["maxTemperature"],S);const R=f(n,["topP"]);R!=null&&p(t,["topP"],R);const V=f(n,["topK"]);V!=null&&p(t,["topK"],V);const O=f(n,["thinking"]);return O!=null&&p(t,["thinking"],O),t}function yp(n,e){const t={},o=f(n,["name"]);o!=null&&p(t,["name"],o);const s=f(n,["displayName"]);s!=null&&p(t,["displayName"],s);const l=f(n,["description"]);l!=null&&p(t,["description"],l);const u=f(n,["versionId"]);u!=null&&p(t,["version"],u);const d=f(n,["deployedModels"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(R=>dx(R))),p(t,["endpoints"],S)}const h=f(n,["labels"]);h!=null&&p(t,["labels"],h);const g=f(n,["_self"]);g!=null&&p(t,["tunedModelInfo"],gN(g));const _=f(n,["defaultCheckpointId"]);_!=null&&p(t,["defaultCheckpointId"],_);const E=f(n,["checkpoints"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(R=>R)),p(t,["checkpoints"],S)}return t}function eN(n,e){const t={},o=f(n,["mediaResolution"]);o!=null&&p(t,["mediaResolution"],o);const s=f(n,["codeExecutionResult"]);s!=null&&p(t,["codeExecutionResult"],s);const l=f(n,["executableCode"]);l!=null&&p(t,["executableCode"],l);const u=f(n,["fileData"]);u!=null&&p(t,["fileData"],hx(u));const d=f(n,["functionCall"]);d!=null&&p(t,["functionCall"],px(d));const h=f(n,["functionResponse"]);h!=null&&p(t,["functionResponse"],h);const g=f(n,["inlineData"]);g!=null&&p(t,["inlineData"],Fb(g));const _=f(n,["text"]);_!=null&&p(t,["text"],_);const E=f(n,["thought"]);E!=null&&p(t,["thought"],E);const S=f(n,["thoughtSignature"]);S!=null&&p(t,["thoughtSignature"],S);const R=f(n,["videoMetadata"]);return R!=null&&p(t,["videoMetadata"],R),t}function tN(n,e){const t={},o=f(n,["productImage"]);return o!=null&&p(t,["image"],Di(o)),t}function nN(n,e,t){const o={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const l=f(n,["baseSteps"]);e!==void 0&&l!=null&&p(e,["parameters","baseSteps"],l);const u=f(n,["outputGcsUri"]);e!==void 0&&u!=null&&p(e,["parameters","storageUri"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const _=f(n,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&p(e,["parameters","enhancePrompt"],R);const V=f(n,["labels"]);return e!==void 0&&V!=null&&p(e,["labels"],V),o}function iN(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["source"]);l!=null&&rN(l,o);const u=f(e,["config"]);return u!=null&&nN(u,o),o}function oN(n,e){const t={},o=f(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Rf(l))),p(t,["generatedImages"],s)}return t}function rN(n,e,t){const o={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const l=f(n,["personImage"]);e!==void 0&&l!=null&&p(e,["instances[0]","personImage","image"],Di(l));const u=f(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>tN(h))),p(e,["instances[0]","productImages"],d)}return o}function sN(n,e){const t={},o=f(n,["referenceImage"]);o!=null&&p(t,["referenceImage"],Di(o));const s=f(n,["referenceId"]);s!=null&&p(t,["referenceId"],s);const l=f(n,["referenceType"]);l!=null&&p(t,["referenceType"],l);const u=f(n,["maskImageConfig"]);u!=null&&p(t,["maskImageConfig"],jx(u));const d=f(n,["controlImageConfig"]);d!=null&&p(t,["controlImageConfig"],Yb(d));const h=f(n,["styleImageConfig"]);h!=null&&p(t,["styleImageConfig"],h);const g=f(n,["subjectImageConfig"]);return g!=null&&p(t,["subjectImageConfig"],g),t}function WE(n,e){const t={},o=f(n,["safetyAttributes","categories"]);o!=null&&p(t,["categories"],o);const s=f(n,["safetyAttributes","scores"]);s!=null&&p(t,["scores"],s);const l=f(n,["contentType"]);return l!=null&&p(t,["contentType"],l),t}function ZE(n,e){const t={},o=f(n,["safetyAttributes","categories"]);o!=null&&p(t,["categories"],o);const s=f(n,["safetyAttributes","scores"]);s!=null&&p(t,["scores"],s);const l=f(n,["contentType"]);return l!=null&&p(t,["contentType"],l),t}function aN(n,e){const t={},o=f(n,["category"]);if(o!=null&&p(t,["category"],o),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&p(t,["threshold"],s),t}function lN(n,e){const t={},o=f(n,["image"]);return o!=null&&p(t,["image"],Di(o)),t}function uN(n,e,t){const o={},s=f(n,["mode"]);e!==void 0&&s!=null&&p(e,["parameters","mode"],s);const l=f(n,["maxPredictions"]);e!==void 0&&l!=null&&p(e,["parameters","maxPredictions"],l);const u=f(n,["confidenceThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","confidenceThreshold"],u);const d=f(n,["maskDilation"]);e!==void 0&&d!=null&&p(e,["parameters","maskDilation"],d);const h=f(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&p(e,["parameters","binaryColorThreshold"],h);const g=f(n,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),o}function cN(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["source"]);l!=null&&dN(l,o);const u=f(e,["config"]);return u!=null&&uN(u,o),o}function fN(n,e){const t={},o=f(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Ux(l))),p(t,["generatedMasks"],s)}return t}function dN(n,e,t){const o={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const l=f(n,["image"]);e!==void 0&&l!=null&&p(e,["instances[0]","image"],Di(l));const u=f(n,["scribbleImage"]);return e!==void 0&&u!=null&&p(e,["instances[0]","scribble"],lN(u)),o}function hN(n,e){const t={},o=f(n,["retrievalConfig"]);o!=null&&p(t,["retrievalConfig"],o);const s=f(n,["functionCallingConfig"]);return s!=null&&p(t,["functionCallingConfig"],mx(s)),t}function pN(n,e){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(n,["computerUse"]);o!=null&&p(t,["computerUse"],o);const s=f(n,["fileSearch"]);s!=null&&p(t,["fileSearch"],s);const l=f(n,["codeExecution"]);if(l!=null&&p(t,["codeExecution"],l),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>S)),p(t,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(t,["googleMaps"],zx(d));const h=f(n,["googleSearch"]);h!=null&&p(t,["googleSearch"],Gx(h));const g=f(n,["googleSearchRetrieval"]);g!=null&&p(t,["googleSearchRetrieval"],g);const _=f(n,["urlContext"]);return _!=null&&p(t,["urlContext"],_),t}function jE(n,e){const t={},o=f(n,["retrieval"]);o!=null&&p(t,["retrieval"],o);const s=f(n,["computerUse"]);if(s!=null&&p(t,["computerUse"],s),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(n,["codeExecution"]);l!=null&&p(t,["codeExecution"],l);const u=f(n,["enterpriseWebSearch"]);u!=null&&p(t,["enterpriseWebSearch"],u);const d=f(n,["functionDeclarations"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(R=>gx(R))),p(t,["functionDeclarations"],S)}const h=f(n,["googleMaps"]);h!=null&&p(t,["googleMaps"],h);const g=f(n,["googleSearch"]);g!=null&&p(t,["googleSearch"],g);const _=f(n,["googleSearchRetrieval"]);_!=null&&p(t,["googleSearchRetrieval"],_);const E=f(n,["urlContext"]);return E!=null&&p(t,["urlContext"],E),t}function mN(n,e){const t={},o=f(n,["baseModel"]);o!=null&&p(t,["baseModel"],o);const s=f(n,["createTime"]);s!=null&&p(t,["createTime"],s);const l=f(n,["updateTime"]);return l!=null&&p(t,["updateTime"],l),t}function gN(n,e){const t={},o=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&p(t,["baseModel"],o);const s=f(n,["createTime"]);s!=null&&p(t,["createTime"],s);const l=f(n,["updateTime"]);return l!=null&&p(t,["updateTime"],l),t}function yN(n,e,t){const o={},s=f(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const l=f(n,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),o}function vN(n,e,t){const o={},s=f(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const l=f(n,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),o}function _N(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","name"],at(n,s));const l=f(e,["config"]);return l!=null&&yN(l,o),o}function TN(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["config"]);return l!=null&&vN(l,o),o}function EN(n,e,t){const o={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const l=f(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&p(e,["parameters","safetySetting"],l);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const d=f(n,["includeRaiReason"]);e!==void 0&&d!=null&&p(e,["parameters","includeRaiReason"],d);const h=f(n,["outputMimeType"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","mimeType"],h);const g=f(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const _=f(n,["enhanceInputImage"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],_);const E=f(n,["imagePreservationFactor"]);e!==void 0&&E!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const S=f(n,["labels"]);e!==void 0&&S!=null&&p(e,["labels"],S);const R=f(n,["numberOfImages"]);e!==void 0&&R!=null&&p(e,["parameters","sampleCount"],R);const V=f(n,["mode"]);return e!==void 0&&V!=null&&p(e,["parameters","mode"],V),o}function SN(n,e,t){const o={},s=f(e,["model"]);s!=null&&p(o,["_url","model"],at(n,s));const l=f(e,["image"]);l!=null&&p(o,["instances[0]","image"],Di(l));const u=f(e,["upscaleFactor"]);u!=null&&p(o,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&EN(d,o),o}function AN(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Rf(u))),p(t,["generatedImages"],l)}return t}function CN(n,e){const t={},o=f(n,["uri"]);o!=null&&p(t,["uri"],o);const s=f(n,["encodedVideo"]);s!=null&&p(t,["videoBytes"],kr(s));const l=f(n,["encoding"]);return l!=null&&p(t,["mimeType"],l),t}function wN(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&p(t,["uri"],o);const s=f(n,["bytesBase64Encoded"]);s!=null&&p(t,["videoBytes"],kr(s));const l=f(n,["mimeType"]);return l!=null&&p(t,["mimeType"],l),t}function IN(n,e){const t={},o=f(n,["image"]);o!=null&&p(t,["_self"],Di(o));const s=f(n,["maskMode"]);return s!=null&&p(t,["maskMode"],s),t}function RN(n,e){const t={},o=f(n,["image"]);o!=null&&p(t,["image"],bf(o));const s=f(n,["referenceType"]);return s!=null&&p(t,["referenceType"],s),t}function bN(n,e){const t={},o=f(n,["image"]);o!=null&&p(t,["image"],Di(o));const s=f(n,["referenceType"]);return s!=null&&p(t,["referenceType"],s),t}function eS(n,e){const t={},o=f(n,["uri"]);o!=null&&p(t,["uri"],o);const s=f(n,["videoBytes"]);s!=null&&p(t,["encodedVideo"],kr(s));const l=f(n,["mimeType"]);return l!=null&&p(t,["encoding"],l),t}function tS(n,e){const t={},o=f(n,["uri"]);o!=null&&p(t,["gcsUri"],o);const s=f(n,["videoBytes"]);s!=null&&p(t,["bytesBase64Encoded"],kr(s));const l=f(n,["mimeType"]);return l!=null&&p(t,["mimeType"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xN(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&p(e,["displayName"],o),t}function NN(n){const e={},t=f(n,["config"]);return t!=null&&xN(t,e),e}function MN(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&p(e,["_query","force"],o),t}function DN(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&MN(o,e),e}function PN(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function VN(n,e){const t={},o=f(n,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["customMetadata"],l)}const s=f(n,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),t}function kN(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const o=f(n,["metadata"]);o!=null&&p(e,["metadata"],o);const s=f(n,["done"]);s!=null&&p(e,["done"],s);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const u=f(n,["response"]);return u!=null&&p(e,["response"],LN(u)),e}function UN(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const o=f(n,["fileName"]);o!=null&&p(e,["fileName"],o);const s=f(n,["config"]);return s!=null&&VN(s,e),e}function LN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&p(e,["parent"],o);const s=f(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function ON(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function FN(n){const e={},t=f(n,["config"]);return t!=null&&ON(t,e),e}function BN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["fileSearchStores"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["fileSearchStores"],l)}return e}function nS(n,e){const t={},o=f(n,["mimeType"]);e!==void 0&&o!=null&&p(e,["mimeType"],o);const s=f(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>h)),p(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function qN(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const o=f(n,["config"]);return o!=null&&nS(o,e),e}function zN(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GN="Content-Type",HN="X-Server-Timeout",$N="User-Agent",vp="x-goog-api-client",YN="1.41.0",JN=`google-genai-sdk/${YN}`,KN="v1beta1",QN="v1beta",XN=5,WN=[408,429,500,502,503,504];class ZN{constructor(e){var t,o,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:KN}else{if(!this.clientOptions.apiKey)throw new $l({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:QN,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const s=[this.getRequestUrlInternal(t)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===dp.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))s.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,s.toString(),e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(t))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,s.toString(),e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o,s){if(t&&t.timeout||s){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&jN(e,t.extraBody),e.headers=await this.getHeadersInternal(t,o),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async s=>(await K_(s),new hp(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async s=>(await K_(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return xi(this,arguments,function*(){var o;const s=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let u="";const d="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:g,value:_}=yield Ue(s.read());if(g){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=l.decode(_,{stream:!0});try{const V=JSON.parse(E);if("error"in V){const O=JSON.parse(JSON.stringify(V.error)),x=O.status,G=O.code,Z=`got status: ${x}. ${JSON.stringify(V)}`;if(G>=400&&G<600)throw new $l({message:Z,status:G})}}catch(V){if(V.name==="ApiError")throw V}u+=E;let S=-1,R=0;for(;;){S=-1,R=0;for(const x of h){const G=u.indexOf(x);G!==-1&&(S===-1||G<S)&&(S=G,R=x.length)}if(S===-1)break;const V=u.substring(0,S);u=u.substring(S+R);const O=V.trim();if(O.startsWith(d)){const x=O.substring(d.length).trim();try{const G=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ue(new hp(G))}catch(G){throw new Error(`exception parsing stream chunk ${x}. ${G}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,t){var o;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,t);const s=this.clientOptions.httpOptions.retryOptions;return zw(async()=>{const u=await fetch(e,t);if(u.ok)return u;throw WN.includes(u.status)?new Error(`Retryable HTTP Error: ${u.statusText}`):new VE(`Non-retryable exception ${u.statusText} sending request`)},{retries:((o=s.attempts)!==null&&o!==void 0?o:XN)-1})}getDefaultHeaders(){const e={},t=JN+" "+this.clientOptions.userAgentExtra;return e[$N]=t,e[vp]=t,e[GN]="application/json",e}async getHeadersInternal(e,t){const o=new Headers;if(e&&e.headers){for(const[s,l]of Object.entries(e.headers))o.append(s,l);e.timeout&&e.timeout>0&&o.append(HN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,t),o}getFileName(e){var t;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(t=o.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),o}async uploadFile(e,t){var o;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);s.sizeBytes=String(u.size);const d=(o=t==null?void 0:t.mimeType)!==null&&o!==void 0?o:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const h={file:s},g=this.getFileName(e),_=ye("upload/v1beta/files",h._url),E=await this.fetchUploadUrl(_,s.sizeBytes,s.mimeType,g,h,t==null?void 0:t.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,o){var s;const l=this.clientOptions.uploader,u=await l.stat(t),d=String(u.size),h=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const g=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),E={};o!=null&&nS(o,E);const S=await this.fetchUploadUrl(g,d,h,_,E,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,o,s,l,u){var d;let h={};u?h=u:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const g=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:h});if(!g||!(g!=null&&g.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=g==null?void 0:g.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function K_(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(o);throw t>=400&&t<600?new $l({message:s,status:t}):new Error(s)}}function jN(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,u){const d=Object.assign({},l);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const g=u[h],_=d[h];g&&typeof g=="object"&&!Array.isArray(g)&&_&&typeof _=="object"&&!Array.isArray(_)?d[h]=o(_,g):(_&&g&&typeof _!=typeof g&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof _}, New type: ${typeof g}. Overwriting.`),d[h]=g)}return d}const s=o(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e2="mcp_used/unknown";let t2=!1;function iS(n){for(const e of n)if(n2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return t2}function oS(n){var e;const t=(e=n[vp])!==null&&e!==void 0?e:"";n[vp]=(t+` ${e2}`).trimStart()}function n2(n){return n!==null&&typeof n=="object"&&n instanceof rm}function i2(n){return xi(this,arguments,function*(t,o=100){let s,l=0;for(;l<o;){const u=yield Ue(t.listTools({cursor:s}));for(const d of u.tools)yield yield Ue(d),l++;if(!u.nextCursor)break;s=u.nextCursor}})}class rm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new rm(e,t)}async initialize(){var e,t,o,s;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,h=(t=void 0,Ni(i2(_))),g;g=await h.next(),e=g.done,!e;d=!0){s=g.value,d=!1;const E=s;u.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(E){t={error:E}}finally{try{!d&&!e&&(o=h.return)&&await o.call(h)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),NI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await s.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function o2(n,e,t){const o=new SI;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(o,s),e(o)}class r2{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=l2(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),h=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let g=()=>{};const _=new Promise(K=>{g=K}),E=e.callbacks,S=function(){g({})},R=this.apiClient,V={onopen:S,onmessage:K=>{o2(R,E.onmessage,K)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(K){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(K){}},O=this.webSocketFactory.create(h,a2(u),V);O.connect(),await _;const Z={setup:{model:at(this.apiClient,e.model)}};return O.send(JSON.stringify(Z)),new s2(O,this.apiClient)}}class s2{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=xb(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=bb(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(da.PLAY)}pause(){this.sendPlaybackControl(da.PAUSE)}stop(){this.sendPlaybackControl(da.STOP)}resetContext(){this.sendPlaybackControl(da.RESET_CONTEXT)}close(){this.conn.close()}}function a2(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function l2(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function c2(n,e,t){const o=new EI;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const l=JSON.parse(s);if(n.isVertexAI()){const u=Db(l);Object.assign(o,u)}else Object.assign(o,l);e(o)}class f2{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new r2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,s,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&iS(e.config.tools)&&oS(E);const S=m2(E);if(this.apiClient.isVertexAI()){const N=this.apiClient.getProject(),k=this.apiClient.getLocation(),L=this.apiClient.getApiKey(),q=!!N&&!!k||!!L;this.apiClient.getCustomBaseUrl()&&!q?_=h:(_=`${h}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_))}else{const N=this.apiClient.getApiKey();let k="BidiGenerateContent",L="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),g!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",L="access_token"),_=`${h}/ws/google.ai.generativelanguage.${g}.GenerativeService.${k}?${L}=${N}`}let R=()=>{};const V=new Promise(N=>{R=N}),O=e.callbacks,x=function(){var N;(N=O==null?void 0:O.onopen)===null||N===void 0||N.call(O),R({})},G=this.apiClient,Z={onopen:x,onmessage:N=>{c2(G,O.onmessage,N)},onerror:(t=O==null?void 0:O.onerror)!==null&&t!==void 0?t:function(N){},onclose:(o=O==null?void 0:O.onclose)!==null&&o!==void 0?o:function(N){}},K=this.webSocketFactory.create(_,p2(S),Z);K.connect(),await V;let te=at(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&te.startsWith("publishers/")){const N=this.apiClient.getProject(),k=this.apiClient.getLocation();N&&k&&(te=`projects/${N}/locations/${k}/`+te)}let he={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[of.AUDIO]}:e.config.responseModalities=[of.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],D=[];for(const N of $)if(this.isCallableTool(N)){const k=N;D.push(await k.tool())}else D.push(N);D.length>0&&(e.config.tools=D);const M={model:te,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?he=Rb(this.apiClient,M):he=Ib(this.apiClient,M),delete he.config,K.send(JSON.stringify(he)),new h2(K,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const d2={turnComplete:!0};class h2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=vi(t.turns),e.isVertexAI()||(o=o.map(s=>If(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(u2)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},d2),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Mb(e)}:t={realtimeInput:Nb(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function p2(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function m2(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q_=10;function X_(n){var e,t,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ma(u)){s=!0;break}if(!s)return!0;const l=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ma(n){return"callTool"in n&&typeof n.callTool=="function"}function g2(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>ma(s)))!==null&&o!==void 0?o:!1}function W_(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,s)=>{if(ma(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(s)}),t}function Z_(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y2 extends Mo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,s,l,u,d;const h=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!g2(t)||X_(t.config))return await this.generateContentInternal(h);const g=W_(t);if(g.length>0){const O=g.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let _,E;const S=vi(h.contents),R=(l=(s=(o=h.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:Q_;let V=0;for(;V<R&&(_=await this.generateContentInternal(h),!(!_.functionCalls||_.functionCalls.length===0));){const O=_.candidates[0].content,x=[];for(const G of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(ma(G)){const K=await G.callTool(_.functionCalls);x.push(...K)}V++,E={role:"user",parts:x},h.contents=vi(h.contents),h.contents.push(O),h.contents.push(E),Z_(h.config)&&(S.push(O),S.push(E))}return Z_(h.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async t=>{var o,s,l,u,d;if(this.maybeMoveToResponseJsonSchem(t),X_(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const h=W_(t);if(h.length>0){const E=h.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const g=(l=(s=(o=t==null?void 0:t.config)===null||o===void 0?void 0:o.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(g&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var s;let l;const u=[];if(o!=null&&o.generatedImages)for(const h of o.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((s=h==null?void 0:h.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=h==null?void 0:h.safetyAttributes:u.push(h);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async t=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new gs(Ro.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var o,s,l,u,d,h;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=t.video)===null||o===void 0)&&o.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((h=(d=t.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,s;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async h=>ma(h)?await h.tool():h)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&iS(e.config.tools)){const h=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let g=Object.assign({},h);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),oS(g),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:g})}return d}async initAfcToolsMap(e){var t,o,s;const l=new Map;for(const u of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(ma(u)){const d=u,h=await d.tool();for(const g of(s=h.functionDeclarations)!==null&&s!==void 0?s:[]){if(!g.name)throw new Error("Function declaration name is required.");if(l.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);l.set(g.name,d)}}return l}async processAfcStream(e){var t,o,s;const l=(s=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Q_;let u=!1,d=0;const h=await this.initAfcToolsMap(e);return(function(g,_,E){return xi(this,arguments,function*(){for(var S,R,V,O,x,G;d<l;){u&&(d++,u=!1);const he=yield Ue(g.processParamsMaybeAddMcpUsage(E)),$=yield Ue(g.generateContentStreamInternal(he)),D=[],M=[];try{for(var Z=!0,K=(R=void 0,Ni($)),te;te=yield Ue(K.next()),S=te.done,!S;Z=!0){O=te.value,Z=!1;const N=O;if(yield yield Ue(N),N.candidates&&(!((x=N.candidates[0])===null||x===void 0)&&x.content)){M.push(N.candidates[0].content);for(const k of(G=N.candidates[0].content.parts)!==null&&G!==void 0?G:[])if(d<l&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(k.functionCall.name)){const L=yield Ue(_.get(k.functionCall.name).callTool([k.functionCall]));D.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(N){R={error:N}}finally{try{!Z&&!S&&(V=K.return)&&(yield Ue(V.call(K)))}finally{if(R)throw R.error}}if(D.length>0){u=!0;const N=new Dl;N.candidates=[{content:{role:"user",parts:D}}],yield yield Ue(N);const k=[];k.push(...M),k.push({role:"user",parts:D});const L=vi(E.contents).concat(k);E.contents=L}else break}})})(this,h,e)}async generateContentInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=$_(this.apiClient,e);return d=ye("{model}:generateContent",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=J_(_),S=new Dl;return Object.assign(S,E),S})}else{const g=H_(this.apiClient,e);return d=ye("{model}:generateContent",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Y_(_),S=new Dl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=$_(this.apiClient,e);return d=ye("{model}:streamGenerateContent?alt=sse",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(E){return xi(this,arguments,function*(){var S,R,V,O;try{for(var x=!0,G=Ni(E),Z;Z=yield Ue(G.next()),S=Z.done,!S;x=!0){O=Z.value,x=!1;const K=O,te=J_(yield Ue(K.json()),e);te.sdkHttpResponse={headers:K.headers};const he=new Dl;Object.assign(he,te),yield yield Ue(he)}}catch(K){R={error:K}}finally{try{!x&&!S&&(V=G.return)&&(yield Ue(V.call(G)))}finally{if(R)throw R.error}}})})}else{const g=H_(this.apiClient,e);return d=ye("{model}:streamGenerateContent?alt=sse",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(E){return xi(this,arguments,function*(){var S,R,V,O;try{for(var x=!0,G=Ni(E),Z;Z=yield Ue(G.next()),S=Z.done,!S;x=!0){O=Z.value,x=!1;const K=O,te=Y_(yield Ue(K.json()),e);te.sdkHttpResponse={headers:K.headers};const he=new Dl;Object.assign(he,te),yield yield Ue(he)}}catch(K){R={error:K}}finally{try{!x&&!S&&(V=G.return)&&(yield Ue(V.call(G)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=ux(this.apiClient,e);return d=ye("{model}:predict",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=fx(_),S=new R_;return Object.assign(S,E),S})}else{const g=lx(this.apiClient,e);return d=ye("{model}:batchEmbedContents",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=cx(_),S=new R_;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=Sx(this.apiClient,e);return d=ye("{model}:predict",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Cx(_),S=new b_;return Object.assign(S,E),S})}else{const g=Ex(this.apiClient,e);return d=ye("{model}:predict",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Ax(_),S=new b_;return Object.assign(S,E),S})}}async editImageInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=ox(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const g=rx(h),_=new uI;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=SN(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const g=AN(h),_=new cI;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=iN(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=oN(h),_=new fI;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=cN(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=fN(h),_=new dI;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=qx(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>yp(_))}else{const g=Bx(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>gp(_))}}async listInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=Xx(this.apiClient,e);return d=ye("{models_url}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Zx(_),S=new x_;return Object.assign(S,E),S})}else{const g=Qx(this.apiClient,e);return d=ye("{models_url}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Wx(_),S=new x_;return Object.assign(S,E),S})}}async update(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=TN(this.apiClient,e);return d=ye("{model}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>yp(_))}else{const g=_N(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>gp(_))}}async delete(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=ex(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=nx(_),S=new N_;return Object.assign(S,E),S})}else{const g=jb(this.apiClient,e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=tx(_),S=new N_;return Object.assign(S,E),S})}}async countTokens(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=Xb(this.apiClient,e);return d=ye("{model}:countTokens",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Zb(_),S=new M_;return Object.assign(S,E),S})}else{const g=Qb(this.apiClient,e);return d=ye("{model}:countTokens",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=Wb(_),S=new M_;return Object.assign(S,E),S})}}async computeTokens(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=zb(this.apiClient,e);return l=ye("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const g=Gb(h),_=new hI;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=Nx(this.apiClient,e);return d=ye("{model}:predictLongRunning",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>{const E=bx(_),S=new rf;return Object.assign(S,E),S})}else{const g=xx(this.apiClient,e);return d=ye("{model}:predictLongRunning",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const E=Rx(_),S=new rf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v2 extends Mo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=iI(e);return d=ye("{operationName}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u}else{const g=nI(e);return d=ye("{operationName}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Qw(e);return l=ye("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _2(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function T2(n){const e={},t=f(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>x2(l))),p(e,["parts"],s)}const o=f(n,["role"]);return o!=null&&p(e,["role"],o),e}function E2(n,e,t){const o={},s=f(e,["expireTime"]);t!==void 0&&s!=null&&p(t,["expireTime"],s);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&p(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&p(t,["bidiGenerateContentSetup"],b2(n,d));const h=f(e,["lockAdditionalFields"]);return t!==void 0&&h!=null&&p(t,["fieldMask"],h),o}function S2(n,e){const t={},o=f(e,["config"]);return o!=null&&p(t,["config"],E2(n,o,t)),t}function A2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function C2(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const o=f(n,["args"]);o!=null&&p(e,["args"],o);const s=f(n,["name"]);if(s!=null&&p(e,["name"],s),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function w2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function I2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function R2(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig"],o);const s=f(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const l=f(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=f(n,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","mediaResolution"],g);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],om(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],R);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&p(e,["setup","systemInstruction"],T2(Sn(V)));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let $=Ia(O);Array.isArray($)&&($=$.map(D=>M2(wa(D)))),p(e,["setup","tools"],$)}const x=f(n,["sessionResumption"]);e!==void 0&&x!=null&&p(e,["setup","sessionResumption"],N2(x));const G=f(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&p(e,["setup","inputAudioTranscription"],G);const Z=f(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&p(e,["setup","outputAudioTranscription"],Z);const K=f(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&p(e,["setup","realtimeInputConfig"],K);const te=f(n,["contextWindowCompression"]);e!==void 0&&te!=null&&p(e,["setup","contextWindowCompression"],te);const he=f(n,["proactivity"]);if(e!==void 0&&he!=null&&p(e,["setup","proactivity"],he),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function b2(n,e){const t={},o=f(e,["model"]);o!=null&&p(t,["setup","model"],at(n,o));const s=f(e,["config"]);return s!=null&&p(t,["config"],R2(s,t)),t}function x2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&p(e,["codeExecutionResult"],o);const s=f(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],A2(l));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],C2(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const h=f(n,["inlineData"]);h!=null&&p(e,["inlineData"],_2(h));const g=f(n,["text"]);g!=null&&p(e,["text"],g);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function N2(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function M2(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&p(e,["fileSearch"],o);const s=f(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],w2(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],I2(d));const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const g=f(n,["urlContext"]);return g!=null&&p(e,["urlContext"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D2(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${t}.${l}`);e.push(...s)}else e.push(t)}return e.join(",")}function P2(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const l=D2(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(g=>u.includes(g)?`generationConfig.${g}`:g));const h=[];l&&h.push(l),d.length>0&&h.push(...d),h.length>0?n.fieldMask=h.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class V2 extends Mo{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=S2(this.apiClient,e);l=ye("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const h=P2(d,e.config);return s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),s.then(g=>g)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k2(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&p(e,["_query","force"],o),t}function U2(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&k2(o,e),e}function L2(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function O2(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function F2(n){const e={},t=f(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const o=f(n,["config"]);return o!=null&&O2(o,e),e}function B2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&p(e,["nextPageToken"],o);const s=f(n,["documents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q2 extends Mo{constructor(e){super(),this.apiClient=e,this.list=async t=>new gs(Ro.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:t.parent,config:o.config}),await this.listInternal(t),t)}async get(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=L2(e);return l=ye("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=U2(e);s=ye("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=F2(e);return l=ye("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=B2(h),_=new pI;return Object.assign(_,g),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z2 extends Mo{constructor(e,t=new q2(e)){super(),this.apiClient=e,this.documents=t,this.list=async(o={})=>new gs(Ro.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NN(e);return l=ye("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PN(e);return l=ye("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=DN(e);s=ye("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=FN(e);return l=ye("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=BN(h),_=new mI;return Object.assign(_,g),_})}}async uploadToFileSearchStoreInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qN(e);return l=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=zN(h),_=new gI;return Object.assign(_,g),_})}}async importFile(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UN(e);return l=ye("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=kN(h),_=new jp;return Object.assign(_,g),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let rS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return rS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^t()&15>>+o/4).toString(16))};const G2=()=>rS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _p(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Tp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _i extends Error{}class Mn extends _i{constructor(e,t,o,s){super(`${Mn.makeMessage(e,t,o)}`),this.status=e,this.headers=s,this.error=t}static makeMessage(e,t,o){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):o;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,o,s){if(!e||!s)return new xf({message:o,cause:Tp(t)});const l=t;return e===400?new aS(e,l,o,s):e===401?new lS(e,l,o,s):e===403?new uS(e,l,o,s):e===404?new cS(e,l,o,s):e===409?new fS(e,l,o,s):e===422?new dS(e,l,o,s):e===429?new hS(e,l,o,s):e>=500?new pS(e,l,o,s):new Mn(e,l,o,s)}}class Ep extends Mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class xf extends Mn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class sS extends xf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class aS extends Mn{}class lS extends Mn{}class uS extends Mn{}class cS extends Mn{}class fS extends Mn{}class dS extends Mn{}class hS extends Mn{}class pS extends Mn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H2=/^[a-z][a-z0-9+.-]*:/i,$2=n=>H2.test(n);let Sp=n=>(Sp=Array.isArray,Sp(n));const Y2=Sp;let J2=Y2;const j_=J2;function K2(n){if(!n)return!0;for(const e in n)return!1;return!0}function Q2(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const X2=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _i(`${n} must be an integer`);if(e<0)throw new _i(`${n} must be a positive integer`);return e},W2=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z2=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const eM=()=>{var n,e,t,o,s;const l=j2();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":tT(Deno.build.os),"X-Stainless-Arch":eT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":tT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":eT((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const u=tM();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":aa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function tM(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const o=t.exec(navigator.userAgent);if(o){const s=o[1]||0,l=o[2]||0,u=o[3]||0;return{browser:e,version:`${s}.${l}.${u}`}}}return null}const eT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",tT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let kc;const nM=()=>kc??(kc=eM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function mS(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function oM(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return mS({start(){},async pull(t){const{done:o,value:s}=await e.next();o?t.close():t.enqueue(s)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function gS(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function rM(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const o=n.getReader(),s=o.cancel();o.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sM=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yS=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xh(n,e,t){return yS(),new File(n,e??"unknown_file",t)}function aM(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const lM=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vS=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",uM=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&vS(n),cM=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function fM(n,e,t){if(yS(),n=await n,uM(n))return n instanceof File?n:Xh([await n.arrayBuffer()],n.name);if(cM(n)){const s=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Xh(await Ap(s),e,t)}const o=await Ap(n);if(e||(e=aM(n)),!(t!=null&&t.type)){const s=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof s=="string"&&(t=Object.assign(Object.assign({},t),{type:s}))}return Xh(o,e,t)}async function Ap(n){var e,t,o,s,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(vS(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(lM(n))try{for(var d=!0,h=Ni(n),g;g=await h.next(),e=g.done,!e;d=!0){s=g.value,d=!1;const _=s;u.push(...await Ap(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(o=h.return)&&await o.call(h)}finally{if(t)throw t.error}}else{const _=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${dM(n)}`)}return u}function dM(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _S{constructor(e){this._client=e}}_S._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TS(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const nT=Object.freeze(Object.create(null)),hM=(n=TS)=>(function(t,...o){if(t.length===1)return t[0];let s=!1;const l=[],u=t.reduce((_,E,S)=>{var R,V,O;/[?#]/.test(E)&&(s=!0);const x=o[S];let G=(s?encodeURIComponent:n)(""+x);return S!==o.length&&(x==null||typeof x=="object"&&x.toString===((O=Object.getPrototypeOf((V=Object.getPrototypeOf((R=x.hasOwnProperty)!==null&&R!==void 0?R:nT))!==null&&V!==void 0?V:nT))===null||O===void 0?void 0:O.toString))&&(G=x+"",l.push({start:_.length+E.length,length:G.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),_+E+(S===o.length?"":G)},""),d=u.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let g;for(;(g=h.exec(d))!==null;)l.push({start:g.index,length:g[0].length,error:`Value "${g[0]}" can't be safely passed as a path parameter`});if(l.sort((_,E)=>_.start-E.start),l.length>0){let _=0;const E=l.reduce((S,R)=>{const V=" ".repeat(R.start-_),O="^".repeat(R.length);return _=R.start+R.length,S+V+O},"");throw new _i(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${u}
${E}`)}return u}),Uc=hM(TS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ES extends _S{create(e,t){var o;const{api_version:s=this._client.apiVersion}=e,l=af(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new _i("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new _i("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Uc`/${s}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,t={},o){const{api_version:s=this._client.apiVersion}=t??{};return this._client.delete(Uc`/${s}/interactions/${e}`,o)}cancel(e,t={},o){const{api_version:s=this._client.apiVersion}=t??{};return this._client.post(Uc`/${s}/interactions/${e}/cancel`,o)}get(e,t={},o){var s;const l=t??{},{api_version:u=this._client.apiVersion}=l,d=af(l,["api_version"]);return this._client.get(Uc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},o),{stream:(s=t==null?void 0:t.stream)!==null&&s!==void 0?s:!1}))}}ES._key=Object.freeze(["interactions"]);class SS extends ES{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pM(n){let e=0;for(const s of n)e+=s.length;const t=new Uint8Array(e);let o=0;for(const s of n)t.set(s,o),o+=s.length;return t}let Lc;function sm(n){let e;return(Lc??(e=new globalThis.TextEncoder,Lc=e.encode.bind(e)))(n)}let Oc;function iT(n){let e;return(Oc??(e=new globalThis.TextDecoder,Oc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?sm(e):e;this.buffer=pM([this.buffer,t]);const o=[];let s;for(;(s=mM(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){o.push(iT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,u=iT(this.buffer.subarray(0,l));o.push(u),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Nf.NEWLINE_CHARS=new Set([`
`,"\r"]);Nf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function mM(n,e){for(let s=e??0;s<n.length;s++){if(n[s]===10)return{preceding:s,index:s+1,carriage:!1};if(n[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function gM(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lf={off:0,error:200,warn:300,info:400,debug:500},oT=(n,e,t)=>{if(n){if(Q2(lf,n))return n;Nn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(lf))}`)}};function kl(){}function Fc(n,e,t){return!e||lf[n]>lf[t]?kl:e[n].bind(e)}const yM={error:kl,warn:kl,info:kl,debug:kl};let rT=new WeakMap;function Nn(n){var e;const t=n.logger,o=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return yM;const s=rT.get(t);if(s&&s[0]===o)return s[1];const l={error:Fc("error",t,o),warn:Fc("warn",t,o),info:Fc("info",t,o),debug:Fc("debug",t,o)};return rT.set(t,[o,l]),l}const us=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ha{constructor(e,t,o){this.iterator=e,this.controller=t,this.client=o}static fromSSEResponse(e,t,o){let s=!1;const l=o?Nn(o):console;function u(){return xi(this,arguments,function*(){var h,g,_,E;if(s)throw new _i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var R=!0,V=Ni(vM(e,t)),O;O=yield Ue(V.next()),h=O.done,!h;R=!0){E=O.value,R=!1;const x=E;if(!S)if(x.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ue(JSON.parse(x.data))}catch(G){throw l.error("Could not parse message into JSON:",x.data),l.error("From chunk:",x.raw),G}}}catch(x){g={error:x}}finally{try{!R&&!h&&(_=V.return)&&(yield Ue(_.call(V)))}finally{if(g)throw g.error}}S=!0}catch(x){if(_p(x))return yield Ue(void 0);throw x}finally{S||t.abort()}})}return new ha(u,t,o)}static fromReadableStream(e,t,o){let s=!1;function l(){return xi(this,arguments,function*(){var h,g,_,E;const S=new Nf,R=gS(e);try{for(var V=!0,O=Ni(R),x;x=yield Ue(O.next()),h=x.done,!h;V=!0){E=x.value,V=!1;const G=E;for(const Z of S.decode(G))yield yield Ue(Z)}}catch(G){g={error:G}}finally{try{!V&&!h&&(_=O.return)&&(yield Ue(_.call(O)))}finally{if(g)throw g.error}}for(const G of S.flush())yield yield Ue(G)})}function u(){return xi(this,arguments,function*(){var h,g,_,E;if(s)throw new _i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let S=!1;try{try{for(var R=!0,V=Ni(l()),O;O=yield Ue(V.next()),h=O.done,!h;R=!0){E=O.value,R=!1;const x=E;S||x&&(yield yield Ue(JSON.parse(x)))}}catch(x){g={error:x}}finally{try{!R&&!h&&(_=V.return)&&(yield Ue(_.call(V)))}finally{if(g)throw g.error}}S=!0}catch(x){if(_p(x))return yield Ue(void 0);throw x}finally{S||t.abort()}})}return new ha(u,t,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],o=this.iterator(),s=l=>({next:()=>{if(l.length===0){const u=o.next();e.push(u),t.push(u)}return l.shift()}});return[new ha(()=>s(e),this.controller,this.client),new ha(()=>s(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return mS({async start(){t=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:l}=await t.next();if(l)return o.close();const u=sm(JSON.stringify(s)+`
`);o.enqueue(u)}catch(s){o.error(s)}},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}}function vM(n,e){return xi(this,arguments,function*(){var o,s,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _i("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _i("Attempted to iterate over a response with no body");const d=new TM,h=new Nf,g=gS(n.body);try{for(var _=!0,E=Ni(_M(g)),S;S=yield Ue(E.next()),o=S.done,!o;_=!0){u=S.value,_=!1;const R=u;for(const V of h.decode(R)){const O=d.decode(V);O&&(yield yield Ue(O))}}}catch(R){s={error:R}}finally{try{!_&&!o&&(l=E.return)&&(yield Ue(l.call(E)))}finally{if(s)throw s.error}}for(const R of h.flush()){const V=d.decode(R);V&&(yield yield Ue(V))}})}function _M(n){return xi(this,arguments,function*(){var t,o,s,l;let u=new Uint8Array;try{for(var d=!0,h=Ni(n),g;g=yield Ue(h.next()),t=g.done,!t;d=!0){l=g.value,d=!1;const _=l;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?sm(_):_;let S=new Uint8Array(u.length+E.length);S.set(u),S.set(E,u.length),u=S;let R;for(;(R=gM(u))!==-1;)yield yield Ue(u.slice(0,R)),u=u.slice(R)}}catch(_){o={error:_}}finally{try{!d&&!t&&(s=h.return)&&(yield Ue(s.call(h)))}finally{if(o)throw o.error}}u.length>0&&(yield yield Ue(u))})}class TM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,o,s]=EM(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function EM(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function SM(n,e){const{response:t,requestLogID:o,retryOfRequestLogID:s,startTime:l}=e,u=await(async()=>{var d;if(e.options.stream)return Nn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):ha.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const h=t.headers.get("content-type"),g=(d=h==null?void 0:h.split(";")[0])===null||d===void 0?void 0:d.trim();return(g==null?void 0:g.includes("application/json"))||(g==null?void 0:g.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return Nn(n).debug(`[${o}] response parsed`,us({retryOfRequestLogID:s,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class am extends Promise{constructor(e,t,o=SM){super(s=>{s(null)}),this.responsePromise=t,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new am(this.client,this.responsePromise,async(t,o)=>e(await this.parseResponse(t,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AS=Symbol("brand.privateNullableHeaders");function*AM(n){if(!n)return;if(AS in n){const{values:o,nulls:s}=n;yield*o.entries();for(const l of s)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():j_(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let o of t){const s=o[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const l=j_(o[1])?o[1]:[o[1]];let u=!1;for(const d of l)d!==void 0&&(e&&!u&&(u=!0,yield[s,null]),yield[s,d])}}const Pl=n=>{const e=new Headers,t=new Set;for(const o of n){const s=new Set;for(const[l,u]of AM(o)){const d=l.toLowerCase();s.has(d)||(e.delete(l),s.add(d)),u===null?(e.delete(l),t.add(d)):(e.append(l,u),t.delete(d))}}return{[AS]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wh=n=>{var e,t,o,s,l,u;if(typeof globalThis.process<"u")return(o=(t=(e=Gw)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||l===void 0?void 0:l.call(s,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var CS;class Mf{constructor(e){var t,o,s,l,u,d,h,{baseURL:g=Wh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Wh("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,S=af(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:_,apiVersion:E},S),{baseURL:g||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(o=R.timeout)!==null&&o!==void 0?o:Mf.DEFAULT_TIMEOUT,this.logger=(s=R.logger)!==null&&s!==void 0?s:console;const V="warn";this.logLevel=V,this.logLevel=(u=(l=oT(R.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:oT(Wh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:V,this.fetchOptions=R.fetchOptions,this.maxRetries=(d=R.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(h=R.fetch)!==null&&h!==void 0?h:iM(),this.encoder=sM,this._options=R,this.apiKey=_,this.apiVersion=E,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Pl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Pl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Pl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,o])=>typeof o<"u").map(([t,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(t)}=`;throw new _i(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${aa}`}defaultIdempotencyKey(){return`stainless-node-retry-${G2()}`}makeStatusError(e,t,o,s){return Mn.generate(e,t,o,s)}buildURL(e,t,o){const s=!this.baseURLOverridden()&&o||this.baseURL,l=$2(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return K2(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:o}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,o){return this.request(Promise.resolve(o).then(s=>Object.assign({method:e,path:t},s)))}request(e,t=null){return new am(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,o){var s,l,u;const d=await e,h=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;t==null&&(t=h),await this.prepareOptions(d);const{req:g,url:_,timeout:E}=await this.buildRequest(d,{retryCount:h-t});await this.prepareRequest(g,{url:_,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=o===void 0?"":`, retryOf: ${o}`,V=Date.now();if(Nn(this).debug(`[${S}] sending request`,us({retryOfRequestLogID:o,method:d.method,url:_,options:d,headers:g.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Ep;const O=new AbortController,x=await this.fetchWithTimeout(_,g,E,O).catch(Tp),G=Date.now();if(x instanceof globalThis.Error){const K=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Ep;const te=_p(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(t)return Nn(this).info(`[${S}] connection ${te?"timed out":"failed"} - ${K}`),Nn(this).debug(`[${S}] connection ${te?"timed out":"failed"} (${K})`,us({retryOfRequestLogID:o,url:_,durationMs:G-V,message:x.message})),this.retryRequest(d,t,o??S);throw Nn(this).info(`[${S}] connection ${te?"timed out":"failed"} - error; no more retries left`),Nn(this).debug(`[${S}] connection ${te?"timed out":"failed"} (error; no more retries left)`,us({retryOfRequestLogID:o,url:_,durationMs:G-V,message:x.message})),te?new sS:new xf({cause:x})}const Z=`[${S}${R}] ${g.method} ${_} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${G-V}ms`;if(!x.ok){const K=await this.shouldRetry(x);if(t&&K){const N=`retrying, ${t} attempts remaining`;return await rM(x.body),Nn(this).info(`${Z} - ${N}`),Nn(this).debug(`[${S}] response error (${N})`,us({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,durationMs:G-V})),this.retryRequest(d,t,o??S,x.headers)}const te=K?"error; no more retries left":"error; not retryable";Nn(this).info(`${Z} - ${te}`);const he=await x.text().catch(N=>Tp(N).message),$=W2(he),D=$?void 0:he;throw Nn(this).debug(`[${S}] response error (${te})`,us({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,message:D,durationMs:Date.now()-V})),this.makeStatusError(x.status,$,D,x.headers)}return Nn(this).info(Z),Nn(this).debug(`[${S}] response start`,us({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,durationMs:G-V})),{response:x,options:d,controller:O,requestLogID:S,retryOfRequestLogID:o,startTime:V}}async fetchWithTimeout(e,t,o,s){const l=t||{},{signal:u,method:d}=l,h=af(l,["signal","method"]),g=this._makeAbort(s);u&&u.addEventListener("abort",g,{once:!0});const _=setTimeout(g,o),E=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,S=Object.assign(Object.assign(Object.assign({signal:s.signal},E?{duplex:"half"}:{}),{method:"GET"}),h);d&&(S.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(_)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,o,s){var l;let u;const d=s==null?void 0:s.get("retry-after-ms");if(d){const g=parseFloat(d);Number.isNaN(g)||(u=g)}const h=s==null?void 0:s.get("retry-after");if(h&&!u){const g=parseFloat(h);Number.isNaN(g)?u=Date.parse(h)-Date.now():u=g*1e3}if(!(u&&0<=u&&u<60*1e3)){const g=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,g)}return await Z2(u),this.makeRequest(e,t-1,o)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var o,s,l;const u=Object.assign({},e),{method:d,path:h,query:g,defaultBaseURL:_}=u,E=this.buildURL(h,g,_);"timeout"in u&&X2("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:R}=this.buildBody({options:u}),V=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:V},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:o,retryCount:s}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Pl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),nM()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(d),d.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Pl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:oM(e)}:this.encoder({body:e,headers:o})}}Mf.DEFAULT_TIMEOUT=6e4;class rn extends Mf{constructor(){super(...arguments),this.interactions=new SS(this)}}CS=rn;rn.GeminiNextGenAPIClient=CS;rn.GeminiNextGenAPIClientError=_i;rn.APIError=Mn;rn.APIConnectionError=xf;rn.APIConnectionTimeoutError=sS;rn.APIUserAbortError=Ep;rn.NotFoundError=cS;rn.ConflictError=fS;rn.RateLimitError=hS;rn.BadRequestError=aS;rn.AuthenticationError=lS;rn.InternalServerError=pS;rn.PermissionDeniedError=uS;rn.UnprocessableEntityError=dS;rn.toFile=fM;rn.Interactions=SS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CM(n,e){const t={},o=f(n,["name"]);return o!=null&&p(t,["_url","name"],o),t}function wM(n,e){const t={},o=f(n,["name"]);return o!=null&&p(t,["_url","name"],o),t}function IM(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(t,["sdkHttpResponse"],o),t}function RM(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(t,["sdkHttpResponse"],o),t}function bM(n,e,t){const o={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&p(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const h=f(n,["learningRate"]);if(e!==void 0&&h!=null&&p(e,["tuningTask","hyperparameters","learningRate"],h),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(f(n,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return o}function xM(n,e,t){const o={};let s=f(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const $=f(n,["validationDataset"]);e!==void 0&&$!=null&&p(e,["supervisedTuningSpec"],Zh($))}else if(s==="PREFERENCE_TUNING"){const $=f(n,["validationDataset"]);e!==void 0&&$!=null&&p(e,["preferenceOptimizationSpec"],Zh($))}else if(s==="DISTILLATION"){const $=f(n,["validationDataset"]);e!==void 0&&$!=null&&p(e,["distillationSpec"],Zh($))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const $=f(n,["epochCount"]);e!==void 0&&$!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],$)}else if(d==="PREFERENCE_TUNING"){const $=f(n,["epochCount"]);e!==void 0&&$!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],$)}else if(d==="DISTILLATION"){const $=f(n,["epochCount"]);e!==void 0&&$!=null&&p(e,["distillationSpec","hyperParameters","epochCount"],$)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const $=f(n,["learningRateMultiplier"]);e!==void 0&&$!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],$)}else if(h==="PREFERENCE_TUNING"){const $=f(n,["learningRateMultiplier"]);e!==void 0&&$!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],$)}else if(h==="DISTILLATION"){const $=f(n,["learningRateMultiplier"]);e!==void 0&&$!=null&&p(e,["distillationSpec","hyperParameters","learningRateMultiplier"],$)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const $=f(n,["exportLastCheckpointOnly"]);e!==void 0&&$!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],$)}else if(g==="PREFERENCE_TUNING"){const $=f(n,["exportLastCheckpointOnly"]);e!==void 0&&$!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],$)}else if(g==="DISTILLATION"){const $=f(n,["exportLastCheckpointOnly"]);e!==void 0&&$!=null&&p(e,["distillationSpec","exportLastCheckpointOnly"],$)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const $=f(n,["adapterSize"]);e!==void 0&&$!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],$)}else if(_==="PREFERENCE_TUNING"){const $=f(n,["adapterSize"]);e!==void 0&&$!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],$)}else if(_==="DISTILLATION"){const $=f(n,["adapterSize"]);e!==void 0&&$!=null&&p(e,["distillationSpec","hyperParameters","adapterSize"],$)}let E=f(t,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const $=f(n,["tuningMode"]);e!==void 0&&$!=null&&p(e,["supervisedTuningSpec","tuningMode"],$)}const S=f(n,["customBaseModel"]);e!==void 0&&S!=null&&p(e,["customBaseModel"],S);let R=f(t,["config","method"]);if(R===void 0&&(R="SUPERVISED_FINE_TUNING"),R==="SUPERVISED_FINE_TUNING"){const $=f(n,["batchSize"]);e!==void 0&&$!=null&&p(e,["supervisedTuningSpec","hyperParameters","batchSize"],$)}let V=f(t,["config","method"]);if(V===void 0&&(V="SUPERVISED_FINE_TUNING"),V==="SUPERVISED_FINE_TUNING"){const $=f(n,["learningRate"]);e!==void 0&&$!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRate"],$)}const O=f(n,["labels"]);e!==void 0&&O!=null&&p(e,["labels"],O);const x=f(n,["beta"]);e!==void 0&&x!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],x);const G=f(n,["baseTeacherModel"]);e!==void 0&&G!=null&&p(e,["distillationSpec","baseTeacherModel"],G);const Z=f(n,["tunedTeacherModelSource"]);e!==void 0&&Z!=null&&p(e,["distillationSpec","tunedTeacherModelSource"],Z);const K=f(n,["sftLossWeightMultiplier"]);e!==void 0&&K!=null&&p(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],K);const te=f(n,["outputUri"]);e!==void 0&&te!=null&&p(e,["outputUri"],te);const he=f(n,["encryptionSpec"]);return e!==void 0&&he!=null&&p(e,["encryptionSpec"],he),o}function NM(n,e){const t={},o=f(n,["baseModel"]);o!=null&&p(t,["baseModel"],o);const s=f(n,["preTunedModel"]);s!=null&&p(t,["preTunedModel"],s);const l=f(n,["trainingDataset"]);l!=null&&qM(l);const u=f(n,["config"]);return u!=null&&bM(u,t),t}function MM(n,e){const t={},o=f(n,["baseModel"]);o!=null&&p(t,["baseModel"],o);const s=f(n,["preTunedModel"]);s!=null&&p(t,["preTunedModel"],s);const l=f(n,["trainingDataset"]);l!=null&&zM(l,t,e);const u=f(n,["config"]);return u!=null&&xM(u,t,e),t}function DM(n,e){const t={},o=f(n,["name"]);return o!=null&&p(t,["_url","name"],o),t}function PM(n,e){const t={},o=f(n,["name"]);return o!=null&&p(t,["_url","name"],o),t}function VM(n,e,t){const o={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),o}function kM(n,e,t){const o={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),o}function UM(n,e){const t={},o=f(n,["config"]);return o!=null&&VM(o,t),t}function LM(n,e){const t={},o=f(n,["config"]);return o!=null&&kM(o,t),t}function OM(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>wS(d))),p(t,["tuningJobs"],u)}return t}function FM(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Cp(d))),p(t,["tuningJobs"],u)}return t}function BM(n,e){const t={},o=f(n,["name"]);o!=null&&p(t,["model"],o);const s=f(n,["name"]);return s!=null&&p(t,["endpoint"],s),t}function qM(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(n,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),p(t,["examples","examples"],s)}return t}function zM(n,e,t){const o={};let s=f(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(s==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(s==="DISTILLATION"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function wS(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["name"]);s!=null&&p(t,["name"],s);const l=f(n,["state"]);l!=null&&p(t,["state"],qE(l));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&p(t,["startTime"],d);const h=f(n,["tuningTask","completeTime"]);h!=null&&p(t,["endTime"],h);const g=f(n,["updateTime"]);g!=null&&p(t,["updateTime"],g);const _=f(n,["description"]);_!=null&&p(t,["description"],_);const E=f(n,["baseModel"]);E!=null&&p(t,["baseModel"],E);const S=f(n,["_self"]);return S!=null&&p(t,["tunedModel"],BM(S)),t}function Cp(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["name"]);s!=null&&p(t,["name"],s);const l=f(n,["state"]);l!=null&&p(t,["state"],qE(l));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(t,["startTime"],d);const h=f(n,["endTime"]);h!=null&&p(t,["endTime"],h);const g=f(n,["updateTime"]);g!=null&&p(t,["updateTime"],g);const _=f(n,["error"]);_!=null&&p(t,["error"],_);const E=f(n,["description"]);E!=null&&p(t,["description"],E);const S=f(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&p(t,["tunedModel"],R);const V=f(n,["preTunedModel"]);V!=null&&p(t,["preTunedModel"],V);const O=f(n,["supervisedTuningSpec"]);O!=null&&p(t,["supervisedTuningSpec"],O);const x=f(n,["preferenceOptimizationSpec"]);x!=null&&p(t,["preferenceOptimizationSpec"],x);const G=f(n,["distillationSpec"]);G!=null&&p(t,["distillationSpec"],G);const Z=f(n,["tuningDataStats"]);Z!=null&&p(t,["tuningDataStats"],Z);const K=f(n,["encryptionSpec"]);K!=null&&p(t,["encryptionSpec"],K);const te=f(n,["partnerModelTuningSpec"]);te!=null&&p(t,["partnerModelTuningSpec"],te);const he=f(n,["customBaseModel"]);he!=null&&p(t,["customBaseModel"],he);const $=f(n,["experiment"]);$!=null&&p(t,["experiment"],$);const D=f(n,["labels"]);D!=null&&p(t,["labels"],D);const M=f(n,["outputUri"]);M!=null&&p(t,["outputUri"],M);const N=f(n,["pipelineJob"]);N!=null&&p(t,["pipelineJob"],N);const k=f(n,["serviceAccount"]);k!=null&&p(t,["serviceAccount"],k);const L=f(n,["tunedModelDisplayName"]);L!=null&&p(t,["tunedModelDisplayName"],L);const q=f(n,["veoTuningSpec"]);return q!=null&&p(t,["veoTuningSpec"],q),t}function GM(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&p(t,["sdkHttpResponse"],o);const s=f(n,["name"]);s!=null&&p(t,["name"],s);const l=f(n,["metadata"]);l!=null&&p(t,["metadata"],l);const u=f(n,["done"]);u!=null&&p(t,["done"],u);const d=f(n,["error"]);return d!=null&&p(t,["error"],d),t}function Zh(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&p(t,["validationDatasetUri"],o);const s=f(n,["vertexDatasetResource"]);return s!=null&&p(t,["validationDatasetUri"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HM extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gs(Ro.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:s});return l.baseModel=void 0,await this.tuneInternal(l)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),l=await this.tuneMldevInternal(s);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:fp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=PM(e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>Cp(_))}else{const g=DM(e);return d=ye("{name}",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>wS(_))}}async listInternal(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=LM(e);return d=ye("tuningJobs",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=FM(_),S=new D_;return Object.assign(S,E),S})}else{const g=UM(e);return d=ye("tunedModels",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=OM(_),S=new D_;return Object.assign(S,E),S})}}async cancel(e){var t,o,s,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const g=wM(e);return d=ye("{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=RM(_),S=new P_;return Object.assign(S,E),S})}else{const g=CM(e);return d=ye("{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const E=IM(_),S=new P_;return Object.assign(S,E),S})}}async tuneInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=MM(e,e);return l=ye("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>Cp(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let s,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NM(e);return l=ye("tunedModels",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const _=g;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>GM(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $M{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const YM=1024*1024*8,JM=3,KM=1e3,QM=2,uf="x-goog-upload-status";async function XM(n,e,t){var o;const s=await IS(n,e,t),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[uf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function WM(n,e,t){var o;const s=await IS(n,e,t),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[uf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=kE(l),d=new em;return Object.assign(d,u),d}async function IS(n,e,t){var o,s;let l=0,u=0,d=new hp(new Response),h="upload";for(l=n.size;u<l;){const g=Math.min(YM,l-u),_=n.slice(u,u+g);u+g>=l&&(h+=", finalize");let E=0,S=KM;for(;E<JM&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(u),"Content-Length":String(g)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[uf]));)E++,await jM(S),S=S*QM;if(u+=g,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[uf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function ZM(n){return{size:n.size,type:n.type}}function jM(n){return new Promise(e=>setTimeout(e,n))}class eD{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XM(e,t,o)}async uploadToFileSearchStore(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WM(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ZM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tD{create(e,t,o){return new nD(e,t,o)}}class nD{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sT="x-goog-api-key";class iD{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(sT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(sT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oD="gl-node/";class rD{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new rn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout,maxRetries:(e=t==null?void 0:t.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=o.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=Jw(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new iD(this.apiKey);this.apiClient=new ZN({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:oD+"web",uploader:new eD,downloader:new $M}),this.models=new y2(this.apiClient),this.live=new f2(this.apiClient,s,new tD),this.batches=new AR(this.apiClient),this.chats=new ob(this.models,this.apiClient),this.caches=new tb(this.apiClient),this.files=new gb(this.apiClient),this.operations=new v2(this.apiClient),this.authTokens=new V2(this.apiClient),this.tunings=new HM(this.apiClient),this.fileSearchStores=new z2(this.apiClient)}}const lm=new rD({apiKey:"YOUR_GEMINI_API_KEY_HERE"}),um=async n=>new Promise((e,t)=>{const o=new FileReader;o.onloadend=()=>{const l=o.result.split(",")[1];e(l)},o.onerror=t,o.readAsDataURL(n)}),sD=async(n,e)=>{const t=await um(n);let o=`
    Perform a deep acoustic analysis of this audio file for high-precision speaker diarization.

    **MISSION CRITICAL - SIMULTANEOUS SPEECH:**
    The most important requirement is detecting when people speak AT THE SAME TIME. 
    - If Speaker A and Speaker B overlap (even for 0.5 seconds), you MUST output separate segments for BOTH speakers covering that specific time range.
    - NEVER merge multiple people into a "Group" or "Both" label. Always separate them.
    - Example: If A and B laugh together from 00:10 to 00:15, output:
      { "speaker": "Speaker A", "start": 10, "end": 15 }
      { "speaker": "Speaker B", "start": 10, "end": 15 }
  `;e&&e>0&&(o+=`
    **STRICT CONSTRAINT - SPEAKER COUNT:**
    - There are EXACTLY ${e} distinct speakers in this recording.
    - Do NOT identify more than ${e} speakers.
    - Do NOT identify fewer than ${e} speakers (unless the file is empty).
    - Label them consistently (e.g., "Speaker 1", "Speaker 2"... up to "Speaker ${e}").
    `),o+=`
    **DEEP RESEARCH & REASONING:**
    1. Listen for subtle cues: breath intakes, timbre changes, and micro-affirmations ("mm-hm", "yeah").
    2. Identify distinct speakers even if they sound similar.
    3. Use the 'thinking' process to map out the exact flow of conversation before generating the JSON.

    **OUTPUT FORMAT:**
    Return ONLY a JSON object with:
    - uniqueSpeakers: A list of speaker identifiers.
    - segments: A chronological list of speech segments with 'speaker', 'start', and 'end'.
  `;try{const l=(await lm.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{inlineData:{mimeType:n.type,data:t}},{text:o}]},config:{thinkingConfig:{thinkingBudget:2048},responseMimeType:"application/json",responseSchema:{type:Pt.OBJECT,properties:{uniqueSpeakers:{type:Pt.ARRAY,items:{type:Pt.STRING},description:"List of unique speaker labels (e.g. Speaker A, Speaker B)"},segments:{type:Pt.ARRAY,items:{type:Pt.OBJECT,properties:{speaker:{type:Pt.STRING},start:{type:Pt.NUMBER,description:"Start time in seconds"},end:{type:Pt.NUMBER,description:"End time in seconds"}},required:["speaker","start","end"]}}},required:["uniqueSpeakers","segments"]}}})).text;if(!l)throw new Error("No response from AI");const u=l.replace(/```json\n?|\n?```/g,"").trim();return JSON.parse(u)}catch(s){throw console.error("Error analyzing audio:",s),new Error("Failed to analyze audio segments.")}},aD=async(n,e)=>{var o,s,l;const t=await um(n);try{const u=await lm.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{data:t,mimeType:n.type}},{text:`Edit this image. ${e} Keep the main subject (person/face) exactly as is, only modify the background/surroundings. High quality, photorealistic.`}]}});for(const d of((l=(s=(o=u.candidates)==null?void 0:o[0])==null?void 0:s.content)==null?void 0:l.parts)||[])if(d.inlineData)return`data:image/png;base64,${d.inlineData.data}`;throw new Error("No image generated.")}catch(u){throw console.error("Error editing image:",u),new Error("Failed to edit image.")}},lD=async n=>{const e=await um(n);try{const o=(await lm.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:n.type,data:e}},{text:"Detect all human faces in this image. Return a list of bounding boxes with normalized coordinates (0 to 1)."}]},config:{responseMimeType:"application/json",responseSchema:{type:Pt.ARRAY,items:{type:Pt.OBJECT,properties:{ymin:{type:Pt.NUMBER},xmin:{type:Pt.NUMBER},ymax:{type:Pt.NUMBER},xmax:{type:Pt.NUMBER}},required:["ymin","xmin","ymax","xmax"]}}}})).text;return o?JSON.parse(o):[]}catch(t){return console.error("Error detecting faces:",t),[]}};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=(...n)=>n.filter((e,t,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,o)=>o?o.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=n=>{const e=cD(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=_e.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:s="",children:l,iconNode:u,...d},h)=>_e.createElement("svg",{ref:h,...fD,width:e,height:e,stroke:n,strokeWidth:o?Number(t)*24/Number(e):t,className:RS("lucide",s),...!l&&!dD(d)&&{"aria-hidden":"true"},...d},[...u.map(([g,_])=>_e.createElement(g,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(n,e)=>{const t=_e.forwardRef(({className:o,...s},l)=>_e.createElement(hD,{ref:l,iconNode:e,className:RS(`lucide-${uD(aT(n))}`,`lucide-${n}`,o),...s}));return t.displayName=aT(n),t};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],mD=Oe("brain-circuit",pD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],cf=Oe("brush",gD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],vD=Oe("calendar",yD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wp=Oe("check",_D);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ED=Oe("circle-check",TD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],AD=Oe("circle-play",SD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bS=Oe("circle-x",CD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],ID=Oe("cloud-upload",wD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ff=Oe("cloud",RD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],xD=Oe("download",bD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],lT=Oe("eraser",ND);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]],DD=Oe("file-headphone",MD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],xS=Oe("grid-3x3",PD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],kD=Oe("image",VD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],NS=Oe("keyboard",UD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yl=Oe("loader-circle",LD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],MS=Oe("maximize-2",OD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],BD=Oe("minimize-2",FD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],zD=Oe("monitor-play",qD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ip=Oe("moon",GD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],uT=Oe("mouse-pointer-2",HD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M11 7 6 2",key:"1jwth8"}],["path",{d:"M18.992 12H2.041",key:"xw1gg"}],["path",{d:"M21.145 18.38A3.34 3.34 0 0 1 20 16.5a3.3 3.3 0 0 1-1.145 1.88c-.575.46-.855 1.02-.855 1.595A2 2 0 0 0 20 22a2 2 0 0 0 2-2.025c0-.58-.285-1.13-.855-1.595",key:"1nkol4"}],["path",{d:"m8.5 4.5 2.148-2.148a1.205 1.205 0 0 1 1.704 0l7.296 7.296a1.205 1.205 0 0 1 0 1.704l-7.592 7.592a3.615 3.615 0 0 1-5.112 0l-3.888-3.888a3.615 3.615 0 0 1 0-5.112L5.67 7.33",key:"1nk1rd"}]],cT=Oe("paint-bucket",$D);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],DS=Oe("palette",YD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],KD=Oe("panels-top-left",JD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],XD=Oe("pause",QD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ZD=Oe("pen",WD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],e4=Oe("play",jD);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],n4=Oe("plus",t4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],o4=Oe("refresh-cw",i4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],s4=Oe("rotate-ccw",r4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],l4=Oe("rotate-cw",a4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],c4=Oe("scan",u4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],d4=Oe("settings",f4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],fT=Oe("shield",h4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],m4=Oe("sliders-vertical",p4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],cm=Oe("sparkles",g4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],dT=Oe("sun",y4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_4=Oe("trash-2",v4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],E4=Oe("undo",T4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],A4=Oe("user",S4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Rp=Oe("users",C4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],I4=Oe("volume-2",w4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],b4=Oe("volume-x",R4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fm=Oe("x",x4);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],M4=Oe("zoom-in",N4),D4=({speakers:n,activeSpeakerIds:e,onUpdateImage:t,onDeleteImages:o,onEditExistingImage:s,onUpdateName:l,onUpdateColor:u,onRotateSpeaker:d,onUpdateTriggerKey:h,isManualMode:g=!1,isPlayMode:_=!1,isCinemaMode:E=!1})=>{const[S,R]=_e.useState(null);_e.useEffect(()=>{if(!S)return;const x=G=>{if(G.preventDefault(),G.stopPropagation(),G.key==="Escape"){R(null);return}h&&h(S,G.key.toLowerCase()),R(null)};return window.addEventListener("keydown",x,!0),()=>window.removeEventListener("keydown",x,!0)},[S,h]);const V=x=>x===1?"grid-cols-1":x===2?"grid-cols-1 md:grid-cols-2":x===3?"grid-cols-1 md:grid-cols-3":x===4?"grid-cols-2 md:grid-cols-2":"grid-cols-2 md:grid-cols-3",O=(x,G,Z)=>{x.stopPropagation(),x.target.files&&x.target.files[0]&&(t(G,x.target.files[0],Z),x.target.value="")};return w.jsx("div",{className:`grid ${V(n.length)} gap-4 w-full h-full min-h-[400px] p-4`,children:n.map(x=>{const G=e.includes(x.id),Z=S===x.id,K=G&&x.activeImageUrl?x.activeImageUrl:x.imageUrl,te=!!x.imageUrl||!!x.activeImageUrl,he=x.rotation||0;return w.jsxs("div",{className:`
              relative rounded-2xl overflow-hidden border-2 
              flex flex-col items-center justify-center group
              transition-all duration-200 ease-out
              ${G?"shadow-[0_0_50px_rgba(0,0,0,0.6)] z-10 opacity-100 grayscale-0":"border-gray-800 opacity-40 scale-95 grayscale"}
            `,style:{borderColor:Z?"#ffffff":G?x.color:"#1f2937",boxShadow:G?`0 0 60px ${x.color}40`:"none"},children:[w.jsxs("div",{className:"absolute inset-0 w-full h-full transition-transform duration-500 ease-in-out",style:{transform:`rotate(${he}deg)`},children:[w.jsx("div",{className:`absolute inset-0 w-full h-full bg-gray-900 transition-all duration-300 ${G?"animate-beat":""}`,children:K?w.jsx("img",{src:K,alt:x.name,className:"w-full h-full object-cover transition-opacity duration-300"}):w.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:w.jsx(A4,{size:64,className:"text-gray-600"})})}),!E&&w.jsx("div",{className:`absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent transition-opacity duration-200 ${G?"opacity-20":"opacity-90"}`}),!E&&w.jsx("div",{className:"absolute bottom-6 left-6 right-6 z-20",children:w.jsxs("div",{className:"flex justify-between items-end",children:[w.jsxs("div",{className:"flex-1 mr-4",children:[w.jsxs("div",{className:"relative group/input",children:[w.jsx("input",{type:"text",value:x.name,onChange:$=>l(x.id,$.target.value),disabled:_,className:`bg-transparent text-2xl font-bold tracking-wider text-white border-b hover:border-white/30 focus:border-white focus:outline-none w-full transition-colors pb-1 ${_?"border-transparent cursor-default":"border-transparent"}`,style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)",color:G?x.color:"white"}}),!_&&w.jsx(ZD,{size:12,className:"absolute right-0 top-2 text-gray-500 opacity-0 group-hover/input:opacity-100 transition-opacity pointer-events-none"})]}),g&&x.triggerKey&&!_&&w.jsxs("button",{onClick:$=>{$.stopPropagation(),R(x.id)},className:`mt-2 flex items-center gap-2 text-gray-400 hover:text-white transition-colors cursor-pointer group/key ${Z?"animate-pulse text-neon-yellow":""}`,title:"Click to rebind key",children:[w.jsx(NS,{size:14}),w.jsx("span",{className:`text-xs font-mono border rounded px-1.5 py-0.5 transition-colors ${Z?"border-neon-yellow bg-neon-yellow/20":"border-gray-600 bg-gray-800/80 group-hover/key:border-gray-400"}`,children:Z?"PRESS KEY...":x.triggerKey.toUpperCase()})]})]}),w.jsx("div",{className:"flex flex-col items-center gap-3",children:w.jsxs("div",{className:"relative",children:[G&&w.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full opacity-75 animate-ping",style:{backgroundColor:x.color}}),w.jsxs("div",{className:`relative group/color ${_?"":"cursor-pointer"}`,children:[w.jsx("div",{className:"w-4 h-4 rounded-full shadow-lg transition-colors duration-200 border border-white/20",style:{backgroundColor:x.color}}),!_&&w.jsx("input",{type:"color",value:x.color,onChange:$=>u(x.id,$.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",title:"Change Speaker Color"})]})]})})]})})]}),!_&&w.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-40 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[w.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[x.imageUrl&&w.jsx("button",{onClick:$=>{$.stopPropagation(),s(x.id,"idle")},className:"p-2 rounded-full bg-black/40 hover:bg-black/80 text-white border border-white/10 hover:border-white/50 backdrop-blur-sm transition-all shadow-lg",title:"Edit Idle Image",type:"button",children:w.jsx(cf,{size:14})}),w.jsxs("label",{className:"cursor-pointer p-2 rounded-full bg-black/40 hover:bg-gray-800 text-gray-300 hover:text-white border border-white/10 hover:border-white/50 backdrop-blur-sm transition-all relative group/btn shadow-lg",children:[w.jsx(Ip,{size:16}),w.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:$=>O($,x.id,"idle")}),w.jsx("span",{className:"absolute right-full mr-2 bg-black/80 text-xs px-2 py-1 rounded text-white whitespace-nowrap opacity-0 group-hover/btn:opacity-100 pointer-events-none",children:"Upload Idle Photo"})]})]}),w.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[x.activeImageUrl&&w.jsx("button",{onClick:$=>{$.stopPropagation(),s(x.id,"active")},className:"p-2 rounded-full bg-black/40 hover:bg-black/80 text-white border border-white/10 hover:border-white/50 backdrop-blur-sm transition-all shadow-lg",title:"Edit Active Image",type:"button",children:w.jsx(cf,{size:14})}),w.jsxs("label",{className:`cursor-pointer p-2 rounded-full bg-black/40 hover:bg-primary-900/80 hover:text-primary-400 border border-white/10 hover:border-primary-500/50 backdrop-blur-sm transition-all relative group/btn shadow-lg ${x.activeImageUrl?"text-primary-400 border-primary-500/30":"text-gray-300"}`,children:[w.jsx(cm,{size:16}),w.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:$=>O($,x.id,"active")}),w.jsx("span",{className:"absolute right-full mr-2 bg-black/80 text-xs px-2 py-1 rounded text-white whitespace-nowrap opacity-0 group-hover/btn:opacity-100 pointer-events-none",children:"Upload Speaking Photo"})]})]}),w.jsx("div",{className:"flex justify-end",children:w.jsx("button",{onClick:$=>{$.stopPropagation(),d(x.id)},className:"p-2 rounded-full bg-black/40 hover:bg-blue-900/80 text-gray-400 hover:text-blue-400 border border-white/10 hover:border-blue-500/50 backdrop-blur-sm transition-all mt-1 shadow-lg",title:"Rotate Speaker",type:"button",children:w.jsx(l4,{size:16})})}),te&&w.jsx("div",{className:"flex justify-end",children:w.jsx("button",{onClick:$=>{$.preventDefault(),$.stopPropagation(),o(x.id)},className:"p-2 rounded-full bg-black/40 hover:bg-red-900/80 text-gray-400 hover:text-red-400 border border-white/10 hover:border-red-500/50 backdrop-blur-sm transition-all mt-1 shadow-lg z-50 pointer-events-auto",title:"Remove All Images",type:"button",children:w.jsx(_4,{size:16})})})]})]},x.id)})})},P4=({file:n,onTimeUpdate:e,onReset:t,isPlayMode:o,onTogglePlayMode:s,isCinemaMode:l,onToggleCinemaMode:u})=>{const d=_e.useRef(null),h=_e.useRef(null),[g,_]=_e.useState(!1),[E,S]=_e.useState(0),[R,V]=_e.useState(0),[O,x]=_e.useState(null),[G,Z]=_e.useState(1),[K,te]=_e.useState(!1);_e.useEffect(()=>{if(n){const P=URL.createObjectURL(n);return x(P),()=>{URL.revokeObjectURL(P)}}},[n]),_e.useEffect(()=>{d.current&&(d.current.volume=K?0:G)},[G,K]),_e.useEffect(()=>{const P=Ie=>{Ie.code==="Space"&&(Ie.preventDefault(),$())};return window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P)}},[g]);const he=()=>{if(d.current){const P=d.current.currentTime;V(P),e(P),!d.current.paused&&!d.current.ended&&(h.current=requestAnimationFrame(he))}},$=()=>{d.current&&(d.current.paused?(d.current.play(),h.current=requestAnimationFrame(he),_(!0)):(d.current.pause(),h.current&&cancelAnimationFrame(h.current),_(!1)))},D=()=>{te(!K)},M=()=>{_(!1),h.current&&cancelAnimationFrame(h.current)},N=()=>{d.current&&S(d.current.duration)},k=P=>{const Ie=Number(P.target.value);d.current&&(d.current.currentTime=Ie,V(Ie),e(Ie))},L=P=>{const Ie=parseFloat(P.target.value);Z(Ie),Ie>0&&K&&te(!1)},q=P=>{const Ie=Math.floor(P/60),Xe=Math.floor(P%60);return`${Ie}:${Xe.toString().padStart(2,"0")}`};return w.jsxs("div",{className:`w-full bg-gray-900 border-t border-gray-800 p-4 shadow-2xl z-50 transition-all duration-300 ${l?"border-t-0 bg-transparent":""}`,children:[O&&w.jsx("audio",{ref:d,src:O,onLoadedMetadata:N,onEnded:M}),w.jsxs("div",{className:`max-w-6xl mx-auto flex items-center gap-6 transition-opacity duration-300 ${l?"opacity-30 hover:opacity-100":"opacity-100"}`,children:[!l&&w.jsx("button",{onClick:$,className:"w-12 h-12 flex-shrink-0 flex items-center justify-center rounded-full bg-primary-600 hover:bg-primary-500 text-white transition-all shadow-lg hover:shadow-primary-500/30",children:g?w.jsx(XD,{size:20,fill:"currentColor"}):w.jsx(e4,{size:20,fill:"currentColor",className:"ml-1"})}),w.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[!l&&w.jsxs("div",{className:"flex justify-between text-xs text-gray-400 font-mono mb-1",children:[w.jsx("span",{children:q(R)}),w.jsx("span",{children:q(E)})]}),w.jsx("input",{type:"range",min:"0",max:E,value:R,onChange:k,step:"0.01",className:`w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary-500 hover:accent-primary-400 ${l?"h-2 opacity-50":""}`})]}),!l&&w.jsxs("div",{className:"flex items-center gap-2 w-32 group",children:[w.jsx("button",{onClick:D,className:"text-gray-400 hover:text-white transition-colors",children:K||G===0?w.jsx(b4,{size:20}):w.jsx(I4,{size:20})}),w.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:K?0:G,onChange:L,className:"w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-gray-400 hover:accent-white"})]}),w.jsx("div",{className:"h-8 w-px bg-gray-800 mx-2"}),w.jsx("button",{onClick:s,className:`p-2 transition-colors ${o?"text-neon-blue":"text-gray-500 hover:text-white"}`,title:o?"Exit Play Mode":"Enter Play Mode",children:o?w.jsx(BD,{size:20}):w.jsx(MS,{size:20})}),o&&w.jsx("button",{onClick:u,className:`p-2 transition-colors ${l?"text-neon-purple animate-pulse":"text-gray-500 hover:text-white"}`,title:l?"Exit Cinema Mode":"Enter Cinema Mode (Space to Play/Pause)",children:w.jsx(zD,{size:20})}),!l&&w.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-white transition-colors",title:"Reset & Upload New",children:w.jsx(o4,{size:20})})]})]})},V4=({isOpen:n,imageSource:e,onClose:t,onSave:o,onAiEdit:s,onDetectFaces:l})=>{const[u,d]=_e.useState(null),[h,g]=_e.useState(1),[_,E]=_e.useState({x:0,y:0}),[S,R]=_e.useState(!0),[V,O]=_e.useState(1),[x,G]=_e.useState("move"),[Z,K]=_e.useState(!1),[te,he]=_e.useState({x:0,y:0}),[$,D]=_e.useState(!1),[M,N]=_e.useState(!1),[k,L]=_e.useState(!1),[q,P]=_e.useState([]),[Ie,Xe]=_e.useState(-1),[ee,de]=_e.useState("#ff0055"),[ve,ze]=_e.useState(20),[et,F]=_e.useState("neon cyber city background"),X=_e.useRef(null),le=_e.useRef(null),fe=_e.useRef(null),Ne=_e.useRef(null),Ve=500;_e.useEffect(()=>{if(e){let me="",Ae=!1;return e instanceof File?(me=URL.createObjectURL(e),Ae=!0):me=e,d(me),g(1),E({x:0,y:0}),G("move"),O(1),ke(le.current),ke(fe.current),P([]),Xe(-1),()=>{Ae&&URL.revokeObjectURL(me)}}},[e]);const ke=me=>{if(me){const Ae=me.getContext("2d");Ae&&Ae.clearRect(0,0,me.width,me.height)}},He=()=>{if(!le.current||!fe.current)return;const me=le.current.getContext("2d"),Ae=fe.current.getContext("2d");if(!me||!Ae)return;const we=le.current.width,$e=le.current.height,Me=me.getImageData(0,0,we,$e),ie=Ae.getImageData(0,0,we,$e),ce=q.slice(0,Ie+1);ce.push({drawing:Me,mask:ie}),ce.length>20&&ce.shift(),P(ce),Xe(ce.length-1)},yt=()=>{if(Ie>0){const me=Ie-1,Ae=q[me];if(le.current&&fe.current){const we=le.current.getContext("2d"),$e=fe.current.getContext("2d");we&&we.putImageData(Ae.drawing,0,0),$e&&$e.putImageData(Ae.mask,0,0)}Xe(me)}else Ie===0&&(ke(le.current),ke(fe.current),Xe(-1))},Dn=()=>{if(X.current){const{naturalWidth:me,naturalHeight:Ae}=X.current,we=Ve/Ae;O(we),le.current&&(le.current.width=me,le.current.height=Ae),fe.current&&(fe.current.width=me,fe.current.height=Ae),He()}},Gn=async()=>{if(!X.current||!fe.current)return;D(!0);let me=!1,Ae=[];try{if(window.FaceDetector){const Me=await new window.FaceDetector().detect(X.current);Me.length>0&&(Ae=Me.map(ie=>({type:"system",box:ie.boundingBox})),me=!0)}}catch($e){console.warn("System Face Detection failed, falling back to AI.",$e)}if(!me)try{let $e;if(e instanceof File)$e=e;else if(typeof e=="string"){const ce=await(await fetch(e)).blob();$e=new File([ce],"image.png",{type:ce.type})}else throw new Error("Invalid image source");const Me=await l($e);if(Me.length>0){const{naturalWidth:ie,naturalHeight:ce}=X.current;Ae=Me.map(pe=>({type:"ai",box:{left:pe.xmin*ie,top:pe.ymin*ce,width:(pe.xmax-pe.xmin)*ie,height:(pe.ymax-pe.ymin)*ce}})),me=!0}}catch($e){console.error("AI Face Detection failed",$e)}const we=fe.current.getContext("2d");we&&me?(we.fillStyle="rgba(0, 255, 100, 0.5)",Ae.forEach($e=>{const{width:Me,height:ie,top:ce,left:pe}=$e.box;we.beginPath();const re=Me*.1,Re=ie*.2,wt=pe+Me/2,Bt=ce+ie/2-ie*.05,It=Me/2+re,ft=ie/2+Re;we.ellipse(wt,Bt,It,ft,0,0,2*Math.PI),we.fill()}),He()):me||alert("No faces detected by System or AI."),D(!1)};if(!n||!e)return null;const Hn=me=>"touches"in me?{x:me.touches[0].clientX,y:me.touches[0].clientY}:{x:me.clientX,y:me.clientY},Ti=(me,Ae)=>{const we=Ae.getBoundingClientRect(),$e=Hn(me),Me=($e.x-we.left)*(Ae.width/we.width),ie=($e.y-we.top)*(Ae.height/we.height);return{x:Me,y:ie}},mn=me=>{if(x==="move"){K(!0);const Ae=Hn(me);he({x:Ae.x-_.x,y:Ae.y-_.y})}else x==="bucket"?(Vo(me),He()):(N(!0),L(!0),Po(me))},ii=me=>{if(x==="move"&&Z){const Ae=Hn(me);E({x:Ae.x-te.x,y:Ae.y-te.y})}else M&&x!=="move"&&x!=="bucket"&&Po(me)},oi=()=>{var we,$e;K(!1),M&&k&&He(),N(!1),L(!1);const me=(we=le.current)==null?void 0:we.getContext("2d");me&&me.beginPath();const Ae=($e=fe.current)==null?void 0:$e.getContext("2d");Ae&&Ae.beginPath()},Po=me=>{let Ae=le.current,we=ee,$e="source-over";if(x==="mask"?(Ae=fe.current,we="rgba(0, 255, 100, 0.5)"):x==="eraser"&&($e="destination-out"),!Ae)return;const Me=Ae.getContext("2d");if(!Me)return;const{x:ie,y:ce}=Ti(me,Ae);Me.lineWidth=ve,Me.lineCap="round",Me.lineJoin="round",Me.strokeStyle=we,Me.globalCompositeOperation=$e,Me.lineTo(ie,ce),Me.stroke(),Me.beginPath(),Me.moveTo(ie,ce),Me.globalCompositeOperation="source-over"},Vo=me=>{if(!le.current||!fe.current)return;const Ae=le.current,we=fe.current,$e=Ae.getContext("2d"),Me=we.getContext("2d");if(!$e||!Me)return;const{x:ie,y:ce}=Ti(me,Ae),pe=Math.floor(ie),re=Math.floor(ce),Re=Ae.width,wt=Ae.height,Bt=$e.getImageData(0,0,Re,wt),It=Me.getImageData(0,0,Re,wt),ft=Bt.data,Qt=It.data,Ur=ee.replace("#",""),ko=parseInt(Ur.substring(0,2),16),Lr=parseInt(Ur.substring(2,4),16),Vi=parseInt(Ur.substring(4,6),16),$n=255,Yn=(re*Re+pe)*4,Vn=ft[Yn],An=ft[Yn+1],Si=ft[Yn+2],eo=ft[Yn+3];if(Vn===ko&&An===Lr&&Si===Vi&&eo===$n)return;const ri=[[pe,re]];for(;ri.length;){const[sn,gn]=ri.pop(),vt=(gn*Re+sn)*4;sn<0||sn>=Re||gn<0||gn>=wt||Qt[vt+3]>10||ft[vt]===Vn&&ft[vt+1]===An&&ft[vt+2]===Si&&ft[vt+3]===eo&&(ft[vt]=ko,ft[vt+1]=Lr,ft[vt+2]=Vi,ft[vt+3]=$n,ri.push([sn+1,gn]),ri.push([sn-1,gn]),ri.push([sn,gn+1]),ri.push([sn,gn-1]))}$e.putImageData(Bt,0,0)},Pi=()=>{if(!X.current)return;const me=2048,Ae=document.createElement("canvas");Ae.width=me,Ae.height=me;const we=Ae.getContext("2d");if(!we)return;we.imageSmoothingEnabled=!0,we.imageSmoothingQuality="high",we.fillStyle="#000",we.fillRect(0,0,me,me);const $e=me/Ve;we.translate(me/2,me/2),we.translate(_.x*$e,_.y*$e),we.scale(h,h);const Me=X.current.naturalWidth/X.current.naturalHeight,ie=me,ce=ie*Me;we.drawImage(X.current,-ce/2,-ie/2,ce,ie),le.current&&we.drawImage(le.current,-ce/2,-ie/2,ce,ie),Ae.toBlob(pe=>{pe&&o(pe)},"image/jpeg",.95)},Ei=async()=>{if(!e||typeof e=="string"){alert("AI Edit requires a fresh file upload for now. Please re-upload.");return}D(!0);try{const me=await s(e,et);d(me),g(1),E({x:0,y:0}),ke(le.current),ke(fe.current),P([]),Xe(-1),G("move"),He()}catch(me){console.error("AI Edit failed",me),alert("Failed to generate image.")}finally{D(!1)}},Pn=({tool:me,icon:Ae,label:we})=>w.jsxs("button",{onClick:()=>G(me),className:`flex flex-col items-center justify-center p-3 rounded-xl transition-all w-full border ${x===me?"bg-primary-600/20 border-primary-500 text-white shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-gray-800 border-transparent text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,children:[w.jsx(Ae,{size:20,className:"mb-1"}),w.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider",children:we})]});return w.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-md p-4",children:w.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-6xl max-h-[95vh] flex flex-col shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[w.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center bg-gray-950/50 flex-shrink-0",children:[w.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[w.jsx(kD,{size:18,className:"text-primary-400"}),"Image Studio"]}),w.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:w.jsx(fm,{size:20})})]}),w.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[w.jsxs("div",{className:"w-full md:w-24 bg-gray-900 border-r border-gray-800 p-2 flex md:flex-col gap-2 overflow-x-auto md:overflow-visible flex-shrink-0 z-10",children:[w.jsx(Pn,{tool:"move",icon:uT,label:"Move"}),w.jsx("div",{className:"w-full h-px bg-gray-800 my-1 hidden md:block"}),w.jsx(Pn,{tool:"mask",icon:fT,label:"Preserve"}),w.jsx(Pn,{tool:"bucket",icon:cT,label:"Fill"}),w.jsx(Pn,{tool:"brush",icon:cf,label:"Paint"}),w.jsx(Pn,{tool:"eraser",icon:lT,label:"Erase"})]}),w.jsxs("div",{className:"flex-1 bg-black/40 relative overflow-hidden flex items-center justify-center",children:[w.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#4f46e5 1px, transparent 1px)",backgroundSize:"20px 20px"}}),w.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:"linear-gradient(45deg, #333 25%, transparent 25%), linear-gradient(-45deg, #333 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #333 75%), linear-gradient(-45deg, transparent 75%, #333 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"}}),w.jsx("div",{className:"relative w-full h-full p-8 flex items-center justify-center overflow-hidden",children:u?w.jsx(w.Fragment,{children:w.jsxs("div",{ref:Ne,className:`relative border-2 border-white/20 shadow-[0_0_0_9999px_rgba(0,0,0,0.8)] overflow-hidden bg-black ${x==="move"?"cursor-move":x==="bucket"?"cursor-crosshair":"cursor-none"}`,style:{width:`${Ve}px`,height:`${Ve}px`},onMouseDown:mn,onMouseMove:ii,onMouseUp:oi,onMouseLeave:oi,onTouchStart:mn,onTouchMove:ii,onTouchEnd:oi,children:[w.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",transform:`translate(${_.x}px, ${_.y}px) scale(${h})`,transformOrigin:"center center",transition:Z?"none":"transform 0.1s ease-out"},children:w.jsxs("div",{className:"relative",children:[w.jsx("img",{ref:X,src:u,onLoad:Dn,alt:"Edit",className:"max-w-none pointer-events-none select-none block",style:{height:`${Ve}px`,width:"auto"},draggable:!1}),w.jsx("canvas",{ref:le,className:"absolute inset-0 w-full h-full pointer-events-none"}),w.jsx("canvas",{ref:fe,className:"absolute inset-0 w-full h-full pointer-events-none opacity-60 mix-blend-screen"})]})}),S&&w.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10 border border-white/10",children:[w.jsx("div",{className:"w-full h-full grid grid-cols-3 grid-rows-3",children:[...Array(9)].map((me,Ae)=>w.jsx("div",{className:"border border-white/10"},Ae))}),w.jsx("div",{className:"absolute top-0 left-0 w-full h-full border border-white/50"})]}),(x==="brush"||x==="mask"||x==="eraser")&&!Z&&w.jsx("div",{className:"pointer-events-none fixed border-2 rounded-full z-50 -translate-x-1/2 -translate-y-1/2",style:{width:ve*V*h,height:ve*V*h,borderColor:x==="mask"?"#0aff60":x==="eraser"?"white":ee,left:"var(--cursor-x, -100px)",top:"var(--cursor-y, -100px)"},ref:me=>{me&&document.addEventListener("mousemove",Ae=>{me.style.setProperty("--cursor-x",`${Ae.clientX}px`),me.style.setProperty("--cursor-y",`${Ae.clientY}px`)})}})]})}):w.jsxs("div",{className:"text-gray-500 flex flex-col items-center",children:[w.jsx(Yl,{className:"animate-spin mb-2"}),"Loading Image..."]})}),$&&w.jsxs("div",{className:"absolute inset-0 bg-black/80 flex flex-col items-center justify-center z-50 backdrop-blur-sm",children:[w.jsx(Yl,{size:48,className:"text-neon-purple animate-spin mb-4"}),w.jsx("span",{className:"text-white text-lg font-medium animate-pulse",children:"Generating AI Background..."})]})]}),w.jsxs("div",{className:"w-full md:w-80 bg-gray-900 border-l border-gray-800 p-6 overflow-y-auto flex-shrink-0",children:[w.jsxs("div",{className:"mb-6 p-4 bg-gray-800 rounded-xl border border-gray-700",children:[w.jsxs("h4",{className:"text-white font-bold mb-1 flex items-center gap-2",children:[x==="move"&&w.jsx(uT,{size:16}),x==="mask"&&w.jsx(fT,{size:16}),x==="bucket"&&w.jsx(cT,{size:16}),x==="brush"&&w.jsx(cf,{size:16}),x==="eraser"&&w.jsx(lT,{size:16}),w.jsxs("span",{className:"capitalize",children:[x," Tool"]})]}),w.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[x==="move"&&"Drag image to position inside the square frame.",x==="mask"&&"Draw over subject to PROTECT it from fills.",x==="bucket"&&"Fill empty areas. Respects protective mask.",x==="brush"&&"Freehand paint.",x==="eraser"&&"Erase paint."]})]}),w.jsxs("div",{className:"space-y-4 mb-6",children:[w.jsxs("div",{className:"flex justify-between",children:[w.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Zoom"}),w.jsxs("span",{className:"text-xs text-primary-400 font-mono",children:[h.toFixed(1),"x"]})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(M4,{size:16,className:"text-gray-500"}),w.jsx("input",{type:"range",min:"0.5",max:"15",step:"0.1",value:h,onChange:me=>g(parseFloat(me.target.value)),className:"flex-1 h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary-500"})]})]}),w.jsxs("div",{className:"flex items-center justify-between mb-8 pb-4 border-b border-gray-800",children:[w.jsxs("label",{className:"text-xs font-bold text-gray-400 uppercase flex items-center gap-2",children:[w.jsx(xS,{size:14})," Show Grid"]}),w.jsx("button",{onClick:()=>R(!S),className:`w-10 h-5 rounded-full relative transition-colors ${S?"bg-primary-600":"bg-gray-700"}`,children:w.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${S?"translate-x-5":"translate-x-0"}`})})]}),x!=="move"&&w.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{className:"flex justify-between text-xs text-gray-400 font-bold uppercase",children:[w.jsx("span",{children:"Brush Size"}),w.jsxs("span",{children:[ve,"px"]})]}),w.jsx("input",{type:"range",min:"1",max:"150",value:ve,onChange:me=>ze(parseInt(me.target.value)),className:"w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-white"})]}),(x==="brush"||x==="bucket")&&w.jsxs("div",{className:"space-y-3",children:[w.jsxs("label",{className:"text-xs font-bold text-gray-400 uppercase flex items-center gap-2",children:[w.jsx(DS,{size:14})," Color"]}),w.jsxs("div",{className:"flex gap-2 flex-wrap",children:[["#ff0055","#00f3ff","#bc13fe","#0aff60","#ffffff","#000000"].map(me=>w.jsx("button",{onClick:()=>de(me),className:`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 ${ee===me?"border-white scale-110":"border-transparent"}`,style:{backgroundColor:me}},me)),w.jsx("input",{type:"color",value:ee,onChange:me=>de(me.target.value),className:"w-8 h-8 rounded-full cursor-pointer bg-transparent border-0 p-0 overflow-hidden"})]})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsxs("button",{onClick:yt,disabled:Ie<0,className:"flex-1 py-2 text-xs font-bold text-gray-300 hover:bg-gray-800 border border-gray-700 rounded transition-colors flex items-center justify-center gap-2 disabled:opacity-50",title:"Undo last stroke",children:[w.jsx(E4,{size:14})," Undo"]}),w.jsxs("button",{onClick:()=>{ke(le.current),ke(fe.current),He()},className:"flex-1 py-2 text-xs font-bold text-red-400 hover:bg-red-900/20 border border-red-900/30 rounded transition-colors flex items-center justify-center gap-2",children:[w.jsx(s4,{size:14})," Reset"]})]})]}),x==="mask"&&w.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800",children:[w.jsxs("button",{onClick:Gn,className:"w-full py-2 bg-green-900/30 text-green-400 border border-green-800 rounded hover:bg-green-900/50 transition-colors flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-wider",children:[w.jsx(c4,{size:14})," Auto-Detect Face"]}),w.jsx("p",{className:"text-[10px] text-gray-500 mt-2 text-center",children:"Attempts to auto-mask faces using system detection."})]}),w.jsxs("div",{className:"mt-4 pt-6 border-t border-gray-800 space-y-4",children:[w.jsxs("label",{className:"text-xs font-bold text-neon-blue uppercase flex items-center gap-2",children:[w.jsx(cm,{size:14}),"Generative Fill"]}),w.jsx("textarea",{value:et,onChange:me=>F(me.target.value),placeholder:"Describe the background...",className:"w-full bg-black/30 border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-neon-blue placeholder-gray-600 resize-none h-20"}),w.jsx("button",{onClick:Ei,disabled:$,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-500 text-white px-4 py-3 rounded-lg font-bold text-sm hover:brightness-110 disabled:opacity-50 transition-all shadow-lg shadow-blue-900/20",children:$?"Generating...":"Generate New Image"})]})]})]}),w.jsxs("div",{className:"p-4 border-t border-gray-800 flex justify-end gap-3 bg-gray-950/50 flex-shrink-0",children:[w.jsx("button",{onClick:t,className:"px-5 py-2.5 text-gray-400 hover:text-white text-sm font-medium transition-colors",children:"Discard"}),w.jsxs("button",{onClick:Pi,className:"px-8 py-2.5 bg-white text-black rounded-full text-sm font-bold hover:bg-gray-200 transition-colors flex items-center gap-2 shadow-[0_0_20px_rgba(255,255,255,0.2)]",children:[w.jsx(wp,{size:18}),"Save & Apply"]})]})]})})},k4=()=>{};var hT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=function(n){const e=[];let t=0;for(let o=0;o<n.length;o++){let s=n.charCodeAt(o);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++o)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},U4=function(n){const e=[];let t=0,o=0;for(;t<n.length;){const s=n[t++];if(s<128)e[o++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[o++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],u=n[t++],d=n[t++],h=((s&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(h>>10)),e[o++]=String.fromCharCode(56320+(h&1023))}else{const l=n[t++],u=n[t++];e[o++]=String.fromCharCode((s&15)<<12|(l&63)<<6|u&63)}}return e.join("")},VS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let s=0;s<n.length;s+=3){const l=n[s],u=s+1<n.length,d=u?n[s+1]:0,h=s+2<n.length,g=h?n[s+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,R=g&63;h||(R=64,u||(S=64)),o.push(t[_],t[E],t[S],t[R])}return o.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(PS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):U4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new L4;const S=l<<2|d>>4;if(o.push(S),g!==64){const R=d<<4&240|g>>2;if(o.push(R),E!==64){const V=g<<6&192|E;o.push(V)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class L4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O4=function(n){const e=PS(n);return VS.encodeByteArray(e,!0)},df=function(n){return O4(n).replace(/\./g,"")},F4=function(n){try{return VS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=()=>B4().__FIREBASE_DEFAULTS__,z4=()=>{if(typeof process>"u"||typeof hT>"u")return;const n=hT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},G4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&F4(n[1]);return e&&JSON.parse(e)},dm=()=>{try{return k4()||q4()||z4()||G4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},H4=n=>{var e,t;return(t=(e=dm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},kS=n=>{const e=H4(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},US=()=>{var n;return(n=dm())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[df(JSON.stringify(t)),df(JSON.stringify(u)),""].join(".")}const Fl={};function Y4(){const n={prod:[],emulator:[]};for(const e of Object.keys(Fl))Fl[e]?n.emulator.push(e):n.prod.push(e);return n}function J4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let pT=!1;function FS(n,e){if(typeof window>"u"||typeof document>"u"||!iu(window.location.host)||Fl[n]===e||Fl[n]||pT)return;Fl[n]=e;function t(S){return`__firebase__banner__${S}`}const o="__firebase__banner",l=Y4().prod.length>0;function u(){const S=document.getElementById(o);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function h(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{pT=!0,u()},S}function _(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=J4(o),R=t("text"),V=document.getElementById(R)||document.createElement("span"),O=t("learnmore"),x=document.getElementById(O)||document.createElement("a"),G=t("preprendIcon"),Z=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const K=S.element;d(K),_(x,O);const te=g();h(Z,G),K.append(Z,V,x,te),document.body.appendChild(K)}l?(V.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q4(){var n;const e=(n=dm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X4(){return!Q4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W4(){try{return typeof indexedDB=="object"}catch{return!1}}function Z4(){return new Promise((n,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(o);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(o),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4="FirebaseError";class ys extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=j4,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,BS.prototype.create)}}class BS{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],u=l?eP(l,o):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new ys(s,d,o)}}function eP(n,e){return n.replace(tP,(t,o)=>{const s=e[o];return s!=null?String(s):`<${o}?>`})}const tP=/\{\$([^}]+)}/g;function hf(n,e){if(n===e)return!0;const t=Object.keys(n),o=Object.keys(e);for(const s of t){if(!o.includes(s))return!1;const l=n[s],u=e[s];if(mT(l)&&mT(u)){if(!hf(l,u))return!1}else if(l!==u)return!1}for(const s of o)if(!t.includes(s))return!1;return!0}function mT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(n){return n&&n._delegate?n._delegate:n}class _a{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new $4;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&o.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oP(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});o.resolve(l)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&u.resolve(s)}return s}onInit(e,t){var o;const s=this.normalizeInstanceIdentifier(t),l=(o=this.onInitCallbacks.get(s))!==null&&o!==void 0?o:new Set;l.add(e),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&e(u,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const s of o)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:iP(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iP(n){return n===cs?void 0:n}function oP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(it||(it={}));const sP={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},aP=it.INFO,lP={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},uP=(n,e,...t)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),s=lP[e];if(s)console[s](`[${o}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qS{constructor(e){this.name=e,this._logLevel=aP,this._logHandler=uP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const cP=(n,e)=>e.some(t=>n instanceof t);let gT,yT;function fP(){return gT||(gT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dP(){return yT||(yT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zS=new WeakMap,bp=new WeakMap,GS=new WeakMap,jh=new WeakMap,hm=new WeakMap;function hP(n){const e=new Promise((t,o)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Sr(n.result)),s()},u=()=>{o(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&zS.set(t,n)}).catch(()=>{}),hm.set(e,n),e}function pP(n){if(bp.has(n))return;const e=new Promise((t,o)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),s()},u=()=>{o(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});bp.set(n,e)}let xp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||GS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Sr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mP(n){xp=n(xp)}function gP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=n.call(ep(this),e,...t);return GS.set(o,e.sort?e.sort():[e]),Sr(o)}:dP().includes(n)?function(...e){return n.apply(ep(this),e),Sr(zS.get(this))}:function(...e){return Sr(n.apply(ep(this),e))}}function yP(n){return typeof n=="function"?gP(n):(n instanceof IDBTransaction&&pP(n),cP(n,fP())?new Proxy(n,xp):n)}function Sr(n){if(n instanceof IDBRequest)return hP(n);if(jh.has(n))return jh.get(n);const e=yP(n);return e!==n&&(jh.set(n,e),hm.set(e,n)),e}const ep=n=>hm.get(n);function vP(n,e,{blocked:t,upgrade:o,blocking:s,terminated:l}={}){const u=indexedDB.open(n,e),d=Sr(u);return o&&u.addEventListener("upgradeneeded",h=>{o(Sr(u.result),h.oldVersion,h.newVersion,Sr(u.transaction),h)}),t&&u.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{l&&h.addEventListener("close",()=>l()),s&&h.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const _P=["get","getKey","getAll","getAllKeys","count"],TP=["put","add","delete","clear"],tp=new Map;function vT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tp.get(e))return tp.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,s=TP.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(s||_P.includes(t)))return;const l=async function(u,...d){const h=this.transaction(u,s?"readwrite":"readonly");let g=h.store;return o&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&h.done]))[0]};return tp.set(e,l),l}mP(n=>({...n,get:(e,t,o)=>vT(e,t)||n.get(e,t,o),has:(e,t)=>!!vT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SP(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function SP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Np="@firebase/app",_T="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new qS("@firebase/app"),AP="@firebase/app-compat",CP="@firebase/analytics-compat",wP="@firebase/analytics",IP="@firebase/app-check-compat",RP="@firebase/app-check",bP="@firebase/auth",xP="@firebase/auth-compat",NP="@firebase/database",MP="@firebase/data-connect",DP="@firebase/database-compat",PP="@firebase/functions",VP="@firebase/functions-compat",kP="@firebase/installations",UP="@firebase/installations-compat",LP="@firebase/messaging",OP="@firebase/messaging-compat",FP="@firebase/performance",BP="@firebase/performance-compat",qP="@firebase/remote-config",zP="@firebase/remote-config-compat",GP="@firebase/storage",HP="@firebase/storage-compat",$P="@firebase/firestore",YP="@firebase/ai",JP="@firebase/firestore-compat",KP="firebase",QP="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="[DEFAULT]",XP={[Np]:"fire-core",[AP]:"fire-core-compat",[wP]:"fire-analytics",[CP]:"fire-analytics-compat",[RP]:"fire-app-check",[IP]:"fire-app-check-compat",[bP]:"fire-auth",[xP]:"fire-auth-compat",[NP]:"fire-rtdb",[MP]:"fire-data-connect",[DP]:"fire-rtdb-compat",[PP]:"fire-fn",[VP]:"fire-fn-compat",[kP]:"fire-iid",[UP]:"fire-iid-compat",[LP]:"fire-fcm",[OP]:"fire-fcm-compat",[FP]:"fire-perf",[BP]:"fire-perf-compat",[qP]:"fire-rc",[zP]:"fire-rc-compat",[GP]:"fire-gcs",[HP]:"fire-gcs-compat",[$P]:"fire-fst",[JP]:"fire-fst-compat",[YP]:"fire-vertex","fire-js":"fire-js",[KP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Map,WP=new Map,Dp=new Map;function TT(n,e){try{n.container.addComponent(e)}catch(t){bo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kl(n){const e=n.name;if(Dp.has(e))return bo.debug(`There were multiple attempts to register component ${e}.`),!1;Dp.set(e,n);for(const t of Jl.values())TT(t,n);for(const t of WP.values())TT(t,n);return!0}function HS(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $S(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new BS("app","Firebase",ZP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,t,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=QP;function JS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const o=Object.assign({name:Mp,automaticDataCollectionEnabled:!0},e),s=o.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(t||(t=US()),!t)throw Ar.create("no-options");const l=Jl.get(s);if(l){if(hf(t,l.options)&&hf(o,l.config))return l;throw Ar.create("duplicate-app",{appName:s})}const u=new rP(s);for(const h of Dp.values())u.addComponent(h);const d=new jP(t,o,u);return Jl.set(s,d),d}function KS(n=Mp){const e=Jl.get(n);if(!e&&n===Mp&&US())return JS();if(!e)throw Ar.create("no-app",{appName:n});return e}function ET(){return Array.from(Jl.values())}function Cr(n,e,t){var o;let s=(o=XP[n])!==null&&o!==void 0?o:n;t&&(s+=`-${t}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bo.warn(d.join(" "));return}Kl(new _a(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="firebase-heartbeat-database",tV=1,Ql="firebase-heartbeat-store";let np=null;function QS(){return np||(np=vP(eV,tV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ql)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ar.create("idb-open",{originalErrorMessage:n.message})})),np}async function nV(n){try{const t=(await QS()).transaction(Ql),o=await t.objectStore(Ql).get(XS(n));return await t.done,o}catch(e){if(e instanceof ys)bo.warn(e.message);else{const t=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bo.warn(t.message)}}}async function ST(n,e){try{const o=(await QS()).transaction(Ql,"readwrite");await o.objectStore(Ql).put(e,XS(n)),await o.done}catch(t){if(t instanceof ys)bo.warn(t.message);else{const o=Ar.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});bo.warn(o.message)}}}function XS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=1024,oV=30;class rV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aV(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=AT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>oV){const u=lV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){bo.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=AT(),{heartbeatsToSend:o,unsentEntries:s}=sV(this._heartbeatsCache.heartbeats),l=df(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return bo.warn(t),""}}}function AT(){return new Date().toISOString().substring(0,10)}function sV(n,e=iV){const t=[];let o=n.slice();for(const s of n){const l=t.find(u=>u.agent===s.agent);if(l){if(l.dates.push(s.date),CT(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),CT(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class aV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return W4()?Z4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return ST(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return ST(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function CT(n){return df(JSON.stringify({version:2,heartbeats:n})).length}function lV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let o=1;o<n.length;o++)n[o].date<t&&(t=n[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(n){Kl(new _a("platform-logger",e=>new EP(e),"PRIVATE")),Kl(new _a("heartbeat",e=>new rV(e),"PRIVATE")),Cr(Np,_T,n),Cr(Np,_T,"esm2017"),Cr("fire-js","")}uV("");var cV="firebase",fV="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(cV,fV,"app");var wT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,WS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,M){function N(){}N.prototype=M.prototype,D.D=M.prototype,D.prototype=new N,D.prototype.constructor=D,D.C=function(k,L,q){for(var P=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)P[Ie-2]=arguments[Ie];return M.prototype[L].apply(k,P)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,t),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,M,N){N||(N=0);var k=Array(16);if(typeof M=="string")for(var L=0;16>L;++L)k[L]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(L=0;16>L;++L)k[L]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=D.g[0],N=D.g[1],L=D.g[2];var q=D.g[3],P=M+(q^N&(L^q))+k[0]+3614090360&4294967295;M=N+(P<<7&4294967295|P>>>25),P=q+(L^M&(N^L))+k[1]+3905402710&4294967295,q=M+(P<<12&4294967295|P>>>20),P=L+(N^q&(M^N))+k[2]+606105819&4294967295,L=q+(P<<17&4294967295|P>>>15),P=N+(M^L&(q^M))+k[3]+3250441966&4294967295,N=L+(P<<22&4294967295|P>>>10),P=M+(q^N&(L^q))+k[4]+4118548399&4294967295,M=N+(P<<7&4294967295|P>>>25),P=q+(L^M&(N^L))+k[5]+1200080426&4294967295,q=M+(P<<12&4294967295|P>>>20),P=L+(N^q&(M^N))+k[6]+2821735955&4294967295,L=q+(P<<17&4294967295|P>>>15),P=N+(M^L&(q^M))+k[7]+4249261313&4294967295,N=L+(P<<22&4294967295|P>>>10),P=M+(q^N&(L^q))+k[8]+1770035416&4294967295,M=N+(P<<7&4294967295|P>>>25),P=q+(L^M&(N^L))+k[9]+2336552879&4294967295,q=M+(P<<12&4294967295|P>>>20),P=L+(N^q&(M^N))+k[10]+4294925233&4294967295,L=q+(P<<17&4294967295|P>>>15),P=N+(M^L&(q^M))+k[11]+2304563134&4294967295,N=L+(P<<22&4294967295|P>>>10),P=M+(q^N&(L^q))+k[12]+1804603682&4294967295,M=N+(P<<7&4294967295|P>>>25),P=q+(L^M&(N^L))+k[13]+4254626195&4294967295,q=M+(P<<12&4294967295|P>>>20),P=L+(N^q&(M^N))+k[14]+2792965006&4294967295,L=q+(P<<17&4294967295|P>>>15),P=N+(M^L&(q^M))+k[15]+1236535329&4294967295,N=L+(P<<22&4294967295|P>>>10),P=M+(L^q&(N^L))+k[1]+4129170786&4294967295,M=N+(P<<5&4294967295|P>>>27),P=q+(N^L&(M^N))+k[6]+3225465664&4294967295,q=M+(P<<9&4294967295|P>>>23),P=L+(M^N&(q^M))+k[11]+643717713&4294967295,L=q+(P<<14&4294967295|P>>>18),P=N+(q^M&(L^q))+k[0]+3921069994&4294967295,N=L+(P<<20&4294967295|P>>>12),P=M+(L^q&(N^L))+k[5]+3593408605&4294967295,M=N+(P<<5&4294967295|P>>>27),P=q+(N^L&(M^N))+k[10]+38016083&4294967295,q=M+(P<<9&4294967295|P>>>23),P=L+(M^N&(q^M))+k[15]+3634488961&4294967295,L=q+(P<<14&4294967295|P>>>18),P=N+(q^M&(L^q))+k[4]+3889429448&4294967295,N=L+(P<<20&4294967295|P>>>12),P=M+(L^q&(N^L))+k[9]+568446438&4294967295,M=N+(P<<5&4294967295|P>>>27),P=q+(N^L&(M^N))+k[14]+3275163606&4294967295,q=M+(P<<9&4294967295|P>>>23),P=L+(M^N&(q^M))+k[3]+4107603335&4294967295,L=q+(P<<14&4294967295|P>>>18),P=N+(q^M&(L^q))+k[8]+1163531501&4294967295,N=L+(P<<20&4294967295|P>>>12),P=M+(L^q&(N^L))+k[13]+2850285829&4294967295,M=N+(P<<5&4294967295|P>>>27),P=q+(N^L&(M^N))+k[2]+4243563512&4294967295,q=M+(P<<9&4294967295|P>>>23),P=L+(M^N&(q^M))+k[7]+1735328473&4294967295,L=q+(P<<14&4294967295|P>>>18),P=N+(q^M&(L^q))+k[12]+2368359562&4294967295,N=L+(P<<20&4294967295|P>>>12),P=M+(N^L^q)+k[5]+4294588738&4294967295,M=N+(P<<4&4294967295|P>>>28),P=q+(M^N^L)+k[8]+2272392833&4294967295,q=M+(P<<11&4294967295|P>>>21),P=L+(q^M^N)+k[11]+1839030562&4294967295,L=q+(P<<16&4294967295|P>>>16),P=N+(L^q^M)+k[14]+4259657740&4294967295,N=L+(P<<23&4294967295|P>>>9),P=M+(N^L^q)+k[1]+2763975236&4294967295,M=N+(P<<4&4294967295|P>>>28),P=q+(M^N^L)+k[4]+1272893353&4294967295,q=M+(P<<11&4294967295|P>>>21),P=L+(q^M^N)+k[7]+4139469664&4294967295,L=q+(P<<16&4294967295|P>>>16),P=N+(L^q^M)+k[10]+3200236656&4294967295,N=L+(P<<23&4294967295|P>>>9),P=M+(N^L^q)+k[13]+681279174&4294967295,M=N+(P<<4&4294967295|P>>>28),P=q+(M^N^L)+k[0]+3936430074&4294967295,q=M+(P<<11&4294967295|P>>>21),P=L+(q^M^N)+k[3]+3572445317&4294967295,L=q+(P<<16&4294967295|P>>>16),P=N+(L^q^M)+k[6]+76029189&4294967295,N=L+(P<<23&4294967295|P>>>9),P=M+(N^L^q)+k[9]+3654602809&4294967295,M=N+(P<<4&4294967295|P>>>28),P=q+(M^N^L)+k[12]+3873151461&4294967295,q=M+(P<<11&4294967295|P>>>21),P=L+(q^M^N)+k[15]+530742520&4294967295,L=q+(P<<16&4294967295|P>>>16),P=N+(L^q^M)+k[2]+3299628645&4294967295,N=L+(P<<23&4294967295|P>>>9),P=M+(L^(N|~q))+k[0]+4096336452&4294967295,M=N+(P<<6&4294967295|P>>>26),P=q+(N^(M|~L))+k[7]+1126891415&4294967295,q=M+(P<<10&4294967295|P>>>22),P=L+(M^(q|~N))+k[14]+2878612391&4294967295,L=q+(P<<15&4294967295|P>>>17),P=N+(q^(L|~M))+k[5]+4237533241&4294967295,N=L+(P<<21&4294967295|P>>>11),P=M+(L^(N|~q))+k[12]+1700485571&4294967295,M=N+(P<<6&4294967295|P>>>26),P=q+(N^(M|~L))+k[3]+2399980690&4294967295,q=M+(P<<10&4294967295|P>>>22),P=L+(M^(q|~N))+k[10]+4293915773&4294967295,L=q+(P<<15&4294967295|P>>>17),P=N+(q^(L|~M))+k[1]+2240044497&4294967295,N=L+(P<<21&4294967295|P>>>11),P=M+(L^(N|~q))+k[8]+1873313359&4294967295,M=N+(P<<6&4294967295|P>>>26),P=q+(N^(M|~L))+k[15]+4264355552&4294967295,q=M+(P<<10&4294967295|P>>>22),P=L+(M^(q|~N))+k[6]+2734768916&4294967295,L=q+(P<<15&4294967295|P>>>17),P=N+(q^(L|~M))+k[13]+1309151649&4294967295,N=L+(P<<21&4294967295|P>>>11),P=M+(L^(N|~q))+k[4]+4149444226&4294967295,M=N+(P<<6&4294967295|P>>>26),P=q+(N^(M|~L))+k[11]+3174756917&4294967295,q=M+(P<<10&4294967295|P>>>22),P=L+(M^(q|~N))+k[2]+718787259&4294967295,L=q+(P<<15&4294967295|P>>>17),P=N+(q^(L|~M))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+q&4294967295}o.prototype.u=function(D,M){M===void 0&&(M=D.length);for(var N=M-this.blockSize,k=this.B,L=this.h,q=0;q<M;){if(L==0)for(;q<=N;)s(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<M;)if(k[L++]=D.charCodeAt(q++),L==this.blockSize){s(this,k),L=0;break}}else for(;q<M;)if(k[L++]=D[q++],L==this.blockSize){s(this,k),L=0;break}}this.h=L,this.o+=M},o.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;var N=8*this.o;for(M=D.length-8;M<D.length;++M)D[M]=N&255,N/=256;for(this.u(D),D=Array(16),M=N=0;4>M;++M)for(var k=0;32>k;k+=8)D[N++]=this.g[M]>>>k&255;return D};function l(D,M){var N=d;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=M(D)}function u(D,M){this.h=M;for(var N=[],k=!0,L=D.length-1;0<=L;L--){var q=D[L]|0;k&&q==M||(N[L]=q,k=!1)}this.g=N}var d={};function h(D){return-128<=D&&128>D?l(D,function(M){return new u([M|0],0>M?-1:0)}):new u([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return x(g(-D));for(var M=[],N=1,k=0;D>=N;k++)M[k]=D/N|0,N*=4294967296;return new u(M,0)}function _(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return x(_(D.substring(1),M));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=g(Math.pow(M,8)),k=E,L=0;L<D.length;L+=8){var q=Math.min(8,D.length-L),P=parseInt(D.substring(L,L+q),M);8>q?(q=g(Math.pow(M,q)),k=k.j(q).add(g(P))):(k=k.j(N),k=k.add(g(P)))}return k}var E=h(0),S=h(1),R=h(16777216);n=u.prototype,n.m=function(){if(O(this))return-x(this).m();for(var D=0,M=1,N=0;N<this.g.length;N++){var k=this.i(N);D+=(0<=k?k:4294967296+k)*M,M*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(V(this))return"0";if(O(this))return"-"+x(this).toString(D);for(var M=g(Math.pow(D,6)),N=this,k="";;){var L=te(N,M).g;N=G(N,L.j(M));var q=((0<N.g.length?N.g[0]:N.h)>>>0).toString(D);if(N=L,V(N))return q+k;for(;6>q.length;)q="0"+q;k=q+k}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function V(D){if(D.h!=0)return!1;for(var M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function O(D){return D.h==-1}n.l=function(D){return D=G(this,D),O(D)?-1:V(D)?0:1};function x(D){for(var M=D.g.length,N=[],k=0;k<M;k++)N[k]=~D.g[k];return new u(N,~D.h).add(S)}n.abs=function(){return O(this)?x(this):this},n.add=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],k=0,L=0;L<=M;L++){var q=k+(this.i(L)&65535)+(D.i(L)&65535),P=(q>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);k=P>>>16,q&=65535,P&=65535,N[L]=P<<16|q}return new u(N,N[N.length-1]&-2147483648?-1:0)};function G(D,M){return D.add(x(M))}n.j=function(D){if(V(this)||V(D))return E;if(O(this))return O(D)?x(this).j(x(D)):x(x(this).j(D));if(O(D))return x(this.j(x(D)));if(0>this.l(R)&&0>D.l(R))return g(this.m()*D.m());for(var M=this.g.length+D.g.length,N=[],k=0;k<2*M;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<D.g.length;L++){var q=this.i(k)>>>16,P=this.i(k)&65535,Ie=D.i(L)>>>16,Xe=D.i(L)&65535;N[2*k+2*L]+=P*Xe,Z(N,2*k+2*L),N[2*k+2*L+1]+=q*Xe,Z(N,2*k+2*L+1),N[2*k+2*L+1]+=P*Ie,Z(N,2*k+2*L+1),N[2*k+2*L+2]+=q*Ie,Z(N,2*k+2*L+2)}for(k=0;k<M;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=M;k<2*M;k++)N[k]=0;return new u(N,0)};function Z(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function K(D,M){this.g=D,this.h=M}function te(D,M){if(V(M))throw Error("division by zero");if(V(D))return new K(E,E);if(O(D))return M=te(x(D),M),new K(x(M.g),x(M.h));if(O(M))return M=te(D,x(M)),new K(x(M.g),M.h);if(30<D.g.length){if(O(D)||O(M))throw Error("slowDivide_ only works with positive integers.");for(var N=S,k=M;0>=k.l(D);)N=he(N),k=he(k);var L=$(N,1),q=$(k,1);for(k=$(k,2),N=$(N,2);!V(k);){var P=q.add(k);0>=P.l(D)&&(L=L.add(N),q=P),k=$(k,1),N=$(N,1)}return M=G(D,L.j(M)),new K(L,M)}for(L=E;0<=D.l(M);){for(N=Math.max(1,Math.floor(D.m()/M.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),q=g(N),P=q.j(M);O(P)||0<P.l(D);)N-=k,q=g(N),P=q.j(M);V(q)&&(q=S),L=L.add(q),D=G(D,P)}return new K(L,D)}n.A=function(D){return te(this,D).h},n.and=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],k=0;k<M;k++)N[k]=this.i(k)&D.i(k);return new u(N,this.h&D.h)},n.or=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],k=0;k<M;k++)N[k]=this.i(k)|D.i(k);return new u(N,this.h|D.h)},n.xor=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],k=0;k<M;k++)N[k]=this.i(k)^D.i(k);return new u(N,this.h^D.h)};function he(D){for(var M=D.g.length+1,N=[],k=0;k<M;k++)N[k]=D.i(k)<<1|D.i(k-1)>>>31;return new u(N,D.h)}function $(D,M){var N=M>>5;M%=32;for(var k=D.g.length-N,L=[],q=0;q<k;q++)L[q]=0<M?D.i(q+N)>>>M|D.i(q+N+1)<<32-M:D.i(q+N);return new u(L,D.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,WS=o,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=_,wr=u}).apply(typeof wT<"u"?wT:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZS,Ul,jS,Wc,Pp,eA,tA,nA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,T,C){return m==Array.prototype||m==Object.prototype||(m[T]=C.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var T=0;T<m.length;++T){var C=m[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=t(this);function s(m,T){if(T)e:{var C=o;m=m.split(".");for(var b=0;b<m.length-1;b++){var H=m[b];if(!(H in C))break e;C=C[H]}m=m[m.length-1],b=C[m],T=T(b),T!=b&&T!=null&&e(C,m,{configurable:!0,writable:!0,value:T})}}function l(m,T){m instanceof String&&(m+="");var C=0,b=!1,H={next:function(){if(!b&&C<m.length){var j=C++;return{value:T(j,m[j]),done:!1}}return b=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(m){return m||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function h(m){var T=typeof m;return T=T!="object"?T:m?Array.isArray(m)?"array":T:"null",T=="array"||T=="object"&&typeof m.length=="number"}function g(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function _(m,T,C){return m.call.apply(m.bind,arguments)}function E(m,T,C){if(!m)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,b),m.apply(T,H)}}return function(){return m.apply(T,arguments)}}function S(m,T,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function R(m,T){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),m.apply(this,b)}}function V(m,T){function C(){}C.prototype=T.prototype,m.aa=T.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(b,H,j){for(var ge=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)ge[ut-2]=arguments[ut];return T.prototype[H].apply(b,ge)}}function O(m){const T=m.length;if(0<T){const C=Array(T);for(let b=0;b<T;b++)C[b]=m[b];return C}return[]}function x(m,T){for(let C=1;C<arguments.length;C++){const b=arguments[C];if(h(b)){const H=m.length||0,j=b.length||0;m.length=H+j;for(let ge=0;ge<j;ge++)m[H+ge]=b[ge]}else m.push(b)}}class G{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function Z(m){return/^[\s\xa0]*$/.test(m)}function K(){var m=d.navigator;return m&&(m=m.userAgent)?m:""}function te(m){return te[" "](m),m}te[" "]=function(){};var he=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function $(m,T,C){for(const b in m)T.call(C,m[b],b,m)}function D(m,T){for(const C in m)T.call(void 0,m[C],C,m)}function M(m){const T={};for(const C in m)T[C]=m[C];return T}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(m,T){let C,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(C in b)m[C]=b[C];for(let j=0;j<N.length;j++)C=N[j],Object.prototype.hasOwnProperty.call(b,C)&&(m[C]=b[C])}}function L(m){var T=1;m=m.split(":");const C=[];for(;0<T&&m.length;)C.push(m.shift()),T--;return m.length&&C.push(m.join(":")),C}function q(m){d.setTimeout(()=>{throw m},0)}function P(){var m=ze;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class Ie{constructor(){this.h=this.g=null}add(T,C){const b=Xe.get();b.set(T,C),this.h?this.h.next=b:this.g=b,this.h=b}}var Xe=new G(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ve=!1,ze=new Ie,et=()=>{const m=d.Promise.resolve(void 0);de=()=>{m.then(F)}};var F=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(C){q(C)}var T=Xe;T.j(m),100>T.h&&(T.h++,m.next=T.g,T.g=m)}ve=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var fe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};d.addEventListener("test",C,T),d.removeEventListener("test",C,T)}catch{}return m})();function Ne(m,T){if(le.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,b=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget){if(he){e:{try{te(T.nodeName);var H=!0;break e}catch{}H=!1}H||(T=null)}}else C=="mouseover"?T=m.fromElement:C=="mouseout"&&(T=m.toElement);this.relatedTarget=T,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ve[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ne.aa.h.call(this)}}V(Ne,le);var Ve={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),He=0;function yt(m,T,C,b,H){this.listener=m,this.proxy=null,this.src=T,this.type=C,this.capture=!!b,this.ha=H,this.key=++He,this.da=this.fa=!1}function Dn(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Gn(m){this.src=m,this.g={},this.h=0}Gn.prototype.add=function(m,T,C,b,H){var j=m.toString();m=this.g[j],m||(m=this.g[j]=[],this.h++);var ge=Ti(m,T,b,H);return-1<ge?(T=m[ge],C||(T.fa=!1)):(T=new yt(T,this.src,j,!!b,H),T.fa=C,m.push(T)),T};function Hn(m,T){var C=T.type;if(C in m.g){var b=m.g[C],H=Array.prototype.indexOf.call(b,T,void 0),j;(j=0<=H)&&Array.prototype.splice.call(b,H,1),j&&(Dn(T),m.g[C].length==0&&(delete m.g[C],m.h--))}}function Ti(m,T,C,b){for(var H=0;H<m.length;++H){var j=m[H];if(!j.da&&j.listener==T&&j.capture==!!C&&j.ha==b)return H}return-1}var mn="closure_lm_"+(1e6*Math.random()|0),ii={};function oi(m,T,C,b,H){if(Array.isArray(T)){for(var j=0;j<T.length;j++)oi(m,T[j],C,b,H);return null}return C=$e(C),m&&m[ke]?m.K(T,C,g(b)?!!b.capture:!1,H):Po(m,T,C,!1,b,H)}function Po(m,T,C,b,H,j){if(!T)throw Error("Invalid event type");var ge=g(H)?!!H.capture:!!H,ut=Ae(m);if(ut||(m[mn]=ut=new Gn(m)),C=ut.add(T,C,b,ge,j),C.proxy)return C;if(b=Vo(),C.proxy=b,b.src=m,b.listener=C,m.addEventListener)fe||(H=ge),H===void 0&&(H=!1),m.addEventListener(T.toString(),b,H);else if(m.attachEvent)m.attachEvent(Pn(T.toString()),b);else if(m.addListener&&m.removeListener)m.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Vo(){function m(C){return T.call(m.src,m.listener,C)}const T=me;return m}function Pi(m,T,C,b,H){if(Array.isArray(T))for(var j=0;j<T.length;j++)Pi(m,T[j],C,b,H);else b=g(b)?!!b.capture:!!b,C=$e(C),m&&m[ke]?(m=m.i,T=String(T).toString(),T in m.g&&(j=m.g[T],C=Ti(j,C,b,H),-1<C&&(Dn(j[C]),Array.prototype.splice.call(j,C,1),j.length==0&&(delete m.g[T],m.h--)))):m&&(m=Ae(m))&&(T=m.g[T.toString()],m=-1,T&&(m=Ti(T,C,b,H)),(C=-1<m?T[m]:null)&&Ei(C))}function Ei(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[ke])Hn(T.i,m);else{var C=m.type,b=m.proxy;T.removeEventListener?T.removeEventListener(C,b,m.capture):T.detachEvent?T.detachEvent(Pn(C),b):T.addListener&&T.removeListener&&T.removeListener(b),(C=Ae(T))?(Hn(C,m),C.h==0&&(C.src=null,T[mn]=null)):Dn(m)}}}function Pn(m){return m in ii?ii[m]:ii[m]="on"+m}function me(m,T){if(m.da)m=!0;else{T=new Ne(T,this);var C=m.listener,b=m.ha||m.src;m.fa&&Ei(m),m=C.call(b,T)}return m}function Ae(m){return m=m[mn],m instanceof Gn?m:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function $e(m){return typeof m=="function"?m:(m[we]||(m[we]=function(T){return m.handleEvent(T)}),m[we])}function Me(){X.call(this),this.i=new Gn(this),this.M=this,this.F=null}V(Me,X),Me.prototype[ke]=!0,Me.prototype.removeEventListener=function(m,T,C,b){Pi(this,m,T,C,b)};function ie(m,T){var C,b=m.F;if(b)for(C=[];b;b=b.F)C.push(b);if(m=m.M,b=T.type||T,typeof T=="string")T=new le(T,m);else if(T instanceof le)T.target=T.target||m;else{var H=T;T=new le(b,m),k(T,H)}if(H=!0,C)for(var j=C.length-1;0<=j;j--){var ge=T.g=C[j];H=ce(ge,b,!0,T)&&H}if(ge=T.g=m,H=ce(ge,b,!0,T)&&H,H=ce(ge,b,!1,T)&&H,C)for(j=0;j<C.length;j++)ge=T.g=C[j],H=ce(ge,b,!1,T)&&H}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var m=this.i,T;for(T in m.g){for(var C=m.g[T],b=0;b<C.length;b++)Dn(C[b]);delete m.g[T],m.h--}}this.F=null},Me.prototype.K=function(m,T,C,b){return this.i.add(String(m),T,!1,C,b)},Me.prototype.L=function(m,T,C,b){return this.i.add(String(m),T,!0,C,b)};function ce(m,T,C,b){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();for(var H=!0,j=0;j<T.length;++j){var ge=T[j];if(ge&&!ge.da&&ge.capture==C){var ut=ge.listener,qt=ge.ha||ge.src;ge.fa&&Hn(m.i,ge),H=ut.call(qt,b)!==!1&&H}}return H&&!b.defaultPrevented}function pe(m,T,C){if(typeof m=="function")C&&(m=S(m,C));else if(m&&typeof m.handleEvent=="function")m=S(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:d.setTimeout(m,T||0)}function re(m){m.g=pe(()=>{m.g=null,m.i&&(m.i=!1,re(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class Re extends X{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wt(m){X.call(this),this.h=m,this.g={}}V(wt,X);var Bt=[];function It(m){$(m.g,function(T,C){this.g.hasOwnProperty(C)&&Ei(T)},m),m.g={}}wt.prototype.N=function(){wt.aa.N.call(this),It(this)},wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=d.JSON.stringify,Qt=d.JSON.parse,Ur=class{stringify(m){return d.JSON.stringify(m,void 0)}parse(m){return d.JSON.parse(m,void 0)}};function ko(){}ko.prototype.h=null;function Lr(m){return m.h||(m.h=m.i())}function Vi(){}var $n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yn(){le.call(this,"d")}V(Yn,le);function Vn(){le.call(this,"c")}V(Vn,le);var An={},Si=null;function eo(){return Si=Si||new Me}An.La="serverreachability";function ri(m){le.call(this,An.La,m)}V(ri,le);function sn(m){const T=eo();ie(T,new ri(T))}An.STAT_EVENT="statevent";function gn(m,T){le.call(this,An.STAT_EVENT,m),this.stat=T}V(gn,le);function vt(m){const T=eo();ie(T,new gn(T,m))}An.Ma="timingevent";function Pa(m,T){le.call(this,An.Ma,m),this.size=T}V(Pa,le);function Uo(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){m()},T)}function Lo(){this.g=!0}Lo.prototype.xa=function(){this.g=!1};function Va(m,T,C,b,H,j){m.info(function(){if(m.g)if(j)for(var ge="",ut=j.split("&"),qt=0;qt<ut.length;qt++){var Ye=ut[qt].split("=");if(1<Ye.length){var jt=Ye[0];Ye=Ye[1];var en=jt.split("_");ge=2<=en.length&&en[1]=="type"?ge+(jt+"="+Ye+"&"):ge+(jt+"=redacted&")}}else ge=null;else ge=j;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+T+`
`+C+`
`+ge})}function ka(m,T,C,b,H,j,ge){m.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+T+`
`+C+`
`+j+" "+ge})}function to(m,T,C,b){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+ki(m,C)+(b?" "+b:"")})}function cu(m,T){m.info(function(){return"TIMEOUT: "+T})}Lo.prototype.info=function(){};function ki(m,T){if(!m.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var b=C[m];if(!(2>b.length)){var H=b[1];if(Array.isArray(H)&&!(1>H.length)){var j=H[0];if(j!="noop"&&j!="stop"&&j!="close")for(var ge=1;ge<H.length;ge++)H[ge]=""}}}}return ft(C)}catch{return T}}var xt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},an={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ui;function Oo(){}V(Oo,ko),Oo.prototype.g=function(){return new XMLHttpRequest},Oo.prototype.i=function(){return{}},Ui=new Oo;function Li(m,T,C,b){this.j=m,this.i=T,this.l=C,this.R=b||1,this.U=new wt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fu}function fu(){this.i=null,this.g="",this.h=!1}var Ua={},no={};function Or(m,T,C){m.L=1,m.v=qr(Nt(T)),m.m=C,m.P=!0,io(m,null)}function io(m,T){m.F=Date.now(),Ai(m),m.A=Nt(m.v);var C=m.A,b=m.R;Array.isArray(b)||(b=[String(b)]),so(C.i,"t",b),m.C=0,C=m.j.J,m.h=new fu,m.g=Ru(m.j,C?T:null,!m.m),0<m.O&&(m.M=new Re(S(m.Y,m,m.g),m.O)),T=m.U,C=m.g,b=m.ca;var H="readystatechange";Array.isArray(H)||(H&&(Bt[0]=H.toString()),H=Bt);for(var j=0;j<H.length;j++){var ge=oi(C,H[j],b||T.handleEvent,!1,T.h||T);if(!ge)break;T.g[ge.key]=ge}T=m.H?M(m.H):{},m.m?(m.u||(m.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,T)):(m.u="GET",m.g.ea(m.A,m.u,null,T)),sn(),Va(m.i,m.u,m.A,m.l,m.R,m.m)}Li.prototype.ca=function(m){m=m.target;const T=this.M;T&&In(m)==3?T.j():this.Y(m)},Li.prototype.Y=function(m){try{if(m==this.g)e:{const en=In(this.g);var T=this.g.Ba();const Wo=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||Hr(this.g)))){this.J||en!=4||T==7||(T==8||0>=Wo?sn(3):sn(2)),As(this);var C=this.g.Z();this.X=C;t:if(oo(this)){var b=Hr(this.g);m="";var H=b.length,j=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cn(this),Fo(this);var ge="";break t}this.h.i=new d.TextDecoder}for(T=0;T<H;T++)this.h.h=!0,m+=this.h.i.decode(b[T],{stream:!(j&&T==H-1)});b.length=0,this.h.g+=m,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=C==200,ka(this.i,this.u,this.A,this.l,this.R,en,C),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,qt=this.g;if((ut=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(ut)){var Ye=ut;break t}}Ye=null}if(C=Ye)to(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oi(this,C);else{this.o=!1,this.s=3,vt(12),Cn(this),Fo(this);break e}}if(this.P){C=!0;let Un;for(;!this.J&&this.C<ge.length;)if(Un=Fr(this,ge),Un==no){en==4&&(this.s=4,vt(14),C=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==Ua){this.s=4,vt(15),to(this.i,this.l,ge,"[Invalid Chunk]"),C=!1;break}else to(this.i,this.l,Un,null),Oi(this,Un);if(oo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||ge.length!=0||this.h.h||(this.s=1,vt(16),C=!1),this.o=this.o&&C,!C)to(this.i,this.l,ge,"[Invalid Chunked Response]"),Cn(this),Fo(this);else if(0<ge.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Ja(jt),jt.M=!0,vt(11))}}else to(this.i,this.l,ge,null),Oi(this,ge);en==4&&Cn(this),this.o&&!this.J&&(en==4?Cu(this.j,this):(this.o=!1,Ai(this)))}else vu(this.g),C==400&&0<ge.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),Cn(this),Fo(this)}}}catch{}finally{}};function oo(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Fr(m,T){var C=m.C,b=T.indexOf(`
`,C);return b==-1?no:(C=Number(T.substring(C,b)),isNaN(C)?Ua:(b+=1,b+C>T.length?no:(T=T.slice(b,b+C),m.C=b+C,T)))}Li.prototype.cancel=function(){this.J=!0,Cn(this)};function Ai(m){m.S=Date.now()+m.I,Ut(m,m.I)}function Ut(m,T){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Uo(S(m.ba,m),T)}function As(m){m.B&&(d.clearTimeout(m.B),m.B=null)}Li.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(cu(this.i,this.A),this.L!=2&&(sn(),vt(17)),Cn(this),this.s=2,Fo(this)):Ut(this,this.S-m)};function Fo(m){m.j.G==0||m.J||Cu(m.j,m)}function Cn(m){As(m);var T=m.M;T&&typeof T.ma=="function"&&T.ma(),m.M=null,It(m.U),m.g&&(T=m.g,m.g=null,T.abort(),T.ma())}function Oi(m,T){try{var C=m.j;if(C.G!=0&&(C.g==m||Bo(C.h,m))){if(!m.K&&Bo(C.h,m)&&C.G==3){try{var b=C.Da.g.parse(T)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)Qo(C),Ko(C);else break e;Ya(C),vt(18)}}else C.za=H[1],0<C.za-C.T&&37500>H[2]&&C.F&&C.v==0&&!C.C&&(C.C=Uo(S(C.Za,C),6e3));if(1>=du(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else lo(C,11)}else if((m.K||C.g==m)&&Qo(C),!Z(T))for(H=C.Da.g.parse(T),T=0;T<H.length;T++){let Ye=H[T];if(C.T=Ye[0],Ye=Ye[1],C.G==2)if(Ye[0]=="c"){C.K=Ye[1],C.ia=Ye[2];const jt=Ye[3];jt!=null&&(C.la=jt,C.j.info("VER="+C.la));const en=Ye[4];en!=null&&(C.Aa=en,C.j.info("SVER="+C.Aa));const Wo=Ye[5];Wo!=null&&typeof Wo=="number"&&0<Wo&&(b=1.5*Wo,C.L=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const Un=m.g;if(Un){const Jr=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var j=b.h;j.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(qo(j,j.h),j.h=null))}if(b.D){const uo=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(b.ya=uo,ot(b.I,b.D,uo))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),b=C;var ge=m;if(b.qa=Iu(b,b.J?b.ia:null,b.W),ge.K){si(b.h,ge);var ut=ge,qt=b.L;qt&&(ut.I=qt),ut.B&&(As(ut),Ai(ut)),b.g=ge}else Su(b);0<C.i.length&&Ms(C)}else Ye[0]!="stop"&&Ye[0]!="close"||lo(C,7);else C.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?lo(C,7):Ha(C):Ye[0]!="noop"&&C.l&&C.l.ta(Ye),C.v=0)}}sn(4)}catch{}}var $f=class{constructor(m,T){this.g=m,this.map=T}};function La(m){this.l=m||10,d.PerformanceNavigationTiming?(m=d.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oa(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function du(m){return m.h?1:m.g?m.g.size:0}function Bo(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function qo(m,T){m.g?m.g.add(T):m.h=T}function si(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}La.prototype.cancel=function(){if(this.i=wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function wn(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const C of m.g.values())T=T.concat(C.D);return T}return O(m.i)}function hu(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var T=[],C=m.length,b=0;b<C;b++)T.push(m[b]);return T}T=[],C=0;for(b in m)T[C++]=m[b];return T}function Yf(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var T=[];m=m.length;for(var C=0;C<m;C++)T.push(C);return T}T=[],C=0;for(const b in m)T[C++]=b;return T}}}function Cs(m,T){if(m.forEach&&typeof m.forEach=="function")m.forEach(T,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,T,void 0);else for(var C=Yf(m),b=hu(m),H=b.length,j=0;j<H;j++)T.call(void 0,b[j],C&&C[j],m)}var Fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ws(m,T){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var b=m[C].indexOf("="),H=null;if(0<=b){var j=m[C].substring(0,b);H=m[C].substring(b+1)}else j=m[C];T(j,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function ro(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof ro){this.h=m.h,zo(this,m.j),this.o=m.o,this.g=m.g,Br(this,m.s),this.l=m.l;var T=m.i,C=new Fi;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),Is(this,C),this.m=m.m}else m&&(T=String(m).match(Fa))?(this.h=!1,zo(this,T[1]||"",!0),this.o=Go(T[2]||""),this.g=Go(T[3]||"",!0),Br(this,T[4]),this.l=Go(T[5]||"",!0),Is(this,T[6]||"",!0),this.m=Go(T[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}ro.prototype.toString=function(){var m=[],T=this.j;T&&m.push(ai(T,Ba,!0),":");var C=this.g;return(C||T=="file")&&(m.push("//"),(T=this.o)&&m.push(ai(T,Ba,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(ai(C,C.charAt(0)=="/"?qa:pu,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",ai(C,Qf)),m.join("")};function Nt(m){return new ro(m)}function zo(m,T,C){m.j=C?Go(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function Br(m,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);m.s=T}else m.s=null}function Is(m,T,C){T instanceof Fi?(m.i=T,mu(m.i,m.h)):(C||(T=ai(T,Kf)),m.i=new Fi(T,m.h))}function ot(m,T,C){m.i.set(T,C)}function qr(m){return ot(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Go(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ai(m,T,C){return typeof m=="string"?(m=encodeURI(m).replace(T,Jf),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Jf(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ba=/[#\/\?@]/g,pu=/[#\?:]/g,qa=/[#\?]/g,Kf=/[#\?@]/g,Qf=/#/g;function Fi(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function Zt(m){m.g||(m.g=new Map,m.h=0,m.i&&ws(m.i,function(T,C){m.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=Fi.prototype,n.add=function(m,T){Zt(this),this.i=null,m=Jn(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(T),this.h+=1,this};function Rs(m,T){Zt(m),T=Jn(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function bs(m,T){return Zt(m),T=Jn(m,T),m.g.has(T)}n.forEach=function(m,T){Zt(this),this.g.forEach(function(C,b){C.forEach(function(H){m.call(T,H,b,this)},this)},this)},n.na=function(){Zt(this);const m=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let b=0;b<T.length;b++){const H=m[b];for(let j=0;j<H.length;j++)C.push(T[b])}return C},n.V=function(m){Zt(this);let T=[];if(typeof m=="string")bs(this,m)&&(T=T.concat(this.g.get(Jn(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)T=T.concat(m[C])}return T},n.set=function(m,T){return Zt(this),this.i=null,m=Jn(this,m),bs(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},n.get=function(m,T){return m?(m=this.V(m),0<m.length?String(m[0]):T):T};function so(m,T,C){Rs(m,T),0<C.length&&(m.i=null,m.g.set(Jn(m,T),O(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var b=T[C];const j=encodeURIComponent(String(b)),ge=this.V(b);for(b=0;b<ge.length;b++){var H=j;ge[b]!==""&&(H+="="+encodeURIComponent(String(ge[b]))),m.push(H)}}return this.i=m.join("&")};function Jn(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function mu(m,T){T&&!m.j&&(Zt(m),m.i=null,m.g.forEach(function(C,b){var H=b.toLowerCase();b!=H&&(Rs(this,b),so(this,H,C))},m)),m.j=T}function za(m,T){const C=new Lo;if(d.Image){const b=new Image;b.onload=R(kn,C,"TestLoadImage: loaded",!0,T,b),b.onerror=R(kn,C,"TestLoadImage: error",!1,T,b),b.onabort=R(kn,C,"TestLoadImage: abort",!1,T,b),b.ontimeout=R(kn,C,"TestLoadImage: timeout",!1,T,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=m}else T(!1)}function gu(m,T){const C=new Lo,b=new AbortController,H=setTimeout(()=>{b.abort(),kn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:b.signal}).then(j=>{clearTimeout(H),j.ok?kn(C,"TestPingServer: ok",!0,T):kn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(H),kn(C,"TestPingServer: error",!1,T)})}function kn(m,T,C,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(C)}catch{}}function Ci(){this.g=new Ur}function Ga(m,T,C){const b=C||"";try{Cs(m,function(H,j){let ge=H;g(H)&&(ge=ft(H)),T.push(b+j+"="+encodeURIComponent(ge))})}catch(H){throw T.push(b+"type="+encodeURIComponent("_badmap")),H}}function Bi(m){this.l=m.Ub||null,this.j=m.eb||!1}V(Bi,ko),Bi.prototype.g=function(){return new Kn(this.l,this.j)},Bi.prototype.i=(function(m){return function(){return m}})({});function Kn(m,T){Me.call(this),this.D=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Kn,Me),n=Kn.prototype,n.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=T,this.readyState=1,Ho(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(T.body=m),(this.D||d).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ho(this)),this.g&&(this.readyState=3,Ho(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xs(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function xs(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?qi(this):Ho(this),this.readyState==3&&xs(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,qi(this))},n.Qa=function(m){this.g&&(this.response=m,qi(this))},n.ga=function(){this.g&&qi(this)};function qi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ho(m)}n.setRequestHeader=function(m,T){this.u.append(m,T)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=T.next();return m.join(`\r
`)};function Ho(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Kn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function zr(m){let T="";return $(m,function(C,b){T+=b,T+=":",T+=C,T+=`\r
`}),T}function $o(m,T,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=zr(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):ot(m,T,C))}function St(m){Me.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(St,Me);var yn=/^https?$/i,ao=["POST","PUT"];n=St.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,T,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ui.g(),this.v=this.o?Lr(this.o):Lr(Ui),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(j){Gr(this,j);return}if(m=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)C.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const j of b.keys())C.set(j,b.get(j));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(j=>j.toLowerCase()=="content-type"),H=d.FormData&&m instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ao,T,void 0))||b||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,ge]of C)this.g.setRequestHeader(j,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ns(this),this.u=!0,this.g.send(m),this.u=!1}catch(j){Gr(this,j)}};function Gr(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.m=5,Yo(m),Jo(m)}function Yo(m){m.A||(m.A=!0,ie(m,"complete"),ie(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,ie(this,"complete"),ie(this,"abort"),Jo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),St.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yu(this):this.bb())},n.bb=function(){yu(this)};function yu(m){if(m.h&&typeof u<"u"&&(!m.v[1]||In(m)!=4||m.Z()!=2)){if(m.u&&In(m)==4)pe(m.Ea,0,m);else if(ie(m,"readystatechange"),In(m)==4){m.h=!1;try{const ge=m.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var b;if(b=ge===0){var H=String(m.D).match(Fa)[1]||null;!H&&d.self&&d.self.location&&(H=d.self.location.protocol.slice(0,-1)),b=!yn.test(H?H.toLowerCase():"")}C=b}if(C)ie(m,"complete"),ie(m,"success");else{m.m=6;try{var j=2<In(m)?m.g.statusText:""}catch{j=""}m.l=j+" ["+m.Z()+"]",Yo(m)}}finally{Jo(m)}}}}function Jo(m,T){if(m.g){Ns(m);const C=m.g,b=m.v[0]?()=>{}:null;m.g=null,m.v=null,T||ie(m,"ready");try{C.onreadystatechange=b}catch{}}}function Ns(m){m.I&&(d.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function In(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),Qt(T)}};function Hr(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function vu(m){const T={};m=(m.g&&2<=In(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<m.length;b++){if(Z(m[b]))continue;var C=L(m[b]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const j=T[H]||[];T[H]=j,j.push(C)}D(T,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(m,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||T}function _u(m){this.Aa=0,this.i=[],this.j=new Lo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,m),this.cb=$r("retryDelaySeedMs",1e4,m),this.Wa=$r("forwardChannelMaxRetries",2,m),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new La(m&&m.concurrentRequestLimit),this.Da=new Ci,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_u.prototype,n.la=8,n.G=1,n.connect=function(m,T,C,b){vt(0),this.W=m,this.H=T||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.I=Iu(this,null,this.W),Ms(this)};function Ha(m){if(Tu(m),m.G==3){var T=m.U++,C=Nt(m.I);if(ot(C,"SID",m.K),ot(C,"RID",T),ot(C,"TYPE","terminate"),Yr(m,C),T=new Li(m,m.j,T),T.L=2,T.v=qr(Nt(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=T.v,C=!0),C||(T.g=Ru(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Ai(T)}Ka(m)}function Ko(m){m.g&&(Ja(m),m.g.cancel(),m.g=null)}function Tu(m){Ko(m),m.u&&(d.clearTimeout(m.u),m.u=null),Qo(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&d.clearTimeout(m.s),m.s=null)}function Ms(m){if(!Oa(m.h)&&!m.s){m.s=!0;var T=m.Ga;de||et(),ve||(de(),ve=!0),ze.add(T,m),m.B=0}}function Xf(m,T){return du(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=T.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Uo(S(m.Ga,m,T),wu(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const H=new Li(this,this.j,m);let j=this.o;if(this.S&&(j?(j=M(j),k(j,this.S)):j=this.S),this.m!==null||this.O||(H.H=j,j=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(T+=b,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=$a(this,H,T),C=Nt(this.I),ot(C,"RID",m),ot(C,"CVER",22),this.D&&ot(C,"X-HTTP-Session-Id",this.D),Yr(this,C),j&&(this.O?T="headers="+encodeURIComponent(String(zr(j)))+"&"+T:this.m&&$o(C,this.m,j)),qo(this.h,H),this.Ua&&ot(C,"TYPE","init"),this.P?(ot(C,"$req",T),ot(C,"SID","null"),H.T=!0,Or(H,C,null)):Or(H,C,T),this.G=2}}else this.G==3&&(m?Eu(this,m):this.i.length==0||Oa(this.h)||Eu(this))};function Eu(m,T){var C;T?C=T.l:C=m.U++;const b=Nt(m.I);ot(b,"SID",m.K),ot(b,"RID",C),ot(b,"AID",m.T),Yr(m,b),m.m&&m.o&&$o(b,m.m,m.o),C=new Li(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),T&&(m.i=T.D.concat(m.i)),T=$a(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),qo(m.h,C),Or(C,b,T)}function Yr(m,T){m.H&&$(m.H,function(C,b){ot(T,b,C)}),m.l&&Cs({},function(C,b){ot(T,b,C)})}function $a(m,T,C){C=Math.min(m.i.length,C);var b=m.l?S(m.l.Na,m.l,m):null;e:{var H=m.i;let j=-1;for(;;){const ge=["count="+C];j==-1?0<C?(j=H[0].g,ge.push("ofs="+j)):j=0:ge.push("ofs="+j);let ut=!0;for(let qt=0;qt<C;qt++){let Ye=H[qt].g;const jt=H[qt].map;if(Ye-=j,0>Ye)j=Math.max(0,H[qt].g-100),ut=!1;else try{Ga(jt,ge,"req"+Ye+"_")}catch{b&&b(jt)}}if(ut){b=ge.join("&");break e}}}return m=m.i.splice(0,C),T.D=m,b}function Su(m){if(!m.g&&!m.u){m.Y=1;var T=m.Fa;de||et(),ve||(de(),ve=!0),ze.add(T,m),m.v=0}}function Ya(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Uo(S(m.Fa,m),wu(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Uo(S(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Ko(this),Au(this))};function Ja(m){m.A!=null&&(d.clearTimeout(m.A),m.A=null)}function Au(m){m.g=new Li(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var T=Nt(m.qa);ot(T,"RID","rpc"),ot(T,"SID",m.K),ot(T,"AID",m.T),ot(T,"CI",m.F?"0":"1"),!m.F&&m.ja&&ot(T,"TO",m.ja),ot(T,"TYPE","xmlhttp"),Yr(m,T),m.m&&m.o&&$o(T,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=qr(Nt(T)),C.m=null,C.P=!0,io(C,m)}n.Za=function(){this.C!=null&&(this.C=null,Ko(this),Ya(this),vt(19))};function Qo(m){m.C!=null&&(d.clearTimeout(m.C),m.C=null)}function Cu(m,T){var C=null;if(m.g==T){Qo(m),Ja(m),m.g=null;var b=2}else if(Bo(m.h,T))C=T.D,si(m.h,T),b=1;else return;if(m.G!=0){if(T.o)if(b==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var H=m.B;b=eo(),ie(b,new Pa(b,C)),Ms(m)}else Su(m);else if(H=T.s,H==3||H==0&&0<T.X||!(b==1&&Xf(m,T)||b==2&&Ya(m)))switch(C&&0<C.length&&(T=m.h,T.i=T.i.concat(C)),H){case 1:lo(m,5);break;case 4:lo(m,10);break;case 3:lo(m,6);break;default:lo(m,2)}}}function wu(m,T){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*T}function lo(m,T){if(m.j.info("Error code "+T),T==2){var C=S(m.fb,m),b=m.Xa;const H=!b;b=new ro(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||zo(b,"https"),qr(b),H?za(b.toString(),C):gu(b.toString(),C)}else vt(2);m.G=0,m.l&&m.l.sa(T),Ka(m),Tu(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Ka(m){if(m.G=0,m.ka=[],m.l){const T=wn(m.h);(T.length!=0||m.i.length!=0)&&(x(m.ka,T),x(m.ka,m.i),m.h.i.length=0,O(m.i),m.i.length=0),m.l.ra()}}function Iu(m,T,C){var b=C instanceof ro?Nt(C):new ro(C);if(b.g!="")T&&(b.g=T+"."+b.g),Br(b,b.s);else{var H=d.location;b=H.protocol,T=T?T+"."+H.hostname:H.hostname,H=+H.port;var j=new ro(null);b&&zo(j,b),T&&(j.g=T),H&&Br(j,H),C&&(j.l=C),b=j}return C=m.D,T=m.ya,C&&T&&ot(b,C,T),ot(b,"VER",m.la),Yr(m,b),b}function Ru(m,T,C){if(T&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Ca&&!m.pa?new St(new Bi({eb:C})):new St(m.pa),T.Ha(m.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function bu(){}n=bu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ds(){}Ds.prototype.g=function(m,T){return new Rn(m,T)};function Rn(m,T){Me.call(this),this.g=new _u(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(m?m["X-WebChannel-Client-Profile"]=T.va:m={"X-WebChannel-Client-Profile":T.va}),this.g.S=m,(m=T&&T.Sb)&&!Z(m)&&(this.g.m=m),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!Z(T)&&(this.g.D=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new Xo(this)}V(Rn,Me),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Ha(this.g)},Rn.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=ft(m),m=C);T.i.push(new $f(T.Ya++,m)),T.G==3&&Ms(T)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Ha(this.g),delete this.g,Rn.aa.N.call(this)};function xu(m){Yn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const C in T){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}V(xu,Yn);function Nu(){Vn.call(this),this.status=1}V(Nu,Vn);function Xo(m){this.g=m}V(Xo,bu),Xo.prototype.ua=function(){ie(this.g,"a")},Xo.prototype.ta=function(m){ie(this.g,new xu(m))},Xo.prototype.sa=function(m){ie(this.g,new Nu)},Xo.prototype.ra=function(){ie(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,nA=function(){return new Ds},tA=function(){return eo()},eA=An,Pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xt.NO_ERROR=0,xt.TIMEOUT=8,xt.HTTP_ERROR=6,Wc=xt,an.COMPLETE="complete",jS=an,Vi.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",Me.prototype.listen=Me.prototype.K,Ul=Vi,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,ZS=St}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const IT="@firebase/firestore",RT="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new qS("@firebase/firestore");function la(){return hs.logLevel}function Ee(n,...e){if(hs.logLevel<=it.DEBUG){const t=e.map(pm);hs.debug(`Firestore (${ba}): ${n}`,...t)}}function xo(n,...e){if(hs.logLevel<=it.ERROR){const t=e.map(pm);hs.error(`Firestore (${ba}): ${n}`,...t)}}function br(n,...e){if(hs.logLevel<=it.WARN){const t=e.map(pm);hs.warn(`Firestore (${ba}): ${n}`,...t)}}function pm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,iA(n,o,t)}function iA(n,e,t){let o=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw xo(o),new Error(o)}function ct(n,e,t,o){let s="Unexpected state";typeof t=="string"?s=t:o=t,n||iA(e,s,o)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Tn.UNAUTHENTICATED)))}shutdown(){}}class hV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class pV{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ct(this.o===void 0,42304);let o=this.i;const s=h=>this.i!==o?(o=this.i,t(h)):Promise.resolve();let l=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ir,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const h=l;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},d=h=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ir)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ct(typeof o.accessToken=="string",31837,{l:o}),new oA(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class mV{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gV{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new mV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$S(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ct(this.o===void 0,3512);const o=l=>{l.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Ee("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const s=l=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ct(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<n;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const s=vV(40);for(let l=0;l<s.length;++l)o.length<20&&s[l]<t&&(o+=e.charAt(s[l]%62))}return o}}function Je(n,e){return n<e?-1:n>e?1:0}function Vp(n,e){let t=0;for(;t<n.length&&t<e.length;){const o=n.codePointAt(t),s=e.codePointAt(t);if(o!==s){if(o<128&&s<128)return Je(o,s);{const l=rA(),u=_V(l.encode(xT(n,t)),l.encode(xT(e,t)));return u!==0?u:Je(o,s)}}t+=o>65535?2:1}return Je(n.length,e.length)}function xT(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function _V(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Je(n[t],e[t]);return Je(n.length,e.length)}function Ta(n,e,t){return n.length===e.length&&n.every(((o,s)=>t(o,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="__name__";class Yi{constructor(e,t,o){t===void 0?t=0:t>e.length&&Pe(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&Pe(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Yi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yi?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let s=0;s<o;s++){const l=Yi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Je(e.length,t.length)}static compareSegments(e,t){const o=Yi.isNumericId(e),s=Yi.isNumericId(t);return o&&!s?-1:!o&&s?1:o&&s?Yi.extractNumericId(e).compare(Yi.extractNumericId(t)):Vp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class Tt extends Yi{construct(e,t,o){return new Tt(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((s=>s.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const TV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends Yi{construct(e,t,o){return new hn(e,t,o)}static isValidIdentifier(e){return TV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NT}static keyField(){return new hn([NT])}static fromServerFormat(e){const t=[];let o="",s=0;const l=()=>{if(o.length===0)throw new Te(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Te(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Te(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=h,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(o+=d,s++):(l(),s++)}if(l(),u)throw new Te(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(t)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Tt.fromString(e))}static fromName(e){return new xe(Tt.fromString(e).popFirst(5))}static empty(){return new xe(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(n,e,t){if(!t)throw new Te(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function EV(n,e,t,o){if(e===!0&&o===!0)throw new Te(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MT(n){if(!xe.isDocumentKey(n))throw new Te(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function DT(n){if(xe.isDocumentKey(n))throw new Te(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function aA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Df(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe(12329,{type:typeof n})}function pf(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Df(n);throw new Te(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ou(n,e){if(!aA(n))throw new Te(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const s=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in n)){t=`JSON missing required field: '${o}'`;break}const u=n[o];if(s&&typeof u!==s){t=`JSON field '${o}' must be a ${s}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${o}' field to equal '${l.value}'`;break}}if(t)throw new Te(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=-62135596800,VT=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*VT);return new Et(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PT)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/VT}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ou(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:Kt("string",Et._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Et(0,0))}static max(){return new Le(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=-1;function SV(n,e){const t=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,s=Le.fromTimestamp(o===1e9?new Et(t+1,0):new Et(t,o));return new xr(s,xe.empty(),e)}function AV(n){return new xr(n.readTime,n.key,Xl)}class xr{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new xr(Le.min(),xe.empty(),Xl)}static max(){return new xr(Le.max(),xe.empty(),Xl)}}function CV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==wV)throw n;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((o,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(o,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,o)=>{t(e)}))}static reject(e){return new ue(((t,o)=>{o(e)}))}static waitFor(e){return new ue(((t,o)=>{let s=0,l=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++l,u&&l===s&&t()}),(h=>o(h)))})),u=!0,l===s&&t()}))}static or(e){let t=ue.resolve(!1);for(const o of e)t=t.next((s=>s?ue.resolve(s):o()));return t}static forEach(e,t){const o=[];return e.forEach(((s,l)=>{o.push(t.call(this,s,l))})),this.waitFor(o)}static mapArray(e,t){return new ue(((o,s)=>{const l=e.length,u=new Array(l);let d=0;for(let h=0;h<l;h++){const g=h;t(e[g]).next((_=>{u[g]=_,++d,d===l&&o(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new ue(((o,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):o()};l()}))}}function RV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Na(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this._e(o),this.ae=o=>t.writeSequenceNumber(o))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Pf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=-1;function Vf(n){return n==null}function mf(n){return n===0&&1/n==-1/0}function bV(n){return typeof n=="number"&&Number.isInteger(n)&&!mf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="";function xV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kT(e)),e=NV(n.get(t),e);return kT(e)}function NV(n,e){let t=e;const o=n.length;for(let s=0;s<o;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case lA:t+="";break;default:t+=l}}return t}function kT(n){return n+lA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||dn.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const s=this.comparator(e,o.key);if(s===0)return t+o.left.size;s<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qc(this.root,e,this.comparator,!0)}}class qc{constructor(e,t,o,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?o(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,t,o,s,l){this.key=e,this.value=t,this.color=o??dn.RED,this.left=s??dn.EMPTY,this.right=l??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,s,l){return new dn(e??this.key,t??this.value,o??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let s=this;const l=o(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,o),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,o)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return dn.EMPTY;o=s.right.min(),s=s.copy(o.key,o.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,t,o,s,l){return this}insert(e,t,o){return new dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const s=o.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new LT(this.data.getIterator())}getIteratorFrom(e){return new LT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=o.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Wt(this.comparator);return t.data=e,t}}class LT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new bi([])}unionWith(e){let t=new Wt(hn.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ta(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new cA("Invalid base64 string: "+l):l}})(e);return new pn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let u=0;u<s.length;++u)l+=String.fromCharCode(s[u]);return l})(e);return new pn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let s=0;s<t.length;s++)o[s]=t.charCodeAt(s);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const MV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(n){if(ct(!!n,39018),typeof n=="string"){let e=0;const t=MV.exec(n);if(ct(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ft(n.seconds),nanos:Ft(n.nanos)}}function Ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Mr(n){return typeof n=="string"?pn.fromBase64String(n):pn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="server_timestamp",dA="__type__",hA="__previous_value__",pA="__local_write_time__";function ym(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[dA])===null||t===void 0?void 0:t.stringValue)===fA}function kf(n){const e=n.mapValue.fields[hA];return ym(e)?kf(e):e}function Wl(n){const e=Nr(n.mapValue.fields[pA].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,t,o,s,l,u,d,h,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=s,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=g,this.isUsingEmulator=_}}const gf="(default)";class Zl{constructor(e,t){this.projectId=e,this.database=t||gf}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===gf}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="__type__",PV="__max__",zc={mapValue:{}},gA="__vector__",yf="value";function Dr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ym(n)?4:kV(n)?9007199254740991:VV(n)?10:11:Pe(28295,{value:n})}function ji(n,e){if(n===e)return!0;const t=Dr(n);if(t!==Dr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wl(n).isEqual(Wl(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const u=Nr(s.timestampValue),d=Nr(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Mr(s.bytesValue).isEqual(Mr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return Ft(s.geoPointValue.latitude)===Ft(l.geoPointValue.latitude)&&Ft(s.geoPointValue.longitude)===Ft(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return Ft(s.integerValue)===Ft(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const u=Ft(s.doubleValue),d=Ft(l.doubleValue);return u===d?mf(u)===mf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ta(n.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return(function(s,l){const u=s.mapValue.fields||{},d=l.mapValue.fields||{};if(UT(u)!==UT(d))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(d[h]===void 0||!ji(u[h],d[h])))return!1;return!0})(n,e);default:return Pe(52216,{left:n})}}function jl(n,e){return(n.values||[]).find((t=>ji(t,e)))!==void 0}function Ea(n,e){if(n===e)return 0;const t=Dr(n),o=Dr(e);if(t!==o)return Je(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=Ft(l.integerValue||l.doubleValue),h=Ft(u.integerValue||u.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(n,e);case 3:return OT(n.timestampValue,e.timestampValue);case 4:return OT(Wl(n),Wl(e));case 5:return Vp(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=Mr(l),h=Mr(u);return d.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),h=u.split("/");for(let g=0;g<d.length&&g<h.length;g++){const _=Je(d[g],h[g]);if(_!==0)return _}return Je(d.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Je(Ft(l.latitude),Ft(u.latitude));return d!==0?d:Je(Ft(l.longitude),Ft(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return FT(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var d,h,g,_;const E=l.fields||{},S=u.fields||{},R=(d=E[yf])===null||d===void 0?void 0:d.arrayValue,V=(h=S[yf])===null||h===void 0?void 0:h.arrayValue,O=Je(((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0,((_=V==null?void 0:V.values)===null||_===void 0?void 0:_.length)||0);return O!==0?O:FT(R,V)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===zc.mapValue&&u===zc.mapValue)return 0;if(l===zc.mapValue)return 1;if(u===zc.mapValue)return-1;const d=l.fields||{},h=Object.keys(d),g=u.fields||{},_=Object.keys(g);h.sort(),_.sort();for(let E=0;E<h.length&&E<_.length;++E){const S=Vp(h[E],_[E]);if(S!==0)return S;const R=Ea(d[h[E]],g[_[E]]);if(R!==0)return R}return Je(h.length,_.length)})(n.mapValue,e.mapValue);default:throw Pe(23264,{le:t})}}function OT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=Nr(n),o=Nr(e),s=Je(t.seconds,o.seconds);return s!==0?s:Je(t.nanos,o.nanos)}function FT(n,e){const t=n.values||[],o=e.values||[];for(let s=0;s<t.length&&s<o.length;++s){const l=Ea(t[s],o[s]);if(l)return l}return Je(t.length,o.length)}function Sa(n){return kp(n)}function kp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const o=Nr(t);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Mr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return xe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let o="[",s=!0;for(const l of t.values||[])s?s=!1:o+=",",o+=kp(l);return o+"]"})(n.arrayValue):"mapValue"in n?(function(t){const o=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const u of o)l?l=!1:s+=",",s+=`${u}:${kp(t.fields[u])}`;return s+"}"})(n.mapValue):Pe(61005,{value:n})}function Zc(n){switch(Dr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kf(n);return e?16+Zc(e):16;case 5:return 2*n.stringValue.length;case 6:return Mr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((s,l)=>s+Zc(l)),0)})(n.arrayValue);case 10:case 11:return(function(o){let s=0;return vs(o.fields,((l,u)=>{s+=l.length+Zc(u)})),s})(n.mapValue);default:throw Pe(13486,{value:n})}}function BT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Up(n){return!!n&&"integerValue"in n}function vm(n){return!!n&&"arrayValue"in n}function qT(n){return!!n&&"nullValue"in n}function zT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jc(n){return!!n&&"mapValue"in n}function VV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[mA])===null||t===void 0?void 0:t.stringValue)===gA}function Bl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vs(n.mapValue.fields,((t,o)=>e.mapValue.fields[t]=Bl(o))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===PV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!jc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bl(t)}setAll(e){let t=hn.emptyPath(),o={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,o,s),o={},s=[],t=d.popLast()}u?o[d.lastSegment()]=Bl(u):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,o,s)}delete(e){const t=this.field(e.popLast());jc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let s=t.mapValue.fields[e.get(o)];jc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,o){vs(t,((s,l)=>e[s]=l));for(const s of o)delete e[s]}clone(){return new gi(Bl(this.value))}}function yA(n){const e=[];return vs(n.fields,((t,o)=>{const s=new hn([t]);if(jc(o)){const l=yA(o.mapValue).fields;if(l.length===0)e.push(s);else for(const u of l)e.push(s.child(u))}else e.push(s)})),new bi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,t,o,s,l,u,d){this.key=e,this.documentType=t,this.version=o,this.readTime=s,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new En(e,0,Le.min(),Le.min(),Le.min(),gi.empty(),0)}static newFoundDocument(e,t,o,s){return new En(e,1,t,Le.min(),o,s,0)}static newNoDocument(e,t){return new En(e,2,t,Le.min(),Le.min(),gi.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,Le.min(),Le.min(),gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.position=e,this.inclusive=t}}function GT(n,e,t){let o=0;for(let s=0;s<n.position.length;s++){const l=e[s],u=n.position[s];if(l.field.isKeyField()?o=xe.comparator(xe.fromName(u.referenceValue),t.key):o=Ea(u,t.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function HT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ji(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t="asc"){this.field=e,this.dir=t}}function UV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{}class Jt extends vA{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new OV(e,t,o):t==="array-contains"?new qV(e,o):t==="in"?new zV(e,o):t==="not-in"?new GV(e,o):t==="array-contains-any"?new HV(e,o):new Jt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new FV(e,o):new BV(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ea(t,this.value)):t!==null&&Dr(this.value)===Dr(t)&&this.matchesComparison(Ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mi extends vA{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Mi(e,t)}matches(e){return _A(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function _A(n){return n.op==="and"}function TA(n){return LV(n)&&_A(n)}function LV(n){for(const e of n.filters)if(e instanceof Mi)return!1;return!0}function Lp(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+Sa(n.value);if(TA(n))return n.filters.map((e=>Lp(e))).join(",");{const e=n.filters.map((t=>Lp(t))).join(",");return`${n.op}(${e})`}}function EA(n,e){return n instanceof Jt?(function(o,s){return s instanceof Jt&&o.op===s.op&&o.field.isEqual(s.field)&&ji(o.value,s.value)})(n,e):n instanceof Mi?(function(o,s){return s instanceof Mi&&o.op===s.op&&o.filters.length===s.filters.length?o.filters.reduce(((l,u,d)=>l&&EA(u,s.filters[d])),!0):!1})(n,e):void Pe(19439)}function SA(n){return n instanceof Jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`})(n):n instanceof Mi?(function(t){return t.op.toString()+" {"+t.getFilters().map(SA).join(" ,")+"}"})(n):"Filter"}class OV extends Jt{constructor(e,t,o){super(e,t,o),this.key=xe.fromName(o.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class FV extends Jt{constructor(e,t){super(e,"in",t),this.keys=AA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class BV extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=AA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function AA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((o=>xe.fromName(o.referenceValue)))}class qV extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vm(t)&&jl(t.arrayValue,this.value)}}class zV extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jl(this.value.arrayValue,t)}}class GV extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jl(this.value.arrayValue,t)}}class HV extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>jl(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,t=null,o=[],s=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=s,this.limit=l,this.startAt=u,this.endAt=d,this.Pe=null}}function $T(n,e=null,t=[],o=[],s=null,l=null,u=null){return new $V(n,e,t,o,s,l,u)}function _m(n){const e=Be(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>Lp(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),Vf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>Sa(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>Sa(o))).join(",")),e.Pe=t}return e.Pe}function Tm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!UV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!EA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HT(n.startAt,e.startAt)&&HT(n.endAt,e.endAt)}function Op(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,t=null,o=[],s=[],l=null,u="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=s,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function YV(n,e,t,o,s,l,u,d){return new Ma(n,e,t,o,s,l,u,d)}function CA(n){return new Ma(n)}function YT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wA(n){return n.collectionGroup!==null}function ql(n){const e=Be(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Wt(hn.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new eu(l,o))})),t.has(hn.keyField().canonicalString())||e.Te.push(new eu(hn.keyField(),o))}return e.Te}function Ki(n){const e=Be(n);return e.Ie||(e.Ie=JV(e,ql(n))),e.Ie}function JV(n,e){if(n.limitType==="F")return $T(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new eu(s.field,l)}));const t=n.endAt?new vf(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new vf(n.startAt.position,n.startAt.inclusive):null;return $T(n.path,n.collectionGroup,e,n.filters,n.limit,t,o)}}function Fp(n,e){const t=n.filters.concat([e]);return new Ma(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bp(n,e,t){return new Ma(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uf(n,e){return Tm(Ki(n),Ki(e))&&n.limitType===e.limitType}function IA(n){return`${_m(Ki(n))}|lt:${n.limitType}`}function ua(n){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((s=>SA(s))).join(", ")}]`),Vf(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((s=>Sa(s))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((s=>Sa(s))).join(",")),`Target(${o})`})(Ki(n))}; limitType=${n.limitType})`}function Lf(n,e){return e.isFoundDocument()&&(function(o,s){const l=s.key.path;return o.collectionGroup!==null?s.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):xe.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(n,e)&&(function(o,s){for(const l of ql(o))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(o,s){for(const l of o.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(o,s){return!(o.startAt&&!(function(u,d,h){const g=GT(u,d,h);return u.inclusive?g<=0:g<0})(o.startAt,ql(o),s)||o.endAt&&!(function(u,d,h){const g=GT(u,d,h);return u.inclusive?g>=0:g>0})(o.endAt,ql(o),s))})(n,e)}function KV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RA(n){return(e,t)=>{let o=!1;for(const s of ql(n)){const l=QV(s,e,t);if(l!==0)return l;o=o||s.field.isKeyField()}return 0}}function QV(n,e,t){const o=n.field.isKeyField()?xe.comparator(e.key,t.key):(function(l,u,d){const h=u.data.field(l),g=d.data.field(l);return h!==null&&g!==null?Ea(h,g):Pe(42886)})(n.field,e,t);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return Pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[s,l]of o)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),s=this.inner[o];if(s===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return o.length===1?delete this.inner[t]:o.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vs(this.inner,((t,o)=>{for(const[s,l]of o)e(s,l)}))}isEmpty(){return uA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=new bt(xe.comparator);function No(){return XV}const bA=new bt(xe.comparator);function Ll(...n){let e=bA;for(const t of n)e=e.insert(t.key,t);return e}function xA(n){let e=bA;return n.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function fs(){return zl()}function NA(){return zl()}function zl(){return new _s((n=>n.toString()),((n,e)=>n.isEqual(e)))}const WV=new bt(xe.comparator),ZV=new Wt(xe.comparator);function je(...n){let e=ZV;for(const t of n)e=e.add(t);return e}const jV=new Wt(Je);function ek(){return jV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(e)?"-0":e}}function MA(n){return{integerValue:""+n}}function tk(n,e){return bV(e)?MA(e):Em(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function nk(n,e,t){return n instanceof _f?(function(s,l){const u={fields:{[dA]:{stringValue:fA},[pA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&ym(l)&&(l=kf(l)),l&&(u.fields[hA]=l),{mapValue:u}})(t,e):n instanceof tu?PA(n,e):n instanceof nu?VA(n,e):(function(s,l){const u=DA(s,l),d=JT(u)+JT(s.Ee);return Up(u)&&Up(s.Ee)?MA(d):Em(s.serializer,d)})(n,e)}function ik(n,e,t){return n instanceof tu?PA(n,e):n instanceof nu?VA(n,e):t}function DA(n,e){return n instanceof Tf?(function(o){return Up(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class _f extends Of{}class tu extends Of{constructor(e){super(),this.elements=e}}function PA(n,e){const t=kA(e);for(const o of n.elements)t.some((s=>ji(s,o)))||t.push(o);return{arrayValue:{values:t}}}class nu extends Of{constructor(e){super(),this.elements=e}}function VA(n,e){let t=kA(e);for(const o of n.elements)t=t.filter((s=>!ji(s,o)));return{arrayValue:{values:t}}}class Tf extends Of{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function JT(n){return Ft(n.integerValue||n.doubleValue)}function kA(n){return vm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ok(n,e){return n.field.isEqual(e.field)&&(function(o,s){return o instanceof tu&&s instanceof tu||o instanceof nu&&s instanceof nu?Ta(o.elements,s.elements,ji):o instanceof Tf&&s instanceof Tf?ji(o.Ee,s.Ee):o instanceof _f&&s instanceof _f})(n.transform,e.transform)}class rk{constructor(e,t){this.version=e,this.transformResults=t}}class Io{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Io}static exists(e){return new Io(void 0,e)}static updateTime(e){return new Io(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ef(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ff{}function UA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new OA(n.key,Io.none()):new ru(n.key,n.data,Io.none());{const t=n.data,o=gi.empty();let s=new Wt(hn.comparator);for(let l of e.fields)if(!s.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?o.delete(l):o.set(l,u),s=s.add(l)}return new Ts(n.key,o,new bi(s.toArray()),Io.none())}}function sk(n,e,t){n instanceof ru?(function(s,l,u){const d=s.value.clone(),h=QT(s.fieldTransforms,l,u.transformResults);d.setAll(h),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ts?(function(s,l,u){if(!ef(s.precondition,l))return void l.convertToUnknownDocument(u.version);const d=QT(s.fieldTransforms,l,u.transformResults),h=l.data;h.setAll(LA(s)),h.setAll(d),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):(function(s,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Gl(n,e,t,o){return n instanceof ru?(function(l,u,d,h){if(!ef(l.precondition,u))return d;const g=l.value.clone(),_=XT(l.fieldTransforms,h,u);return g.setAll(_),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(n,e,t,o):n instanceof Ts?(function(l,u,d,h){if(!ef(l.precondition,u))return d;const g=XT(l.fieldTransforms,h,u),_=u.data;return _.setAll(LA(l)),_.setAll(g),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,o):(function(l,u,d){return ef(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function ak(n,e){let t=null;for(const o of n.fieldTransforms){const s=e.data.field(o.field),l=DA(o.transform,s||null);l!=null&&(t===null&&(t=gi.empty()),t.set(o.field,l))}return t||null}function KT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(o,s){return o===void 0&&s===void 0||!(!o||!s)&&Ta(o,s,((l,u)=>ok(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ru extends Ff{constructor(e,t,o,s=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ts extends Ff{constructor(e,t,o,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function LA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=n.data.field(t);e.set(t,o)}})),e}function QT(n,e,t){const o=new Map;ct(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const l=n[s],u=l.transform,d=e.data.field(l.field);o.set(l.field,ik(u,d,t[s]))}return o}function XT(n,e,t){const o=new Map;for(const s of n){const l=s.transform,u=t.data.field(s.field);o.set(s.field,nk(l,u,e))}return o}class OA extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lk extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,t,o,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=s}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&sk(l,e,o[s])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Gl(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Gl(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=NA();return this.mutations.forEach((s=>{const l=e.get(s.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(s.key)?null:d;const h=UA(u,d);h!==null&&o.set(s.key,h),u.isValidDocument()||u.convertToNoDocument(Le.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&Ta(this.mutations,e.mutations,((t,o)=>KT(t,o)))&&Ta(this.baseMutations,e.baseMutations,((t,o)=>KT(t,o)))}}class Sm{constructor(e,t,o,s){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=s}static from(e,t,o){ct(e.mutations.length===o.length,58842,{Ve:e.mutations.length,me:o.length});let s=(function(){return WV})();const l=e.mutations;for(let u=0;u<l.length;u++)s=s.insert(l[u].key,o[u].version);return new Sm(e,t,o,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,nt;function dk(n){switch(n){case ae.OK:return Pe(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Pe(15467,{code:n})}}function FA(n){if(n===void 0)return xo("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Yt.OK:return ae.OK;case Yt.CANCELLED:return ae.CANCELLED;case Yt.UNKNOWN:return ae.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return ae.INTERNAL;case Yt.UNAVAILABLE:return ae.UNAVAILABLE;case Yt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Yt.NOT_FOUND:return ae.NOT_FOUND;case Yt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Yt.ABORTED:return ae.ABORTED;case Yt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Yt.DATA_LOSS:return ae.DATA_LOSS;default:return Pe(39323,{code:n})}}(nt=Yt||(Yt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=new wr([4294967295,4294967295],0);function WT(n){const e=rA().encode(n),t=new WS;return t.update(e),new Uint8Array(t.digest())}function ZT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new wr([t,o],0),new wr([s,l],0)]}class Am{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new Ol(`Invalid padding: ${t}`);if(o<0)throw new Ol(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Ol(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new Ol(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=wr.fromNumber(this.fe)}pe(e,t,o){let s=e.add(t.multiply(wr.fromNumber(o)));return s.compare(hk)===1&&(s=new wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=WT(e),[o,s]=ZT(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(o,s,l);if(!this.ye(u))return!1}return!0}static create(e,t,o){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Am(l,s,t);return o.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=WT(e),[o,s]=ZT(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(o,s,l);this.we(u)}}we(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,o,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const s=new Map;return s.set(e,su.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Bf(Le.min(),s,new bt(Je),No(),je())}}class su{constructor(e,t,o,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new su(o,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t,o,s){this.Se=e,this.removedTargetIds=t,this.key=o,this.be=s}}class BA{constructor(e,t){this.targetId=e,this.De=t}}class qA{constructor(e,t,o=pn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=s}}class jT{constructor(){this.ve=0,this.Ce=eE(),this.Fe=pn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=je(),t=je(),o=je();return this.Ce.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:o=o.add(s);break;default:Pe(38017,{changeType:l})}})),new su(this.Fe,this.Me,e,t,o)}ke(){this.xe=!1,this.Ce=eE()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class pk{constructor(e){this.We=e,this.Ge=new Map,this.ze=No(),this.je=Gc(),this.Je=Gc(),this.He=new bt(Je)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const o=this.tt(t);switch(e.state){case 0:this.nt(t)&&o.Be(e.resumeToken);break;case 1:o.Ue(),o.Oe||o.ke(),o.Be(e.resumeToken);break;case 2:o.Ue(),o.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(o.Ke(),o.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),o.Be(e.resumeToken));break;default:Pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((o,s)=>{this.nt(s)&&t(s)}))}it(e){const t=e.targetId,o=e.De.count,s=this.st(t);if(s){const l=s.target;if(Op(l))if(o===0){const u=new xe(l.path);this.Xe(t,u,En.newNoDocument(u,Le.min()))}else ct(o===1,20013,{expectedCount:o});else{const u=this.ot(t);if(u!==o){const d=this._t(e),h=d?this.ut(d,e,u):1;if(h!==0){this.rt(t);const g=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:s=0},hashCount:l=0}=t;let u,d;try{u=Mr(o).toUint8Array()}catch(h){if(h instanceof cA)return br("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new Am(u,s,l)}catch(h){return br(h instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.fe===0?null:d}ut(e,t,o){return t.De.count===o-this.ht(e,t.targetId)?0:2}ht(e,t){const o=this.We.getRemoteKeysForTarget(t);let s=0;return o.forEach((l=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),s++)})),s}Pt(e){const t=new Map;this.Ge.forEach(((l,u)=>{const d=this.st(u);if(d){if(l.current&&Op(d.target)){const h=new xe(d.target.path);this.Tt(h).has(u)||this.It(u,h)||this.Xe(u,h,En.newNoDocument(h,e))}l.Ne&&(t.set(u,l.Le()),l.ke())}}));let o=je();this.Je.forEach(((l,u)=>{let d=!0;u.forEachWhile((h=>{const g=this.st(h);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.ze.forEach(((l,u)=>u.setReadTime(e)));const s=new Bf(e,t,this.He,this.ze,o);return this.ze=No(),this.je=Gc(),this.Je=Gc(),this.He=new bt(Je),s}Ze(e,t){if(!this.nt(e))return;const o=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,o),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,o){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),o&&(this.ze=this.ze.insert(t,o))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new jT,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Wt(Je),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Wt(Je),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new jT),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Gc(){return new bt(xe.comparator)}function eE(){return new bt(xe.comparator)}const mk={asc:"ASCENDING",desc:"DESCENDING"},gk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yk={and:"AND",or:"OR"};class vk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qp(n,e){return n.useProto3Json||Vf(e)?e:{value:e}}function Ef(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _k(n,e){return Ef(n,e.toTimestamp())}function Qi(n){return ct(!!n,49232),Le.fromTimestamp((function(t){const o=Nr(t);return new Et(o.seconds,o.nanos)})(n))}function Cm(n,e){return zp(n,e).canonicalString()}function zp(n,e){const t=(function(s){return new Tt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function GA(n){const e=Tt.fromString(n);return ct(KA(e),10190,{key:e.toString()}),e}function Gp(n,e){return Cm(n.databaseId,e.path)}function ip(n,e){const t=GA(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe($A(t))}function HA(n,e){return Cm(n.databaseId,e)}function Tk(n){const e=GA(n);return e.length===4?Tt.emptyPath():$A(e)}function Hp(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $A(n){return ct(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function tE(n,e,t){return{name:Gp(n,e),fields:t.value.mapValue.fields}}function Ek(n,e){let t;if("targetChange"in e){e.targetChange;const o=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Pe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(ct(_===void 0||typeof _=="string",58123),pn.fromBase64String(_||"")):(ct(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),pn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(g){const _=g.code===void 0?ae.UNKNOWN:FA(g.code);return new Te(_,g.message||"")})(u);t=new qA(o,s,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const s=ip(n,o.document.name),l=Qi(o.document.updateTime),u=o.document.createTime?Qi(o.document.createTime):Le.min(),d=new gi({mapValue:{fields:o.document.fields}}),h=En.newFoundDocument(s,l,u,d),g=o.targetIds||[],_=o.removedTargetIds||[];t=new tf(g,_,h.key,h)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const s=ip(n,o.document),l=o.readTime?Qi(o.readTime):Le.min(),u=En.newNoDocument(s,l),d=o.removedTargetIds||[];t=new tf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const s=ip(n,o.document),l=o.removedTargetIds||[];t=new tf([],l,s,null)}else{if(!("filter"in e))return Pe(11601,{At:e});{e.filter;const o=e.filter;o.targetId;const{count:s=0,unchangedNames:l}=o,u=new fk(s,l),d=o.targetId;t=new BA(d,u)}}return t}function Sk(n,e){let t;if(e instanceof ru)t={update:tE(n,e.key,e.value)};else if(e instanceof OA)t={delete:Gp(n,e.key)};else if(e instanceof Ts)t={update:tE(n,e.key,e.data),updateMask:Mk(e.fieldMask)};else{if(!(e instanceof lk))return Pe(16599,{Rt:e.type});t={verify:Gp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(l,u){const d=u.transform;if(d instanceof _f)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof nu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Tf)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Pe(20930,{transform:u.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:_k(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Pe(27497)})(n,e.precondition)),t}function Ak(n,e){return n&&n.length>0?(ct(e!==void 0,14353),n.map((t=>(function(s,l){let u=s.updateTime?Qi(s.updateTime):Qi(l);return u.isEqual(Le.min())&&(u=Qi(l)),new rk(u,s.transformResults||[])})(t,e)))):[]}function Ck(n,e){return{documents:[HA(n,e.path)]}}function wk(n,e){const t={structuredQuery:{}},o=e.path;let s;e.collectionGroup!==null?(s=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=HA(n,s);const l=(function(g){if(g.length!==0)return JA(Mi.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(g){if(g.length!==0)return g.map((_=>(function(S){return{field:ca(S.field),direction:bk(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=qp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{Vt:t,parent:s}}function Ik(n){let e=Tk(n.parent);const t=n.structuredQuery,o=t.from?t.from.length:0;let s=null;if(o>0){ct(o===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const S=YA(E);return S instanceof Mi&&TA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(V){return new eu(fa(V.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Vf(S)?null:S})(t.limit));let h=null;t.startAt&&(h=(function(E){const S=!!E.before,R=E.values||[];return new vf(R,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,R=E.values||[];return new vf(R,S)})(t.endAt)),YV(e,s,u,l,d,"F",h,g)}function Rk(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function YA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=fa(t.unaryFilter.field);return Jt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const s=fa(t.unaryFilter.field);return Jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fa(t.unaryFilter.field);return Jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fa(t.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Jt.create(fa(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Mi.create(t.compositeFilter.filters.map((o=>YA(o))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}})(t.compositeFilter.op))})(n):Pe(30097,{filter:n})}function bk(n){return mk[n]}function xk(n){return gk[n]}function Nk(n){return yk[n]}function ca(n){return{fieldPath:n.canonicalString()}}function fa(n){return hn.fromServerFormat(n.fieldPath)}function JA(n){return n instanceof Jt?(function(t){if(t.op==="=="){if(zT(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NAN"}};if(qT(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zT(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NAN"}};if(qT(t.value))return{unaryFilter:{field:ca(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ca(t.field),op:xk(t.op),value:t.value}}})(n):n instanceof Mi?(function(t){const o=t.getFilters().map((s=>JA(s)));return o.length===1?o[0]:{compositeFilter:{op:Nk(t.op),filters:o}}})(n):Pe(54877,{filter:n})}function Mk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function KA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t,o,s,l=Le.min(),u=Le.min(),d=pn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.gt=e}}function Pk(n){const e=Ik({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.Dn=new kk}addToCollectionParentIndex(e,t){return this.Dn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(xr.min())}updateCollectionGroup(e,t,o){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class kk{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),s=this.index[t]||new Wt(Tt.comparator),l=!s.has(o);return this.index[t]=s.add(o),l}has(e){const t=e.lastSegment(),o=e.popLast(),s=this.index[t];return s&&s.has(o)}getEntries(e){return(this.index[e]||new Wt(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QA=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(QA,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Aa(0)}static ur(){return new Aa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="LruGarbageCollector",Uk=1048576;function oE([n,e],[t,o]){const s=Je(n,t);return s===0?Je(e,o):s}class Lk{constructor(e){this.Tr=e,this.buffer=new Wt(oE),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();oE(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ok{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ee(iE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Na(t)?Ee(iE,"Ignoring IndexedDB error during garbage collection: ",t):await xa(t)}await this.Rr(3e5)}))}}class Fk{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Pf.ue);const o=new Lk(t);return this.Vr.forEachTarget(e,(s=>o.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>o.Er(s))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(nE)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nE):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let o,s,l,u,d,h,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(o=E,d=Date.now(),this.removeTargets(e,o,t)))).next((E=>(l=E,h=Date.now(),this.removeOrphanedDocuments(e,o)))).next((E=>(g=Date.now(),la()<=it.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${l} targets in `+(h-d)+`ms
	Removed ${E} documents in `+(g-h)+`ms
Total Duration: ${g-_}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function Bk(n,e){return new Fk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.changes=new _s((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?ue.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t,o,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=s}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(o=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(o!==null&&Gl(o.mutation,s,bi.empty(),Et.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,je()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=je()){const s=fs();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,o).next((l=>{let u=Ll();return l.forEach(((d,h)=>{u=u.insert(d,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const o=fs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,je())))}populateOverlays(e,t,o){const s=[];return o.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,o,s){let l=No();const u=zl(),d=(function(){return zl()})();return t.forEach(((h,g)=>{const _=o.get(g.key);s.has(g.key)&&(_===void 0||_.mutation instanceof Ts)?l=l.insert(g.key,g):_!==void 0?(u.set(g.key,_.mutation.getFieldMask()),Gl(_.mutation,g,_.mutation.getFieldMask(),Et.now())):u.set(g.key,bi.empty())})),this.recalculateAndSaveOverlays(e,l).next((h=>(h.forEach(((g,_)=>u.set(g,_))),t.forEach(((g,_)=>{var E;return d.set(g,new zk(_,(E=u.get(g))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const o=zl();let s=new bt(((u,d)=>u-d)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((h=>{const g=t.get(h);if(g===null)return;let _=o.get(h)||bi.empty();_=d.applyToLocalView(g,_),o.set(h,_);const E=(s.get(d.batchId)||je()).add(h);s=s.insert(d.batchId,E)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),g=h.key,_=h.value,E=NA();_.forEach((S=>{if(!l.has(S)){const R=UA(t.get(S),o.get(S));R!==null&&E.set(S,R),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ue.waitFor(u)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,s){return(function(u){return xe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,s):this.getDocumentsMatchingCollectionQuery(e,t,o,s)}getNextDocuments(e,t,o,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,s).next((l=>{const u=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,s-l.size):ue.resolve(fs());let d=Xl,h=l;return u.next((g=>ue.forEach(g,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?ue.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{h=h.insert(_,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,h,g,je()))).next((_=>({batchId:d,changes:xA(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((o=>{let s=Ll();return o.isFoundDocument()&&(s=s.insert(o.key,o)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,s){const l=t.collectionGroup;let u=Ll();return this.indexManager.getCollectionParents(e,l).next((d=>ue.forEach(d,(h=>{const g=(function(E,S){return new Ma(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,h.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,o,s).next((_=>{_.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,o,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l,s)))).next((u=>{l.forEach(((h,g)=>{const _=g.getKey();u.get(_)===null&&(u=u.insert(_,En.newInvalidDocument(_)))}));let d=Ll();return u.forEach(((h,g)=>{const _=l.get(h);_!==void 0&&Gl(_.mutation,g,bi.empty(),Et.now()),Lf(t,g)&&(d=d.insert(h,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Qi(s.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(s){return{name:s.name,query:Pk(s.bundledQuery),readTime:Qi(s.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.overlays=new bt(xe.comparator),this.kr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const o=fs();return ue.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&o.set(s,l)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((s,l)=>{this.wt(e,t,l)})),ue.resolve()}removeOverlaysForBatchId(e,t,o){const s=this.kr.get(o);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(o)),ue.resolve()}getOverlaysForCollection(e,t,o){const s=fs(),l=t.length+1,u=new xe(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const h=d.getNext().value,g=h.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&h.largestBatchId>o&&s.set(h.getKey(),h)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,t,o,s){let l=new bt(((g,_)=>g-_));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>o){let _=l.get(g.largestBatchId);_===null&&(_=fs(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=fs(),h=l.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=s)););return ue.resolve(d)}wt(e,t,o){const s=this.overlays.get(o.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(o.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new ck(t,o));let l=this.kr.get(t);l===void 0&&(l=je(),this.kr.set(t,l)),this.kr.set(t,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.qr=new Wt(nn.Qr),this.$r=new Wt(nn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const o=new nn(e,t);this.qr=this.qr.add(o),this.$r=this.$r.add(o)}Kr(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new nn(e,t))}Gr(e,t){e.forEach((o=>this.removeReference(o,t)))}zr(e){const t=new xe(new Tt([])),o=new nn(t,e),s=new nn(t,e+1),l=[];return this.$r.forEachInRange([o,s],(u=>{this.Wr(u),l.push(u.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new xe(new Tt([])),o=new nn(t,e),s=new nn(t,e+1);let l=je();return this.$r.forEachInRange([o,s],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new nn(e,0),o=this.qr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class nn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return xe.comparator(e.key,t.key)||Je(e.Hr,t.Hr)}static Ur(e,t){return Je(e.Hr,t.Hr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Wt(nn.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,s){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new uk(l,t,o,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new nn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(u)}lookupMutationBatch(e,t){return ue.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,s=this.Xr(o),l=s<0?0:s;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?gm:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new nn(t,0),s=new nn(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([o,s],(u=>{const d=this.Zr(u.Hr);l.push(d)})),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Wt(Je);return t.forEach((s=>{const l=new nn(s,0),u=new nn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,u],(d=>{o=o.add(d.Hr)}))})),ue.resolve(this.ei(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,s=o.length+1;let l=o;xe.isDocumentKey(l)||(l=l.child(""));const u=new nn(new xe(l),0);let d=new Wt(Je);return this.Yr.forEachWhile((h=>{const g=h.key.path;return!!o.isPrefixOf(g)&&(g.length===s&&(d=d.add(h.Hr)),!0)}),u),ue.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((o=>{const s=this.Zr(o);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ct(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Yr;return ue.forEach(t.mutations,(s=>{const l=new nn(s.key,t.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=o}))}rr(e){}containsKey(e,t){const o=new nn(t,0),s=this.Yr.firstAfterOrEqual(o);return ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.ni=e,this.docs=(function(){return new bt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,s=this.docs.get(o),l=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return ue.resolve(o?o.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let o=No();return t.forEach((s=>{const l=this.docs.get(s);o=o.insert(s,l?l.document.mutableCopy():En.newInvalidDocument(s))})),ue.resolve(o)}getDocumentsMatchingQuery(e,t,o,s){let l=No();const u=t.path,d=new xe(u.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:g,value:{document:_}}=h.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||CV(AV(_),o)<=0||(s.has(_.key)||Lf(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ue.resolve(l)}getAllFromCollectionGroup(e,t,o,s){Pe(9500)}ri(e,t){return ue.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new Qk(this)}getSize(e){return ue.resolve(this.size)}}class Qk extends qk{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((o,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(o)})),ue.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.persistence=e,this.ii=new _s((t=>_m(t)),Tm),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.si=0,this.oi=new wm,this.targetCount=0,this._i=Aa.ar()}forEachTarget(e,t){return this.ii.forEach(((o,s)=>t(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.si&&(this.si=t),ue.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Aa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.hr(t),ue.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,o){let s=0;const l=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&o.get(d.targetId)===null&&(this.ii.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ue.waitFor(l).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const o=this.ii.get(t)||null;return ue.resolve(o)}addMatchingKeys(e,t,o){return this.oi.Kr(t,o),ue.resolve()}removeMatchingKeys(e,t,o){this.oi.Gr(t,o);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((u=>{l.push(s.markPotentiallyOrphaned(e,u))})),ue.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const o=this.oi.Jr(t);return ue.resolve(o)}containsKey(e,t){return ue.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t){this.ai={},this.overlays={},this.ui=new Pf(0),this.ci=!1,this.ci=!0,this.li=new Yk,this.referenceDelegate=e(this),this.hi=new Xk(this),this.indexManager=new Vk,this.remoteDocumentCache=(function(s){return new Kk(s)})((o=>this.referenceDelegate.Pi(o))),this.serializer=new Dk(t),this.Ti=new Hk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $k,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.ai[e.toKey()];return o||(o=new Jk(t,this.referenceDelegate),this.ai[e.toKey()]=o),o}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,o){Ee("MemoryPersistence","Starting transaction:",e);const s=new Wk(this.ui.next());return this.referenceDelegate.Ii(),o(s).next((l=>this.referenceDelegate.di(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return ue.or(Object.values(this.ai).map((o=>()=>o.containsKey(e,t))))}}class Wk extends IV{constructor(e){super(),this.currentSequenceNumber=e}}class Im{constructor(e){this.persistence=e,this.Ai=new wm,this.Ri=null}static Vi(e){return new Im(e)}get mi(){if(this.Ri)return this.Ri;throw Pe(60996)}addReference(e,t,o){return this.Ai.addReference(o,t),this.mi.delete(o.toString()),ue.resolve()}removeReference(e,t,o){return this.Ai.removeReference(o,t),this.mi.add(o.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((s=>this.mi.add(s.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.mi.add(l.toString())))})).next((()=>o.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,(o=>{const s=xe.fromPath(o);return this.fi(e,s).next((l=>{l||t.removeEntry(s,Le.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((o=>{o?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ue.or([()=>ue.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Sf{constructor(e,t){this.persistence=e,this.gi=new _s((o=>xV(o.path)),((o,s)=>o.isEqual(s))),this.garbageCollector=Bk(this,t)}static Vi(e,t){return new Sf(e,t)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((s=>o+s))))}yr(e){let t=0;return this.gr(e,(o=>{t++})).next((()=>t))}gr(e,t){return ue.forEach(this.gi,((o,s)=>this.Sr(e,o,s).next((l=>l?ue.resolve():t(s)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(o++,l.removeEntry(u,Le.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.gi.set(o,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,o){return this.gi.set(o,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ue.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zc(e.data.value)),t}Sr(e,t,o){return ue.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return ue.resolve(s!==void 0&&s>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,t,o,s){this.targetId=e,this.fromCache=t,this.Is=o,this.ds=s}static Es(e,t){let o=je(),s=je();for(const l of t.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Rm(e,t.fromCache,o,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return X4()?8:RV(K4())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,o,s){const l={result:null};return this.ps(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ys(e,t,s,o).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new Zk;return this.ws(e,t,u).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>l.result))}Ss(e,t,o,s){return o.documentReadCount<this.Vs?(la()<=it.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",ua(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(la()<=it.DEBUG&&Ee("QueryEngine","Query:",ua(t),"scans",o.documentReadCount,"local documents and returns",s,"documents as results."),o.documentReadCount>this.fs*s?(la()<=it.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",ua(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ki(t))):ue.resolve())}ps(e,t){if(YT(t))return ue.resolve(null);let o=Ki(t);return this.indexManager.getIndexType(e,o).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Bp(t,null,"F"),o=Ki(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const u=je(...l);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,o).next((h=>{const g=this.bs(t,d);return this.Ds(t,g,u,h.readTime)?this.ps(e,Bp(t,null,"F")):this.vs(e,g,t,h)}))))})))))}ys(e,t,o,s){return YT(t)||s.isEqual(Le.min())?ue.resolve(null):this.gs.getDocuments(e,o).next((l=>{const u=this.bs(t,l);return this.Ds(t,u,o,s)?ue.resolve(null):(la()<=it.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ua(t)),this.vs(e,u,t,SV(s,Xl)).next((d=>d)))}))}bs(e,t){let o=new Wt(RA(e));return t.forEach(((s,l)=>{Lf(e,l)&&(o=o.add(l))})),o}Ds(e,t,o,s){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ws(e,t,o){return la()<=it.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",ua(t)),this.gs.getDocumentsMatchingQuery(e,t,xr.min(),o)}vs(e,t,o,s){return this.gs.getDocumentsMatchingQuery(e,o,s).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="LocalStore",eU=3e8;class tU{constructor(e,t,o,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new bt(Je),this.Ms=new _s((l=>_m(l)),Tm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(o)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gk(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function nU(n,e,t,o){return new tU(n,e,t,o)}async function WA(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let s;return t.mutationQueue.getAllMutationBatches(o).next((l=>(s=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(o)))).next((l=>{const u=[],d=[];let h=je();for(const g of s){u.push(g.batchId);for(const _ of g.mutations)h=h.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)h=h.add(_.key)}return t.localDocuments.getDocuments(o,h).next((g=>({Bs:g,removedBatchIds:u,addedBatchIds:d})))}))}))}function iU(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const s=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,h,g,_){const E=g.batch,S=E.keys();let R=ue.resolve();return S.forEach((V=>{R=R.next((()=>_.getEntry(h,V))).next((O=>{const x=g.docVersions.get(V);ct(x!==null,48541),O.version.compareTo(x)<0&&(E.applyToRemoteDocument(O,g),O.isValidDocument()&&(O.setReadTime(g.commitVersion),_.addEntry(O)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(h,E)))})(t,o,e,l).next((()=>l.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let h=je();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(h=h.add(d.batch.mutations[g].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(o,s)))}))}function ZA(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function oU(n,e){const t=Be(n),o=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const d=[];e.targetChanges.forEach(((_,E)=>{const S=s.get(E);if(!S)return;d.push(t.hi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,_.addedDocuments,E))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(pn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,o)),s=s.insert(E,R),(function(O,x,G){return O.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=eU?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(S,R,_)&&d.push(t.hi.updateTargetData(l,R))}));let h=No(),g=je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(rU(l,u,e.documentUpdates).next((_=>{h=_.Ls,g=_.ks}))),!o.isEqual(Le.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(_)}return ue.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,h,g))).next((()=>h))})).then((l=>(t.Fs=s,l)))}function rU(n,e,t){let o=je(),s=je();return t.forEach((l=>o=o.add(l))),e.getEntries(n,o).next((l=>{let u=No();return t.forEach(((d,h)=>{const g=l.get(d);h.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),h.isNoDocument()&&h.version.isEqual(Le.min())?(e.removeEntry(d,h.readTime),u=u.insert(d,h)):!g.isValidDocument()||h.version.compareTo(g.version)>0||h.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(h),u=u.insert(d,h)):Ee(bm,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",h.version)})),{Ls:u,ks:s}}))}function sU(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=gm),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function aU(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let s;return t.hi.getTargetData(o,e).next((l=>l?(s=l,ue.resolve(s)):t.hi.allocateTargetId(o).next((u=>(s=new Er(e,u,"TargetPurposeListen",o.currentSequenceNumber),t.hi.addTargetData(o,s).next((()=>s)))))))})).then((o=>{const s=t.Fs.get(o.targetId);return(s===null||o.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(o.targetId,o),t.Ms.set(e,o.targetId)),o}))}async function $p(n,e,t){const o=Be(n),s=o.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",l,(u=>o.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Na(u))throw u;Ee(bm,`Failed to update sequence numbers for target ${e}: ${u}`)}o.Fs=o.Fs.remove(e),o.Ms.delete(s.target)}function rE(n,e,t){const o=Be(n);let s=Le.min(),l=je();return o.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,g,_){const E=Be(h),S=E.Ms.get(_);return S!==void 0?ue.resolve(E.Fs.get(S)):E.hi.getTargetData(g,_)})(o,u,Ki(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,o.hi.getMatchingKeysForTargetId(u,d.targetId).next((h=>{l=h}))})).next((()=>o.Cs.getDocumentsMatchingQuery(u,e,t?s:Le.min(),t?l:je()))).next((d=>(lU(o,KV(e),d),{documents:d,qs:l})))))}function lU(n,e,t){let o=n.xs.get(e)||Le.min();t.forEach(((s,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),n.xs.set(e,o)}class sE{constructor(){this.activeTargetIds=ek()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uU{constructor(){this.Fo=new sE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,o){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new sE,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="ConnectivityMonitor";class lE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ee(aE,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ee(aE,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc=null;function Yp(){return Hc===null?Hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hc++,"0x"+Hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="RestConnection",fU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dU{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${o}/databases/${s}`,this.Ko=this.databaseId.database===gf?`project_id=${o}`:`project_id=${o}&database_id=${s}`}Wo(e,t,o,s,l){const u=Yp(),d=this.Go(e,t.toUriEncodedString());Ee(op,`Sending RPC '${e}' ${u}:`,d,o);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,l);const{host:g}=new URL(d),_=iu(g);return this.jo(e,d,h,o,_).then((E=>(Ee(op,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw br(op,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",o),E}))}Jo(e,t,o,s,l,u){return this.Wo(e,t,o,s,l)}zo(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ba})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),o&&o.headers.forEach(((s,l)=>e[l]=s))}Go(e,t){const o=fU[e];return`${this.$o}/v1/${t}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class pU extends dU{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,o,s,l){const u=Yp();return new Promise(((d,h)=>{const g=new ZS;g.setWithCredentials(!0),g.listenOnce(jS.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Wc.NO_ERROR:const E=g.getResponseJson();Ee(_n,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Wc.TIMEOUT:Ee(_n,`RPC '${e}' ${u} timed out`),h(new Te(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const S=g.getStatus();if(Ee(_n,`RPC '${e}' ${u} failed with status:`,S,"response text:",g.getResponseText()),S>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const O=(function(G){const Z=G.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Z)>=0?Z:ae.UNKNOWN})(V.status);h(new Te(O,V.message))}else h(new Te(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new Te(ae.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{c_:e,streamId:u,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{Ee(_n,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(s);Ee(_n,`RPC '${e}' ${u} sending request:`,s),g.send(t,"POST",_,o,15)}))}P_(e,t,o){const s=Yp(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=nA(),d=tA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(h.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,o),h.encodeInitMessageHeaders=!0;const _=l.join("");Ee(_n,`Creating RPC '${e}' stream ${s}: ${_}`,h);const E=u.createWebChannel(_,h);this.T_(E);let S=!1,R=!1;const V=new hU({Ho:x=>{R?Ee(_n,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(S||(Ee(_n,`Opening RPC '${e}' stream ${s} transport.`),E.open(),S=!0),Ee(_n,`RPC '${e}' stream ${s} sending:`,x),E.send(x))},Yo:()=>E.close()}),O=(x,G,Z)=>{x.listen(G,(K=>{try{Z(K)}catch(te){setTimeout((()=>{throw te}),0)}}))};return O(E,Ul.EventType.OPEN,(()=>{R||(Ee(_n,`RPC '${e}' stream ${s} transport opened.`),V.s_())})),O(E,Ul.EventType.CLOSE,(()=>{R||(R=!0,Ee(_n,`RPC '${e}' stream ${s} transport closed`),V.__(),this.I_(E))})),O(E,Ul.EventType.ERROR,(x=>{R||(R=!0,br(_n,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),V.__(new Te(ae.UNAVAILABLE,"The operation could not be completed")))})),O(E,Ul.EventType.MESSAGE,(x=>{var G;if(!R){const Z=x.data[0];ct(!!Z,16349);const K=Z,te=(K==null?void 0:K.error)||((G=K[0])===null||G===void 0?void 0:G.error);if(te){Ee(_n,`RPC '${e}' stream ${s} received error:`,te);const he=te.status;let $=(function(N){const k=Yt[N];if(k!==void 0)return FA(k)})(he),D=te.message;$===void 0&&($=ae.INTERNAL,D="Unknown error status: "+he+" with message "+te.message),R=!0,V.__(new Te($,D)),E.close()}else Ee(_n,`RPC '${e}' stream ${s} received:`,Z),V.a_(Z)}})),O(d,eA.STAT_EVENT,(x=>{x.stat===Pp.PROXY?Ee(_n,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Pp.NOPROXY&&Ee(_n,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{V.o_()}),0),V}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function rp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(n){return new vk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t,o=1e3,s=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=o,this.E_=s,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),o=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-o);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="PersistentStream";class eC{constructor(e,t,o,s,l,u,d,h){this.Fi=e,this.w_=o,this.S_=s,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new jA(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(xo(t.toString()),xo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,s])=>{this.b_===t&&this.W_(o,s)}),(o=>{e((()=>{const s=new Te(ae.UNKNOWN,"Fetching auth token failed: "+o.message);return this.G_(s)}))}))}W_(e,t){const o=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.e_((()=>{o((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{o((()=>this.G_(s)))})),this.stream.onMessage((s=>{o((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Ee(uE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Ee(uE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mU extends eC{constructor(e,t,o,s,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,s,u),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=Ek(this.serializer,e),o=(function(l){if(!("targetChange"in l))return Le.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Le.min():u.readTime?Qi(u.readTime):Le.min()})(e);return this.listener.J_(t,o)}H_(e){const t={};t.database=Hp(this.serializer),t.addTarget=(function(l,u){let d;const h=u.target;if(d=Op(h)?{documents:Ck(l,h)}:{query:wk(l,h).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=zA(l,u.resumeToken);const g=qp(l,u.expectedCount);g!==null&&(d.expectedCount=g)}else if(u.snapshotVersion.compareTo(Le.min())>0){d.readTime=Ef(l,u.snapshotVersion.toTimestamp());const g=qp(l,u.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const o=Rk(this.serializer,e);o&&(t.labels=o),this.k_(t)}Y_(e){const t={};t.database=Hp(this.serializer),t.removeTarget=e,this.k_(t)}}class gU extends eC{constructor(e,t,o,s,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,s,u),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=Ak(e.writeResults,e.commitTime),o=Qi(e.commitTime);return this.listener.ta(o,t)}na(){const e={};e.database=Hp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>Sk(this.serializer,o)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{}class vU extends yU{constructor(e,t,o,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,zp(t,o),s,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(ae.UNKNOWN,l.toString())}))}Jo(e,t,o,s,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,zp(t,o),s,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(ae.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class _U{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xo(t),this._a=!1):Ee("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="RemoteStore";class TU{constructor(e,t,o,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((u=>{o.enqueueAndForget((async()=>{Es(this)&&(Ee(ps,"Restarting streams for network reachability change."),await(async function(h){const g=Be(h);g.Ia.add(4),await au(g),g.Aa.set("Unknown"),g.Ia.delete(4),await zf(g)})(this))}))})),this.Aa=new _U(o,s)}}async function zf(n){if(Es(n))for(const e of n.da)await e(!0)}async function au(n){for(const e of n.da)await e(!1)}function tC(n,e){const t=Be(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Dm(t)?Mm(t):Da(t).x_()&&Nm(t,e))}function xm(n,e){const t=Be(n),o=Da(t);t.Ta.delete(e),o.x_()&&nC(t,e),t.Ta.size===0&&(o.x_()?o.B_():Es(t)&&t.Aa.set("Unknown"))}function Nm(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Da(n).H_(e)}function nC(n,e){n.Ra.$e(e),Da(n).Y_(e)}function Mm(n){n.Ra=new pk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Da(n).start(),n.Aa.aa()}function Dm(n){return Es(n)&&!Da(n).M_()&&n.Ta.size>0}function Es(n){return Be(n).Ia.size===0}function iC(n){n.Ra=void 0}async function EU(n){n.Aa.set("Online")}async function SU(n){n.Ta.forEach(((e,t)=>{Nm(n,e)}))}async function AU(n,e){iC(n),Dm(n)?(n.Aa.la(e),Mm(n)):n.Aa.set("Unknown")}async function CU(n,e,t){if(n.Aa.set("Online"),e instanceof qA&&e.state===2&&e.cause)try{await(async function(s,l){const u=l.cause;for(const d of l.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(n,e)}catch(o){Ee(ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Af(n,o)}else if(e instanceof tf?n.Ra.Ye(e):e instanceof BA?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Le.min()))try{const o=await ZA(n.localStore);t.compareTo(o)>=0&&await(function(l,u){const d=l.Ra.Pt(u);return d.targetChanges.forEach(((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const _=l.Ta.get(g);_&&l.Ta.set(g,_.withResumeToken(h.resumeToken,u))}})),d.targetMismatches.forEach(((h,g)=>{const _=l.Ta.get(h);if(!_)return;l.Ta.set(h,_.withResumeToken(pn.EMPTY_BYTE_STRING,_.snapshotVersion)),nC(l,h);const E=new Er(_.target,h,g,_.sequenceNumber);Nm(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(o){Ee(ps,"Failed to raise snapshot:",o),await Af(n,o)}}async function Af(n,e,t){if(!Na(e))throw e;n.Ia.add(1),await au(n),n.Aa.set("Offline"),t||(t=()=>ZA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ee(ps,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await zf(n)}))}function oC(n,e){return e().catch((t=>Af(n,t,e)))}async function Gf(n){const e=Be(n),t=Pr(e);let o=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:gm;for(;wU(e);)try{const s=await sU(e.localStore,o);if(s===null){e.Pa.length===0&&t.B_();break}o=s.batchId,IU(e,s)}catch(s){await Af(e,s)}rC(e)&&sC(e)}function wU(n){return Es(n)&&n.Pa.length<10}function IU(n,e){n.Pa.push(e);const t=Pr(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function rC(n){return Es(n)&&!Pr(n).M_()&&n.Pa.length>0}function sC(n){Pr(n).start()}async function RU(n){Pr(n).na()}async function bU(n){const e=Pr(n);for(const t of n.Pa)e.X_(t.mutations)}async function xU(n,e,t){const o=n.Pa.shift(),s=Sm.from(o,e,t);await oC(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Gf(n)}async function NU(n,e){e&&Pr(n).Z_&&await(async function(o,s){if((function(u){return dk(u)&&u!==ae.ABORTED})(s.code)){const l=o.Pa.shift();Pr(o).N_(),await oC(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Gf(o)}})(n,e),rC(n)&&sC(n)}async function cE(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),Ee(ps,"RemoteStore received new credentials");const o=Es(t);t.Ia.add(3),await au(t),o&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await zf(t)}async function MU(n,e){const t=Be(n);e?(t.Ia.delete(2),await zf(t)):e||(t.Ia.add(2),await au(t),t.Aa.set("Unknown"))}function Da(n){return n.Va||(n.Va=(function(t,o,s){const l=Be(t);return l.ia(),new mU(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:EU.bind(null,n),e_:SU.bind(null,n),n_:AU.bind(null,n),J_:CU.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Dm(n)?Mm(n):n.Aa.set("Unknown")):(await n.Va.stop(),iC(n))}))),n.Va}function Pr(n){return n.ma||(n.ma=(function(t,o,s){const l=Be(t);return l.ia(),new gU(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:RU.bind(null,n),n_:NU.bind(null,n),ea:bU.bind(null,n),ta:xU.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Gf(n)):(await n.ma.stop(),n.Pa.length>0&&(Ee(ps,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,t,o,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=s,this.removalCallback=l,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,s,l){const u=Date.now()+o,d=new Pm(e,t,u,s,l);return d.start(o),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vm(n,e){if(xo("AsyncQueue",`${e}: ${n}`),Na(n))return new Te(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{static emptySet(e){return new ga(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||xe.comparator(t.key,o.key):(t,o)=>xe.comparator(t.key,o.key),this.keyedMap=Ll(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=o.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new ga;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.fa=new bt(xe.comparator)}track(e){const t=e.doc.key,o=this.fa.get(t);o?e.type!==0&&o.type===3?this.fa=this.fa.insert(t,e):e.type===3&&o.type!==1?this.fa=this.fa.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.fa=this.fa.remove(t):e.type===1&&o.type===2?this.fa=this.fa.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Pe(63341,{At:e,ga:o}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,o)=>{e.push(o)})),e}}class Ca{constructor(e,t,o,s,l,u,d,h,g){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=s,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=g}static fromInitialDocuments(e,t,o,s,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ca(e,t,ga.emptySet(t),u,o,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==o[s].type||!t[s].doc.isEqual(o[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class PU{constructor(){this.queries=dE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,o){const s=Be(t),l=s.queries;s.queries=dE(),l.forEach(((u,d)=>{for(const h of d.wa)h.onError(o)}))})(this,new Te(ae.ABORTED,"Firestore shutting down"))}}function dE(){return new _s((n=>IA(n)),Uf)}async function VU(n,e){const t=Be(n);let o=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.ba()&&(o=2):(l=new DU,o=e.ba()?0:1);try{switch(o){case 0:l.ya=await t.onListen(s,!0);break;case 1:l.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=Vm(u,`Initialization of query '${ua(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&km(t)}async function kU(n,e){const t=Be(n),o=e.query;let s=3;const l=t.queries.get(o);if(l){const u=l.wa.indexOf(e);u>=0&&(l.wa.splice(u,1),l.wa.length===0?s=e.ba()?0:1:!l.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function UU(n,e){const t=Be(n);let o=!1;for(const s of e){const l=s.query,u=t.queries.get(l);if(u){for(const d of u.wa)d.Ca(s)&&(o=!0);u.ya=s}}o&&km(t)}function LU(n,e,t){const o=Be(n),s=o.queries.get(e);if(s)for(const l of s.wa)l.onError(t);o.queries.delete(e)}function km(n){n.Da.forEach((e=>{e.next()}))}var Jp,hE;(hE=Jp||(Jp={})).Fa="default",hE.Cache="cache";class OU{constructor(e,t,o){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=o||{}}Ca(e){if(!this.options.includeMetadataChanges){const o=[];for(const s of e.docChanges)s.type!==3&&o.push(s);e=new Ca(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const o=t!=="Offline";return(!this.options.ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Jp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.key=e}}class lC{constructor(e){this.key=e}}class FU{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=je(),this.mutatedKeys=je(),this.Xa=RA(e),this.eu=new ga(this.Xa)}get tu(){return this.Ha}nu(e,t){const o=t?t.ru:new fE,s=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const S=s.get(_),R=Lf(this.query,E)?E:null,V=!!S&&this.mutatedKeys.has(S.key),O=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let x=!1;S&&R?S.data.isEqual(R.data)?V!==O&&(o.track({type:3,doc:R}),x=!0):this.iu(S,R)||(o.track({type:2,doc:R}),x=!0,(h&&this.Xa(R,h)>0||g&&this.Xa(R,g)<0)&&(d=!0)):!S&&R?(o.track({type:0,doc:R}),x=!0):S&&!R&&(o.track({type:1,doc:S}),x=!0,(h||g)&&(d=!0)),x&&(R?(u=u.add(R),l=O?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),o.track({type:1,doc:_})}return{eu:u,ru:o,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,s){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((_,E)=>(function(R,V){const O=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{At:x})}};return O(R)-O(V)})(_.type,E.type)||this.Xa(_.doc,E.doc))),this.su(o),s=s!=null&&s;const d=t&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,g=h!==this.Ya;return this.Ya=h,u.length!==0||g?{snapshot:new Ca(this.query,e.eu,l,u,e.mutatedKeys,h===0,g,!1,!!o&&o.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new fE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=je(),this.eu.forEach((o=>{this.au(o.key)&&(this.Za=this.Za.add(o.key))}));const t=[];return e.forEach((o=>{this.Za.has(o)||t.push(new lC(o))})),this.Za.forEach((o=>{e.has(o)||t.push(new aC(o))})),t}uu(e){this.Ha=e.qs,this.Za=je();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ca.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Um="SyncEngine";class BU{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class qU{constructor(e){this.key=e,this.lu=!1}}class zU{constructor(e,t,o,s,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new _s((d=>IA(d)),Uf),this.Tu=new Map,this.Iu=new Set,this.du=new bt(xe.comparator),this.Eu=new Map,this.Au=new wm,this.Ru={},this.Vu=new Map,this.mu=Aa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function GU(n,e,t=!0){const o=pC(n);let s;const l=o.Pu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.cu()):s=await uC(o,e,t,!0),s}async function HU(n,e){const t=pC(n);await uC(t,e,!0,!1)}async function uC(n,e,t,o){const s=await aU(n.localStore,Ki(e)),l=s.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return o&&(d=await $U(n,e,l,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&tC(n.remoteStore,s),d}async function $U(n,e,t,o,s){n.gu=(E,S,R)=>(async function(O,x,G,Z){let K=x.view.nu(G);K.Ds&&(K=await rE(O.localStore,x.query,!1).then((({documents:D})=>x.view.nu(D,K))));const te=Z&&Z.targetChanges.get(x.targetId),he=Z&&Z.targetMismatches.get(x.targetId)!=null,$=x.view.applyChanges(K,O.isPrimaryClient,te,he);return mE(O,x.targetId,$._u),$.snapshot})(n,E,S,R);const l=await rE(n.localStore,e,!0),u=new FU(e,l.qs),d=u.nu(l.documents),h=su.createSynthesizedTargetChangeForCurrentChange(t,o&&n.onlineState!=="Offline",s),g=u.applyChanges(d,n.isPrimaryClient,h);mE(n,t,g._u);const _=new BU(e,t,u);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),g.snapshot}async function YU(n,e,t){const o=Be(n),s=o.Pu.get(e),l=o.Tu.get(s.targetId);if(l.length>1)return o.Tu.set(s.targetId,l.filter((u=>!Uf(u,e)))),void o.Pu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(s.targetId),o.sharedClientState.isActiveQueryTarget(s.targetId)||await $p(o.localStore,s.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(s.targetId),t&&xm(o.remoteStore,s.targetId),Kp(o,s.targetId)})).catch(xa)):(Kp(o,s.targetId),await $p(o.localStore,s.targetId,!0))}async function JU(n,e){const t=Be(n),o=t.Pu.get(e),s=t.Tu.get(o.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),xm(t.remoteStore,o.targetId))}async function KU(n,e,t){const o=t5(n);try{const s=await(function(u,d){const h=Be(u),g=Et.now(),_=d.reduce(((R,V)=>R.add(V.key)),je());let E,S;return h.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let V=No(),O=je();return h.Os.getEntries(R,_).next((x=>{V=x,V.forEach(((G,Z)=>{Z.isValidDocument()||(O=O.add(G))}))})).next((()=>h.localDocuments.getOverlayedDocuments(R,V))).next((x=>{E=x;const G=[];for(const Z of d){const K=ak(Z,E.get(Z.key).overlayedDocument);K!=null&&G.push(new Ts(Z.key,K,yA(K.value.mapValue),Io.exists(!0)))}return h.mutationQueue.addMutationBatch(R,g,G,d)})).next((x=>{S=x;const G=x.applyToLocalDocumentSet(E,O);return h.documentOverlayCache.saveOverlays(R,x.batchId,G)}))})).then((()=>({batchId:S.batchId,changes:xA(E)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(s.batchId),(function(u,d,h){let g=u.Ru[u.currentUser.toKey()];g||(g=new bt(Je)),g=g.insert(d,h),u.Ru[u.currentUser.toKey()]=g})(o,s.batchId,t),await lu(o,s.changes),await Gf(o.remoteStore)}catch(s){const l=Vm(s,"Failed to persist write");t.reject(l)}}async function cC(n,e){const t=Be(n);try{const o=await oU(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const u=t.Eu.get(l);u&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?ct(u.lu,14607):s.removedDocuments.size>0&&(ct(u.lu,42227),u.lu=!1))})),await lu(t,o,e)}catch(o){await xa(o)}}function pE(n,e,t){const o=Be(n);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const s=[];o.Pu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const h=Be(u);h.onlineState=d;let g=!1;h.queries.forEach(((_,E)=>{for(const S of E.wa)S.va(d)&&(g=!0)})),g&&km(h)})(o.eventManager,e),s.length&&o.hu.J_(s),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function QU(n,e,t){const o=Be(n);o.sharedClientState.updateQueryState(e,"rejected",t);const s=o.Eu.get(e),l=s&&s.key;if(l){let u=new bt(xe.comparator);u=u.insert(l,En.newNoDocument(l,Le.min()));const d=je().add(l),h=new Bf(Le.min(),new Map,new bt(Je),u,d);await cC(o,h),o.du=o.du.remove(l),o.Eu.delete(e),Lm(o)}else await $p(o.localStore,e,!1).then((()=>Kp(o,e,t))).catch(xa)}async function XU(n,e){const t=Be(n),o=e.batch.batchId;try{const s=await iU(t.localStore,e);dC(t,o,null),fC(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await lu(t,s)}catch(s){await xa(s)}}async function WU(n,e,t){const o=Be(n);try{const s=await(function(u,d){const h=Be(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return h.mutationQueue.lookupMutationBatch(g,d).next((E=>(ct(E!==null,37113),_=E.keys(),h.mutationQueue.removeMutationBatch(g,E)))).next((()=>h.mutationQueue.performConsistencyCheck(g))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>h.localDocuments.getDocuments(g,_)))}))})(o.localStore,e);dC(o,e,t),fC(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await lu(o,s)}catch(s){await xa(s)}}function fC(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function dC(n,e,t){const o=Be(n);let s=o.Ru[o.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),o.Ru[o.currentUser.toKey()]=s}}function Kp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const o of n.Tu.get(e))n.Pu.delete(o),t&&n.hu.pu(o,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((o=>{n.Au.containsKey(o)||hC(n,o)}))}function hC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(xm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Lm(n))}function mE(n,e,t){for(const o of t)o instanceof aC?(n.Au.addReference(o.key,e),ZU(n,o)):o instanceof lC?(Ee(Um,"Document no longer in limbo: "+o.key),n.Au.removeReference(o.key,e),n.Au.containsKey(o.key)||hC(n,o.key)):Pe(19791,{yu:o})}function ZU(n,e){const t=e.key,o=t.path.canonicalString();n.du.get(t)||n.Iu.has(o)||(Ee(Um,"New document in limbo: "+t),n.Iu.add(o),Lm(n))}function Lm(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new xe(Tt.fromString(e)),o=n.mu.next();n.Eu.set(o,new qU(t)),n.du=n.du.insert(t,o),tC(n.remoteStore,new Er(Ki(CA(t.path)),o,"TargetPurposeLimboResolution",Pf.ue))}}async function lu(n,e,t){const o=Be(n),s=[],l=[],u=[];o.Pu.isEmpty()||(o.Pu.forEach(((d,h)=>{u.push(o.gu(h,e,t).then((g=>{var _;if((g||t)&&o.isPrimaryClient){const E=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(h.targetId))===null||_===void 0?void 0:_.current;o.sharedClientState.updateQueryState(h.targetId,E?"current":"not-current")}if(g){s.push(g);const E=Rm.Es(h.targetId,g);l.push(E)}})))})),await Promise.all(u),o.hu.J_(s),await(async function(h,g){const _=Be(h);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(g,(S=>ue.forEach(S.Is,(R=>_.persistence.referenceDelegate.addReference(E,S.targetId,R))).next((()=>ue.forEach(S.ds,(R=>_.persistence.referenceDelegate.removeReference(E,S.targetId,R)))))))))}catch(E){if(!Na(E))throw E;Ee(bm,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const R=_.Fs.get(S),V=R.snapshotVersion,O=R.withLastLimboFreeSnapshotVersion(V);_.Fs=_.Fs.insert(S,O)}}})(o.localStore,l))}async function jU(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){Ee(Um,"User change. New user:",e.toKey());const o=await WA(t.localStore,e);t.currentUser=e,(function(l,u){l.Vu.forEach((d=>{d.forEach((h=>{h.reject(new Te(ae.CANCELLED,u))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await lu(t,o.Bs)}}function e5(n,e){const t=Be(n),o=t.Eu.get(e);if(o&&o.lu)return je().add(o.key);{let s=je();const l=t.Tu.get(e);if(!l)return s;for(const u of l){const d=t.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function pC(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QU.bind(null,e),e.hu.J_=UU.bind(null,e.eventManager),e.hu.pu=LU.bind(null,e.eventManager),e}function t5(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WU.bind(null,e),e}class Cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return nU(this.persistence,new jk,e.initialUser,this.serializer)}Du(e){return new XA(Im.Vi,this.serializer)}bu(e){return new uU}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cf.provider={build:()=>new Cf};class n5 extends Cf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ct(this.persistence.referenceDelegate instanceof Sf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new Ok(o,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new XA((o=>Sf.Vi(o,t)),this.serializer)}}class Qp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>pE(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=jU.bind(null,this.syncEngine),await MU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PU})()}createDatastore(e){const t=qf(e.databaseInfo.databaseId),o=(function(l){return new pU(l)})(e.databaseInfo);return(function(l,u,d,h){return new vU(l,u,d,h)})(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,s,l,u,d){return new TU(o,s,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>pE(this.syncEngine,t,0)),(function(){return lE.C()?new lE:new cU})())}createSyncEngine(e,t){return(function(s,l,u,d,h,g,_){const E=new zU(s,l,u,d,h,g);return _&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Be(s);Ee(ps,"RemoteStore shutting down."),l.Ia.add(5),await au(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Qp.provider={build:()=>new Qp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="FirestoreClient";class o5{constructor(e,t,o,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=s,this.user=Tn.UNAUTHENTICATED,this.clientId=mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async u=>{Ee(Vr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(o,(u=>(Ee(Vr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=Vm(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function sp(n,e){n.asyncQueue.verifyOperationInProgress(),Ee(Vr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let o=t.initialUser;n.setCredentialChangeListener((async s=>{o.isEqual(s)||(await WA(e.localStore,s),o=s)})),e.persistence.setDatabaseDeletedListener((()=>{br("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Ee("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{br("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),n._offlineComponents=e}async function gE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await r5(n);Ee(Vr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((o=>cE(e.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,s)=>cE(e.remoteStore,s))),n._onlineComponents=e}async function r5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ee(Vr,"Using user provided OfflineComponentProvider");try{await sp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;br("Error using user provided cache. Falling back to memory cache: "+t),await sp(n,new Cf)}}else Ee(Vr,"Using default OfflineComponentProvider"),await sp(n,new n5(void 0));return n._offlineComponents}async function mC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ee(Vr,"Using user provided OnlineComponentProvider"),await gE(n,n._uninitializedComponentsProvider._online)):(Ee(Vr,"Using default OnlineComponentProvider"),await gE(n,new Qp))),n._onlineComponents}function s5(n){return mC(n).then((e=>e.syncEngine))}async function a5(n){const e=await mC(n),t=e.eventManager;return t.onListen=GU.bind(null,e.syncEngine),t.onUnlisten=YU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=JU.bind(null,e.syncEngine),t}function l5(n,e,t={}){const o=new Ir;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,h,g){const _=new i5({next:S=>{_.Ou(),u.enqueueAndForget((()=>kU(l,E))),S.fromCache&&h.source==="server"?g.reject(new Te(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new OU(d,_,{includeMetadataChanges:!0,ka:!0});return VU(l,E)})(await a5(n),n.asyncQueue,e,t,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="firestore.googleapis.com",vE=!0;class _E{constructor(e){var t,o;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yC,this.ssl=vE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:vE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Uk)throw new Te(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gC((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,s){return o.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,t,o,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _E({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _E(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new dV;switch(o.type){case"firstParty":return new gV(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Te(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=yE.get(t);o&&(Ee("ComponentProvider","Removing Datastore"),yE.delete(t),o.terminate())})(this),Promise.resolve()}}function u5(n,e,t,o={}){var s;n=pf(n,Hf);const l=iu(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;l&&(LS(`https://${h}`),FS("Firestore",!0)),u.host!==yC&&u.host!==h&&br("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:h,ssl:l,emulatorOptions:o});if(!hf(g,d)&&(n._setSettings(g),o.mockUserToken)){let _,E;if(typeof o.mockUserToken=="string")_=o.mockUserToken,E=Tn.MOCK_USER;else{_=OS(o.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const S=o.mockUserToken.sub||o.mockUserToken.user_id;if(!S)throw new Te(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Tn(S)}n._authCredentials=new hV(new oA(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class on{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(ou(t,on._jsonSchema))return new on(e,o||null,new xe(Tt.fromString(t.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:Kt("string",on._jsonSchemaVersion),referencePath:Kt("string")};class Rr extends Ss{constructor(e,t,o){super(e,t,CA(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new xe(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function vC(n,e,...t){if(n=Zi(n),sA("collection","path",e),n instanceof Hf){const o=Tt.fromString(e,...t);return DT(o),new Rr(n,null,o)}{if(!(n instanceof on||n instanceof Rr))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(Tt.fromString(e,...t));return DT(o),new Rr(n.firestore,null,o)}}function c5(n,e,...t){if(n=Zi(n),arguments.length===1&&(e=mm.newId()),sA("doc","path",e),n instanceof Hf){const o=Tt.fromString(e,...t);return MT(o),new on(n,null,new xe(o))}{if(!(n instanceof on||n instanceof Rr))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(Tt.fromString(e,...t));return MT(o),new on(n.firestore,n instanceof Rr?n.converter:null,new xe(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="AsyncQueue";class EE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new jA(this,"async_queue_retry"),this.oc=()=>{const o=rp();o&&Ee(TE,"Visibility state changed to "+o.visibilityState),this.F_.y_()},this._c=e;const t=rp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=rp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Ir;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Na(e))throw e;Ee(TE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((o=>{throw this.tc=o,this.nc=!1,xo("INTERNAL UNHANDLED ERROR: ",SE(o)),o})).then((o=>(this.nc=!1,o))))));return this._c=t,t}enqueueAfterDelay(e,t,o){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Pm.createAndSchedule(this,e,t,o,(l=>this.lc(l)));return this.ec.push(s),s}ac(){this.tc&&Pe(47125,{hc:SE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function SE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Om extends Hf{constructor(e,t,o,s){super(e,t,o,s),this.type="firestore",this._queue=new EE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new EE(e),this._firestoreClient=void 0,await e}}}function f5(n,e){const t=typeof n=="object"?n:KS(),o=typeof n=="string"?n:gf,s=HS(t,"firestore").getImmediate({identifier:o});if(!s._initialized){const l=kS("firestore");l&&u5(s,...l)}return s}function _C(n){if(n._terminated)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||d5(n),n._firestoreClient}function d5(n){var e,t,o;const s=n._freezeSettings(),l=(function(d,h,g,_){return new DV(d,h,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,gC(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((o=s.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new o5(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yi(pn.fromBase64String(e))}catch(t){throw new Te(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yi(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ou(e,yi._jsonSchema))return yi.fromBase64String(e.bytes)}}yi._jsonSchemaVersion="firestore/bytes/1.0",yi._jsonSchema={type:Kt("string",yi._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xi._jsonSchemaVersion}}static fromJSON(e){if(ou(e,Xi._jsonSchema))return new Xi(e.latitude,e.longitude)}}Xi._jsonSchemaVersion="firestore/geoPoint/1.0",Xi._jsonSchema={type:Kt("string",Xi._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,s){if(o.length!==s.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ou(e,Wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Wi(e.vectorValues);throw new Te(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:Kt("string",Wi._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=/^__.*__$/;class p5{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new ru(e,this.data,t,this.fieldTransforms)}}function EC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ec:n})}}class Bm{constructor(e,t,o,s,l,u){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=s,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Bm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const o=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:o,mc:!1});return s.fc(e),s}gc(e){var t;const o=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:o,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return wf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(EC(this.Ec)&&h5.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class m5{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||qf(e)}Dc(e,t,o,s=!1){return new Bm({Ec:e,methodName:t,bc:o,path:hn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function SC(n){const e=n._freezeSettings(),t=qf(n._databaseId);return new m5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function g5(n,e,t,o,s,l={}){const u=n.Dc(l.merge||l.mergeFields?2:0,e,t,s);wC("Data must be an object, but it was:",u,o);const d=AC(o,u);let h,g;if(l.merge)h=new bi(u.fieldMask),g=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const S=v5(e,E,t);if(!u.contains(S))throw new Te(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);T5(_,S)||_.push(S)}h=new bi(_),g=u.fieldTransforms.filter((E=>h.covers(E.field)))}else h=null,g=u.fieldTransforms;return new p5(new gi(d),h,g)}function y5(n,e,t,o=!1){return qm(t,n.Dc(o?4:3,e))}function qm(n,e){if(CC(n=Zi(n)))return wC("Unsupported field value:",e,n),AC(n,e);if(n instanceof TC)return(function(o,s){if(!EC(s.Ec))throw s.wc(`${o._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(o,s){const l=[];let u=0;for(const d of o){let h=qm(d,s.yc(u));h==null&&(h={nullValue:"NULL_VALUE"}),l.push(h),u++}return{arrayValue:{values:l}}})(n,e)}return(function(o,s){if((o=Zi(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return tk(s.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=Et.fromDate(o);return{timestampValue:Ef(s.serializer,l)}}if(o instanceof Et){const l=new Et(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Ef(s.serializer,l)}}if(o instanceof Xi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof yi)return{bytesValue:zA(s.serializer,o._byteString)};if(o instanceof on){const l=s.databaseId,u=o.firestore._databaseId;if(!u.isEqual(l))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Cm(o.firestore._databaseId||s.databaseId,o._key.path)}}if(o instanceof Wi)return(function(u,d){return{mapValue:{fields:{[mA]:{stringValue:gA},[yf]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw d.wc("VectorValues must only contain numeric values.");return Em(d.serializer,g)}))}}}}}})(o,s);throw s.wc(`Unsupported field value: ${Df(o)}`)})(n,e)}function AC(n,e){const t={};return uA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(n,((o,s)=>{const l=qm(s,e.Vc(o));l!=null&&(t[o]=l)})),{mapValue:{fields:t}}}function CC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof Xi||n instanceof yi||n instanceof on||n instanceof TC||n instanceof Wi)}function wC(n,e,t){if(!CC(t)||!aA(t)){const o=Df(t);throw o==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+o)}}function v5(n,e,t){if((e=Zi(e))instanceof Fm)return e._internalPath;if(typeof e=="string")return IC(n,e);throw wf("Field path arguments must be of type string or ",n,!1,void 0,t)}const _5=new RegExp("[~\\*/\\[\\]]");function IC(n,e,t){if(e.search(_5)>=0)throw wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fm(...e.split("."))._internalPath}catch{throw wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wf(n,e,t,o,s){const l=o&&!o.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(l||u)&&(h+=" (found",l&&(h+=` in field ${o}`),u&&(h+=` in document ${s}`),h+=")"),new Te(ae.INVALID_ARGUMENT,d+n+h)}function T5(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t,o,s,l){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new E5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class E5 extends RC{data(){return super.data()}}function zm(n,e){return typeof e=="string"?IC(n,e):e instanceof Fm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Te(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gm{}class bC extends Gm{}function A5(n,e,...t){let o=[];e instanceof Gm&&o.push(e),o=o.concat(t),(function(l){const u=l.filter((h=>h instanceof $m)).length,d=l.filter((h=>h instanceof Hm)).length;if(u>1||u>0&&d>0)throw new Te(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const s of o)n=s._apply(n);return n}class Hm extends bC{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new Hm(e,t,o)}_apply(e){const t=this._parse(e);return xC(e._query,t),new Ss(e.firestore,e.converter,Fp(e._query,t))}_parse(e){const t=SC(e.firestore);return(function(l,u,d,h,g,_,E){let S;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){CE(E,_);const V=[];for(const O of E)V.push(AE(h,l,O));S={arrayValue:{values:V}}}else S=AE(h,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||CE(E,_),S=y5(d,u,E,_==="in"||_==="not-in");return Jt.create(g,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class $m extends Gm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $m(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:Mi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let u=s;const d=l.getFlattenedFilters();for(const h of d)xC(u,h),u=Fp(u,h)})(e._query,t),new Ss(e.firestore,e.converter,Fp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ym extends bC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ym(e,t)}_apply(e){const t=(function(s,l,u){if(s.startAt!==null)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eu(l,u)})(e._query,this._field,this._direction);return new Ss(e.firestore,e.converter,(function(s,l){const u=s.explicitOrderBy.concat([l]);return new Ma(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function C5(n,e="asc"){const t=e,o=zm("orderBy",n);return Ym._create(o,t)}function AE(n,e,t){if(typeof(t=Zi(t))=="string"){if(t==="")throw new Te(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wA(e)&&t.indexOf("/")!==-1)throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Tt.fromString(t));if(!xe.isDocumentKey(o))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return BT(n,new xe(o))}if(t instanceof on)return BT(n,t._key);throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(t)}.`)}function CE(n,e){if(!Array.isArray(n)||n.length===0)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xC(n,e){const t=(function(s,l){for(const u of s)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Te(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class w5{convertValue(e,t="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return vs(e,((s,l)=>{o[s]=this.convertValue(l,t)})),o}convertVectorValue(e){var t,o,s;const l=(s=(o=(t=e.fields)===null||t===void 0?void 0:t[yf].arrayValue)===null||o===void 0?void 0:o.values)===null||s===void 0?void 0:s.map((u=>Ft(u.doubleValue)));return new Wi(l)}convertGeoPoint(e){return new Xi(Ft(e.latitude),Ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=kf(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const t=Nr(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Tt.fromString(e);ct(KA(o),9688,{name:e});const s=new Zl(o.get(1),o.get(3)),l=new xe(o.popFirst(5));return s.isEqual(t)||xo(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(n,e,t){let o;return o=n?n.toFirestore(e):e,o}class $c{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends RC{constructor(e,t,o,s,l,u){super(e,t,o,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(zm("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ya._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:Kt("string",ya._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class nf extends ya{data(e={}){return super.data(e)}}class va{constructor(e,t,o,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new $c(s.hasPendingWrites,s.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new nf(this._firestore,this._userDataWriter,o.key,o,new $c(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const h=new nf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new $c(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const h=new nf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new $c(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,_=-1;return d.type!==0&&(g=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:R5(d.type),doc:h,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function R5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:n})}}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:Kt("string",va._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class b5 extends w5{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,t)}}function x5(n){n=pf(n,Ss);const e=pf(n.firestore,Om),t=_C(e),o=new b5(e);return S5(n._query),l5(t,n._query).then((s=>new va(e,o,n,s)))}function N5(n,e){const t=pf(n.firestore,Om),o=c5(n),s=I5(n.converter,e);return M5(t,[g5(SC(n.firestore),"addDoc",o._key,s,n.converter!==null,{}).toMutation(o._key,Io.exists(!1))]).then((()=>o))}function M5(n,e){return(function(o,s){const l=new Ir;return o.asyncQueue.enqueueAndForget((async()=>KU(await s5(o),s,l))),l.promise})(_C(n),e)}(function(e,t=!0){(function(s){ba=s})(YS),Kl(new _a("firestore",((o,{instanceIdentifier:s,options:l})=>{const u=o.getProvider("app").getImmediate(),d=new Om(new pV(o.getProvider("auth-internal")),new yV(u,o.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Te(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(g.options.projectId,_)})(u,s),u);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Cr(IT,RT,e),Cr(IT,RT,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="firebasestorage.googleapis.com",MC="storageBucket",D5=120*1e3,P5=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt extends ys{constructor(e,t,o=0){super(ap(e),`Firebase Storage: ${t} (${ap(e)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ap(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vt||(Vt={}));function ap(n){return"storage/"+n}function Jm(){const n="An unknown error occurred, please check the error payload for server response.";return new kt(Vt.UNKNOWN,n)}function V5(n){return new kt(Vt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function k5(n){return new kt(Vt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function U5(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new kt(Vt.UNAUTHENTICATED,n)}function L5(){return new kt(Vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function O5(n){return new kt(Vt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function F5(){return new kt(Vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function B5(){return new kt(Vt.CANCELED,"User canceled the upload/download.")}function q5(n){return new kt(Vt.INVALID_URL,"Invalid URL '"+n+"'.")}function z5(n){return new kt(Vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function G5(){return new kt(Vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MC+"' property when initializing the app?")}function H5(){return new kt(Vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $5(){return new kt(Vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Y5(n){return new kt(Vt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Xp(n){return new kt(Vt.INVALID_ARGUMENT,n)}function DC(){return new kt(Vt.APP_DELETED,"The Firebase app was deleted.")}function J5(n){return new kt(Vt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hl(n,e){return new kt(Vt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Vl(n){throw new kt(Vt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let o;try{o=ni.makeFromUrl(e,t)}catch{return new ni(e,"")}if(o.path==="")return o;throw z5(e)}static makeFromUrl(e,t){let o=null;const s="([A-Za-z0-9.\\-_]+)";function l(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),h={bucket:1,path:3};function g(te){te.path_=decodeURIComponent(te.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",R=new RegExp(`^https?://${E}/${_}/b/${s}/o${S}`,"i"),V={bucket:1,path:3},O=t===NC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",G=new RegExp(`^https?://${O}/${s}/${x}`,"i"),K=[{regex:d,indices:h,postModify:l},{regex:R,indices:V,postModify:g},{regex:G,indices:{bucket:1,path:2},postModify:g}];for(let te=0;te<K.length;te++){const he=K[te],$=he.regex.exec(e);if($){const D=$[he.indices.bucket];let M=$[he.indices.path];M||(M=""),o=new ni(D,M),he.postModify(o);break}}if(o==null)throw q5(e);return o}}class K5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(n,e,t){let o=1,s=null,l=null,u=!1,d=0;function h(){return d===2}let g=!1;function _(...x){g||(g=!0,e.apply(null,x))}function E(x){s=setTimeout(()=>{s=null,n(R,h())},x)}function S(){l&&clearTimeout(l)}function R(x,...G){if(g){S();return}if(x){S(),_.call(null,x,...G);return}if(h()||u){S(),_.call(null,x,...G);return}o<64&&(o*=2);let K;d===1?(d=2,K=0):K=(o+Math.random())*1e3,E(K)}let V=!1;function O(x){V||(V=!0,S(),!g&&(s!==null?(x||(d=2),clearTimeout(s),E(0)):x||(d=1)))}return E(0),l=setTimeout(()=>{u=!0,O(!0)},t),O}function X5(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(n){return n!==void 0}function Z5(n){return typeof n=="object"&&!Array.isArray(n)}function Km(n){return typeof n=="string"||n instanceof String}function wE(n){return Qm()&&n instanceof Blob}function Qm(){return typeof Blob<"u"}function IE(n,e,t,o){if(o<e)throw Xp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(o>t)throw Xp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n,e,t){let o=e;return t==null&&(o=`https://${e}`),`${t}://${o}/v0${n}`}function PC(n){const e=encodeURIComponent;let t="?";for(const o in n)if(n.hasOwnProperty(o)){const s=e(o)+"="+e(n[o]);t=t+s+"&"}return t=t.slice(0,-1),t}var ds;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ds||(ds={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||s||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,t,o,s,l,u,d,h,g,_,E,S=!0,R=!1){this.url_=e,this.method_=t,this.headers_=o,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=h,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=E,this.retry=S,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,O)=>{this.resolve_=V,this.reject_=O,this.start_()})}start_(){const e=(o,s)=>{if(s){o(!1,new Yc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=d=>{const h=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,g)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const d=l.getErrorCode()===ds.NO_ERROR,h=l.getStatus();if(!d||j5(h,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===ds.ABORT;o(!1,new Yc(!1,null,_));return}const g=this.successCodes_.indexOf(h)!==-1;o(!0,new Yc(g,l))})},t=(o,s)=>{const l=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(d,d.getResponse());W5(h)?l(h):l()}catch(h){u(h)}else if(d!==null){const h=Jm();h.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,h)):u(h)}else if(s.canceled){const h=this.appDelete_?DC():B5();u(h)}else{const h=F5();u(h)}};this.canceled_?t(!1,new Yc(!1,null,!0)):this.backoffId_=Q5(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&X5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yc{constructor(e,t,o){this.wasSuccessCode=e,this.connection=t,this.canceled=!!o}}function t3(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function n3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function i3(n,e){e&&(n["X-Firebase-GMPID"]=e)}function o3(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function r3(n,e,t,o,s,l,u=!0,d=!1){const h=PC(n.urlParams),g=n.url+h,_=Object.assign({},n.headers);return i3(_,e),t3(_,t),n3(_,l),o3(_,o),new e3(g,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function a3(...n){const e=s3();if(e!==void 0){const t=new e;for(let o=0;o<n.length;o++)t.append(n[o]);return t.getBlob()}else{if(Qm())return new Blob(n);throw new kt(Vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function l3(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(n){if(typeof atob>"u")throw Y5("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lp{constructor(e,t){this.data=e,this.contentType=t||null}}function c3(n,e){switch(n){case Ji.RAW:return new lp(VC(e));case Ji.BASE64:case Ji.BASE64URL:return new lp(kC(n,e));case Ji.DATA_URL:return new lp(d3(e),h3(e))}throw Jm()}function VC(n){const e=[];for(let t=0;t<n.length;t++){let o=n.charCodeAt(t);if(o<=127)e.push(o);else if(o<=2047)e.push(192|o>>6,128|o&63);else if((o&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=o,u=n.charCodeAt(++t);o=65536|(l&1023)<<10|u&1023,e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|o&63)}else(o&64512)===56320?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|o&63)}return new Uint8Array(e)}function f3(n){let e;try{e=decodeURIComponent(n)}catch{throw Hl(Ji.DATA_URL,"Malformed data URL.")}return VC(e)}function kC(n,e){switch(n){case Ji.BASE64:{const s=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(s||l)throw Hl(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ji.BASE64URL:{const s=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(s||l)throw Hl(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=u3(e)}catch(s){throw s.message.includes("polyfill")?s:Hl(n,"Invalid character found")}const o=new Uint8Array(t.length);for(let s=0;s<t.length;s++)o[s]=t.charCodeAt(s);return o}class UC{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Hl(Ji.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=t[1]||null;o!=null&&(this.base64=p3(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=e.substring(e.indexOf(",")+1)}}function d3(n){const e=new UC(n);return e.base64?kC(Ji.BASE64,e.rest):f3(e.rest)}function h3(n){return new UC(n).contentType}function p3(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){let o=0,s="";wE(e)?(this.data_=e,o=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),o=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),o=e.length),this.size_=o,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(wE(this.data_)){const o=this.data_,s=l3(o,e,t);return s===null?null:new Tr(s)}else{const o=new Uint8Array(this.data_.buffer,e,t-e);return new Tr(o,!0)}}static getBlob(...e){if(Qm()){const t=e.map(o=>o instanceof Tr?o.data_:o);return new Tr(a3.apply(null,t))}else{const t=e.map(u=>Km(u)?c3(Ji.RAW,u).data:u.data_);let o=0;t.forEach(u=>{o+=u.byteLength});const s=new Uint8Array(o);let l=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)s[l++]=u[d]}),new Tr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(n){let e;try{e=JSON.parse(n)}catch{return null}return Z5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function g3(n,e){const t=e.split("/").filter(o=>o.length>0).join("/");return n.length===0?t:n+"/"+t}function OC(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(n,e){return e}class xn{constructor(e,t,o,s){this.server=e,this.local=t||e,this.writable=!!o,this.xform=s||y3}}let Jc=null;function v3(n){return!Km(n)||n.length<2?n:OC(n)}function FC(){if(Jc)return Jc;const n=[];n.push(new xn("bucket")),n.push(new xn("generation")),n.push(new xn("metageneration")),n.push(new xn("name","fullPath",!0));function e(l,u){return v3(u)}const t=new xn("name");t.xform=e,n.push(t);function o(l,u){return u!==void 0?Number(u):u}const s=new xn("size");return s.xform=o,n.push(s),n.push(new xn("timeCreated")),n.push(new xn("updated")),n.push(new xn("md5Hash",null,!0)),n.push(new xn("cacheControl",null,!0)),n.push(new xn("contentDisposition",null,!0)),n.push(new xn("contentEncoding",null,!0)),n.push(new xn("contentLanguage",null,!0)),n.push(new xn("contentType",null,!0)),n.push(new xn("metadata","customMetadata",!0)),Jc=n,Jc}function _3(n,e){function t(){const o=n.bucket,s=n.fullPath,l=new ni(o,s);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function T3(n,e,t){const o={};o.type="file";const s=t.length;for(let l=0;l<s;l++){const u=t[l];o[u.local]=u.xform(o,e[u.server])}return _3(o,n),o}function BC(n,e,t){const o=LC(e);return o===null?null:T3(n,o,t)}function E3(n,e,t,o){const s=LC(e);if(s===null||!Km(s.downloadTokens))return null;const l=s.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(g=>{const _=n.bucket,E=n.fullPath,S="/b/"+u(_)+"/o/"+u(E),R=Xm(S,t,o),V=PC({alt:"media",token:g});return R+V})[0]}function S3(n,e){const t={},o=e.length;for(let s=0;s<o;s++){const l=e[s];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class qC{constructor(e,t,o,s){this.url=e,this.method=t,this.handler=o,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(n){if(!n)throw Jm()}function A3(n,e){function t(o,s){const l=BC(n,s,e);return zC(l!==null),l}return t}function C3(n,e){function t(o,s){const l=BC(n,s,e);return zC(l!==null),E3(l,s,n.host,n._protocol)}return t}function GC(n){function e(t,o){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=L5():s=U5():t.getStatus()===402?s=k5(n.bucket):t.getStatus()===403?s=O5(n.path):s=o,s.status=t.getStatus(),s.serverResponse=o.serverResponse,s}return e}function w3(n){const e=GC(n);function t(o,s){let l=e(o,s);return o.getStatus()===404&&(l=V5(n.path)),l.serverResponse=s.serverResponse,l}return t}function I3(n,e,t){const o=e.fullServerUrl(),s=Xm(o,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,d=new qC(s,l,C3(n,t),u);return d.errorHandler=w3(e),d}function R3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function b3(n,e,t){const o=Object.assign({},t);return o.fullPath=n.path,o.size=e.size(),o.contentType||(o.contentType=R3(null,e)),o}function x3(n,e,t,o,s){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let K="";for(let te=0;te<2;te++)K=K+Math.random().toString().slice(2);return K}const h=d();u["Content-Type"]="multipart/related; boundary="+h;const g=b3(e,o,s),_=S3(g,t),E="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+h+`\r
Content-Type: `+g.contentType+`\r
\r
`,S=`\r
--`+h+"--",R=Tr.getBlob(E,o,S);if(R===null)throw H5();const V={name:g.fullPath},O=Xm(l,n.host,n._protocol),x="POST",G=n.maxUploadRetryTime,Z=new qC(O,x,A3(n,t),G);return Z.urlParams=V,Z.headers=u,Z.body=R.uploadData(),Z.errorHandler=GC(e),Z}class N3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ds.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ds.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ds.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,o,s,l){if(this.sent_)throw Vl("cannot .send() more than once");if(iu(e)&&o&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const u in l)l.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,l[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class M3 extends N3{initXhr(){this.xhr_.responseType="text"}}function HC(){return new M3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){this._service=e,t instanceof ni?this._location=t:this._location=ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ms(e,t)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OC(this._location.path)}get storage(){return this._service}get parent(){const e=m3(this._location.path);if(e===null)return null;const t=new ni(this._location.bucket,e);return new ms(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw J5(e)}}function D3(n,e,t){n._throwIfRoot("uploadBytes");const o=x3(n.storage,n._location,FC(),new Tr(e,!0),t);return n.storage.makeRequestWithTokens(o,HC).then(s=>({metadata:s,ref:n}))}function P3(n){n._throwIfRoot("getDownloadURL");const e=I3(n.storage,n._location,FC());return n.storage.makeRequestWithTokens(e,HC).then(t=>{if(t===null)throw $5();return t})}function V3(n,e){const t=g3(n._location.path,e),o=new ni(n._location.bucket,t);return new ms(n.storage,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(n){return/^[A-Za-z]+:\/\//.test(n)}function U3(n,e){return new ms(n,e)}function $C(n,e){if(n instanceof Wm){const t=n;if(t._bucket==null)throw G5();const o=new ms(t,t._bucket);return e!=null?$C(o,e):o}else return e!==void 0?V3(n,e):n}function L3(n,e){if(e&&k3(e)){if(n instanceof Wm)return U3(n,e);throw Xp("To use ref(service, url), the first argument must be a Storage instance.")}else return $C(n,e)}function RE(n,e){const t=e==null?void 0:e[MC];return t==null?null:ni.makeFromBucketSpec(t,n)}function O3(n,e,t,o={}){n.host=`${e}:${t}`;const s=iu(e);s&&(LS(`https://${n.host}/b`),FS("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:l}=o;l&&(n._overrideAuthToken=typeof l=="string"?l:OS(l,n.app.options.projectId))}class Wm{constructor(e,t,o,s,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=o,this._url=s,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=NC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=D5,this._maxUploadRetryTime=P5,this._requests=new Set,s!=null?this._bucket=ni.makeFromBucketSpec(s,this._host):this._bucket=RE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,e):this._bucket=RE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if($S(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ms(this,e)}_makeRequest(e,t,o,s,l=!0){if(this._deleted)return new K5(DC());{const u=r3(e,this._appId,o,s,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[o,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,o,s).getPromise()}}const bE="@firebase/storage",xE="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="storage";function F3(n,e,t){return n=Zi(n),D3(n,e,t)}function JC(n){return n=Zi(n),P3(n)}function KC(n,e){return n=Zi(n),L3(n,e)}function B3(n=KS(),e){n=Zi(n);const o=HS(n,YC).getImmediate({identifier:e}),s=kS("storage");return s&&q3(o,...s),o}function q3(n,e,t,o={}){O3(n,e,t,o)}function z3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Wm(t,o,s,e,YS)}function G3(){Kl(new _a(YC,z3,"PUBLIC").setMultipleInstances(!0)),Cr(bE,xE,""),Cr(bE,xE,"esm2017")}G3();const H3={apiKey:"AIzaSyCuaVUrIgq0_pzwpcX-FZVcKxBSokC8l8M",authDomain:"ucapan-fajmuls.firebaseapp.com",projectId:"ucapan-fajmuls",storageBucket:"ucapan-fajmuls.firebasestorage.app",messagingSenderId:"485138495948",appId:"1:485138495948:web:6d7c7e5e7289a5681cc569"};let Kc,Zm,jm,uu=!1;try{ET().length?Kc=ET()[0]:Kc=JS(H3),Zm=f5(Kc),jm=B3(Kc),uu=!0,console.log("Firebase initialized successfully")}catch(n){console.error("Firebase Initialization Failed. Make sure 'firebase' is installed in node_modules.",n)}const up=()=>uu,NE=async(n,e)=>{if(!n)return"";if(n.startsWith("http")&&!n.startsWith("blob:"))return n;try{const o=await(await fetch(n)).blob(),s=KC(jm,e);return await F3(s,o),await JC(s)}catch(t){return console.error("Failed to upload blob:",n,t),n}},$3=async(n,e,t,o,s,l)=>{if(!uu)throw new Error("Firebase not initialized");try{const u=`draft_${Date.now()}`,d="",h=await Promise.all(t.map(async _=>{let E=_.imageUrl,S=_.activeImageUrl;return _.imageUrl&&(E=await NE(_.imageUrl,`drafts/${u}/speakers/${_.id}_idle`)),_.activeImageUrl&&(S=await NE(_.activeImageUrl,`drafts/${u}/speakers/${_.id}_active`)),{..._,imageUrl:E,activeImageUrl:S}})),g={name:n||"Untitled Draft",createdAt:Et.now(),detectionMode:s,manualSpeakerCount:l,speakers:h,analysisResult:o?JSON.parse(JSON.stringify(o)):null,audioStoragePath:d,audioName:e.name,audioMimeType:e.type,speakerCount:t.length};return await N5(vC(Zm,"drafts"),g),!0}catch(u){throw console.error("Error saving to cloud:",u),u}},Y3=async()=>{if(!uu)return[];const n=vC(Zm,"drafts"),e=A5(n,C5("createdAt","desc"));return(await x5(e)).docs.map(o=>({id:o.id,...o.data()}))},J3=async(n,e,t)=>{if(!uu)throw new Error("Firebase not initialized");if(!n)return null;try{const o=KC(jm,n),s=await JC(o),u=await(await fetch(s)).blob();return new File([u],e,{type:t})}catch(o){return console.warn("Could not fetch remote audio, likely not uploaded.",o),null}},K3=({isOpen:n,onClose:e,onSelectDraft:t})=>{const[o,s]=_e.useState([]),[l,u]=_e.useState(!0);_e.useEffect(()=>{n&&d()},[n]);const d=async()=>{u(!0);try{const h=await Y3();s(h)}catch(h){console.error("Failed to load drafts",h)}finally{u(!1)}};return n?w.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:w.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl max-h-[80vh] flex flex-col shadow-2xl animate-in fade-in zoom-in-95 duration-200",children:[w.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-950/50",children:[w.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-3",children:[w.jsx(ff,{className:"text-neon-blue"}),"Cloud Drafts"]}),w.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:w.jsx(fm,{size:24})})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:l?w.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[w.jsx(Yl,{size:32,className:"animate-spin mb-3 text-primary-500"}),w.jsx("p",{children:"Loading your saved sessions..."})]}):o.length===0?w.jsx("div",{className:"text-center py-12 text-gray-500 border-2 border-dashed border-gray-800 rounded-xl",children:w.jsx("p",{children:"No drafts found in the cloud."})}):o.map(h=>w.jsxs("button",{onClick:()=>t(h),className:"w-full text-left bg-gray-800/50 hover:bg-gray-800 border border-gray-700 hover:border-primary-500/50 rounded-xl p-4 transition-all group flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("h4",{className:"text-lg font-bold text-white group-hover:text-primary-400 mb-1",children:h.name}),w.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[w.jsxs("span",{className:"flex items-center gap-1",children:[w.jsx(vD,{size:12}),new Date(h.createdAt.seconds*1e3).toLocaleDateString()]}),w.jsxs("span",{className:"flex items-center gap-1",children:[w.jsx(DD,{size:12}),h.audioName]}),w.jsx("span",{className:"uppercase border border-gray-700 px-1.5 rounded bg-black/20",children:h.detectionMode})]})]}),w.jsxs("div",{className:"flex flex-col items-end gap-2",children:[w.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-gray-300 bg-black/30 px-3 py-1 rounded-full",children:[w.jsx(Rp,{size:14,className:"text-neon-green"}),w.jsxs("span",{children:[h.speakerCount," Speakers"]})]}),w.jsx("span",{className:"text-xs text-primary-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to Load"})]})]},h.id))})]})}):null},Q3=[{id:"default",name:"Indigo",primary:"#6366f1",secondary:"#00f3ff"},{id:"crimson",name:"Crimson",primary:"#e11d48",secondary:"#facc15"},{id:"emerald",name:"Emerald",primary:"#10b981",secondary:"#34d399"},{id:"amber",name:"Amber",primary:"#f59e0b",secondary:"#ff0055"},{id:"cyan",name:"Cyan",primary:"#06b6d4",secondary:"#a855f7"},{id:"fuchsia",name:"Fuchsia",primary:"#d946ef",secondary:"#00f3ff"}],ME=[{id:"#0b0f19",name:"Default Dark"},{id:"#000000",name:"Pitch Black"},{id:"#0f172a",name:"Navy Slate"},{id:"#1e1b4b",name:"Deep Indigo"},{id:"#022c22",name:"Dark Forest"},{id:"#450a0a",name:"Wine Red"},{id:"#280525",name:"Midnight Plum"},{id:"#ffffff",name:"Pure White"},{id:"#f8fafc",name:"Slate White"},{id:"#f0f9ff",name:"Sky White"},{id:"#fdf2f8",name:"Rose White"}],X3=[{id:"none",name:"Solid"},{id:"grid",name:"Grid"},{id:"dots",name:"Dots"},{id:"diagonal",name:"Diagonal"},{id:"checkered",name:"Checkered"},{id:"waves",name:"Waves"},{id:"hexagons",name:"Hexagons"},{id:"triangles",name:"Triangles"},{id:"noise",name:"Noise"}],W3=({isOpen:n,onClose:e,settings:t,onUpdateSettings:o})=>{if(!n)return null;const s=(h,g)=>{o({...t,[h]:g})},l=t.mode==="light",u=l?"#000000":"#ffffff",d=l?"%23000000":"%23ffffff";return w.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:w.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[w.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center bg-gray-950/50",children:[w.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-3",children:[w.jsx(DS,{className:"text-primary-500"}),"Appearance Settings"]}),w.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:w.jsx(fm,{size:24})})]}),w.jsxs("div",{className:"p-6 overflow-y-auto space-y-8",children:[w.jsxs("section",{children:[w.jsxs("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[t.mode==="light"?w.jsx(dT,{size:16}):w.jsx(Ip,{size:16})," Overall Theme"]}),w.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-xl w-fit",children:[w.jsxs("button",{onClick:()=>s("mode","light"),className:`flex items-center gap-2 px-6 py-2 rounded-lg text-sm font-medium transition-all ${t.mode==="light"?"bg-white text-gray-900 shadow-md":"text-gray-400 hover:text-white"}`,children:[w.jsx(dT,{size:16})," Light"]}),w.jsxs("button",{onClick:()=>s("mode","dark"),className:`flex items-center gap-2 px-6 py-2 rounded-lg text-sm font-medium transition-all ${t.mode==="dark"?"bg-gray-700 text-white shadow-md":"text-gray-400 hover:text-white"}`,children:[w.jsx(Ip,{size:16})," Dark"]})]})]}),w.jsxs("section",{children:[w.jsxs("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[w.jsx(KD,{size:16})," Color Accent"]}),w.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Q3.map(h=>w.jsxs("button",{onClick:()=>s("theme",h.id),className:`relative p-3 rounded-xl border-2 transition-all flex items-center gap-3 group ${t.theme===h.id?"border-primary-500 bg-primary-500/10":"border-gray-800 hover:border-gray-600 bg-gray-800/50"}`,children:[w.jsx("div",{className:"w-8 h-8 rounded-full shadow-lg flex-shrink-0",style:{background:`linear-gradient(135deg, ${h.primary}, ${h.secondary})`}}),w.jsx("span",{className:`text-sm font-medium ${t.theme===h.id?"text-white":"text-gray-400 group-hover:text-gray-200"}`,children:h.name}),t.theme===h.id&&w.jsx(wp,{size:16,className:"absolute top-2 right-2 text-primary-500"})]},h.id))})]}),w.jsxs("section",{children:[w.jsx("div",{className:"flex justify-between items-center mb-4",children:w.jsxs("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[w.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-600"})," Background Color"]})}),w.jsxs("div",{className:"flex flex-wrap gap-4",children:[ME.map(h=>w.jsx("button",{onClick:()=>s("bgColor",h.id),className:`w-12 h-12 rounded-full border-2 transition-all shadow-lg relative group ${t.bgColor===h.id?"border-primary-500 scale-110":"border-gray-700 hover:scale-105"}`,style:{backgroundColor:h.id},title:h.name,children:t.bgColor===h.id&&w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsx(wp,{size:16,className:`drop-shadow-md ${["#ffffff","#f8fafc","#f0f9ff","#fdf2f8"].includes(h.id)?"text-black":"text-white"}`})})},h.id)),w.jsxs("label",{className:`w-12 h-12 rounded-full border-2 border-gray-700 hover:border-gray-500 transition-all flex items-center justify-center cursor-pointer relative overflow-hidden group ${ME.find(h=>h.id===t.bgColor)?"":"border-primary-500"}`,children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500 via-green-500 to-blue-500 opacity-50"}),w.jsx(n4,{size:20,className:"text-white relative z-10"}),w.jsx("input",{type:"color",value:t.bgColor,onChange:h=>s("bgColor",h.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]})]}),w.jsxs("section",{children:[w.jsxs("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[w.jsx(xS,{size:16})," Background Pattern"]}),w.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:X3.map(h=>w.jsxs("button",{onClick:()=>s("bgPattern",h.id),className:`h-24 rounded-xl border-2 transition-all relative overflow-hidden group ${t.bgPattern===h.id?"border-primary-500":"border-gray-800 hover:border-gray-600"}`,children:[w.jsx("div",{className:"absolute inset-0 opacity-50 bg-gray-900",style:{backgroundImage:h.id==="dots"?`radial-gradient(circle, ${u} 1px, transparent 1px)`:h.id==="grid"?`linear-gradient(${u} 1px, transparent 1px), linear-gradient(90deg, ${u} 1px, transparent 1px)`:h.id==="diagonal"?`repeating-linear-gradient(45deg, ${u} 0, ${u} 1px, transparent 0, transparent 50%)`:h.id==="checkered"?`linear-gradient(45deg, ${u} 25%, transparent 25%, transparent 75%, ${u} 75%, ${u}), linear-gradient(45deg, ${u} 25%, transparent 25%, transparent 75%, ${u} 75%, ${u})`:h.id==="waves"?`radial-gradient(circle at 100% 50%, transparent 20%, ${u} 21%, ${u} 34%, transparent 35%, transparent), radial-gradient(circle at 0% 50%, transparent 20%, ${u} 21%, ${u} 34%, transparent 35%, transparent)`:h.id==="hexagons"?`url("data:image/svg+xml,%3Csvg width='24' height='40' viewBox='0 0 24 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 40c5.523 0 10-4.477 10-10V10c0-5.523-4.477-10-10-10s-10 4.477-10 10v20c0 5.523 4.477 10 10 10zM24 20c0 5.523-4.477 10-10 10S4 25.523 4 20s4.477-10 10-10 10 4.477 10 10z' fill='${d}' fill-opacity='1' fill-rule='evenodd'/%3E%3C/svg%3E")`:h.id==="triangles"?`linear-gradient(135deg, ${u} 25%, transparent 25%), linear-gradient(225deg, ${u} 25%, transparent 25%), linear-gradient(45deg, ${u} 25%, transparent 25%), linear-gradient(315deg, ${u} 25%, transparent 25%)`:h.id==="noise"?`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='${l?.3:.4}'/%3E%3C/svg%3E")`:"none",backgroundSize:h.id==="waves"||h.id==="checkered"?"20px 20px":h.id==="hexagons"?"24px 40px":h.id==="triangles"?"20px 20px":"10px 10px",backgroundPosition:h.id==="checkered"?"0 0, 10px 10px":"0 0"}}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/10",children:w.jsx("span",{className:`text-sm font-medium ${t.bgPattern===h.id?"text-primary-400":"text-gray-300"}`,children:h.name})})]},h.id))})]})]}),w.jsx("div",{className:"p-6 border-t border-gray-800 bg-gray-950/50 flex justify-end",children:w.jsx("button",{onClick:e,className:"bg-primary-600 hover:bg-primary-500 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Done"})})]})})},Z3=({toast:n,onClose:e})=>(_e.useEffect(()=>{const t=setTimeout(e,4e3);return()=>clearTimeout(t)},[e]),w.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 rounded-xl shadow-2xl border backdrop-blur-md animate-in slide-in-from-top-2 fade-in duration-300 pointer-events-auto ${n.type==="success"?"bg-green-900/90 border-green-500/50 text-green-100":n.type==="error"?"bg-red-900/90 border-red-500/50 text-red-100":"bg-gray-800/90 border-gray-600 text-gray-100"}`,children:[n.type==="success"&&w.jsx(ED,{size:18,className:"text-green-400"}),n.type==="error"&&w.jsx(bS,{size:18,className:"text-red-400"}),n.type==="info"&&w.jsx(ff,{size:18,className:"text-blue-400"}),w.jsx("span",{className:"text-sm font-medium",children:n.message})]})),DE=n=>{const e=n*137.508%360,t=75,o=50,s=e,l=t/100,u=o/100,d=l*Math.min(u,1-u),h=g=>{const _=(g+s/30)%12,E=u-d*Math.max(Math.min(_-3,9-_,1),-1);return Math.round(255*E).toString(16).padStart(2,"0")};return`#${h(0)}${h(8)}${h(4)}`},j3=()=>{const[n,e]=_e.useState("landing"),[t,o]=_e.useState("auto"),[s,l]=_e.useState(null),[u,d]=_e.useState(null),[h,g]=_e.useState([]),[_,E]=_e.useState(2),[S,R]=_e.useState(""),[V,O]=_e.useState(new Set),[x,G]=_e.useState([]),[Z,K]=_e.useState(null),[te,he]=_e.useState(!1),[$,D]=_e.useState(!1),[M,N]=_e.useState(null),[k,L]=_e.useState("idle"),[q,P]=_e.useState(null),[Ie,Xe]=_e.useState(!1),[ee,de]=_e.useState(!1),[ve,ze]=_e.useState(!1),[et,F]=_e.useState(!1),[X,le]=_e.useState({mode:"dark",theme:"default",bgColor:"#0b0f19",bgPattern:"none"}),[fe,Ne]=_e.useState(null),[Ve,ke]=_e.useState([]),He=(ie,ce="info")=>{const pe=Date.now();ke(re=>[...re,{id:pe,message:ie,type:ce}])},yt=ie=>{ke(ce=>ce.filter(pe=>pe.id!==ie))};_e.useEffect(()=>{document.body.style.backgroundColor=X.bgColor;let ie="";const ce=X.mode==="light",pe=ce?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.03)";switch(X.bgPattern){case"dots":ie=`radial-gradient(${pe} 1px, transparent 1px)`;break;case"grid":ie=`linear-gradient(${pe} 1px, transparent 1px), linear-gradient(90deg, ${pe} 1px, transparent 1px)`;break;case"diagonal":ie=`repeating-linear-gradient(45deg, ${pe} 0, ${pe} 1px, transparent 0, transparent 50%)`;break;case"checkered":ie=`linear-gradient(45deg, ${pe} 25%, transparent 25%, transparent 75%, ${pe} 75%, ${pe}), linear-gradient(45deg, ${pe} 25%, transparent 25%, transparent 75%, ${pe} 75%, ${pe})`;break;case"waves":ie=`radial-gradient(circle at 100% 50%, transparent 20%, ${pe} 21%, ${pe} 34%, transparent 35%, transparent), radial-gradient(circle at 0% 50%, transparent 20%, ${pe} 21%, ${pe} 34%, transparent 35%, transparent)`;break;case"hexagons":ie=`url("data:image/svg+xml,%3Csvg width='24' height='40' viewBox='0 0 24 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 40c5.523 0 10-4.477 10-10V10c0-5.523-4.477-10-10-10s-10 4.477-10 10v20c0 5.523 4.477 10 10 10zM24 20c0 5.523-4.477 10-10 10S4 25.523 4 20s4.477-10 10-10 10 4.477 10 10z' fill='${ce?"%23000000":"%23ffffff"}' fill-opacity='${ce?"0.05":"0.03"}' fill-rule='evenodd'/%3E%3C/svg%3E")`;break;case"triangles":ie=`linear-gradient(135deg, ${pe} 25%, transparent 25%), linear-gradient(225deg, ${pe} 25%, transparent 25%), linear-gradient(45deg, ${pe} 25%, transparent 25%), linear-gradient(315deg, ${pe} 25%, transparent 25%)`;break;case"noise":ie=`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='${ce?.2:.05}'/%3E%3C/svg%3E")`;break;default:ie="none"}document.body.style.backgroundImage=ie,document.body.style.backgroundSize=X.bgPattern==="waves"||X.bgPattern==="checkered"||X.bgPattern==="triangles"?"40px 40px":X.bgPattern==="dots"?"20px 20px":X.bgPattern==="hexagons"?"24px 40px":"40px 40px",X.bgPattern==="checkered"?document.body.style.backgroundPosition="0 0, 20px 20px":document.body.style.backgroundPosition="0 0";const re=document.documentElement,Re=wt=>{const Bt=parseInt(wt.slice(1),16),It=Bt>>16&255,ft=Bt>>8&255,Qt=Bt&255;return`${It} ${ft} ${Qt}`};switch(X.theme){case"crimson":re.style.setProperty("--primary-400",Re("#fb7185")),re.style.setProperty("--primary-500",Re("#e11d48")),re.style.setProperty("--primary-600",Re("#be123c")),re.style.setProperty("--neon-blue",Re("#facc15")),re.style.setProperty("--neon-purple",Re("#fb7185"));break;case"emerald":re.style.setProperty("--primary-400",Re("#34d399")),re.style.setProperty("--primary-500",Re("#10b981")),re.style.setProperty("--primary-600",Re("#059669")),re.style.setProperty("--neon-blue",Re("#6ee7b7")),re.style.setProperty("--neon-purple",Re("#a7f3d0"));break;case"amber":re.style.setProperty("--primary-400",Re("#fbbf24")),re.style.setProperty("--primary-500",Re("#f59e0b")),re.style.setProperty("--primary-600",Re("#d97706")),re.style.setProperty("--neon-blue",Re("#ff0055")),re.style.setProperty("--neon-purple",Re("#ffbb00"));break;case"cyan":re.style.setProperty("--primary-400",Re("#22d3ee")),re.style.setProperty("--primary-500",Re("#06b6d4")),re.style.setProperty("--primary-600",Re("#0891b2")),re.style.setProperty("--neon-blue",Re("#a855f7")),re.style.setProperty("--neon-purple",Re("#67e8f9"));break;case"fuchsia":re.style.setProperty("--primary-400",Re("#e879f9")),re.style.setProperty("--primary-500",Re("#d946ef")),re.style.setProperty("--primary-600",Re("#c026d3")),re.style.setProperty("--neon-blue",Re("#00f3ff")),re.style.setProperty("--neon-purple",Re("#f0abfc"));break;default:re.style.setProperty("--primary-400","129 140 248"),re.style.setProperty("--primary-500","99 102 241"),re.style.setProperty("--primary-600","79 70 229"),re.style.setProperty("--neon-blue","0 243 255"),re.style.setProperty("--neon-purple","188 19 254");break}X.mode==="light"?(re.style.setProperty("--c-white","17 24 39"),re.style.setProperty("--c-black","255 255 255"),re.style.setProperty("--c-gray-50","17 24 39"),re.style.setProperty("--c-gray-100","31 41 55"),re.style.setProperty("--c-gray-200","55 65 81"),re.style.setProperty("--c-gray-300","75 85 99"),re.style.setProperty("--c-gray-400","107 114 128"),re.style.setProperty("--c-gray-500","156 163 175"),re.style.setProperty("--c-gray-600","209 213 219"),re.style.setProperty("--c-gray-700","229 231 235"),re.style.setProperty("--c-gray-800","243 244 246"),re.style.setProperty("--c-gray-850","249 250 251"),re.style.setProperty("--c-gray-900","255 255 255"),re.style.setProperty("--c-gray-950","249 250 251")):(re.style.setProperty("--c-white","255 255 255"),re.style.setProperty("--c-black","0 0 0"),re.style.setProperty("--c-gray-50","249 250 251"),re.style.setProperty("--c-gray-100","243 244 246"),re.style.setProperty("--c-gray-200","229 231 235"),re.style.setProperty("--c-gray-300","209 213 219"),re.style.setProperty("--c-gray-400","156 163 175"),re.style.setProperty("--c-gray-500","107 114 128"),re.style.setProperty("--c-gray-600","75 85 99"),re.style.setProperty("--c-gray-700","55 65 81"),re.style.setProperty("--c-gray-800","31 41 55"),re.style.setProperty("--c-gray-850","31 41 55"),re.style.setProperty("--c-gray-900","17 24 39"),re.style.setProperty("--c-gray-950","11 15 25"))},[X]),_e.useEffect(()=>{setTimeout(()=>{up()||He("Firebase not connected. Save to Cloud unavailable.","error")},1e3)},[]);const Dn=ie=>{if(ie.target.files&&ie.target.files[0]){const ce=ie.target.files[0];if(!ce.type.startsWith("audio/")){K("Please upload a valid audio file.");return}l(ce),K(null),h.length>0&&u?(e("visualizer"),Ne(null),He("Session restored successfully!","success")):e("setup")}},Gn=async()=>{if(s)if(t==="manual"){const ie=Array.from({length:_}).map((ce,pe)=>{const Re=["1","2","3","4","5","6","7","8","9"][pe]||"?";return{id:`manual_${pe}`,name:`Speaker ${pe+1}`,imageUrl:null,activeImageUrl:null,color:DE(pe),triggerKey:Re,rotation:0}});g(ie),e("visualizer")}else{e("analyzing");try{const ie=S===""?void 0:Number(S),ce=await sD(s,ie);d(ce);const pe=ce.uniqueSpeakers.map((re,Re)=>({id:re,name:re,imageUrl:null,activeImageUrl:null,color:DE(Re),rotation:0}));g(pe),e("visualizer")}catch(ie){console.error(ie),K("AI Analysis failed. Try Manual Mode or a shorter file."),e("setup")}}};_e.useEffect(()=>{if(n!=="visualizer"||t!=="manual")return;const ie=pe=>{const re=pe.key.toLowerCase();O(Re=>{const wt=new Set(Re);return wt.add(re),wt})},ce=pe=>{const re=pe.key.toLowerCase();O(Re=>{const wt=new Set(Re);return wt.delete(re),wt})};return window.addEventListener("keydown",ie),window.addEventListener("keyup",ce),()=>{window.removeEventListener("keydown",ie),window.removeEventListener("keyup",ce)}},[n,t]),_e.useEffect(()=>{if(t==="manual"){const ie=h.filter(ce=>ce.triggerKey&&V.has(ce.triggerKey.toLowerCase())).map(ce=>ce.id);G(ie)}},[V,h,t]);const Hn=(ie,ce,pe)=>{N(ie),L(pe),P(ce)},Ti=(ie,ce)=>{const pe=h.find(re=>re.id===ie);if(pe){const re=ce==="active"?pe.activeImageUrl:pe.imageUrl;re&&(N(ie),L(ce),P(re))}},mn=ie=>{setTimeout(()=>{window.confirm("Delete both idle and active images for this speaker?")&&(g(ce=>ce.map(pe=>pe.id===ie?{...pe,imageUrl:null,activeImageUrl:null}:pe)),He("Images deleted.","info"))},50)},ii=ie=>{g(ce=>ce.map(pe=>{if(pe.id===ie){const Re=((pe.rotation||0)+90)%360;return{...pe,rotation:Re}}return pe}))},oi=(ie,ce)=>{g(pe=>pe.map(re=>re.id===ie?{...re,triggerKey:ce}:re))},Po=async()=>{if(!s)return;if(!up()){He("Firebase not initialized. Check internet or API keys.","error");return}const ie=prompt("Enter a name for this cloud draft:");if(ie){de(!0),He("Saving session metadata...","info");try{await $3(ie,s,h,u,t,_),He("Successfully saved to Cloud!","success")}catch(ce){console.error(ce);const pe=(ce==null?void 0:ce.message)||"Unknown error";He(`Save failed: ${pe}`,"error")}finally{de(!1)}}},Vo=async ie=>{Xe(!1),ze(!0),K(null),He("Downloading draft...","info");try{const ce=await J3(ie.audioStoragePath,ie.audioName,ie.audioMimeType);ce&&l(ce),g(ie.speakers),d(ie.analysisResult),o(ie.detectionMode),E(ie.manualSpeakerCount),ce?(e("visualizer"),He("Draft loaded successfully!","success")):(e("upload"),Ne(ie.audioName),He("Draft loaded. Please select your audio file to continue.","info"))}catch(ce){console.error("Failed to load draft",ce),K("Failed to download draft data."),He("Failed to load draft.","error"),e("upload")}finally{ze(!1)}},Pi=ie=>{if(M){const ce=URL.createObjectURL(ie);g(pe=>pe.map(re=>re.id===M?k==="active"?{...re,activeImageUrl:ce}:{...re,imageUrl:ce}:re)),He("Image saved!","success")}N(null),P(null)},Ei=async(ie,ce)=>await aD(ie,ce),Pn=async ie=>await lD(ie),me=(ie,ce)=>{g(pe=>pe.map(re=>re.id===ie?{...re,name:ce}:re))},Ae=(ie,ce)=>{g(pe=>pe.map(re=>re.id===ie?{...re,color:ce}:re))},we=()=>{const ie={metadata:{exportedAt:new Date().toISOString(),version:"1.0",mode:t},speakers:h.map(Re=>({id:Re.id,name:Re.name,color:Re.color,triggerKey:Re.triggerKey,rotation:Re.rotation})),segments:(u==null?void 0:u.segments)||[]},ce=new Blob([JSON.stringify(ie,null,2)],{type:"application/json"}),pe=URL.createObjectURL(ce),re=document.createElement("a");re.href=pe,re.download=`fajmuls-voice-${t}-${new Date().getTime()}.json`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(pe),He("Exported JSON.","success")},$e=ie=>{if(t==="manual"||!u)return;const ce=u.segments.filter(re=>ie>=re.start&&ie<=re.end),pe=Array.from(new Set(ce.map(re=>re.speaker)));G(re=>{if(re.length!==pe.length)return pe;const Re=[...re].sort(),wt=[...pe].sort();return Re.every((Bt,It)=>Bt===wt[It])?re:pe})},Me=()=>{l(null),d(null),g([]),G([]),O(new Set),e("landing"),R(""),K(null),he(!1),D(!1),Ne(null)};return w.jsxs("div",{className:"h-screen flex flex-col overflow-hidden relative transition-colors duration-500",children:[w.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-[200] flex flex-col gap-2 pointer-events-none",children:Ve.map(ie=>w.jsx(Z3,{toast:ie,onClose:()=>yt(ie.id)},ie.id))}),w.jsx(W3,{isOpen:et,onClose:()=>F(!1),settings:X,onUpdateSettings:le}),n==="landing"&&w.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black pointer-events-none"}),w.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-primary-900/20 via-transparent to-transparent pointer-events-none"}),w.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center space-y-10 animate-in fade-in zoom-in-95 duration-500",children:[w.jsxs("div",{className:"relative group",children:[w.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary-600 to-neon-purple rounded-full blur opacity-30 group-hover:opacity-60 transition duration-500"}),w.jsx("img",{src:"https://files.catbox.moe/aofskq.png",alt:"Fajmuls Voice Logo",className:"relative w-48 h-48 md:w-64 md:h-64 rounded-3xl shadow-2xl object-cover transform transition-transform duration-500 group-hover:scale-105"})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("h1",{className:"text-5xl md:text-7xl font-extrabold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-white via-gray-200 to-gray-400 drop-shadow-2xl",children:"Fajmuls Voice"}),w.jsx("p",{className:"text-xl text-gray-400 max-w-lg mx-auto leading-relaxed",children:"Advanced AI speaker diarization and real-time visualization tool."})]}),w.jsxs("button",{onClick:()=>e("upload"),className:"group relative inline-flex items-center justify-center px-12 py-4 font-bold text-white transition-all duration-200 bg-primary-600 rounded-full hover:bg-primary-500 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-600 shadow-[0_0_30px_rgba(99,102,241,0.5)] hover:shadow-[0_0_50px_rgba(99,102,241,0.7)]",children:[w.jsx("span",{className:"mr-3 text-lg",children:"Mulai voice"}),w.jsx(AD,{size:24,className:"group-hover:translate-x-1 transition-transform"})]})]}),w.jsx("div",{className:"absolute bottom-8 text-xs text-gray-600 font-mono z-20",children:"v1.0.0  Powered by Gemini AI"})]}),n==="upload"&&w.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative animate-in fade-in slide-in-from-bottom-8 duration-500",children:[w.jsxs("button",{onClick:()=>e("landing"),className:"absolute top-6 left-6 text-gray-400 hover:text-white transition-colors flex items-center gap-2 z-10",children:[w.jsx(bS,{size:20})," ",w.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),w.jsx("div",{className:"absolute top-6 right-6 z-10",children:w.jsx("button",{onClick:()=>F(!0),className:"p-3 rounded-full bg-gray-900 border border-gray-700 hover:border-primary-500 hover:text-primary-400 transition-all text-gray-400",title:"Settings",children:w.jsx(d4,{size:20})})}),w.jsxs("div",{className:"max-w-xl w-full text-center space-y-8",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx("h1",{className:"text-4xl font-bold text-white",children:"Upload Audio"}),w.jsx("p",{className:"text-gray-400",children:"Select an audio file to begin analysis"})]}),ve?w.jsxs("div",{className:"py-20 flex flex-col items-center",children:[w.jsx(Yl,{size:48,className:"text-neon-blue animate-spin mb-4"}),w.jsx("p",{className:"text-white",children:"Downloading metadata from Cloud..."})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"relative group cursor-pointer",children:[w.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary-600 to-neon-blue rounded-2xl blur opacity-25 group-hover:opacity-75 transition duration-1000 group-hover:duration-200"}),w.jsxs("div",{className:`relative p-10 bg-gray-900 ring-1 ring-gray-800 rounded-2xl leading-none flex flex-col items-center justify-center space-y-6 ${fe?"ring-neon-blue ring-2":""}`,children:[w.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-800 flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:w.jsx(ID,{size:40,className:fe?"text-neon-blue animate-bounce":"text-primary-400"})}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("p",{className:"text-xl font-medium text-gray-200",children:fe?"Select Local Audio File":"Select Audio File"}),w.jsx("p",{className:"text-sm text-gray-500",children:fe?`Please select "${fe}" to restore your session`:"MP3, WAV, OGG supported"})]}),w.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"audio/*",onChange:Dn})]})]}),!fe&&w.jsx("div",{className:"flex justify-center gap-4",children:w.jsxs("button",{onClick:()=>{if(!up()){He("Firebase not connected.","error");return}Xe(!0)},className:"flex items-center gap-2 px-6 py-3 rounded-full border border-gray-700 hover:border-neon-blue bg-gray-900 hover:bg-gray-800 text-gray-400 hover:text-white transition-all text-sm font-medium",children:[w.jsx(ff,{size:16}),"Load Cloud Draft"]})})]}),Z&&w.jsx("div",{className:"text-red-400 text-sm mt-4",children:Z})]}),w.jsx(K3,{isOpen:Ie,onClose:()=>Xe(!1),onSelectDraft:Vo})]}),n==="setup"&&w.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 animate-in fade-in zoom-in-95 duration-300",children:w.jsxs("div",{className:"max-w-2xl w-full space-y-8 bg-gray-900/50 p-8 rounded-2xl border border-gray-800 backdrop-blur-xl",children:[w.jsxs("div",{className:"text-center space-y-2",children:[w.jsx("h2",{className:"text-3xl font-bold text-white",children:"Analysis Configuration"}),w.jsxs("p",{className:"text-gray-400",children:['How would you like to process "',s==null?void 0:s.name,'"?']})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("div",{onClick:()=>o("auto"),className:`p-6 rounded-xl border-2 cursor-pointer transition-all relative overflow-hidden ${t==="auto"?"border-primary-500 bg-primary-500/10":"border-gray-700 hover:border-gray-600"}`,children:[w.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[w.jsx(cm,{className:"text-neon-blue",size:24}),w.jsx("h3",{className:"text-xl font-bold text-white",children:"AI Deep Detect"})]}),w.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Uses Gemini 2.0 Thinking model to deeply analyze simultaneous speech. Best for precision."}),t==="auto"&&w.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/50 animate-in fade-in slide-in-from-top-2",children:[w.jsxs("label",{className:"text-sm text-gray-300 block mb-2 flex items-center gap-2",children:[w.jsx(Rp,{size:14}),"How many speakers? ",w.jsx("span",{className:"text-gray-500 text-xs",children:"(Optional)"})]}),w.jsx("input",{type:"number",min:"1",max:"20",placeholder:"Auto-detect if empty",value:S,onChange:ie=>R(ie.target.value===""?"":parseInt(ie.target.value)),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white placeholder-gray-600 focus:outline-none focus:border-primary-500",onClick:ie=>ie.stopPropagation()}),w.jsx("p",{className:"text-xs text-primary-400/80 mt-1",children:"*Specifying exact count greatly improves AI accuracy."})]})]}),w.jsxs("div",{onClick:()=>o("manual"),className:`p-6 rounded-xl border-2 cursor-pointer transition-all relative overflow-hidden ${t==="manual"?"border-neon-purple bg-neon-purple/10":"border-gray-700 hover:border-gray-600"}`,children:[w.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[w.jsx(NS,{className:"text-neon-purple",size:24}),w.jsx("h3",{className:"text-xl font-bold text-white",children:"Manual Control"})]}),w.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Manually control speaker lights using keyboard keys (1, 2, 3...) while listening. Best for live control."}),t==="manual"&&w.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/50 animate-in fade-in slide-in-from-top-2",children:[w.jsxs("label",{className:"text-sm text-gray-300 block mb-2 flex items-center gap-2",children:[w.jsx(Rp,{size:14}),"Number of Speakers:"]}),w.jsx("input",{type:"number",min:"1",max:"9",value:_,onChange:ie=>E(parseInt(ie.target.value)),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-neon-purple",onClick:ie=>ie.stopPropagation()})]})]})]}),w.jsxs("div",{className:"flex justify-between pt-4",children:[w.jsx("button",{onClick:Me,className:"text-gray-500 hover:text-white transition-colors",children:"Cancel"}),w.jsx("button",{onClick:Gn,className:"bg-white text-black px-8 py-3 rounded-full font-bold hover:bg-gray-200 transition-colors flex items-center gap-2",children:t==="auto"?"Start AI Analysis":"Start Manual Session"})]}),Z&&w.jsx("div",{className:"text-red-400 text-center text-sm",children:Z})]})}),n==="analyzing"&&w.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 space-y-8 animate-in fade-in duration-500",children:[w.jsxs("div",{className:"relative w-32 h-32",children:[w.jsx("div",{className:"absolute inset-0 border-4 border-primary-500/30 rounded-full animate-ping"}),w.jsx("div",{className:"absolute inset-0 border-4 border-t-neon-blue border-r-neon-purple border-b-primary-500 border-l-transparent rounded-full animate-spin"}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsx(mD,{size:48,className:"text-white animate-pulse"})})]}),w.jsxs("div",{className:"text-center space-y-4 max-w-lg",children:[w.jsx("h2",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-neon-blue to-neon-purple",children:"Deep AI Researching..."}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("div",{className:"h-1 w-full bg-gray-800 rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full bg-primary-500 w-1/2 animate-[pulse_1s_ease-in-out_infinite]"})}),w.jsx("p",{className:"text-gray-400 text-sm",children:"Analyzing acoustic patterns, separating overlapping voices, and verifying speaker identities."})]})]})]}),n==="visualizer"&&w.jsxs(w.Fragment,{children:[!te&&w.jsxs("header",{className:"px-6 py-4 flex items-center justify-between bg-gray-900/50 backdrop-blur border-b border-gray-800 z-50",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("button",{onClick:()=>{window.confirm("Go back to home? Analysis will be lost unless saved.")&&Me()},className:"hover:opacity-75 transition-opacity",children:w.jsx("img",{src:"https://files.catbox.moe/aofskq.png",alt:"Logo",className:"w-8 h-8 rounded-lg"})}),w.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white",children:["Fajmuls Voice ",w.jsxs("span",{className:"text-xs text-gray-500 font-normal ml-2 border border-gray-800 px-2 py-0.5 rounded uppercase",children:[t," MODE"]})]})]}),w.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[w.jsxs("button",{onClick:Po,disabled:ee,className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-gray-800 transition-colors text-xs font-medium border border-gray-800 text-neon-green border-neon-green/20 hover:bg-neon-green/10 disabled:opacity-50 disabled:cursor-not-allowed",children:[ee?w.jsx(Yl,{size:14,className:"animate-spin"}):w.jsx(ff,{size:14}),ee?"Saving...":"Save to Cloud"]}),w.jsxs("button",{onClick:()=>he(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-gray-800 transition-colors text-xs font-medium border border-gray-800 text-neon-blue border-neon-blue/20 hover:bg-neon-blue/10",children:[w.jsx(MS,{size:14}),"Play Mode"]}),w.jsxs("button",{onClick:we,className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-gray-800 transition-colors text-xs font-medium border border-gray-800",children:[w.jsx(xD,{size:14}),"Export Data"]}),w.jsx("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-gray-800 transition-colors text-xs font-medium border border-gray-800 text-gray-300",title:"Settings",children:w.jsx(m4,{size:14})}),w.jsx("span",{className:"w-px h-4 bg-gray-700"}),w.jsxs("span",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),h.length," Speakers"]})]})]}),w.jsx("main",{className:`flex-1 relative overflow-hidden transition-all duration-500 ${$?"bg-black":""}`,children:w.jsx(D4,{speakers:h,activeSpeakerIds:x,onUpdateImage:Hn,onDeleteImages:mn,onEditExistingImage:Ti,onUpdateName:me,onUpdateColor:Ae,onRotateSpeaker:ii,onUpdateTriggerKey:oi,isManualMode:t==="manual",isPlayMode:te,isCinemaMode:$})}),s&&w.jsx(P4,{file:s,onTimeUpdate:$e,onReset:Me,isPlayMode:te,onTogglePlayMode:()=>{he(!te),te&&D(!1)},isCinemaMode:$,onToggleCinemaMode:()=>D(!$)})]}),M&&q&&w.jsx(V4,{isOpen:!0,imageSource:q,onClose:()=>{N(null),P(null)},onSave:Pi,onAiEdit:Ei,onDetectFaces:Pn})]})},QC=document.getElementById("root");if(!QC)throw new Error("Could not find root element to mount to");const eL=Vw.createRoot(QC);eL.render(w.jsx(Iw.StrictMode,{children:w.jsx(j3,{})}));
